!function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).FSActions=e()}(function(){return function n(r,i,a){function l(t,e){if(!i[t]){if(!r[t]){var o="function"==typeof require&&require;if(!e&&o)return o(t,!0);if(s)return s(t,!0);throw(e=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",e}o=i[t]={exports:{}},r[t][0].call(o.exports,function(e){return l(r[t][1][e]||e)},o,o.exports,n,r,i,a)}return i[t].exports}for(var s="function"==typeof require&&require,e=0;e<a.length;e++)l(a[e]);return l}({1:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(n){return function(){var e,t=i.getUrlFromBase(),o=n.repositoryId||(n.user?n.user.activeRepository:null);n.user&&(e=n.user.repositories.get(o).getSlug())&&(o="ws-"+e),e=a.trimRight(t,"/")+"/"+o+n.getUserSelection().getUniqueNode().getPath(),n.UI.openComponentInModal("PydioReactUI","PromptDialog",{dialogTitleId:369,fieldLabelId:296,defaultValue:e,submitValue:r.Empty})}};var r=e("pydio/util/func"),i=e("pydio/util/dom"),a=e("pydio/util/lang");t.exports=o.default},{"pydio/util/dom":"pydio/util/dom","pydio/util/func":"pydio/util/func","pydio/util/lang":"pydio/util/lang"}],2:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(l){return function(e,t,o,n){var r=l.user.getActiveRepositoryObject().getSlug(),i=r,a=(n&&(n=l.user.getRepositoriesList().get(n))&&(i=n.getSlug()),t.getSelectedNodes()),n={nodes:a.map(function(e){return r+e.getPath()}),target:i+o,targetParent:!0};s.getRestClient().userJob(e,n).then(function(o){"move"===e?a.forEach(function(e){var t=l.MessageHash["background.move."+(e.isLeaf()?"file":"folder")];e.getMetadata().set("pending_operation",t),e.getMetadata().set("pending_operation_uuid",o.JobUuid),e.notify("meta_replaced",e)}):l.UI.displayMessage("SUCCESS",l.MessageHash["background.copy.selection"]),l.getContextHolder().setSelectedNodes([])}).catch(function(e){e=e.Detail||e.message||e;l.UI.displayMessage("ERROR",e)})}};var s=e("pydio/http/api");t.exports=o.default},{"pydio/http/api":"pydio/http/api"}],3:[function(r,e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(n){var e=n.MessageHash;return function(){var o=n.getUserSelection();n.UI.openComponentInModal("FSActions","TreeDialog",{isMove:!1,dialogTitle:e[159],submitValue:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;r("./applyCopyOrMove")(n)("copy",o,e,t)}})}},e.exports=t.default},{"./applyCopyOrMove":2}],4:[function(e,t,o){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(i){var n=i.MessageHash;return function(){var e,t=n[176],o=i.getPluginConfigs("access.gateway").get("DELETE_ALLOW_PERMANENT");"true"===i.getContextHolder().getRootNode().getMetadata().get("ws_skip_recycle")||0===i.getContextHolder().getContextNode().getPath().indexOf("/recycle_bin")?t=n[177]:o&&(e={removePermanently:function(e){return a.default.createElement(f,{onChange:e,messages:n})}}),i.UI.openComponentInModal("PydioReactUI","ConfirmDialog",{message:t,dialogTitleId:7,moreComponents:e,validCallback:function(e){var o=i.getContextHolder().getSelectedNodes(),n=i.user.getActiveRepositoryObject().getSlug(),t=new s.RestDeleteNodesRequest,r=new s.TreeServiceApi(l.default.getRestClient());t.Nodes=o.map(function(e){var t=new s.TreeNode;return t.Path=n+e.getPath(),t}),e&&e.removePermanently&&(t.RemovePermanently=!0),r.deleteNodes(t).then(function(t){t.DeleteJobs&&t.DeleteJobs.length&&o.forEach(function(e){e.getMetadata().set("pending_operation",t.DeleteJobs[0].Label),e.getMetadata().set("pending_operation_uuid",t.DeleteJobs[0].Uuid),e.notify("meta_replaced",e)}),i.getContextHolder().setSelectedNodes([])}).catch(function(e){i.UI.displayMessage("ERROR",e.Title||e.message)})}})}};var a=n(e("react")),l=n(e("pydio/http/api")),i=e("material-ui"),s=e("cells-sdk");function n(e){return e&&e.__esModule?e:{default:e}}function u(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!==r(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0===o)return("string"===t?String:Number)(e);o=o.call(e,t||"default");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===r(e)?e:String(e)}(n.key),n)}}function c(e,t){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function d(o){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=p(o),t=(e=n?(e=p(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e);var o,n=d(r);function r(e){if(this instanceof r)return(e=n.call(this,e)).state={},e;throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"render",value:function(){var o=this,e=this.props,n=e.onChange,e=e.messages,t=this.state.checked,r=": "+e["action.delete.permanently.warning"];return a.default.createElement("div",{style:{marginTop:16}},a.default.createElement(i.Checkbox,{onCheck:function(e,t){o.setState({checked:t}),n("removePermanently",t)},label:e["action.delete.permanently"]+(t?r:""),labelPosition:"right",labelStyle:t?{color:"#f44336"}:{color:"inherit"}}))}}])&&u(t.prototype,e),o&&u(t,o),Object.defineProperty(t,"prototype",{writable:!1}),r}(a.default.Component);t.exports=o.default},{"cells-sdk":"cells-sdk","material-ui":"material-ui","pydio/http/api":"pydio/http/api",react:"react"}],5:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(t){return function(){var e=t.getUserSelection();n.getClient().downloadSelection(e)}};var n=e("pydio/http/api");t.exports=o.default},{"pydio/http/api":"pydio/http/api"}],6:[function(o,e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(t){return function(){var e=t.getContextHolder();e.setSelectedNodes([e.getRootNode()]),o("./download")(t)()}},e.exports=t.default},{"./download":5}],7:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(a){return function(){var e=a.getUserSelection().getUniqueNode(),t=l.default.getClient(),o=s.default.getBasename(e.getPath()).replace(e.getAjxpMime(),"pdf"),n=navigator.userAgent||"",r=-1!==n.indexOf("iPhone")||-1!==n.indexOf("iPod")||-1!==n.indexOf("iPad")||-1!==n.indexOf("iOs"),i=a.UI&&a.UI.hasHiddenDownloadForm();t.buildPresignedGetUrl(e,null,"",{Bucket:"io",Key:"pydio-thumbstore/"+e.getMetadata().get("PDFPreview"),Expires:600},o).then(function(e){r||!i?document.location.href=e:a.UI.sendDownloadToHiddenForm(a.getUserSelection(),{presignedUrl:e})})}};var l=n(e("pydio/http/api")),s=n(e("pydio/util/path"));function n(e){return e&&e.__esModule?e:{default:e}}t.exports=o.default},{"pydio/http/api":"pydio/http/api","pydio/util/path":"pydio/util/path"}],8:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(r){var e=r.MessageHash;return function(){r.UI.openComponentInModal("PydioReactUI","ConfirmDialog",{message:e[177],dialogTitleId:220,validCallback:function(){var e=r.user.getActiveRepositoryObject().getSlug(),t=new a.RestDeleteNodesRequest,o=new a.TreeServiceApi(i.default.getRestClient()),n=new a.TreeNode;n.Path=e+"/recycle_bin",t.Nodes=[n],o.deleteNodes(t).then(function(e){e.DeleteJobs&&e.DeleteJobs.forEach(function(e){r.UI.displayMessage("SUCCESS",e.Label)}),r.getContextHolder().requireContextChange(r.getContextHolder().getRootNode())}).catch(function(e){r.UI.displayMessage("ERROR",e.Title||e.message)})}})}};var n,i=(n=e("pydio/http/api"))&&n.__esModule?n:{default:n},a=e("cells-sdk");t.exports=o.default},{"cells-sdk":"cells-sdk","pydio/http/api":"pydio/http/api"}],9:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(t){return function(){var e=t.getContextHolder().getUniqueNode();t.goTo(e)}},t.exports=o.default},{}],10:[function(o,n,r){!function(t){!function(){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var e=t.pydio,e={ls:o("./ls")(e),mkdir:o("./mkdir")(e),deleteAction:o("./deleteAction")(e),rename:o("./rename").renameFunction,renameCallback:o("./rename").callback,applyCopyOrMove:o("./applyCopyOrMove")(e),copy:o("./copy")(e),move:o("./move")(e),upload:o("./upload")(e),download:o("./download")(e),downloadPDF:o("./downloadPDF")(e),downloadAll:o("./downloadAll")(e),emptyRecycle:o("./emptyRecycle")(e),restore:o("./restore")(e),openInEditor:o("./openInEditor")(e),ajxpLink:o("./ajxpLink")(e),openOtherEditorPicker:o("./openOtherEditorPicker")(e),lock:o("./lock")(e),goTo:o("./goto")(e)};r.default=e,n.exports=r.default}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./ajxpLink":1,"./applyCopyOrMove":2,"./copy":3,"./deleteAction":4,"./download":5,"./downloadAll":6,"./downloadPDF":7,"./emptyRecycle":8,"./goto":9,"./lock":11,"./ls":12,"./mkdir":13,"./move":14,"./openInEditor":15,"./openOtherEditorPicker":16,"./rename":17,"./restore":18,"./upload":19}],11:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(i){return function(){var e=new l.UserMetaServiceApi(a.default.getRestClient()),t=new l.IdmUpdateUserMetaRequest,o=i.getContextHolder().getUniqueNode(),n=new l.IdmUserMeta,r=(n.NodeUuid=o.getMetadata().get("uuid"),n.Namespace="content_lock",n.JsonValue=i.user.id,o.getMetadata().get("sl_locked"));t.Operation=r?"DELETE":"PUT",t.MetaDatas=[n],e.updateUserMeta(t).then(function(e){i.getContextHolder().requireNodeReload(o)})}};var n,a=(n=e("pydio/http/api"))&&n.__esModule?n:{default:n},l=e("cells-sdk");t.exports=o.default},{"cells-sdk":"cells-sdk","pydio/http/api":"pydio/http/api"}],12:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(e){return function(){e.goTo(e.getUserSelection().getUniqueNode())}},t.exports=o.default},{}],13:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(r){return function(){r.UI.openComponentInModal("PydioReactUI","PromptDialog",{dialogTitleId:154,legendId:155,fieldLabelId:173,dialogSize:"sm",submitValue:function(e){if(-1!==e.indexOf("/"))throw t=r.MessageHash["filename.forbidden.slash"],r.UI.displayMessage("ERROR",t),new Error(t);var t=new l.TreeServiceApi(i.default.getRestClient()),o=new l.RestCreateNodesRequest,e=r.user.getActiveRepositoryObject().getSlug()+a.default.trimRight(r.getContextNode().getPath(),"/")+"/"+e,n=new l.TreeNode;n.Path=e,n.Type=l.TreeNodeType.constructFromObject("COLLECTION"),o.Nodes=[n],t.createNodes(o).then(function(e){console&&console.debug("Created nodes",e.Children)})}})}};var i=n(e("pydio/http/api")),a=n(e("pydio/util/lang")),l=e("cells-sdk");function n(e){return e&&e.__esModule?e:{default:e}}t.exports=o.default},{"cells-sdk":"cells-sdk","pydio/http/api":"pydio/http/api","pydio/util/lang":"pydio/util/lang"}],14:[function(c,e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(l){function s(e,t){var o=t.getMetadata().has("repository_id");if(t.getMetadata().has("local:dropFunc"))t.getMetadata().has("local:canDropFunc")&&t.getMetadata().get("local:canDropFunc")(e,t);else{if(t.isLeaf()||t.getPath()===e.getPath()||!o&&r.default.trimRight(t.getPath(),"/")===n.default.getDirname(e.getPath()))throw new Error("Cannot drop on leaf or on same path");if(t.getMetadata().has("virtual_root"))throw new Error("Cannot drop on virtual root");if(e.getMetadata().has("ws_root"))throw new Error("Cannot move roots around");if("true"===t.getMetadata().get("node_readonly")||t.getMetadata().has("workspaceEntry")&&!t.getMetadata().get("workspaceEntry").allowCrossRepositoryCopy)throw new Error("Cannot drop on this branch (readonly)")}}var u=l.MessageHash;return function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;if((t=t&&t instanceof Array&&t.length&&t[0]instanceof d?t[0]:t)&&t instanceof d){if(t.getStep()===d.STEP_CAN_DROP)return n=t.getTarget(),o=t.getSource(),s(o,n),!1;if(t.getStep()===d.STEP_END_DRAG){try{s(t.getSource(),t.getTarget())}catch(e){return}var o=e.getDataModel(),n=t.getTarget().getPath(),e=null;if(t.getTarget().getMetadata().has("repository_id")){var e=t.getTarget().getMetadata().get("repository_id"),r=t.getTarget().getMetadata().get("workspaceEntry");if(r&&"cell"===r.getRepositoryType())return void l.UI.openComponentInModal("FSActions","CrossWsDropDialog",{target:t.getTarget(),source:t.getSource(),dropEffect:t.getDropEffect()||"move",cellWs:r})}else if(t.getTarget().getMetadata().has("local:dropFunc"))return void t.getTarget().getMetadata().get("local:dropFunc")("dnd",t.getSource(),t.getTarget());var r=c("./applyCopyOrMove")(l),i=t.getSource();-1===o.getSelectedNodes().indexOf(i)?((i=new PydioDataModel).setContextNode(o.getContextNode()),i.setSelectedNodes([t.getSource()]),r(t.getDropEffect()||"move",i,n,e)):r(t.getDropEffect()||"move",o,n,e)}}else{var a=l.getUserSelection();l.UI.openComponentInModal("FSActions","TreeDialog",{isMove:!0,dialogTitle:u[160],submitValue:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;c("./applyCopyOrMove")(l)("move",a,e,t)}})}}};var n=o(c("pydio/util/path")),r=o(c("pydio/util/lang"));function o(e){return e&&e.__esModule?e:{default:e}}var d=c("pydio").requireLib("components").DNDActionParameter;e.exports=t.default},{"./applyCopyOrMove":2,pydio:"pydio","pydio/util/lang":"pydio/util/lang","pydio/util/path":"pydio/util/path"}],15:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(o){return function(e,t){t=t&&t.length?t[0]:null;o.UI.openCurrentSelectionInEditor(t)}},t.exports=o.default},{}],16:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(e){return function(){e.UI.openComponentInModal("FSActions","OtherEditorPickerDialog",{selection:e.getUserSelection(),pydio:e})}},t.exports=o.default},{}],17:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.callback=void 0,o.default=function(i){return function(){function t(o,n){if(o=o||i.getUserSelection().getUniqueNode(),-1!==n.indexOf("/"))throw new Error(i.MessageHash["filename.forbidden.slash"]);var e={nodes:[e=i.user.getActiveRepositoryObject().getSlug()+o.getPath()],target:l.default.getDirname(e)+"/"+n,targetParent:!1};a.default.getRestClient().userJob("move",e).then(function(e){var t=i.MessageHash["rename.processing"].replace("%1",o.getLabel()).replace("%2",n);i.UI.displayMessage("SUCCESS",t),r.getMetadata().set("pending_operation",t),r.getMetadata().set("pending_operation_uuid",e.JobUuid),r.notify("meta_replaced",r),i.getContextHolder().setSelectedNodes([])}).catch(function(e){e=e.Detail||e.message||e;i.UI.displayMessage("ERROR",e)})}var e,r=i.getUserSelection().getSelectedNodes()[0];!r||(e=r.notify("node_action",{type:"prompt-rename",callback:function(e){t(r,e)}}))&&!0===e[0]||!r.getParent()||r.getParent().notify("child_node_action",{type:"prompt-rename",child:r,callback:function(e){t(r,e)}})}},o.renameFunction=void 0;var i=n(e("pydio")),a=n(e("pydio/http/api")),l=n(e("pydio/util/path"));function n(e){return e&&e.__esModule?e:{default:e}}function r(o,n){var r=i.default.getInstance();if(o=o||r.getUserSelection().getUniqueNode(),-1!==n.indexOf("/"))throw new Error(r.MessageHash["filename.forbidden.slash"]);var e={nodes:[e=r.user.getActiveRepositoryObject().getSlug()+o.getPath()],target:l.default.getDirname(e)+"/"+n,targetParent:!1};a.default.getRestClient().userJob("move",e).then(function(e){var t=r.MessageHash["rename.processing"].replace("%1",o.getLabel()).replace("%2",n);r.UI.displayMessage("SUCCESS",t),o.getMetadata().set("pending_operation",t),o.getMetadata().set("pending_operation_uuid",e.JobUuid),o.notify("meta_replaced",o),r.getContextHolder().setSelectedNodes([])}).catch(function(e){e=e.Detail||e.message||e;r.UI.displayMessage("ERROR",e)})}o.callback=r;o.renameFunction=function(){var e,t=i.default.getInstance().getUserSelection().getSelectedNodes()[0];!t||(e=t.notify("node_action",{type:"prompt-rename",callback:function(e){r(t,e)}}))&&!0===e[0]||!t.getParent()||t.getParent().notify("child_node_action",{type:"prompt-rename",child:t,callback:function(e){r(t,e)}})}},{pydio:"pydio","pydio/http/api":"pydio/http/api","pydio/util/path":"pydio/util/path"}],18:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(r){return function(){var t=r.getContextHolder().getSelectedNodes(),o=r.user.getActiveRepositoryObject().getSlug(),e=new a.RestRestoreNodesRequest,n=new a.TreeServiceApi(i.default.getRestClient());e.Nodes=t.map(function(e){var t=new a.TreeNode;return t.Path=o+e.getPath(),t}),n.restoreNodes(e).then(function(e){e.RestoreJobs&&e.RestoreJobs.length&&t.forEach(function(t){e.RestoreJobs.forEach(function(e){e.NodeUuid===t.getMetadata().get("uuid")&&(t.getMetadata().set("pending_operation",e.Label),t.getMetadata().set("pending_operation_uuid",e.Uuid),t.notify("meta_replaced",t))})}),r.getContextHolder().setSelectedNodes([])})}};var n,i=(n=e("pydio/http/api"))&&n.__esModule?n:{default:n},a=e("cells-sdk");t.exports=o.default},{"cells-sdk":"cells-sdk","pydio/http/api":"pydio/http/api"}],19:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(n){return function(e,t){var o={};t&&t.length&&(o={uploaderProps:t[0]}),n.UI.openComponentInModal("FSActions","UploadDialog",o)}},t.exports=o.default},{}],20:[function(l,e,t){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=d(l("create-react-class")),i=d(l("pydio/model/meta-node-provider")),a=d(l("pydio/http/api")),s=l("cells-sdk"),u=d(l("pydio/model/cell")),n=l("material-ui/styles"),c=d(l("prop-types"));function d(e){return e&&e.__esModule?e:{default:e}}function p(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!==r(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0===o)return("string"===t?String:Number)(e);o=o.call(e,t||"default");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===r(e)?e:String(e)}(n.key),n)}}function f(e,t){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function g(o){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=y(o),t=(e=n?(e=y(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=l("react"),m=l("material-ui"),v=m.FontIcon,b=m.ListItem,w=m.List,_=m.FlatButton,x=m.Subheader,C=l("pydio"),P=l("pydio/model/data-model"),m=C.requireLib("boot").ActionDialogMixin,E=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f(t,e);var o,n=g(r);function r(e){if(this instanceof r)return(e=n.call(this,e)).state={roots:[]},e;throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"componentDidMount",value:function(){var n=this,e=this.props.cellWs,t=new s.MetaServiceApi(a.default.getRestClient()),o=new s.RestGetBulkMetaRequest,r=e.getSlug();console.log(r),o.NodePaths=[r,r+"/*"],t.getBulkMeta(o).then(function(e){var e=e.Nodes||[],t=null,o=[];e.forEach(function(e){e.Path===r+"/"?t=i.default.parseTreeNode(e,r):(e=i.default.parseTreeNode(e,r)).isLeaf()||o.push(e)}),t.getMetadata().has("virtual_root")?(console.log(o),n.setState({roots:o})):(console.log(t),n.setState({roots:[t]}))})}},{key:"move",value:function(e){var t,o=this.props,n=o.source,r=o.cellWs,i=o.pydio,o=o.dropEffect,a=l("../callback/applyCopyOrMove")(C.getInstance()),i=i.getContextHolder();-1===i.getSelectedNodes().indexOf(n)?((t=new P).setContextNode(i.getContextNode()),t.setSelectedNodes([n]),a(o,t,e.getPath(),r.getId())):a(o,i,e.getPath(),r.getId()),this.props.onDismiss()}},{key:"share",value:function(){var e=this,t=this.props,o=t.source,n=t.cellWs,r=t.pydio,i=new u.default;i.load(n.getId()).then(function(){i.addRootNode(o),i.save().then(function(){e.props.onDismiss(),r.triggerRepositoryChange(n.getId())})})}},{key:"render",value:function(){function o(e){return a.MessageHash["openother.drop.cell."+e]||e}var n=this,e=this.props,t=e.source,r=e.cellWs,i=e.dropEffect,a=e.pydio,l=e.muiTheme,e=this.state.roots,s=[],u=(s.push(h.createElement(b,{onClick:function(){n.share()},primaryText:t.isLeaf()?o("file.share"):o("folder.share"),secondaryText:o("share.legend").replace("%s",r.getLabel()),leftIcon:h.createElement(v,{style:{color:l.palette.primary1Color},className:"mdi mdi-share-variant"})})),t.isLeaf()?"file":"folder"),c=o(u+"."+i);return e.forEach(function(e){var t=o("copymove.legend").replace("%s",r.getLabel());"/"!==e.getPath()&&""!==e.getPath()&&(t+="/"+e.getLabel()),s.push(h.createElement(b,{onClick:function(){n.move(e)},primaryText:c,secondaryText:t,leftIcon:h.createElement(v,{style:{color:l.palette.primary1Color},className:"mdi mdi-folder-"+("copy"===i?"plus":"move")})}))}),h.createElement(w,{style:{maxHeight:320,overflowY:"scroll",width:"100%",borderTop:"1px solid #e0e0e0"}},h.createElement(x,{style:{overflow:"hidden",whiteSpace:"nowrap",paddingRight:16,textOverflow:"ellipsis"}},o("picker").replace("%s",t.getLabel())),s)}}])&&p(t.prototype,e),o&&p(t,o),Object.defineProperty(t,"prototype",{writable:!1}),r}(h.Component),E=(0,n.muiThemeable)()(E),n=(0,o.default)({displayName:"CrossWsDropDialog",propTypes:{pydio:c.default.instanceOf(C),selection:c.default.instanceOf(P)},mixins:[m],getButtons:function(e){var t=[],o=this.props.pydio.MessageHash;return t.push(h.createElement(_,{label:o[49],primary:!0,keyboardFocused:!0,onClick:this.props.onDismiss})),t},getDefaultProps:function(){return{dialogIsModal:!1,dialogSize:"sm",dialogPadding:0}},render:function(){return h.createElement(E,this.props)}});t.default=n,e.exports=t.default},{"../callback/applyCopyOrMove":2,"cells-sdk":"cells-sdk","create-react-class":"create-react-class","material-ui":"material-ui","material-ui/styles":"material-ui/styles","prop-types":"prop-types",pydio:"pydio","pydio/http/api":"pydio/http/api","pydio/model/cell":"pydio/model/cell","pydio/model/data-model":"pydio/model/data-model","pydio/model/meta-node-provider":"pydio/model/meta-node-provider",react:"react"}],21:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var l=i(e("../callback/openInEditor")),n=i(e("create-react-class")),r=i(e("prop-types"));function i(e){return e&&e.__esModule?e:{default:e}}var a=e("react"),s=e("material-ui"),u=s.FontIcon,c=s.ListItem,d=s.List,p=s.FlatButton,s=e("pydio"),f=e("pydio/model/data-model"),g=e("pydio/util/lang"),e=s.requireLib("boot").ActionDialogMixin,n=(0,n.default)({displayName:"OtherEditorPickerDialog",propTypes:{pydio:r.default.instanceOf(s),selection:r.default.instanceOf(f)},mixins:[e],getButtons:function(e){var t=[],o=this.props.pydio.MessageHash;return t.push(a.createElement(p,{key:"clear",label:MessageHash["openother.5"],primary:!1,onClick:this.clearAssociations})),t.push(a.createElement(p,{label:o[49],primary:!0,keyboardFocused:!0,onClick:this.props.onDismiss})),t},getDefaultProps:function(){return{dialogTitleId:"openother.2",dialogIsModal:!1,dialogSize:"sm",dialogPadding:0}},findActiveEditors:function(e){var t=[],o=!1,n=this.props.pydio;return null==this.user||this.user.canWrite()||(o=!0),n.Registry.getActiveExtensionByType("editor").forEach(function(e){o&&e.write||e.openable&&t.push(e)}),t},clearAssociations:function(){var e,t,o,n,r=this.props.selection.getUniqueNode().getAjxpMime();try{t=(e=this.props.pydio.user.getPreference("gui_preferences",!0)).other_editor_extensions}catch(e){}t&&t[r]&&(o=t[r],this.props.pydio.Registry.getActiveExtensionByType("editor").forEach(function(e){e.editorClass===o&&(n=e)}),n&&-1!==n.mimes.indexOf(r)&&(n.mimes=g.arrayWithout(n.mimes,n.mimes.indexOf(r))),delete t[r],e.other_editor_extensions=t,this.props.pydio.user.setPreference("gui_preferences",e,!0),this.props.pydio.user.savePreference("gui_preferences")),this.props.onDismiss()},selectEditor:function(e,t){var o,n,r=this.props,i=r.pydio,r=r.selection.getUniqueNode().getAjxpMime(),a=(e.mimes.push(r),i.user);a&&((n=(o=a.getPreference("gui_preferences",!0)||{}).other_editor_extensions||{})[r]=e.editorClass,o.other_editor_extensions=n,a.setPreference("gui_preferences",o,!0),a.savePreference("gui_preferences"),(0,l.default)(i)(null,[e]),this.dismiss())},render:function(){var o=this,e=this.findActiveEditors("*").map(function(e){var t=a.createElement(u,{className:e.icon_class});return a.createElement(c,{onClick:o.selectEditor.bind(o,e),primaryText:e.text,secondaryText:e.title,leftIcon:t})});return a.createElement(d,{style:{maxHeight:320,overflowY:"scroll",width:"100%",borderTop:"1px solid #e0e0e0"}},e)}});o.default=n,t.exports=o.default},{"../callback/openInEditor":15,"create-react-class":"create-react-class","material-ui":"material-ui","prop-types":"prop-types",pydio:"pydio","pydio/model/data-model":"pydio/model/data-model","pydio/util/lang":"pydio/util/lang",react:"react"}],22:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var s=a(e("react")),n=a(e("pydio")),r=a(e("prop-types")),i=a(e("create-react-class")),u=a(e("pydio/util/lang")),c=e("cells-sdk"),d=a(e("pydio/model/data-model")),p=e("material-ui");function a(e){return e&&e.__esModule?e:{default:e}}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var n,r,i,a,l=[],s=!0,u=!1;try{if(i=(o=o.call(e)).next,0===t){if(Object(o)!==o)return;s=!1}else for(;!(s=(n=i.call(o)).done)&&(l.push(n.value),l.length!==t);s=!0);}catch(e){u=!0,r=e}finally{try{if(!s&&null!=o.return&&(a=o.return(),Object(a)!==a))return}finally{if(u)throw r}}return l}}(e,t)||g(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e){return function(e){if(Array.isArray(e))return y(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||g(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){var o;if(e)return"string"==typeof e?y(e,t):"Map"===(o="Object"===(o=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:o)||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?y(e,t):void 0}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=new Array(t);o<t;o++)n[o]=e[o];return n}var e=n.default.requireLib("hoc"),h=e.ModernTextField,m=e.ModernSelectField,v=n.default.requireLib("components").FoldersTree,b=(0,i.default)({displayName:"TreeDialog",propTypes:{isMove:r.default.bool.isRequired,submitValue:r.default.func.isRequired},mixins:[PydioReactUI.ActionDialogMixin,PydioReactUI.CancelButtonProviderMixin,PydioReactUI.SubmitButtonProviderMixin],getDefaultProps:function(){return{dialogTitle:"Copy/Move",dialogIsModal:!0,dialogScrollBody:!0}},submit:function(){var e=this.props,t=e.pydio,e=e.submitValue,o=this.state,n=o.dataModel,o=o.wsId,n=n.getContextNode().getPath(),r=(e(n,"__CURRENT__"===o?null:o),("__CURRENT__"===o?t.user.activeRepository:o)+":"+n);b.RecentPlaces=b.RecentPlaces.filter(function(e){return e!==r}),b.RecentPlaces.unshift(r),b.RecentPlaces=b.RecentPlaces.slice(0,5),this.dismiss()},getInitialState:function(){var e=this.getCurrentDataModel();return{dataModel:e,wsId:e.getRootNode().getMetadata().get("repository_id")||"__CURRENT__"}},handleRepositoryChange:function(e,t,o){var n=this,r=this.getCurrentDataModel(o),i=r.getRootNode();i.observeOnce("loaded",function(){n.forceUpdate()}),i.load(),this.setState({dataModel:r,wsId:o})},getCurrentDataModel:function(){var e,t,o=this,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,r=this.props.pydio,i=r.user,a=i.getRepositoriesList().get(i.activeRepository).getLabel(),l=(null!==n&&"__CURRENT__"!==n?(e=n,a=i.getCrossRepositories().get(n).getLabel()):null===n&&(!i.canWrite()&&i.canCrossRepositoryCopy()&&i.hasCrossRepositories()&&(e=i.getCrossRepositories().keys().next().value,a=i.getCrossRepositories().get(e).getLabel()),r.getContextHolder().getContextNode().isRoot()||(t=r.getContextHolder().getContextNode().getPath())),d.default.RemoteDataModelFactory(e?{tmp_repository_id:e}:{},a)),s=l.getRootNode();return e&&s.getMetadata().set("repository_id",e),t?(r.getContextHolder().getRootNode().getChildren().forEach(function(e){s.addChild(e)}),l.loadPathInfoAsync(t,function(e){l.requireContextChange(e)}.bind(this))):(s.observeOnce("loaded",function(){o.forceUpdate()}),s.load(l.getAjxpNodeProvider())),l.observe("context_changed",function(){o.forceUpdate()}),l},onNodeSelected:function(e){var t=this.state.dataModel;t.setContextNode(e),e.load(t.getAjxpNodeProvider())},createNewFolder:function(){var t=this,e=this.props.pydio,o=this.state,n=o.dataModel,r=o.newFolderInput,i=n.getContextNode(),o=e.user.getActiveRepositoryObject().getSlug(),e=("__CURRENT__"!==this.state.wsId&&(o=e.user.getRepositoriesList().get(this.state.wsId).getSlug()),new c.TreeServiceApi(PydioApi.getRestClient())),a=new c.RestCreateNodesRequest,o=o+u.default.trimRight(i.getPath(),"/")+"/"+r,l=new c.TreeNode;l.Path=o,l.Type=c.TreeNodeType.constructFromObject("COLLECTION"),a.Nodes=[l],e.createNodes(a).then(function(e){i.observeOnce("loaded",function(){var e=("/"===i.getPath()?"":i.getPath())+"/"+r,e=i.getChildren().get(e);e&&n.setContextNode(e)}),setTimeout(function(){return i.reload(n.getAjxpNodeProvider())},1e3),t.setState({newFolderFormOpen:!1,newFolderInput:""})})},toggleNewFolderForm:function(){var e=this,t=!this.state.newFolderFormOpen;this.setState({newFolderFormOpen:t},function(){t&&e.refs.newfolder_input.focus()})},buildWsSelector:function(){var e,o,t,n=this.props.pydio,r=n.user,i=this.state.wsId,a=s.default.createElement("div",{style:{height:30}});return r&&r.canCrossRepositoryCopy()&&r.hasCrossRepositories()&&(e=[],o=[],r.canWrite()&&(t=r.getActiveRepositoryObject(),e.push(s.default.createElement(p.MenuItem,{key:"current",value:"__CURRENT__",primaryText:t.getLabel()+" - "+n.MessageHash[372],leftIcon:s.default.createElement(p.FontIcon,{style:{fontSize:20,height:20,top:t.getOwner()?5:1},className:t.getOwner()?"icomoon-cells":"mdi mdi-folder"})})),e.push(s.default.createElement(p.Divider,null))),r.getCrossRepositories().forEach(function(e,t){o.push({label:e.getLabel(),owner:!!e.getOwner(),item:s.default.createElement(p.MenuItem,{key:t,value:t,primaryText:e.getLabel(),leftIcon:s.default.createElement(p.FontIcon,{style:{fontSize:20,height:20,top:e.getOwner()?5:1},className:e.getOwner()?"icomoon-cells":"mdi mdi-folder"})})})}),o.sort(function(e,t){return e.owner===t.owner?e.label.localeCompare(t.label,void 0,{numeric:!0}):e.owner?1:-1}),e=[].concat(l(e),l(o.map(function(e){return e.item}))),a=s.default.createElement("div",null,s.default.createElement(m,{fullWidth:!0,variant:"v2",floatingLabelText:n.MessageHash[455],value:i,onChange:this.handleRepositoryChange.bind(this)},e))),a},buildRecentLocations:function(){var i,e,a=this,t=this.props.pydio,l=t.user;return b.RecentPlaces&&b.RecentPlaces.length&&(i=this.props.submitValue,e=s.default.createElement("div",{style:{borderBottom:"1px solid #e0e0e0",padding:"3px 7px 1px",backgroundColor:"#F6F6F8"}},s.default.createElement("div",{style:{color:"rgba(0,0,0,.3)",fontSize:12}},t.MessageHash["action.copymove.recent"]),s.default.createElement("div",{style:{display:"flex",flexWrap:"wrap",paddingTop:2}},b.RecentPlaces.map(function(e){var t,o,e=f(e.split(":"),2),n=e[0],r=e[1],e=r;return l&&l.getRepositoriesList().has(n)&&(t=l.getRepositoriesList().get(n),o=s.default.createElement(p.Avatar,{style:{fontSize:12,height:24,width:24,fontWeight:500}},t.getLettersBadge()),e=t.getLabel()+r),s.default.createElement(p.Chip,{style:{margin:"0 3px 4px 0"},labelStyle:{lineHeight:"24px"},title:e,onClick:function(){i(r,n),a.dismiss()}},o,r)})))),e},render:function(){var o=this,t=this.props.pydio,e=this.state,n=e.newFolderFormOpen,r=e.dataModel,i=e.newFolderInput,e=this.buildWsSelector(),a=this.buildRecentLocations();return s.default.createElement("div",{style:{width:"100%"}},a,e,s.default.createElement(p.Paper,{zDepth:0,style:{height:300,overflowX:"auto",color:"#546E7A",fontSize:14,padding:"6px 0px",backgroundColor:"rgb(246, 246, 248)",marginTop:4,borderBottom:"1px solid #e0e0e0",borderRadius:"2px 2px 0 0"}},s.default.createElement("div",{style:{marginTop:-6,marginLeft:-5}},s.default.createElement(v,{pydio:t,dataModel:r,onNodeSelected:this.onNodeSelected.bind(this),showRoot:!0,draggable:!1,rootLabel:t.MessageHash["action.copymove.root"],getItemStyle:function(e){return r.getContextNode()===e?{fontWeight:500,backgroundColor:"#ebebef"}:{}},getRightIcon:function(e){return r.getContextNode()===e?s.default.createElement(p.IconButton,{iconClassName:"mdi mdi-folder-plus",style:{height:18,width:18,padding:0,marginRight:-15},iconStyle:{opacity:.5,fontSize:18},tooltip:t.MessageHash[154],tooltipPosition:"bottom-left",onClick:function(){return o.toggleNewFolderForm()}}):null}}))),s.default.createElement(p.Paper,{className:"bezier-transitions",zDepth:0,style:{position:"relative",height:n?60:0,overflow:n?"visible":"hidden",opacity:n?1:0,padding:0,marginTop:n?0:4}},s.default.createElement(h,{fullWidth:!0,floatingLabelText:t.MessageHash[173],ref:"newfolder_input",variant:"v2",value:i,onKeyDown:function(e){"Enter"===e.key&&i&&o.createNewFolder()},onChange:function(e,t){return o.setState({newFolderInput:t})}}),s.default.createElement("div",{style:{position:"absolute",bottom:-2,right:0}},s.default.createElement(p.IconButton,{iconClassName:"mdi mdi-check",iconStyle:{color:"#546E7A"},tooltip:this.props.pydio.MessageHash[48],onClick:function(){o.createNewFolder()}}),s.default.createElement(p.IconButton,{iconClassName:"mdi mdi-close",iconStyle:{color:"#546E7A"},tooltip:this.props.pydio.MessageHash[49],onClick:function(){return o.toggleNewFolderForm()}}))))}});(o.default=b).RecentPlaces=[],t.exports=o.default},{"cells-sdk":"cells-sdk","create-react-class":"create-react-class","material-ui":"material-ui","prop-types":"prop-types",pydio:"pydio","pydio/model/data-model":"pydio/model/data-model","pydio/util/lang":"pydio/util/lang",react:"react"}],23:[function(e,t,o){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var l=a(e("react")),n=a(e("pydio")),i=a(e("create-react-class")),s=e("material-ui"),e=e("material-ui/styles");function a(e){return e&&e.__esModule?e:{default:e}}function u(){return(u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o,n=arguments[t];for(o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function c(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!==r(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0===o)return("string"===t?String:Number)(e);o=o.call(e,t||"default");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===r(e)?e:String(e)}(n.key),n)}}function d(e,t){return(d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function p(o){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=f(o),t=(e=n?(e=f(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var g=n.default.requireLib("boot"),y=g.ActionDialogMixin,h=g.AsyncComponent,m=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&d(t,e);var o,n=p(r);function r(){var e=this,t=r;if(e instanceof t)return n.apply(this,arguments);throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"render",value:function(){var e=this.props,t=e.tabs,o=e.dismiss,e=e.muiTheme;return l.default.createElement("div",{style:{display:"flex",backgroundColor:e.tabs.backgroundColor}},l.default.createElement(s.Tabs,{style:{flex:1}},t),l.default.createElement(s.IconButton,{iconStyle:{color:e.tabs.selectedTextColor},iconClassName:"mdi mdi-close",onClick:o,tooltip:"Close"}))}}])&&c(t.prototype,e),o&&c(t,o),Object.defineProperty(t,"prototype",{writable:!1}),r}(l.default.Component),m=(0,e.muiThemeable)()(m),g=(0,i.default)({displayName:"UploadDialog",mixins:[y],getDefaultProps:function(){return{dialogTitle:"",dialogSize:n.default.getInstance().UI.MOBILE_EXTENSIONS?"md":"lg",dialogPadding:!1,dialogIsModal:!1}},getInitialState:function(){var e,t=this.props.pydio.Registry.getActiveExtensionByType("uploader").filter(function(e){return e.moduleName});return t.sort(function(e,t){return e.order-t.order}),{uploaders:t,current:e=t.length?t[0]:e,loaded:!1}},render:function(){function e(){t.dismiss()}var t=this,o=[],n=l.default.createElement("div",{style:{height:360}}),r=this.state,i=r.uploaders,a=r.current,r=r.loaded;return i.map(function(e){o.push(l.default.createElement(s.Tab,{label:e.xmlNode.getAttribute("label"),key:e.id,onActive:function(){t.setState({current:e})}}))}),a&&(i=a.moduleName.split("."),n=l.default.createElement(h,u({pydio:this.props.pydio,namespace:i[0],componentName:i[1],onDismiss:e,showDismiss:1===o.length,onLoad:function(){t.setState({loaded:!0})}},this.props.uploaderProps))),l.default.createElement("div",{style:{width:"100%"}},1<o.length&&l.default.createElement(m,{tabs:o,dismiss:e}),n,!r&&l.default.createElement("div",{style:{padding:"100px 40px",textAlign:"center",color:"rgba(0,0,0,.5)"}},this.props.pydio.MessageHash[466]))}});o.default=g,t.exports=o.default},{"create-react-class":"create-react-class","material-ui":"material-ui","material-ui/styles":"material-ui/styles",pydio:"pydio",react:"react"}],24:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),Object.defineProperty(o,"Callbacks",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(o,"CrossWsDropDialog",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(o,"Listeners",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(o,"OtherEditorPickerDialog",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(o,"TreeDialog",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(o,"UploadDialog",{enumerable:!0,get:function(){return i.default}});var n=u(e("./dialog/OtherEditorPickerDialog")),r=u(e("./dialog/TreeDialog")),i=u(e("./dialog/UploadDialog")),a=u(e("./dialog/CrossWsDropDialog")),l=u(e("./callback/index")),s=u(e("./listener/index"));function u(e){return e&&e.__esModule?e:{default:e}}},{"./callback/index":10,"./dialog/CrossWsDropDialog":20,"./dialog/OtherEditorPickerDialog":21,"./dialog/TreeDialog":22,"./dialog/UploadDialog":23,"./listener/index":29}],25:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(t){return function(){var e=t.getUserSelection();t.Parameters.get("zipEnabled")&&t.Parameters.get("multipleFilesDownloadEnabled")||(e.isUnique()?this.selectionContext.multipleOnly=!0:this.selectionContext.unique=!0)}},t.exports=o.default},{}],26:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(t){return function(){this.rightsContext.write=!0;var e=t.user;e&&e.canRead()&&e.canCrossRepositoryCopy()&&e.hasCrossRepositories()&&(this.rightsContext.write=!1,e.canWrite()||(t.getController().defaultActions.delete("ctrldragndrop"),t.getController().defaultActions.delete("dragndrop"))),e&&e.canWrite()&&t.getContextNode().hasAjxpMimeInBranch("ajxp_browsable_archive")&&(this.rightsContext.write=!1),t.getContextNode().hasAjxpMimeInBranch("ajxp_browsable_archive")?this.setLabel(247,248):this.setLabel(66,159)}},t.exports=o.default},{}],27:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(e){return function(){e.Parameters.get("zipEnabled")&&e.Parameters.get("multipleFilesDownloadEnabled")||(this.hide(),e.Controller.actions.delete("download_all"))}},t.exports=o.default},{}],28:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(t){return function(){var e=t.getUserSelection();t.Parameters.get("zipEnabled")&&t.Parameters.get("multipleFilesDownloadEnabled")||e.hasDir()&&(this.selectionContext.dir=!1)}},t.exports=o.default},{}],29:[function(o,n,r){!function(t){!function(){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var e=t.pydio,e={mkfileDynamicBuilder:o("./mkfileDynamicBuilder")(e),downloadSelectionChange:o("./downloadSelectionChange")(e),downloadAllInit:o("./downloadAllInit")(e),compressUiSelectionChange:o("./compressUiSelectionChange")(e),copyContextChange:o("./copyContextChange")(e),openWithDynamicBuilder:o("./openWithDynamicBuilder")(e),lockSelectionChange:o("./lockSelectionChange")(e),deleteTemplateByUuid:function(){}};r.default=e,n.exports=r.default}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./compressUiSelectionChange":25,"./copyContextChange":26,"./downloadAllInit":27,"./downloadSelectionChange":28,"./lockSelectionChange":30,"./mkfileDynamicBuilder":31,"./openWithDynamicBuilder":32}],30:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(o){return function(){var e=o.getController().getActionByName("sl_lock"),t=o.getUserSelection().getUniqueNode();e&&t&&(e.selectionContext.allowedMimes=[],t.getMetadata().get("sl_locked")?(e.setIconClassName("mdi mdi-lock-outline"),e.setLabel("meta.simple_lock.3"),t.getMetadata().get("sl_mylock")||(e.selectionContext.allowedMimes=["fake_extension_that_never_exists"])):(e.setIconClassName("mdi mdi-lock-outline"),e.setLabel("meta.simple_lock.1")))}},t.exports=o.default},{}],31:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(e){return u.dynamicBuilder};var i,a,l,s=n(e("pydio")),c=n(e("pydio/util/path")),d=e("cells-sdk"),p=n(e("./index"));function n(e){return e&&e.__esModule?e:{default:e}}function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(){E=function(){return a};var a={},e=Object.prototype,s=e.hasOwnProperty,u=Object.defineProperty||function(e,t,o){e[t]=o.value},t="function"==typeof Symbol?Symbol:{},n=t.iterator||"@@iterator",o=t.asyncIterator||"@@asyncIterator",r=t.toStringTag||"@@toStringTag";function i(e,t,o){return Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch(e){i=function(e,t,o){return e[t]=o}}function l(e,t,o,n){var r,i,a,l,t=t&&t.prototype instanceof p?t:p,t=Object.create(t.prototype),n=new _(n||[]);return u(t,"_invoke",{value:(r=e,i=o,a=n,l="suspendedStart",function(e,t){if("executing"===l)throw new Error("Generator is already running");if("completed"===l){if("throw"===e)throw t;return C()}for(a.method=e,a.arg=t;;){var o=a.delegate;if(o){o=function e(t,o){var n=o.method,r=t.iterator[n];if(void 0===r)return o.delegate=null,"throw"===n&&t.iterator.return&&(o.method="return",o.arg=void 0,e(t,o),"throw"===o.method)||"return"!==n&&(o.method="throw",o.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;n=c(r,t.iterator,o.arg);if("throw"===n.type)return o.method="throw",o.arg=n.arg,o.delegate=null,d;r=n.arg;return r?r.done?(o[t.resultName]=r.value,o.next=t.nextLoc,"return"!==o.method&&(o.method="next",o.arg=void 0),o.delegate=null,d):r:(o.method="throw",o.arg=new TypeError("iterator result is not an object"),o.delegate=null,d)}(o,a);if(o){if(o===d)continue;return o}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===l)throw l="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);l="executing";o=c(r,i,a);if("normal"===o.type){if(l=a.done?"completed":"suspendedYield",o.arg===d)continue;return{value:o.arg,done:a.done}}"throw"===o.type&&(l="completed",a.method="throw",a.arg=o.arg)}})}),t}function c(e,t,o){try{return{type:"normal",arg:e.call(t,o)}}catch(e){return{type:"throw",arg:e}}}a.wrap=l;var d={};function p(){}function f(){}function g(){}var t={},y=(i(t,n,function(){return this}),Object.getPrototypeOf),y=y&&y(y(x([]))),h=(y&&y!==e&&s.call(y,n)&&(t=y),g.prototype=p.prototype=Object.create(t));function m(e){["next","throw","return"].forEach(function(t){i(e,t,function(e){return this._invoke(t,e)})})}function v(a,l){var t;u(this,"_invoke",{value:function(o,n){function e(){return new l(function(e,t){!function t(e,o,n,r){var i,e=c(a[e],a,o);if("throw"!==e.type)return(o=(i=e.arg).value)&&"object"==P(o)&&s.call(o,"__await")?l.resolve(o.__await).then(function(e){t("next",e,n,r)},function(e){t("throw",e,n,r)}):l.resolve(o).then(function(e){i.value=e,n(i)},function(e){return t("throw",e,n,r)});r(e.arg)}(o,n,e,t)})}return t=t?t.then(e,e):e()}})}function b(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function _(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(b,this),this.reset(!0)}function x(t){if(t){var o,e=t[n];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return o=-1,(e=function e(){for(;++o<t.length;)if(s.call(t,o))return e.value=t[o],e.done=!1,e;return e.value=void 0,e.done=!0,e}).next=e}return{next:C}}function C(){return{value:void 0,done:!0}}return u(h,"constructor",{value:f.prototype=g,configurable:!0}),u(g,"constructor",{value:f,configurable:!0}),f.displayName=i(g,r,"GeneratorFunction"),a.isGeneratorFunction=function(e){e="function"==typeof e&&e.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},a.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,i(e,r,"GeneratorFunction")),e.prototype=Object.create(h),e},a.awrap=function(e){return{__await:e}},m(v.prototype),i(v.prototype,o,function(){return this}),a.AsyncIterator=v,a.async=function(e,t,o,n,r){void 0===r&&(r=Promise);var i=new v(l(e,t,o,n),r);return a.isGeneratorFunction(t)?i:i.next().then(function(e){return e.done?e.value:i.next()})},m(h),i(h,r,"Generator"),i(h,n,function(){return this}),i(h,"toString",function(){return"[object Generator]"}),a.keys=function(e){var t,o=Object(e),n=[];for(t in o)n.push(t);return n.reverse(),function e(){for(;n.length;){var t=n.pop();if(t in o)return e.value=t,e.done=!1,e}return e.done=!0,e}},a.values=x,_.prototype={constructor:_,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!e)for(var t in this)"t"===t.charAt(0)&&s.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(o){if(this.done)throw o;var n=this;function e(e,t){return i.type="throw",i.arg=o,n.next=e,t&&(n.method="next",n.arg=void 0),!!t}for(var t=this.tryEntries.length-1;0<=t;--t){var r=this.tryEntries[t],i=r.completion;if("root"===r.tryLoc)return e("end");if(r.tryLoc<=this.prev){var a=s.call(r,"catchLoc"),l=s.call(r,"finallyLoc");if(a&&l){if(this.prev<r.catchLoc)return e(r.catchLoc,!0);if(this.prev<r.finallyLoc)return e(r.finallyLoc)}else if(a){if(this.prev<r.catchLoc)return e(r.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return e(r.finallyLoc)}}}},abrupt:function(e,t){for(var o=this.tryEntries.length-1;0<=o;--o){var n=this.tryEntries[o];if(n.tryLoc<=this.prev&&s.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var r=n;break}}var i=(r=r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc?null:r)?r.completion:{};return i.type=e,i.arg=t,r?(this.method="next",this.next=r.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var o=this.tryEntries[t];if(o.finallyLoc===e)return this.complete(o.completion,o.afterLoc),w(o),d}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var o,n,r=this.tryEntries[t];if(r.tryLoc===e)return"throw"===(o=r.completion).type&&(n=o.arg,w(r)),n}throw new Error("illegal catch attempt")},delegateYield:function(e,t,o){return this.delegate={iterator:x(e),resultName:t,nextLoc:o},"next"===this.method&&(this.arg=void 0),d}},a}function f(e,t,o,n,r,i,a){try{var l=e[i](a),s=l.value}catch(e){return void o(e)}l.done?t(s):Promise.resolve(s).then(n,r)}function r(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!==P(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0===o)return("string"===t?String:Number)(e);o=o.call(e,t||"default");if("object"!==P(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===P(e)?e:String(e)}(n.key),n)}}s.default.getInstance().observe("reload_node_templates",function(){console.log("reload_node_templates"),l=i=null,clearTimeout(a),s.default.getInstance().getController().fireContextChange()});var u=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function")}var t,o,n;return t=e,n=[{key:"dynamicBuilder",value:function(){var n,r=this,u=s.default.getInstance();return(l=null!==i?i:l)?(n={doc:"file-word",docx:"file-word",odt:"file-word",odg:"file-chart",odp:"file-powerpoint",ods:"file-excel",pot:"file-powerpoint",pptx:"file-powerpoint",rtf:"file-word",xls:"file-excel",xlsx:"file-excel"},l.map(function(a){var l,t,s=a.UUID&&c.default.getFileExtension(a.UUID)?c.default.getFileExtension(a.UUID):c.default.getFileExtension(a.Label)?c.default.getFileExtension(a.Label):"txt",e="file",o=(n[s]&&(e=n[s]),a.Label);return{name:o=a.Editable?React.createElement("div",{style:{display:"flex"}},React.createElement("span",{style:{flex:1}},a.Label),React.createElement("span",{onClick:function(e){e.stopPropagation(),p.default.deleteTemplateByUuid(a.UUID)},className:"mdi mdi-delete",style:{opacity:.3}})):o,alt:a.Label,icon_class:"mdi mdi-"+e,callback:(l=E().mark(function e(t){var o,r,n,i;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:o=u.user.getRepositoriesList(),i=u.getContextHolder().getContextNode(),o=o.get(u.user.activeRepository).getSlug(),n=u.MessageHash["mkfile.untitled.document"]||"Untitled",o=(o=o+i.getPath()+"/"+n+"."+s).replace("//","/"),r=c.default.getDirname(o),n=function(e,t){function o(t){var o=!1;return n.forEach(function(e){e.getLabel()===t&&(o=!0)}),o}var n=e.getChildren(),e=t.lastIndexOf("."),r=t.substring(0,e),i=t.substring(e),a=t,l=1,s=o(a);for(;s;)a=r+"-"+l+i,l++,s=o(a);return a}(i,c.default.getBasename(o)),i=function(e){if(-1!==e.indexOf("/"))throw t=u.MessageHash["filename.forbidden.slash"],u.UI.displayMessage("ERROR",t),new Error(t);var t=new d.TreeServiceApi(PydioApi.getRestClient()),o=new d.RestCreateNodesRequest,n=new d.TreeNode;n.Path=r+"/"+e,n.Type=d.TreeNodeType.constructFromObject("LEAF"),o.Nodes=[n],o.TemplateUUID=a.UUID,t.createNodes(o).then(function(e){})},u.UI.openComponentInModal("PydioReactUI","PromptDialog",{dialogTitleId:156,legendId:a.Label,fieldLabelId:174,dialogSize:"sm",defaultValue:n,defaultInputSelection:!0,submitValue:i});case 10:case"end":return e.stop()}},e)}),t=function(){var e=this,a=arguments;return new Promise(function(t,o){var n=l.apply(e,a);function r(e){f(n,t,o,r,i,"next",e)}function i(e){f(n,t,o,r,i,"throw",e)}r(void 0)})},function(e){return t.apply(this,arguments)}.bind(r))}})):(a&&clearTimeout(a),new d.TemplatesServiceApi(PydioApi.getRestClient()).listTemplates().then(function(e){l=e.Templates.filter(function(e){return"LEAF"===e.Node.Node.Type});e=new d.RestTemplate;e.Label=u.MessageHash["mkfile.empty.template.label"]||"Empty File",e.UUID="",l.unshift(e),l.sort(function(e,t){return e.Editable?-1:t.Editable?1:e<=t}),i=l,a=setTimeout(function(){i=null},2e3),s.default.getInstance().getController().fireContextChange()}),[])}}],(o=null)&&r(t.prototype,o),n&&r(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.exports=o.default},{"./index":29,"cells-sdk":"cells-sdk",pydio:"pydio","pydio/util/path":"pydio/util/path"}],32:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(l){var s=e("../callback/openOtherEditorPicker")(l),u=l.MessageHash;return function(){var e,o,n,t,r,i,a=[];return l.getUserSelection().isEmpty()||(t=l.getUserSelection().getUniqueNode(),e=c.getAjxpMimeType(t),o="true"===t.getMetadata().get("node_readonly"),(t=l.user)&&t.getPreference("gui_preferences",!0)&&t.getPreference("gui_preferences",!0).other_editor_extensions&&(n=t.getPreference("gui_preferences",!0).other_editor_extensions,Object.keys(n).forEach(function(t){var o;l.Registry.getActiveExtensionByType("editor").forEach(function(e){e.editorClass===n[t]&&(o=e)}),o&&-1===o.mimes.indexOf(t)&&o.mimes.push(t)}.bind(this))),t=l.Registry.findEditorsForMime(e),r=0,i=!1,t.length&&(t.forEach(function(t){!t.openable||t.write&&o||(-1<t.mimes.indexOf("*")&&(!i&&0<r&&a.push({separator:!0}),i=!0),a.push({name:t.text,alt:t.title,isDefault:0===r,icon_class:t.icon_class,callback:function(e){this.apply([t])}.bind(this)}),r++)}.bind(this)),a.push({name:u["openother.1"],alt:u["openother.2"],isDefault:0===r,icon_class:"icon-list-alt",callback:s})),r)||a.push({name:u[324],alt:u[324],callback:function(e){}}),a}};var c=e("pydio/util/path");t.exports=o.default},{"../callback/openOtherEditorPicker":16,"pydio/util/path":"pydio/util/path"}]},{},[24])(24)});