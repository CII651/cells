/*! For license information please see PydioComponents.min.js.LICENSE.txt */
(()=>{var __webpack_modules__={48446:e=>{"use strict";e.exports=function(e,t){for(var r=new Array(arguments.length-1),n=0,o=2,i=!0;o<arguments.length;)r[n++]=arguments[o++];return new Promise((function(o,a){r[n]=function(e){if(i)if(i=!1,e)a(e);else{for(var t=new Array(arguments.length-1),r=0;r<t.length;)t[r++]=arguments[r];o.apply(null,t)}};try{e.apply(t||null,r)}catch(e){i&&(i=!1,a(e))}}))}},32129:(e,t)=>{"use strict";var r=t;r.length=function(e){var t=e.length;if(!t)return 0;for(var r=0;--t%4>1&&"="===e.charAt(t);)++r;return Math.ceil(3*e.length)/4-r};for(var n=new Array(64),o=new Array(123),i=0;i<64;)o[n[i]=i<26?i+65:i<52?i+71:i<62?i-4:i-59|43]=i++;r.encode=function(e,t,r){for(var o,i=null,a=[],c=0,s=0;t<r;){var u=e[t++];switch(s){case 0:a[c++]=n[u>>2],o=(3&u)<<4,s=1;break;case 1:a[c++]=n[o|u>>4],o=(15&u)<<2,s=2;break;case 2:a[c++]=n[o|u>>6],a[c++]=n[63&u],s=0}c>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,a)),c=0)}return s&&(a[c++]=n[o],a[c++]=61,1===s&&(a[c++]=61)),i?(c&&i.push(String.fromCharCode.apply(String,a.slice(0,c))),i.join("")):String.fromCharCode.apply(String,a.slice(0,c))};var a="invalid encoding";r.decode=function(e,t,r){for(var n,i=r,c=0,s=0;s<e.length;){var u=e.charCodeAt(s++);if(61===u&&c>1)break;if(void 0===(u=o[u]))throw Error(a);switch(c){case 0:n=u,c=1;break;case 1:t[r++]=n<<2|(48&u)>>4,n=u,c=2;break;case 2:t[r++]=(15&n)<<4|(60&u)>>2,n=u,c=3;break;case 3:t[r++]=(3&n)<<6|u,c=0}}if(1===c)throw Error(a);return r-i},r.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}},91186:e=>{"use strict";function t(){this._listeners={}}e.exports=t,t.prototype.on=function(e,t,r){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:r||this}),this},t.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var r=this._listeners[e],n=0;n<r.length;)r[n].fn===t?r.splice(n,1):++n;return this},t.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var r=[],n=1;n<arguments.length;)r.push(arguments[n++]);for(n=0;n<t.length;)t[n].fn.apply(t[n++].ctx,r)}return this}},80756:e=>{"use strict";function t(e){return"undefined"!=typeof Float32Array?function(){var t=new Float32Array([-0]),r=new Uint8Array(t.buffer),n=128===r[3];function o(e,n,o){t[0]=e,n[o]=r[0],n[o+1]=r[1],n[o+2]=r[2],n[o+3]=r[3]}function i(e,n,o){t[0]=e,n[o]=r[3],n[o+1]=r[2],n[o+2]=r[1],n[o+3]=r[0]}function a(e,n){return r[0]=e[n],r[1]=e[n+1],r[2]=e[n+2],r[3]=e[n+3],t[0]}function c(e,n){return r[3]=e[n],r[2]=e[n+1],r[1]=e[n+2],r[0]=e[n+3],t[0]}e.writeFloatLE=n?o:i,e.writeFloatBE=n?i:o,e.readFloatLE=n?a:c,e.readFloatBE=n?c:a}():function(){function t(e,t,r,n){var o=t<0?1:0;if(o&&(t=-t),0===t)e(1/t>0?0:2147483648,r,n);else if(isNaN(t))e(2143289344,r,n);else if(t>34028234663852886e22)e((o<<31|2139095040)>>>0,r,n);else if(t<11754943508222875e-54)e((o<<31|Math.round(t/1401298464324817e-60))>>>0,r,n);else{var i=Math.floor(Math.log(t)/Math.LN2);e((o<<31|i+127<<23|8388607&Math.round(t*Math.pow(2,-i)*8388608))>>>0,r,n)}}function a(e,t,r){var n=e(t,r),o=2*(n>>31)+1,i=n>>>23&255,a=8388607&n;return 255===i?a?NaN:o*(1/0):0===i?1401298464324817e-60*o*a:o*Math.pow(2,i-150)*(a+8388608)}e.writeFloatLE=t.bind(null,r),e.writeFloatBE=t.bind(null,n),e.readFloatLE=a.bind(null,o),e.readFloatBE=a.bind(null,i)}(),"undefined"!=typeof Float64Array?function(){var t=new Float64Array([-0]),r=new Uint8Array(t.buffer),n=128===r[7];function o(e,n,o){t[0]=e,n[o]=r[0],n[o+1]=r[1],n[o+2]=r[2],n[o+3]=r[3],n[o+4]=r[4],n[o+5]=r[5],n[o+6]=r[6],n[o+7]=r[7]}function i(e,n,o){t[0]=e,n[o]=r[7],n[o+1]=r[6],n[o+2]=r[5],n[o+3]=r[4],n[o+4]=r[3],n[o+5]=r[2],n[o+6]=r[1],n[o+7]=r[0]}function a(e,n){return r[0]=e[n],r[1]=e[n+1],r[2]=e[n+2],r[3]=e[n+3],r[4]=e[n+4],r[5]=e[n+5],r[6]=e[n+6],r[7]=e[n+7],t[0]}function c(e,n){return r[7]=e[n],r[6]=e[n+1],r[5]=e[n+2],r[4]=e[n+3],r[3]=e[n+4],r[2]=e[n+5],r[1]=e[n+6],r[0]=e[n+7],t[0]}e.writeDoubleLE=n?o:i,e.writeDoubleBE=n?i:o,e.readDoubleLE=n?a:c,e.readDoubleBE=n?c:a}():function(){function t(e,t,r,n,o,i){var a=n<0?1:0;if(a&&(n=-n),0===n)e(0,o,i+t),e(1/n>0?0:2147483648,o,i+r);else if(isNaN(n))e(0,o,i+t),e(2146959360,o,i+r);else if(n>17976931348623157e292)e(0,o,i+t),e((a<<31|2146435072)>>>0,o,i+r);else{var c;if(n<22250738585072014e-324)e((c=n/5e-324)>>>0,o,i+t),e((a<<31|c/4294967296)>>>0,o,i+r);else{var s=Math.floor(Math.log(n)/Math.LN2);1024===s&&(s=1023),e(4503599627370496*(c=n*Math.pow(2,-s))>>>0,o,i+t),e((a<<31|s+1023<<20|1048576*c&1048575)>>>0,o,i+r)}}}function a(e,t,r,n,o){var i=e(n,o+t),a=e(n,o+r),c=2*(a>>31)+1,s=a>>>20&2047,u=4294967296*(1048575&a)+i;return 2047===s?u?NaN:c*(1/0):0===s?5e-324*c*u:c*Math.pow(2,s-1075)*(u+4503599627370496)}e.writeDoubleLE=t.bind(null,r,0,4),e.writeDoubleBE=t.bind(null,n,4,0),e.readDoubleLE=a.bind(null,o,0,4),e.readDoubleBE=a.bind(null,i,4,0)}(),e}function r(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}function n(e,t,r){t[r]=e>>>24,t[r+1]=e>>>16&255,t[r+2]=e>>>8&255,t[r+3]=255&e}function o(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function i(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}e.exports=t(t)},81578:module=>{"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}module.exports=inquire},49187:e=>{"use strict";e.exports=function(e,t,r){var n=r||8192,o=n>>>1,i=null,a=n;return function(r){if(r<1||r>o)return e(r);a+r>n&&(i=e(n),a=0);var c=t.call(i,a,a+=r);return 7&a&&(a=1+(7|a)),c}}},95793:(e,t)=>{"use strict";var r=t;r.length=function(e){for(var t=0,r=0,n=0;n<e.length;++n)(r=e.charCodeAt(n))<128?t+=1:r<2048?t+=2:55296==(64512&r)&&56320==(64512&e.charCodeAt(n+1))?(++n,t+=4):t+=3;return t},r.read=function(e,t,r){if(r-t<1)return"";for(var n,o=null,i=[],a=0;t<r;)(n=e[t++])<128?i[a++]=n:n>191&&n<224?i[a++]=(31&n)<<6|63&e[t++]:n>239&&n<365?(n=((7&n)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,i[a++]=55296+(n>>10),i[a++]=56320+(1023&n)):i[a++]=(15&n)<<12|(63&e[t++])<<6|63&e[t++],a>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,i)),a=0);return o?(a&&o.push(String.fromCharCode.apply(String,i.slice(0,a))),o.join("")):String.fromCharCode.apply(String,i.slice(0,a))},r.write=function(e,t,r){for(var n,o,i=r,a=0;a<e.length;++a)(n=e.charCodeAt(a))<128?t[r++]=n:n<2048?(t[r++]=n>>6|192,t[r++]=63&n|128):55296==(64512&n)&&56320==(64512&(o=e.charCodeAt(a+1)))?(n=65536+((1023&n)<<10)+(1023&o),++a,t[r++]=n>>18|240,t[r++]=n>>12&63|128,t[r++]=n>>6&63|128,t[r++]=63&n|128):(t[r++]=n>>12|224,t[r++]=n>>6&63|128,t[r++]=63&n|128);return r-i}},49493:(e,t,r)=>{"use strict";var n=r(43532),o=r(64411),i=o(n("String.prototype.indexOf"));e.exports=function(e,t){var r=n(e,!!t);return"function"==typeof r&&i(e,".prototype.")>-1?o(r):r}},64411:(e,t,r)=>{"use strict";var n=r(65836),o=r(43532),i=o("%Function.prototype.apply%"),a=o("%Function.prototype.call%"),c=o("%Reflect.apply%",!0)||n.call(a,i),s=o("%Object.getOwnPropertyDescriptor%",!0),u=o("%Object.defineProperty%",!0),l=o("%Math.max%");if(u)try{u({},"a",{value:1})}catch(e){u=null}e.exports=function(e){var t=c(n,a,arguments);return s&&u&&s(t,"length").configurable&&u(t,"length",{value:1+l(0,e.length-(arguments.length-1))}),t};var f=function(){return c(n,i,arguments)};u?u(e.exports,"apply",{value:f}):e.exports.apply=f},13674:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}var o=r(42801),i=r(80288),a=r(28675),c=r(92708),s=r(30907),u=r(99776),l=r(47478),f=r(65176),p=r(43532),d=r(49493),h=r(18724),y=r(23382),m=r(645),v=r(2607),b=r(46880),g=d("Date.prototype.getTime"),w=Object.getPrototypeOf,S=d("Object.prototype.toString"),O=p("%Set%",!0),P=d("Map.prototype.has",!0),k=d("Map.prototype.get",!0),_=d("Map.prototype.size",!0),E=d("Set.prototype.add",!0),j=d("Set.prototype.delete",!0),C=d("Set.prototype.has",!0),T=d("Set.prototype.size",!0);function x(e,t,r,n){for(var o,i=y(e);(o=i.next())&&!o.done;)if(D(t,o.value,r,n))return j(e,o.value),!0;return!1}function R(e){return void 0===e?null:"object"!==n(e)?"symbol"!==n(e)&&("string"!=typeof e&&"number"!=typeof e||+e==+e):void 0}function I(e,t,r,n,o,i){var a=R(r);if(null!=a)return a;var c=k(t,a),s=b({},o,{strict:!1});return!(void 0===c&&!P(t,a)||!D(n,c,s,i))&&!P(e,a)&&D(n,c,s,i)}function L(e,t,r){var n=R(r);return null!=n?n:C(t,n)&&!C(e,n)}function M(e,t,r,n,o,i){for(var a,c,s=y(e);(a=s.next())&&!a.done;)if(D(r,c=a.value,o,i)&&D(n,k(t,c),o,i))return j(e,c),!0;return!1}function D(e,t,r,p){var d=r||{};if(d.strict?a(e,t):e===t)return!0;if(f(e)!==f(t))return!1;if(!e||!t||"object"!==n(e)&&"object"!==n(t))return d.strict?a(e,t):e==t;var m,j=p.has(e),R=p.has(t);if(j&&R){if(p.get(e)===p.get(t))return!0}else m={};return j||p.set(e,m),R||p.set(t,m),function(e,t,r,a){var f,p;if(n(e)!==n(t))return!1;if(null==e||null==t)return!1;if(S(e)!==S(t))return!1;if(i(e)!==i(t))return!1;if(u(e)!==u(t))return!1;var d=e instanceof Error,m=t instanceof Error;if(d!==m)return!1;if((d||m)&&(e.name!==t.name||e.message!==t.message))return!1;var j=c(e),R=c(t);if(j!==R)return!1;if((j||R)&&(e.source!==t.source||s(e)!==s(t)))return!1;var N=l(e),U=l(t);if(N!==U)return!1;if((N||U)&&g(e)!==g(t))return!1;if(r.strict&&w&&w(e)!==w(t))return!1;if(v(e)!==v(t))return!1;var B=A(e),F=A(t);if(B!==F)return!1;if(B||F){if(e.length!==t.length)return!1;for(f=0;f<e.length;f++)if(e[f]!==t[f])return!1;return!0}if(n(e)!==n(t))return!1;var q=o(e),z=o(t);if(q.length!==z.length)return!1;for(q.sort(),z.sort(),f=q.length-1;f>=0;f--)if(q[f]!=z[f])return!1;for(f=q.length-1;f>=0;f--)if(!D(e[p=q[f]],t[p],r,a))return!1;var W=h(e),V=h(t);return W===V&&("Set"===W||"Set"===V?function(e,t,r,o){if(T(e)!==T(t))return!1;for(var i,a,c,s=y(e),u=y(t);(i=s.next())&&!i.done;)if(i.value&&"object"===n(i.value))c||(c=new O),E(c,i.value);else if(!C(t,i.value)){if(r.strict)return!1;if(!L(e,t,i.value))return!1;c||(c=new O),E(c,i.value)}if(c){for(;(a=u.next())&&!a.done;)if(a.value&&"object"===n(a.value)){if(!x(c,a.value,r.strict,o))return!1}else if(!r.strict&&!C(e,a.value)&&!x(c,a.value,r.strict,o))return!1;return 0===T(c)}return!0}(e,t,r,a):"Map"!==W||function(e,t,r,o){if(_(e)!==_(t))return!1;for(var i,a,c,s,u,l,f=y(e),p=y(t);(i=f.next())&&!i.done;)if(s=i.value[0],u=i.value[1],s&&"object"===n(s))c||(c=new O),E(c,s);else if(void 0===(l=k(t,s))&&!P(t,s)||!D(u,l,r,o)){if(r.strict)return!1;if(!I(e,t,s,u,r,o))return!1;c||(c=new O),E(c,s)}if(c){for(;(a=p.next())&&!a.done;)if(s=a.value[0],l=a.value[1],s&&"object"===n(s)){if(!M(c,e,s,l,r,o))return!1}else if(!(r.strict||e.has(s)&&D(k(e,s),l,r,o)||M(c,e,s,l,b({},r,{strict:!1}),o)))return!1;return 0===T(c)}return!0}(e,t,r,a))}(e,t,d,p)}function A(e){return!(!e||"object"!==n(e)||"number"!=typeof e.length||"function"!=typeof e.copy||"function"!=typeof e.slice||e.length>0&&"number"!=typeof e[0]||!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e)))}e.exports=function(e,t,r){return D(e,t,r,m())}},10635:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}var o=r(42801),i="function"==typeof Symbol&&"symbol"===n(Symbol("foo")),a=Object.prototype.toString,c=Array.prototype.concat,s=Object.defineProperty,u=s&&function(){var e={};try{for(var t in s(e,"x",{enumerable:!1,value:e}),e)return!1;return e.x===e}catch(e){return!1}}(),l=function(e,t,r,n){var o;(!(t in e)||"function"==typeof(o=n)&&"[object Function]"===a.call(o)&&n())&&(u?s(e,t,{configurable:!0,enumerable:!1,value:r,writable:!0}):e[t]=r)},f=function(e,t){var r=arguments.length>2?arguments[2]:{},n=o(t);i&&(n=c.call(n,Object.getOwnPropertySymbols(t)));for(var a=0;a<n.length;a+=1)l(e,n[a],t[n[a]],r[n[a]])};f.supportsDescriptors=!!u,e.exports=f},40063:e=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}var r,n="object"===("undefined"==typeof Reflect?"undefined":t(Reflect))?Reflect:null,o=n&&"function"==typeof n.apply?n.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};r=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var i=Number.isNaN||function(e){return e!=e};function a(){a.init.call(this)}e.exports=a,e.exports.once=function(e,t){return new Promise((function(r,n){function o(r){e.removeListener(t,i),n(r)}function i(){"function"==typeof e.removeListener&&e.removeListener("error",o),r([].slice.call(arguments))}m(e,t,i,{once:!0}),"error"!==t&&function(e,t,r){"function"==typeof e.on&&m(e,"error",t,{once:!0})}(e,o)}))},a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var c=10;function s(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+t(e))}function u(e){return void 0===e._maxListeners?a.defaultMaxListeners:e._maxListeners}function l(e,t,r,n){var o,i,a,c;if(s(r),void 0===(i=e._events)?(i=e._events=Object.create(null),e._eventsCount=0):(void 0!==i.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),i=e._events),a=i[t]),void 0===a)a=i[t]=r,++e._eventsCount;else if("function"==typeof a?a=i[t]=n?[r,a]:[a,r]:n?a.unshift(r):a.push(r),(o=u(e))>0&&a.length>o&&!a.warned){a.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=a.length,c=l,console&&console.warn&&console.warn(c)}return e}function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},o=f.bind(n);return o.listener=r,n.wrapFn=o,o}function d(e,t,r){var n=e._events;if(void 0===n)return[];var o=n[t];return void 0===o?[]:"function"==typeof o?r?[o.listener||o]:[o]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(o):y(o,o.length)}function h(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function y(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function m(e,r,n,o){if("function"==typeof e.on)o.once?e.once(r,n):e.on(r,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+t(e));e.addEventListener(r,(function t(i){o.once&&e.removeEventListener(r,t),n(i)}))}}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");c=e}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},a.prototype.getMaxListeners=function(){return u(this)},a.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var n="error"===e,i=this._events;if(void 0!==i)n=n&&void 0===i.error;else if(!n)return!1;if(n){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var c=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw c.context=a,c}var s=i[e];if(void 0===s)return!1;if("function"==typeof s)o(s,this,t);else{var u=s.length,l=y(s,u);for(r=0;r<u;++r)o(l[r],this,t)}return!0},a.prototype.addListener=function(e,t){return l(this,e,t,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(e,t){return l(this,e,t,!0)},a.prototype.once=function(e,t){return s(t),this.on(e,p(this,e,t)),this},a.prototype.prependOnceListener=function(e,t){return s(t),this.prependListener(e,p(this,e,t)),this},a.prototype.removeListener=function(e,t){var r,n,o,i,a;if(s(t),void 0===(n=this._events))return this;if(void 0===(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(o=-1,i=r.length-1;i>=0;i--)if(r[i]===t||r[i].listener===t){a=r[i].listener,o=i;break}if(o<0)return this;0===o?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,o),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,a||t)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var o,i=Object.keys(r);for(n=0;n<i.length;++n)"removeListener"!==(o=i[n])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},a.prototype.listeners=function(e){return d(this,e,!0)},a.prototype.rawListeners=function(e){return d(this,e,!1)},a.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):h.call(e,t)},a.prototype.listenerCount=h,a.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},77758:e=>{var t=Object.prototype.hasOwnProperty,r=Object.prototype.toString;e.exports=function(e,n,o){if("[object Function]"!==r.call(n))throw new TypeError("iterator must be a function");var i=e.length;if(i===+i)for(var a=0;a<i;a++)n.call(o,e[a],a,e);else for(var c in e)t.call(e,c)&&n.call(o,e[c],c,e)}},4237:e=>{"use strict";var t="Function.prototype.bind called on incompatible ",r=Array.prototype.slice,n=Object.prototype.toString,o="[object Function]";e.exports=function(e){var i=this;if("function"!=typeof i||n.call(i)!==o)throw new TypeError(t+i);for(var a,c=r.call(arguments,1),s=Math.max(0,i.length-c.length),u=[],l=0;l<s;l++)u.push("$"+l);if(a=Function("binder","return function ("+u.join(",")+"){ return binder.apply(this,arguments); }")((function(){if(this instanceof a){var t=i.apply(this,c.concat(r.call(arguments)));return Object(t)===t?t:this}return i.apply(e,c.concat(r.call(arguments)))})),i.prototype){var f=function(){};f.prototype=i.prototype,a.prototype=new f,f.prototype=null}return a}},65836:(e,t,r)=>{"use strict";var n=r(4237);e.exports=Function.prototype.bind||n},81091:e=>{"use strict";var t=function(){return"string"==typeof function(){}.name},r=Object.getOwnPropertyDescriptor;if(r)try{r([],"length")}catch(e){r=null}t.functionsHaveConfigurableNames=function(){return t()&&r&&!!r((function(){}),"name").configurable};var n=Function.prototype.bind;t.boundFunctionsHaveNames=function(){return t()&&"function"==typeof n&&""!==function(){}.bind().name},e.exports=t},43532:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}var o,i=SyntaxError,a=Function,c=TypeError,s=function(e){try{return a('"use strict"; return ('+e+").constructor;")()}catch(e){}},u=Object.getOwnPropertyDescriptor;if(u)try{u({},"")}catch(e){u=null}var l=function(){throw new c},f=u?function(){try{return l}catch(e){try{return u(arguments,"callee").get}catch(e){return l}}}():l,p=r(87285)(),d=Object.getPrototypeOf||function(e){return e.__proto__},h={},y="undefined"==typeof Uint8Array?o:d(Uint8Array),m={"%AggregateError%":"undefined"==typeof AggregateError?o:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?o:ArrayBuffer,"%ArrayIteratorPrototype%":p?d([][Symbol.iterator]()):o,"%AsyncFromSyncIteratorPrototype%":o,"%AsyncFunction%":h,"%AsyncGenerator%":h,"%AsyncGeneratorFunction%":h,"%AsyncIteratorPrototype%":h,"%Atomics%":"undefined"==typeof Atomics?o:Atomics,"%BigInt%":"undefined"==typeof BigInt?o:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?o:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?o:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?o:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?o:FinalizationRegistry,"%Function%":a,"%GeneratorFunction%":h,"%Int8Array%":"undefined"==typeof Int8Array?o:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?o:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?o:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":p?d(d([][Symbol.iterator]())):o,"%JSON%":"object"===("undefined"==typeof JSON?"undefined":n(JSON))?JSON:o,"%Map%":"undefined"==typeof Map?o:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&p?d((new Map)[Symbol.iterator]()):o,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?o:Promise,"%Proxy%":"undefined"==typeof Proxy?o:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?o:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?o:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&p?d((new Set)[Symbol.iterator]()):o,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?o:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":p?d(""[Symbol.iterator]()):o,"%Symbol%":p?Symbol:o,"%SyntaxError%":i,"%ThrowTypeError%":f,"%TypedArray%":y,"%TypeError%":c,"%Uint8Array%":"undefined"==typeof Uint8Array?o:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?o:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?o:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?o:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?o:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?o:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?o:WeakSet},v=function e(t){var r;if("%AsyncFunction%"===t)r=s("async function () {}");else if("%GeneratorFunction%"===t)r=s("function* () {}");else if("%AsyncGeneratorFunction%"===t)r=s("async function* () {}");else if("%AsyncGenerator%"===t){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if("%AsyncIteratorPrototype%"===t){var o=e("%AsyncGenerator%");o&&(r=d(o.prototype))}return m[t]=r,r},b={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},g=r(65836),w=r(19392),S=g.call(Function.call,Array.prototype.concat),O=g.call(Function.apply,Array.prototype.splice),P=g.call(Function.call,String.prototype.replace),k=g.call(Function.call,String.prototype.slice),_=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,E=/\\(\\)?/g,j=function(e){var t=k(e,0,1),r=k(e,-1);if("%"===t&&"%"!==r)throw new i("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==t)throw new i("invalid intrinsic syntax, expected opening `%`");var n=[];return P(e,_,(function(e,t,r,o){n[n.length]=r?P(o,E,"$1"):t||e})),n},C=function(e,t){var r,n=e;if(w(b,n)&&(n="%"+(r=b[n])[0]+"%"),w(m,n)){var o=m[n];if(o===h&&(o=v(n)),void 0===o&&!t)throw new c("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:r,name:n,value:o}}throw new i("intrinsic "+e+" does not exist!")};e.exports=function(e,t){if("string"!=typeof e||0===e.length)throw new c("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new c('"allowMissing" argument must be a boolean');var r=j(e),n=r.length>0?r[0]:"",o=C("%"+n+"%",t),a=o.name,s=o.value,l=!1,f=o.alias;f&&(n=f[0],O(r,S([0,1],f)));for(var p=1,d=!0;p<r.length;p+=1){var h=r[p],y=k(h,0,1),v=k(h,-1);if(('"'===y||"'"===y||"`"===y||'"'===v||"'"===v||"`"===v)&&y!==v)throw new i("property names with quotes must have matching quotes");if("constructor"!==h&&d||(l=!0),w(m,a="%"+(n+="."+h)+"%"))s=m[a];else if(null!=s){if(!(h in s)){if(!t)throw new c("base intrinsic for "+e+" exists, but the property is not available.");return}if(u&&p+1>=r.length){var b=u(s,h);s=(d=!!b)&&"get"in b&&!("originalValue"in b.get)?b.get:s[h]}else d=w(s,h),s=s[h];d&&!l&&(m[a]=s)}}return s}},87285:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}var o="undefined"!=typeof Symbol&&Symbol,i=r(2112);e.exports=function(){return"function"==typeof o&&"function"==typeof Symbol&&"symbol"===n(o("foo"))&&"symbol"===n(Symbol("bar"))&&i()}},2112:e=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}e.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"===t(Symbol.iterator))return!0;var e={},r=Symbol("test"),n=Object(r);if("string"==typeof r)return!1;if("[object Symbol]"!==Object.prototype.toString.call(r))return!1;if("[object Symbol]"!==Object.prototype.toString.call(n))return!1;for(r in e[r]=42,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var o=Object.getOwnPropertySymbols(e);if(1!==o.length||o[0]!==r)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,r))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var i=Object.getOwnPropertyDescriptor(e,r);if(42!==i.value||!0!==i.enumerable)return!1}return!0}},19392:(e,t,r)=>{"use strict";var n=r(65836);e.exports=n.call(Function.call,Object.prototype.hasOwnProperty)},80288:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}var o="function"==typeof Symbol&&"symbol"===n(Symbol.toStringTag),i=r(49493)("Object.prototype.toString"),a=function(e){return!(o&&e&&"object"===n(e)&&Symbol.toStringTag in e)&&"[object Arguments]"===i(e)},c=function(e){return!!a(e)||null!==e&&"object"===n(e)&&"number"==typeof e.length&&e.length>=0&&"[object Array]"!==i(e)&&"[object Function]"===i(e.callee)},s=function(){return a(arguments)}();a.isLegacyArguments=c,e.exports=s?a:c},39518:e=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}if("function"==typeof BigInt){var r=BigInt.prototype.valueOf;e.exports=function(e){return null!=e&&"boolean"!=typeof e&&"string"!=typeof e&&"number"!=typeof e&&"symbol"!==t(e)&&"function"!=typeof e&&("bigint"==typeof e||function(e){try{return r.call(e),!0}catch(e){}return!1}(e))}}else e.exports=function(e){return!1}},30293:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}var o=r(49493),i=o("Boolean.prototype.toString"),a=o("Object.prototype.toString"),c="function"==typeof Symbol&&!!Symbol.toStringTag;e.exports=function(e){return"boolean"==typeof e||null!==e&&"object"===n(e)&&(c&&Symbol.toStringTag in e?function(e){try{return i(e),!0}catch(e){return!1}}(e):"[object Boolean]"===a(e))}},47478:e=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}var r=Date.prototype.getDay,n=Object.prototype.toString,o="function"==typeof Symbol&&!!Symbol.toStringTag;e.exports=function(e){return"object"===t(e)&&null!==e&&(o?function(e){try{return r.call(e),!0}catch(e){return!1}}(e):"[object Date]"===n.call(e))}},33410:e=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}var r,n="function"==typeof Map&&Map.prototype?Map:null,o="function"==typeof Set&&Set.prototype?Set:null;n||(r=function(e){return!1});var i=n?Map.prototype.has:null,a=o?Set.prototype.has:null;r||i||(r=function(e){return!1}),e.exports=r||function(e){if(!e||"object"!==t(e))return!1;try{if(i.call(e),a)try{a.call(e)}catch(e){return!0}return e instanceof n}catch(e){}return!1}},33524:e=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}var r=Number.prototype.toString,n=Object.prototype.toString,o="function"==typeof Symbol&&!!Symbol.toStringTag;e.exports=function(e){return"number"==typeof e||"object"===t(e)&&(o?function(e){try{return r.call(e),!0}catch(e){return!1}}(e):"[object Number]"===n.call(e))}},92708:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}var o,i,a,c,s=r(49493),u=r(2112)()&&!!Symbol.toStringTag;if(u){o=s("Object.prototype.hasOwnProperty"),i=s("RegExp.prototype.exec"),a={};var l=function(){throw a};c={toString:l,valueOf:l},"symbol"===n(Symbol.toPrimitive)&&(c[Symbol.toPrimitive]=l)}var f=s("Object.prototype.toString"),p=Object.getOwnPropertyDescriptor;e.exports=u?function(e){if(!e||"object"!==n(e))return!1;var t=p(e,"lastIndex");if(!t||!o(t,"value"))return!1;try{i(e,c)}catch(e){return e===a}}:function(e){return!(!e||"object"!==n(e)&&"function"!=typeof e)&&"[object RegExp]"===f(e)}},32454:e=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}var r,n="function"==typeof Map&&Map.prototype?Map:null,o="function"==typeof Set&&Set.prototype?Set:null;o||(r=function(e){return!1});var i=n?Map.prototype.has:null,a=o?Set.prototype.has:null;r||a||(r=function(e){return!1}),e.exports=r||function(e){if(!e||"object"!==t(e))return!1;try{if(a.call(e),i)try{i.call(e)}catch(e){return!0}return e instanceof o}catch(e){}return!1}},50434:e=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}var r=String.prototype.valueOf,n=Object.prototype.toString,o="function"==typeof Symbol&&!!Symbol.toStringTag;e.exports=function(e){return"string"==typeof e||"object"===t(e)&&(o?function(e){try{return r.call(e),!0}catch(e){return!1}}(e):"[object String]"===n.call(e))}},57764:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}var o=Object.prototype.toString;if(r(87285)()){var i=Symbol.prototype.toString,a=/^Symbol\(.*\)$/;e.exports=function(e){if("symbol"===n(e))return!0;if("[object Symbol]"!==o.call(e))return!1;try{return function(e){return"symbol"===n(e.valueOf())&&a.test(i.call(e))}(e)}catch(e){return!1}}}else e.exports=function(e){return!1}},18215:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}var o=r(77758),i=r(93167),a=r(49493),c=a("Object.prototype.toString"),s=r(87285)()&&"symbol"===n(Symbol.toStringTag),u=i(),l=a("Array.prototype.indexOf",!0)||function(e,t){for(var r=0;r<e.length;r+=1)if(e[r]===t)return r;return-1},f=a("String.prototype.slice"),p={},d=r(16992),h=Object.getPrototypeOf;s&&d&&h&&o(u,(function(e){var t=new r.g[e];if(!(Symbol.toStringTag in t))throw new EvalError("this engine has support for Symbol.toStringTag, but "+e+" does not have the property! Please report this.");var n=h(t),o=d(n,Symbol.toStringTag);if(!o){var i=h(n);o=d(i,Symbol.toStringTag)}p[e]=o.get})),e.exports=function(e){if(!e||"object"!==n(e))return!1;if(!s){var t=f(c(e),8,-1);return l(u,t)>-1}return!!d&&function(e){var t=!1;return o(p,(function(r,n){if(!t)try{t=r.call(e)===n}catch(e){}})),t}(e)}},30464:e=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}var r,n="function"==typeof WeakMap&&WeakMap.prototype?WeakMap:null,o="function"==typeof WeakSet&&WeakSet.prototype?WeakSet:null;n||(r=function(e){return!1});var i=n?n.prototype.has:null,a=o?o.prototype.has:null;r||i||(r=function(e){return!1}),e.exports=r||function(e){if(!e||"object"!==t(e))return!1;try{if(i.call(e,i),a)try{a.call(e,a)}catch(e){return!0}return e instanceof n}catch(e){}return!1}},77799:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}var o=r(43532),i=r(49493),a=o("%WeakSet%",!0),c=i("WeakSet.prototype.has",!0);if(c){var s=i("WeakMap.prototype.has",!0);e.exports=function(e){if(!e||"object"!==n(e))return!1;try{if(c(e,c),s)try{s(e,s)}catch(e){return!0}return e instanceof a}catch(e){}return!1}}else e.exports=function(e){return!1}},99776:e=>{var t={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==t.call(e)}},36754:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){o=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},c=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function f(e,t,r,n){var o=t&&t.prototype instanceof h?t:h,a=Object.create(o.prototype),c=new j(n||[]);return i(a,"_invoke",{value:P(e,r,c)}),a}function p(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=f;var d={};function h(){}function y(){}function m(){}var v={};l(v,c,(function(){return this}));var b=Object.getPrototypeOf,g=b&&b(b(C([])));g&&g!==t&&r.call(g,c)&&(v=g);var w=m.prototype=h.prototype=Object.create(v);function S(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function o(i,a,c,s){var u=p(e[i],e,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,c,s)}),(function(e){o("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return o("throw",e,c,s)}))}s(u.arg)}var a;i(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function P(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=k(a,r);if(c){if(c===d)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=p(e,t,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}function k(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,k(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var o=p(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function C(e){if(e){var t=e[c];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return y.prototype=m,i(w,"constructor",{value:m,configurable:!0}),i(m,"constructor",{value:y,configurable:!0}),y.displayName=l(m,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,u,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},S(O.prototype),l(O.prototype,s,(function(){return this})),e.AsyncIterator=O,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new O(f(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},S(w),l(w,u,"Generator"),l(w,c,(function(){return this})),l(w,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=C,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),E(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;E(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:C(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},e}function i(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===n(i)?i:String(i)),o)}var i}var a=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{s(n.next(e))}catch(e){i(e)}}function c(e){try{s(n.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,c)}s((n=n.apply(e,t||[])).next())}))},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.WSSignalClient=void 0;var s=c(r(65657));r(48750);var u=r(71970),l=r(36917),f=r(70044),p=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.isConnected=!1,this.useJSON=t}var t,r;return t=e,r=[{key:"join",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3?arguments[3]:void 0;return a(this,void 0,void 0,o().mark((function i(){var a;return o().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this.connect(e,t,{usePlanB:r,autoSubscribe:null==n?void 0:n.autoSubscribe});case 2:return a=o.sent,o.abrupt("return",a);case 4:case"end":return o.stop()}}),i,this)})))}},{key:"reconnect",value:function(e,t){return a(this,void 0,void 0,o().mark((function r(){return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.connect(e,t,{reconnect:!0});case 2:case"end":return r.stop()}}),r,this)})))}},{key:"connect",value:function(e,t,r){var i=this;e+="/rtc";var c="?access_token=".concat(t,"&protocol=").concat(f.protocolVersion);return r.reconnect&&(c+="&reconnect=1"),r.usePlanB&&(c+="&planb=1"),void 0!==r.autoSubscribe&&(c+="&auto_subscribe=".concat(r.autoSubscribe?"1":"0")),new Promise((function(t,f){s.default.debug("connecting to",e+c),i.ws=void 0;var p=new WebSocket(e+c);p.binaryType="arraybuffer",p.onerror=function(t){return a(i,void 0,void 0,o().mark((function r(){var n,i;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(this.ws){r.next=19;break}return r.prev=1,r.next=4,fetch("http".concat(e.substr(2),"/validate").concat(c));case 4:if((n=r.sent).ok){r.next=12;break}return r.next=8,n.text();case 8:i=r.sent,f(new l.ConnectionError(i)),r.next=13;break;case 12:f(new l.ConnectionError("Internal error"));case 13:r.next=18;break;case 15:r.prev=15,r.t0=r.catch(1),f(new l.ConnectionError(r.t0));case 18:return r.abrupt("return");case 19:this.handleWSError(t);case 20:case"end":return r.stop()}}),r,this,[[1,15]])})))},p.onopen=function(){i.ws=p,r.reconnect&&(i.isConnected=!0,t())},p.onmessage=function(e){var r;if("string"==typeof e.data){var o=JSON.parse(e.data);r=u.SignalResponse.fromJSON(o)}else{if(!(e.data instanceof ArrayBuffer))return void s.default.error("could not decode websocket message",n(e.data));r=u.SignalResponse.decode(new Uint8Array(e.data))}i.isConnected?i.handleSignalResponse(r):r.join?(i.isConnected=!0,t(r.join)):f(new l.ConnectionError("did not receive join response"))},p.onclose=function(e){i.isConnected&&(s.default.debug("websocket connection closed",e.reason),i.isConnected=!1,i.onClose&&i.onClose(e.reason))}}))}},{key:"close",value:function(){var e;this.isConnected=!1,this.ws&&(this.ws.onclose=null),null===(e=this.ws)||void 0===e||e.close()}},{key:"sendOffer",value:function(e){s.default.debug("sending offer",e),this.sendRequest({offer:h(e)})}},{key:"sendAnswer",value:function(e){s.default.debug("sending answer"),this.sendRequest({answer:h(e)})}},{key:"sendIceCandidate",value:function(e,t){s.default.debug("sending ice candidate",e),this.sendRequest({trickle:{candidateInit:JSON.stringify(e),target:t}})}},{key:"sendMuteTrack",value:function(e,t){this.sendRequest({mute:{sid:e,muted:t}})}},{key:"sendAddTrack",value:function(e,t,r,n){var o={cid:e,name:t,type:r};n&&(o.width=n.width,o.height=n.height),this.sendRequest({addTrack:u.AddTrackRequest.fromPartial(o)})}},{key:"sendUpdateTrackSettings",value:function(e){this.sendRequest({trackSetting:e})}},{key:"sendUpdateSubscription",value:function(e){this.sendRequest({subscription:e})}},{key:"sendSetSimulcastLayers",value:function(e,t){this.sendRequest({simulcast:{trackSid:e,layers:t}})}},{key:"sendLeave",value:function(){this.sendRequest(u.SignalRequest.fromPartial({leave:{}}))}},{key:"sendRequest",value:function(e){if(!this.ws)throw new l.ConnectionError("cannot send signal request before connected");this.useJSON?this.ws.send(JSON.stringify(u.SignalRequest.toJSON(e))):this.ws.send(u.SignalRequest.encode(e).finish())}},{key:"handleSignalResponse",value:function(e){if(e.answer){var t=d(e.answer);this.onAnswer&&this.onAnswer(t)}else if(e.offer){var r=d(e.offer);this.onOffer&&this.onOffer(r)}else if(e.trickle){var n=JSON.parse(e.trickle.candidateInit);this.onTrickle&&this.onTrickle(n,e.trickle.target)}else e.update?this.onParticipantUpdate&&this.onParticipantUpdate(e.update.participants):e.trackPublished?this.onLocalTrackPublished&&this.onLocalTrackPublished(e.trackPublished):e.speaker?this.onActiveSpeakersChanged&&this.onActiveSpeakersChanged(e.speaker.speakers):e.leave?this.onLeave&&this.onLeave():s.default.warn("unsupported message",e)}},{key:"handleWSError",value:function(e){s.default.error("websocket error",e)}}],r&&i(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function d(e){var t={type:"offer",sdp:e.sdp};switch(e.type){case"answer":case"offer":case"pranswer":case"rollback":t.type=e.type}return t}function h(e){return{sdp:e.sdp,type:e.type}}t.WSSignalClient=p},9516:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},a=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.VideoQuality=t.TrackPublication=t.RemoteTrackPublication=t.RemoteVideoTrack=t.RemoteAudioTrack=t.LocalTrackPublication=t.LocalTrack=t.LocalVideoTrack=t.LocalAudioTrack=t.LocalParticipant=t.RemoteParticipant=t.Participant=t.DataPacket_Kind=t.RoomState=t.Room=void 0;var s=r(71970);Object.defineProperty(t,"DataPacket_Kind",{enumerable:!0,get:function(){return s.DataPacket_Kind}}),Object.defineProperty(t,"VideoQuality",{enumerable:!0,get:function(){return s.VideoQuality}});var u=c(r(24350));t.LocalParticipant=u.default;var l=c(r(3410));t.Participant=l.default;var f=c(r(46422));t.RemoteParticipant=f.default;var p=i(r(43140));t.Room=p.default,Object.defineProperty(t,"RoomState",{enumerable:!0,get:function(){return p.RoomState}});var d=c(r(80198));t.LocalAudioTrack=d.default;var h=c(r(64914));t.LocalTrack=h.default;var y=c(r(55690));t.LocalTrackPublication=y.default;var m=c(r(86662));t.LocalVideoTrack=m.default;var v=c(r(76882));t.RemoteAudioTrack=v.default;var b=c(r(90823));t.RemoteTrackPublication=b.default;var g=c(r(21233));t.RemoteVideoTrack=g.default;var w=c(r(18764));t.TrackPublication=w.default,a(r(30752),t),a(r(65643),t),a(r(36917),t),a(r(38390),t),a(r(47577),t),a(r(97370),t),a(r(55409),t),a(r(70044),t)},30752:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){o=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},c=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function f(e,t,r,n){var o=t&&t.prototype instanceof h?t:h,a=Object.create(o.prototype),c=new j(n||[]);return i(a,"_invoke",{value:P(e,r,c)}),a}function p(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=f;var d={};function h(){}function y(){}function m(){}var v={};l(v,c,(function(){return this}));var b=Object.getPrototypeOf,g=b&&b(b(C([])));g&&g!==t&&r.call(g,c)&&(v=g);var w=m.prototype=h.prototype=Object.create(v);function S(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function o(i,a,c,s){var u=p(e[i],e,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,c,s)}),(function(e){o("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return o("throw",e,c,s)}))}s(u.arg)}var a;i(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function P(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=k(a,r);if(c){if(c===d)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=p(e,t,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}function k(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,k(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var o=p(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function C(e){if(e){var t=e[c];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return y.prototype=m,i(w,"constructor",{value:m,configurable:!0}),i(m,"constructor",{value:y,configurable:!0}),y.displayName=l(m,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,u,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},S(O.prototype),l(O.prototype,s,(function(){return this})),e.AsyncIterator=O,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new O(f(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},S(w),l(w,u,"Generator"),l(w,c,(function(){return this})),l(w,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=C,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),E(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;E(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:C(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},e}var i=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{s(n.next(e))}catch(e){i(e)}}function c(e){try{s(n.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,c)}s((n=n.apply(e,t||[])).next())}))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.createLocalTracks=t.createLocalAudioTrack=t.createLocalVideoTrack=t.connect=t.version=void 0;var c=a(r(65657)),s=r(36754),u=r(65643),l=r(36917),f=a(r(43140)),p=a(r(80198)),d=a(r(86662)),h=r(97370),y=r(70044);function m(e){return i(this,void 0,void 0,o().mark((function t(){var r,i,a,c;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={},e||(e={}),void 0===e.audio&&(e.audio={}),i=Object.assign({},u.VideoPresets.qhd.resolution),"object"===n(e.video)&&e.video&&(Object.assign(i,e.video),e.video.resolution&&Object.assign(i,e.video.resolution)),!1===e.video?r.video=!1:r.video=i,r.audio=e.audio,t.next=9,navigator.mediaDevices.getUserMedia(r);case 9:return a=t.sent,c=[],a.getTracks().forEach((function(t){var r="audio"===t.kind?e.audio:e.video;"boolean"!=typeof r&&r||(r={}),c.push(v(t,r))})),t.abrupt("return",c);case 13:case"end":return t.stop()}}),t)})))}function v(e,t){var r;switch(t instanceof Object&&t.name&&(r=t.name),e.kind){case"audio":return new p.default(e,r,t);case"video":return new d.default(e,r,t);default:throw new l.TrackInvalidError("unsupported track type: ".concat(e.kind))}}Object.defineProperty(t,"version",{enumerable:!0,get:function(){return y.version}}),t.connect=function(e,t,r){return i(this,void 0,void 0,o().mark((function n(){var i,a,l,p,d,y,v;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r||(r={}),r.logLevel||(r.logLevel=u.LogLevel.info),void 0===r.audio&&(r.audio=!1),void 0===r.video&&(r.video=!1),c.default.setLevel(r.logLevel),i={},r.iceServers&&(i.iceServers=r.iceServers),a=new s.WSSignalClient,l=new f.default(a,i),n.next=11,l.connect(e,t,{autoSubscribe:null==r?void 0:r.autoSubscribe});case 11:if(p=r.tracks){n.next=17;break}if(!r.audio&&!r.video){n.next=17;break}return n.next=16,m({audio:r.audio,video:r.video});case 16:p=n.sent;case 17:if(!p){n.next=28;break}d=0;case 19:if(!(d<p.length)){n.next=28;break}return y=p[d],v={},y.kind===h.Track.Kind.Video.toString()||y.kind===h.Track.Kind.Video?(v.videoCodec=null==r?void 0:r.videoCodec,v.videoEncoding=null==r?void 0:r.videoEncoding,v.simulcast=null==r?void 0:r.simulcast):y.kind!==h.Track.Kind.Audio.toString()&&y.kind!==h.Track.Kind.Audio||(v.audioBitrate=r.audioBitrate),n.next=25,l.localParticipant.publishTrack(y,v);case 25:d+=1,n.next=19;break;case 28:return n.abrupt("return",l);case 29:case"end":return n.stop()}}),n)})))},t.createLocalVideoTrack=function(e){return i(this,void 0,void 0,o().mark((function t(){var r;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m({audio:!1,video:e});case 2:return r=t.sent,t.abrupt("return",r[0]);case 4:case"end":return t.stop()}}),t)})))},t.createLocalAudioTrack=function(e){return i(this,void 0,void 0,o().mark((function t(){var r;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m({audio:e,video:!1});case 2:return r=t.sent,t.abrupt("return",r[0]);case 4:case"end":return t.stop()}}),t)})))},t.createLocalTracks=m},65643:(e,t)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function n(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===r(i)?i:String(i)),o)}var i}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.VideoPresets43=t.VideoPresets=t.AudioPresets=t.VideoPreset=t.LogLevel=void 0,(o=t.LogLevel||(t.LogLevel={})).trace="trace",o.debug="debug",o.info="info",o.warn="warn",o.error="error",o.silent="silent";var i,a=function(){function e(t,r,n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.width=t,this.height=r,this.encoding={maxBitrate:n,maxFramerate:o}}var t,r;return t=e,(r=[{key:"resolution",get:function(){return{width:{ideal:this.width},height:{ideal:this.height},frameRate:{ideal:this.encoding.maxFramerate}}}}])&&n(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.VideoPreset=a,(i=t.AudioPresets||(t.AudioPresets={})).telephone={maxBitrate:12e3},i.speech={maxBitrate:2e4},i.music={maxBitrate:32e3},t.VideoPresets={qvga:new a(320,180,125e3,15),vga:new a(640,360,4e5,30),qhd:new a(960,540,8e5,30),hd:new a(1280,720,25e5,30),fhd:new a(1920,1080,4e6,30)},t.VideoPresets43={qvga:new a(240,180,1e5,15),vga:new a(480,360,32e4,30),qhd:new a(720,540,64e4,30),hd:new a(960,720,2e6,30),fhd:new a(1440,1080,32e5,30)}},5501:function(e,t,r){"use strict";function n(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return c=e.done,e},e:function(e){s=!0,a=e},f:function(){try{c||null==r.return||r.return()}finally{if(s)throw a}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.DataMessage=t.TrackInfo=t.ParticipantInfo=t.Codec=t.Room=t.participantInfo_StateToJSON=t.participantInfo_StateFromJSON=t.ParticipantInfo_State=t.trackTypeToJSON=t.trackTypeFromJSON=t.TrackType=t.protobufPackage=void 0;var a,c,s=i(r(15626)),u=i(r(33870));function l(e){switch(e){case 0:case"AUDIO":return a.AUDIO;case 1:case"VIDEO":return a.VIDEO;case 2:case"DATA":return a.DATA;default:return a.UNRECOGNIZED}}function f(e){switch(e){case a.AUDIO:return"AUDIO";case a.VIDEO:return"VIDEO";case a.DATA:return"DATA";default:return"UNKNOWN"}}function p(e){switch(e){case 0:case"JOINING":return c.JOINING;case 1:case"JOINED":return c.JOINED;case 2:case"ACTIVE":return c.ACTIVE;case 3:case"DISCONNECTED":return c.DISCONNECTED;default:return c.UNRECOGNIZED}}function d(e){switch(e){case c.JOINING:return"JOINING";case c.JOINED:return"JOINED";case c.ACTIVE:return"ACTIVE";case c.DISCONNECTED:return"DISCONNECTED";default:return"UNKNOWN"}}t.protobufPackage="livekit",function(e){e[e.AUDIO=0]="AUDIO",e[e.VIDEO=1]="VIDEO",e[e.DATA=2]="DATA",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(a=t.TrackType||(t.TrackType={})),t.trackTypeFromJSON=l,t.trackTypeToJSON=f,function(e){e[e.JOINING=0]="JOINING",e[e.JOINED=1]="JOINED",e[e.ACTIVE=2]="ACTIVE",e[e.DISCONNECTED=3]="DISCONNECTED",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(c=t.ParticipantInfo_State||(t.ParticipantInfo_State={})),t.participantInfo_StateFromJSON=p,t.participantInfo_StateToJSON=d;var h={sid:"",name:"",emptyTimeout:0,maxParticipants:0,creationTime:0,turnPassword:""};t.Room={encode:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.default.Writer.create();""!==e.sid&&r.uint32(10).string(e.sid),""!==e.name&&r.uint32(18).string(e.name),0!==e.emptyTimeout&&r.uint32(24).uint32(e.emptyTimeout),0!==e.maxParticipants&&r.uint32(32).uint32(e.maxParticipants),0!==e.creationTime&&r.uint32(40).int64(e.creationTime),""!==e.turnPassword&&r.uint32(50).string(e.turnPassword);var o,i=n(e.enabledCodecs);try{for(i.s();!(o=i.n()).done;){var a=o.value;t.Codec.encode(a,r.uint32(58).fork()).ldelim()}}catch(e){i.e(e)}finally{i.f()}return r},decode:function(e,r){var n=e instanceof u.default.Reader?e:new u.default.Reader(e),o=void 0===r?n.len:n.pos+r,i=Object.assign({},h);for(i.enabledCodecs=[];n.pos<o;){var a=n.uint32();switch(a>>>3){case 1:i.sid=n.string();break;case 2:i.name=n.string();break;case 3:i.emptyTimeout=n.uint32();break;case 4:i.maxParticipants=n.uint32();break;case 5:i.creationTime=O(n.int64());break;case 6:i.turnPassword=n.string();break;case 7:i.enabledCodecs.push(t.Codec.decode(n,n.uint32()));break;default:n.skipType(7&a)}}return i},fromJSON:function(e){var r=Object.assign({},h);if(r.enabledCodecs=[],void 0!==e.sid&&null!==e.sid?r.sid=String(e.sid):r.sid="",void 0!==e.name&&null!==e.name?r.name=String(e.name):r.name="",void 0!==e.emptyTimeout&&null!==e.emptyTimeout?r.emptyTimeout=Number(e.emptyTimeout):r.emptyTimeout=0,void 0!==e.maxParticipants&&null!==e.maxParticipants?r.maxParticipants=Number(e.maxParticipants):r.maxParticipants=0,void 0!==e.creationTime&&null!==e.creationTime?r.creationTime=Number(e.creationTime):r.creationTime=0,void 0!==e.turnPassword&&null!==e.turnPassword?r.turnPassword=String(e.turnPassword):r.turnPassword="",void 0!==e.enabledCodecs&&null!==e.enabledCodecs){var o,i=n(e.enabledCodecs);try{for(i.s();!(o=i.n()).done;){var a=o.value;r.enabledCodecs.push(t.Codec.fromJSON(a))}}catch(e){i.e(e)}finally{i.f()}}return r},toJSON:function(e){var r={};return void 0!==e.sid&&(r.sid=e.sid),void 0!==e.name&&(r.name=e.name),void 0!==e.emptyTimeout&&(r.emptyTimeout=e.emptyTimeout),void 0!==e.maxParticipants&&(r.maxParticipants=e.maxParticipants),void 0!==e.creationTime&&(r.creationTime=e.creationTime),void 0!==e.turnPassword&&(r.turnPassword=e.turnPassword),e.enabledCodecs?r.enabledCodecs=e.enabledCodecs.map((function(e){return e?t.Codec.toJSON(e):void 0})):r.enabledCodecs=[],r},fromPartial:function(e){var r=Object.assign({},h);if(r.enabledCodecs=[],void 0!==e.sid&&null!==e.sid?r.sid=e.sid:r.sid="",void 0!==e.name&&null!==e.name?r.name=e.name:r.name="",void 0!==e.emptyTimeout&&null!==e.emptyTimeout?r.emptyTimeout=e.emptyTimeout:r.emptyTimeout=0,void 0!==e.maxParticipants&&null!==e.maxParticipants?r.maxParticipants=e.maxParticipants:r.maxParticipants=0,void 0!==e.creationTime&&null!==e.creationTime?r.creationTime=e.creationTime:r.creationTime=0,void 0!==e.turnPassword&&null!==e.turnPassword?r.turnPassword=e.turnPassword:r.turnPassword="",void 0!==e.enabledCodecs&&null!==e.enabledCodecs){var o,i=n(e.enabledCodecs);try{for(i.s();!(o=i.n()).done;){var a=o.value;r.enabledCodecs.push(t.Codec.fromPartial(a))}}catch(e){i.e(e)}finally{i.f()}}return r}};var y={mime:"",fmtpLine:""};t.Codec={encode:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.default.Writer.create();return""!==e.mime&&t.uint32(10).string(e.mime),""!==e.fmtpLine&&t.uint32(18).string(e.fmtpLine),t},decode:function(e,t){for(var r=e instanceof u.default.Reader?e:new u.default.Reader(e),n=void 0===t?r.len:r.pos+t,o=Object.assign({},y);r.pos<n;){var i=r.uint32();switch(i>>>3){case 1:o.mime=r.string();break;case 2:o.fmtpLine=r.string();break;default:r.skipType(7&i)}}return o},fromJSON:function(e){var t=Object.assign({},y);return void 0!==e.mime&&null!==e.mime?t.mime=String(e.mime):t.mime="",void 0!==e.fmtpLine&&null!==e.fmtpLine?t.fmtpLine=String(e.fmtpLine):t.fmtpLine="",t},toJSON:function(e){var t={};return void 0!==e.mime&&(t.mime=e.mime),void 0!==e.fmtpLine&&(t.fmtpLine=e.fmtpLine),t},fromPartial:function(e){var t=Object.assign({},y);return void 0!==e.mime&&null!==e.mime?t.mime=e.mime:t.mime="",void 0!==e.fmtpLine&&null!==e.fmtpLine?t.fmtpLine=e.fmtpLine:t.fmtpLine="",t}};var m={sid:"",identity:"",state:0,metadata:"",joinedAt:0};t.ParticipantInfo={encode:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.default.Writer.create();""!==e.sid&&r.uint32(10).string(e.sid),""!==e.identity&&r.uint32(18).string(e.identity),0!==e.state&&r.uint32(24).int32(e.state);var o,i=n(e.tracks);try{for(i.s();!(o=i.n()).done;){var a=o.value;t.TrackInfo.encode(a,r.uint32(34).fork()).ldelim()}}catch(e){i.e(e)}finally{i.f()}return""!==e.metadata&&r.uint32(42).string(e.metadata),0!==e.joinedAt&&r.uint32(48).int64(e.joinedAt),r},decode:function(e,r){var n=e instanceof u.default.Reader?e:new u.default.Reader(e),o=void 0===r?n.len:n.pos+r,i=Object.assign({},m);for(i.tracks=[];n.pos<o;){var a=n.uint32();switch(a>>>3){case 1:i.sid=n.string();break;case 2:i.identity=n.string();break;case 3:i.state=n.int32();break;case 4:i.tracks.push(t.TrackInfo.decode(n,n.uint32()));break;case 5:i.metadata=n.string();break;case 6:i.joinedAt=O(n.int64());break;default:n.skipType(7&a)}}return i},fromJSON:function(e){var r=Object.assign({},m);if(r.tracks=[],void 0!==e.sid&&null!==e.sid?r.sid=String(e.sid):r.sid="",void 0!==e.identity&&null!==e.identity?r.identity=String(e.identity):r.identity="",void 0!==e.state&&null!==e.state?r.state=p(e.state):r.state=0,void 0!==e.tracks&&null!==e.tracks){var o,i=n(e.tracks);try{for(i.s();!(o=i.n()).done;){var a=o.value;r.tracks.push(t.TrackInfo.fromJSON(a))}}catch(e){i.e(e)}finally{i.f()}}return void 0!==e.metadata&&null!==e.metadata?r.metadata=String(e.metadata):r.metadata="",void 0!==e.joinedAt&&null!==e.joinedAt?r.joinedAt=Number(e.joinedAt):r.joinedAt=0,r},toJSON:function(e){var r={};return void 0!==e.sid&&(r.sid=e.sid),void 0!==e.identity&&(r.identity=e.identity),void 0!==e.state&&(r.state=d(e.state)),e.tracks?r.tracks=e.tracks.map((function(e){return e?t.TrackInfo.toJSON(e):void 0})):r.tracks=[],void 0!==e.metadata&&(r.metadata=e.metadata),void 0!==e.joinedAt&&(r.joinedAt=e.joinedAt),r},fromPartial:function(e){var r=Object.assign({},m);if(r.tracks=[],void 0!==e.sid&&null!==e.sid?r.sid=e.sid:r.sid="",void 0!==e.identity&&null!==e.identity?r.identity=e.identity:r.identity="",void 0!==e.state&&null!==e.state?r.state=e.state:r.state=0,void 0!==e.tracks&&null!==e.tracks){var o,i=n(e.tracks);try{for(i.s();!(o=i.n()).done;){var a=o.value;r.tracks.push(t.TrackInfo.fromPartial(a))}}catch(e){i.e(e)}finally{i.f()}}return void 0!==e.metadata&&null!==e.metadata?r.metadata=e.metadata:r.metadata="",void 0!==e.joinedAt&&null!==e.joinedAt?r.joinedAt=e.joinedAt:r.joinedAt=0,r}};var v={sid:"",type:0,name:"",muted:!1,width:0,height:0,simulcast:!1};t.TrackInfo={encode:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.default.Writer.create();return""!==e.sid&&t.uint32(10).string(e.sid),0!==e.type&&t.uint32(16).int32(e.type),""!==e.name&&t.uint32(26).string(e.name),!0===e.muted&&t.uint32(32).bool(e.muted),0!==e.width&&t.uint32(40).uint32(e.width),0!==e.height&&t.uint32(48).uint32(e.height),!0===e.simulcast&&t.uint32(56).bool(e.simulcast),t},decode:function(e,t){for(var r=e instanceof u.default.Reader?e:new u.default.Reader(e),n=void 0===t?r.len:r.pos+t,o=Object.assign({},v);r.pos<n;){var i=r.uint32();switch(i>>>3){case 1:o.sid=r.string();break;case 2:o.type=r.int32();break;case 3:o.name=r.string();break;case 4:o.muted=r.bool();break;case 5:o.width=r.uint32();break;case 6:o.height=r.uint32();break;case 7:o.simulcast=r.bool();break;default:r.skipType(7&i)}}return o},fromJSON:function(e){var t=Object.assign({},v);return void 0!==e.sid&&null!==e.sid?t.sid=String(e.sid):t.sid="",void 0!==e.type&&null!==e.type?t.type=l(e.type):t.type=0,void 0!==e.name&&null!==e.name?t.name=String(e.name):t.name="",void 0!==e.muted&&null!==e.muted?t.muted=Boolean(e.muted):t.muted=!1,void 0!==e.width&&null!==e.width?t.width=Number(e.width):t.width=0,void 0!==e.height&&null!==e.height?t.height=Number(e.height):t.height=0,void 0!==e.simulcast&&null!==e.simulcast?t.simulcast=Boolean(e.simulcast):t.simulcast=!1,t},toJSON:function(e){var t={};return void 0!==e.sid&&(t.sid=e.sid),void 0!==e.type&&(t.type=f(e.type)),void 0!==e.name&&(t.name=e.name),void 0!==e.muted&&(t.muted=e.muted),void 0!==e.width&&(t.width=e.width),void 0!==e.height&&(t.height=e.height),void 0!==e.simulcast&&(t.simulcast=e.simulcast),t},fromPartial:function(e){var t=Object.assign({},v);return void 0!==e.sid&&null!==e.sid?t.sid=e.sid:t.sid="",void 0!==e.type&&null!==e.type?t.type=e.type:t.type=0,void 0!==e.name&&null!==e.name?t.name=e.name:t.name="",void 0!==e.muted&&null!==e.muted?t.muted=e.muted:t.muted=!1,void 0!==e.width&&null!==e.width?t.width=e.width:t.width=0,void 0!==e.height&&null!==e.height?t.height=e.height:t.height=0,void 0!==e.simulcast&&null!==e.simulcast?t.simulcast=e.simulcast:t.simulcast=!1,t}};var b={};t.DataMessage={encode:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.default.Writer.create();return void 0!==e.text&&t.uint32(10).string(e.text),void 0!==e.binary&&t.uint32(18).bytes(e.binary),t},decode:function(e,t){for(var r=e instanceof u.default.Reader?e:new u.default.Reader(e),n=void 0===t?r.len:r.pos+t,o=Object.assign({},b);r.pos<n;){var i=r.uint32();switch(i>>>3){case 1:o.text=r.string();break;case 2:o.binary=r.bytes();break;default:r.skipType(7&i)}}return o},fromJSON:function(e){var t=Object.assign({},b);return void 0!==e.text&&null!==e.text?t.text=String(e.text):t.text=void 0,void 0!==e.binary&&null!==e.binary&&(t.binary=function(e){for(var t=w(e),r=new Uint8Array(t.length),n=0;n<t.length;++n)r[n]=t.charCodeAt(n);return r}(e.binary)),t},toJSON:function(e){var t={};return void 0!==e.text&&(t.text=e.text),void 0!==e.binary&&(t.binary=void 0!==e.binary?function(e){for(var t=[],r=0;r<e.byteLength;++r)t.push(String.fromCharCode(e[r]));return S(t.join(""))}(e.binary):void 0),t},fromPartial:function(e){var t=Object.assign({},b);return void 0!==e.text&&null!==e.text?t.text=e.text:t.text=void 0,void 0!==e.binary&&null!==e.binary?t.binary=e.binary:t.binary=void 0,t}};var g=function(){if(void 0!==g)return g;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==r.g)return r.g;throw"Unable to locate global object"}(),w=g.atob||function(e){return g.Buffer.from(e,"base64").toString("binary")},S=g.btoa||function(e){return g.Buffer.from(e,"binary").toString("base64")};function O(e){if(e.gt(Number.MAX_SAFE_INTEGER))throw new g.Error("Value is larger than Number.MAX_SAFE_INTEGER");return e.toNumber()}u.default.util.Long!==s.default&&(u.default.util.Long=s.default,u.default.configure())},71970:function(e,t,r){"use strict";function n(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return c=e.done,e},e:function(e){s=!0,a=e},f:function(){try{c||null==r.return||r.return()}finally{if(s)throw a}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.UserPacket=t.DataPacket=t.ICEServer=t.LeaveRequest=t.UpdateTrackSettings=t.UpdateSubscription=t.SpeakerInfo=t.ActiveSpeakerUpdate=t.ParticipantUpdate=t.SessionDescription=t.TrackPublishedResponse=t.JoinResponse=t.SetSimulcastLayers=t.MuteTrackRequest=t.TrickleRequest=t.AddTrackRequest=t.SignalResponse=t.SignalRequest=t.dataPacket_KindToJSON=t.dataPacket_KindFromJSON=t.DataPacket_Kind=t.videoQualityToJSON=t.videoQualityFromJSON=t.VideoQuality=t.signalTargetToJSON=t.signalTargetFromJSON=t.SignalTarget=t.protobufPackage=void 0;var a,c,s,u=i(r(15626)),l=i(r(33870)),f=r(5501);function p(e){switch(e){case 0:case"PUBLISHER":return a.PUBLISHER;case 1:case"SUBSCRIBER":return a.SUBSCRIBER;default:return a.UNRECOGNIZED}}function d(e){switch(e){case a.PUBLISHER:return"PUBLISHER";case a.SUBSCRIBER:return"SUBSCRIBER";default:return"UNKNOWN"}}function h(e){switch(e){case 0:case"LOW":return c.LOW;case 1:case"MEDIUM":return c.MEDIUM;case 2:case"HIGH":return c.HIGH;default:return c.UNRECOGNIZED}}function y(e){switch(e){case c.LOW:return"LOW";case c.MEDIUM:return"MEDIUM";case c.HIGH:return"HIGH";default:return"UNKNOWN"}}function m(e){switch(e){case 0:case"RELIABLE":return s.RELIABLE;case 1:case"LOSSY":return s.LOSSY;default:return s.UNRECOGNIZED}}function v(e){switch(e){case s.RELIABLE:return"RELIABLE";case s.LOSSY:return"LOSSY";default:return"UNKNOWN"}}t.protobufPackage="livekit",function(e){e[e.PUBLISHER=0]="PUBLISHER",e[e.SUBSCRIBER=1]="SUBSCRIBER",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(a=t.SignalTarget||(t.SignalTarget={})),t.signalTargetFromJSON=p,t.signalTargetToJSON=d,function(e){e[e.LOW=0]="LOW",e[e.MEDIUM=1]="MEDIUM",e[e.HIGH=2]="HIGH",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(c=t.VideoQuality||(t.VideoQuality={})),t.videoQualityFromJSON=h,t.videoQualityToJSON=y,function(e){e[e.RELIABLE=0]="RELIABLE",e[e.LOSSY=1]="LOSSY",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(s=t.DataPacket_Kind||(t.DataPacket_Kind={})),t.dataPacket_KindFromJSON=m,t.dataPacket_KindToJSON=v;var b={};t.SignalRequest={encode:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.default.Writer.create();return void 0!==e.offer&&t.SessionDescription.encode(e.offer,r.uint32(10).fork()).ldelim(),void 0!==e.answer&&t.SessionDescription.encode(e.answer,r.uint32(18).fork()).ldelim(),void 0!==e.trickle&&t.TrickleRequest.encode(e.trickle,r.uint32(26).fork()).ldelim(),void 0!==e.addTrack&&t.AddTrackRequest.encode(e.addTrack,r.uint32(34).fork()).ldelim(),void 0!==e.mute&&t.MuteTrackRequest.encode(e.mute,r.uint32(42).fork()).ldelim(),void 0!==e.subscription&&t.UpdateSubscription.encode(e.subscription,r.uint32(50).fork()).ldelim(),void 0!==e.trackSetting&&t.UpdateTrackSettings.encode(e.trackSetting,r.uint32(58).fork()).ldelim(),void 0!==e.leave&&t.LeaveRequest.encode(e.leave,r.uint32(66).fork()).ldelim(),void 0!==e.simulcast&&t.SetSimulcastLayers.encode(e.simulcast,r.uint32(74).fork()).ldelim(),r},decode:function(e,r){for(var n=e instanceof l.default.Reader?e:new l.default.Reader(e),o=void 0===r?n.len:n.pos+r,i=Object.assign({},b);n.pos<o;){var a=n.uint32();switch(a>>>3){case 1:i.offer=t.SessionDescription.decode(n,n.uint32());break;case 2:i.answer=t.SessionDescription.decode(n,n.uint32());break;case 3:i.trickle=t.TrickleRequest.decode(n,n.uint32());break;case 4:i.addTrack=t.AddTrackRequest.decode(n,n.uint32());break;case 5:i.mute=t.MuteTrackRequest.decode(n,n.uint32());break;case 6:i.subscription=t.UpdateSubscription.decode(n,n.uint32());break;case 7:i.trackSetting=t.UpdateTrackSettings.decode(n,n.uint32());break;case 8:i.leave=t.LeaveRequest.decode(n,n.uint32());break;case 9:i.simulcast=t.SetSimulcastLayers.decode(n,n.uint32());break;default:n.skipType(7&a)}}return i},fromJSON:function(e){var r=Object.assign({},b);return void 0!==e.offer&&null!==e.offer?r.offer=t.SessionDescription.fromJSON(e.offer):r.offer=void 0,void 0!==e.answer&&null!==e.answer?r.answer=t.SessionDescription.fromJSON(e.answer):r.answer=void 0,void 0!==e.trickle&&null!==e.trickle?r.trickle=t.TrickleRequest.fromJSON(e.trickle):r.trickle=void 0,void 0!==e.addTrack&&null!==e.addTrack?r.addTrack=t.AddTrackRequest.fromJSON(e.addTrack):r.addTrack=void 0,void 0!==e.mute&&null!==e.mute?r.mute=t.MuteTrackRequest.fromJSON(e.mute):r.mute=void 0,void 0!==e.subscription&&null!==e.subscription?r.subscription=t.UpdateSubscription.fromJSON(e.subscription):r.subscription=void 0,void 0!==e.trackSetting&&null!==e.trackSetting?r.trackSetting=t.UpdateTrackSettings.fromJSON(e.trackSetting):r.trackSetting=void 0,void 0!==e.leave&&null!==e.leave?r.leave=t.LeaveRequest.fromJSON(e.leave):r.leave=void 0,void 0!==e.simulcast&&null!==e.simulcast?r.simulcast=t.SetSimulcastLayers.fromJSON(e.simulcast):r.simulcast=void 0,r},toJSON:function(e){var r={};return void 0!==e.offer&&(r.offer=e.offer?t.SessionDescription.toJSON(e.offer):void 0),void 0!==e.answer&&(r.answer=e.answer?t.SessionDescription.toJSON(e.answer):void 0),void 0!==e.trickle&&(r.trickle=e.trickle?t.TrickleRequest.toJSON(e.trickle):void 0),void 0!==e.addTrack&&(r.addTrack=e.addTrack?t.AddTrackRequest.toJSON(e.addTrack):void 0),void 0!==e.mute&&(r.mute=e.mute?t.MuteTrackRequest.toJSON(e.mute):void 0),void 0!==e.subscription&&(r.subscription=e.subscription?t.UpdateSubscription.toJSON(e.subscription):void 0),void 0!==e.trackSetting&&(r.trackSetting=e.trackSetting?t.UpdateTrackSettings.toJSON(e.trackSetting):void 0),void 0!==e.leave&&(r.leave=e.leave?t.LeaveRequest.toJSON(e.leave):void 0),void 0!==e.simulcast&&(r.simulcast=e.simulcast?t.SetSimulcastLayers.toJSON(e.simulcast):void 0),r},fromPartial:function(e){var r=Object.assign({},b);return void 0!==e.offer&&null!==e.offer?r.offer=t.SessionDescription.fromPartial(e.offer):r.offer=void 0,void 0!==e.answer&&null!==e.answer?r.answer=t.SessionDescription.fromPartial(e.answer):r.answer=void 0,void 0!==e.trickle&&null!==e.trickle?r.trickle=t.TrickleRequest.fromPartial(e.trickle):r.trickle=void 0,void 0!==e.addTrack&&null!==e.addTrack?r.addTrack=t.AddTrackRequest.fromPartial(e.addTrack):r.addTrack=void 0,void 0!==e.mute&&null!==e.mute?r.mute=t.MuteTrackRequest.fromPartial(e.mute):r.mute=void 0,void 0!==e.subscription&&null!==e.subscription?r.subscription=t.UpdateSubscription.fromPartial(e.subscription):r.subscription=void 0,void 0!==e.trackSetting&&null!==e.trackSetting?r.trackSetting=t.UpdateTrackSettings.fromPartial(e.trackSetting):r.trackSetting=void 0,void 0!==e.leave&&null!==e.leave?r.leave=t.LeaveRequest.fromPartial(e.leave):r.leave=void 0,void 0!==e.simulcast&&null!==e.simulcast?r.simulcast=t.SetSimulcastLayers.fromPartial(e.simulcast):r.simulcast=void 0,r}};var g={};t.SignalResponse={encode:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.default.Writer.create();return void 0!==e.join&&t.JoinResponse.encode(e.join,r.uint32(10).fork()).ldelim(),void 0!==e.answer&&t.SessionDescription.encode(e.answer,r.uint32(18).fork()).ldelim(),void 0!==e.offer&&t.SessionDescription.encode(e.offer,r.uint32(26).fork()).ldelim(),void 0!==e.trickle&&t.TrickleRequest.encode(e.trickle,r.uint32(34).fork()).ldelim(),void 0!==e.update&&t.ParticipantUpdate.encode(e.update,r.uint32(42).fork()).ldelim(),void 0!==e.trackPublished&&t.TrackPublishedResponse.encode(e.trackPublished,r.uint32(50).fork()).ldelim(),void 0!==e.speaker&&t.ActiveSpeakerUpdate.encode(e.speaker,r.uint32(58).fork()).ldelim(),void 0!==e.leave&&t.LeaveRequest.encode(e.leave,r.uint32(66).fork()).ldelim(),r},decode:function(e,r){for(var n=e instanceof l.default.Reader?e:new l.default.Reader(e),o=void 0===r?n.len:n.pos+r,i=Object.assign({},g);n.pos<o;){var a=n.uint32();switch(a>>>3){case 1:i.join=t.JoinResponse.decode(n,n.uint32());break;case 2:i.answer=t.SessionDescription.decode(n,n.uint32());break;case 3:i.offer=t.SessionDescription.decode(n,n.uint32());break;case 4:i.trickle=t.TrickleRequest.decode(n,n.uint32());break;case 5:i.update=t.ParticipantUpdate.decode(n,n.uint32());break;case 6:i.trackPublished=t.TrackPublishedResponse.decode(n,n.uint32());break;case 7:i.speaker=t.ActiveSpeakerUpdate.decode(n,n.uint32());break;case 8:i.leave=t.LeaveRequest.decode(n,n.uint32());break;default:n.skipType(7&a)}}return i},fromJSON:function(e){var r=Object.assign({},g);return void 0!==e.join&&null!==e.join?r.join=t.JoinResponse.fromJSON(e.join):r.join=void 0,void 0!==e.answer&&null!==e.answer?r.answer=t.SessionDescription.fromJSON(e.answer):r.answer=void 0,void 0!==e.offer&&null!==e.offer?r.offer=t.SessionDescription.fromJSON(e.offer):r.offer=void 0,void 0!==e.trickle&&null!==e.trickle?r.trickle=t.TrickleRequest.fromJSON(e.trickle):r.trickle=void 0,void 0!==e.update&&null!==e.update?r.update=t.ParticipantUpdate.fromJSON(e.update):r.update=void 0,void 0!==e.trackPublished&&null!==e.trackPublished?r.trackPublished=t.TrackPublishedResponse.fromJSON(e.trackPublished):r.trackPublished=void 0,void 0!==e.speaker&&null!==e.speaker?r.speaker=t.ActiveSpeakerUpdate.fromJSON(e.speaker):r.speaker=void 0,void 0!==e.leave&&null!==e.leave?r.leave=t.LeaveRequest.fromJSON(e.leave):r.leave=void 0,r},toJSON:function(e){var r={};return void 0!==e.join&&(r.join=e.join?t.JoinResponse.toJSON(e.join):void 0),void 0!==e.answer&&(r.answer=e.answer?t.SessionDescription.toJSON(e.answer):void 0),void 0!==e.offer&&(r.offer=e.offer?t.SessionDescription.toJSON(e.offer):void 0),void 0!==e.trickle&&(r.trickle=e.trickle?t.TrickleRequest.toJSON(e.trickle):void 0),void 0!==e.update&&(r.update=e.update?t.ParticipantUpdate.toJSON(e.update):void 0),void 0!==e.trackPublished&&(r.trackPublished=e.trackPublished?t.TrackPublishedResponse.toJSON(e.trackPublished):void 0),void 0!==e.speaker&&(r.speaker=e.speaker?t.ActiveSpeakerUpdate.toJSON(e.speaker):void 0),void 0!==e.leave&&(r.leave=e.leave?t.LeaveRequest.toJSON(e.leave):void 0),r},fromPartial:function(e){var r=Object.assign({},g);return void 0!==e.join&&null!==e.join?r.join=t.JoinResponse.fromPartial(e.join):r.join=void 0,void 0!==e.answer&&null!==e.answer?r.answer=t.SessionDescription.fromPartial(e.answer):r.answer=void 0,void 0!==e.offer&&null!==e.offer?r.offer=t.SessionDescription.fromPartial(e.offer):r.offer=void 0,void 0!==e.trickle&&null!==e.trickle?r.trickle=t.TrickleRequest.fromPartial(e.trickle):r.trickle=void 0,void 0!==e.update&&null!==e.update?r.update=t.ParticipantUpdate.fromPartial(e.update):r.update=void 0,void 0!==e.trackPublished&&null!==e.trackPublished?r.trackPublished=t.TrackPublishedResponse.fromPartial(e.trackPublished):r.trackPublished=void 0,void 0!==e.speaker&&null!==e.speaker?r.speaker=t.ActiveSpeakerUpdate.fromPartial(e.speaker):r.speaker=void 0,void 0!==e.leave&&null!==e.leave?r.leave=t.LeaveRequest.fromPartial(e.leave):r.leave=void 0,r}};var w={cid:"",name:"",type:0,width:0,height:0};t.AddTrackRequest={encode:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.default.Writer.create();return""!==e.cid&&t.uint32(10).string(e.cid),""!==e.name&&t.uint32(18).string(e.name),0!==e.type&&t.uint32(24).int32(e.type),0!==e.width&&t.uint32(32).uint32(e.width),0!==e.height&&t.uint32(40).uint32(e.height),t},decode:function(e,t){for(var r=e instanceof l.default.Reader?e:new l.default.Reader(e),n=void 0===t?r.len:r.pos+t,o=Object.assign({},w);r.pos<n;){var i=r.uint32();switch(i>>>3){case 1:o.cid=r.string();break;case 2:o.name=r.string();break;case 3:o.type=r.int32();break;case 4:o.width=r.uint32();break;case 5:o.height=r.uint32();break;default:r.skipType(7&i)}}return o},fromJSON:function(e){var t=Object.assign({},w);return void 0!==e.cid&&null!==e.cid?t.cid=String(e.cid):t.cid="",void 0!==e.name&&null!==e.name?t.name=String(e.name):t.name="",void 0!==e.type&&null!==e.type?t.type=f.trackTypeFromJSON(e.type):t.type=0,void 0!==e.width&&null!==e.width?t.width=Number(e.width):t.width=0,void 0!==e.height&&null!==e.height?t.height=Number(e.height):t.height=0,t},toJSON:function(e){var t={};return void 0!==e.cid&&(t.cid=e.cid),void 0!==e.name&&(t.name=e.name),void 0!==e.type&&(t.type=f.trackTypeToJSON(e.type)),void 0!==e.width&&(t.width=e.width),void 0!==e.height&&(t.height=e.height),t},fromPartial:function(e){var t=Object.assign({},w);return void 0!==e.cid&&null!==e.cid?t.cid=e.cid:t.cid="",void 0!==e.name&&null!==e.name?t.name=e.name:t.name="",void 0!==e.type&&null!==e.type?t.type=e.type:t.type=0,void 0!==e.width&&null!==e.width?t.width=e.width:t.width=0,void 0!==e.height&&null!==e.height?t.height=e.height:t.height=0,t}};var S={candidateInit:"",target:0};t.TrickleRequest={encode:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.default.Writer.create();return""!==e.candidateInit&&t.uint32(10).string(e.candidateInit),0!==e.target&&t.uint32(16).int32(e.target),t},decode:function(e,t){for(var r=e instanceof l.default.Reader?e:new l.default.Reader(e),n=void 0===t?r.len:r.pos+t,o=Object.assign({},S);r.pos<n;){var i=r.uint32();switch(i>>>3){case 1:o.candidateInit=r.string();break;case 2:o.target=r.int32();break;default:r.skipType(7&i)}}return o},fromJSON:function(e){var t=Object.assign({},S);return void 0!==e.candidateInit&&null!==e.candidateInit?t.candidateInit=String(e.candidateInit):t.candidateInit="",void 0!==e.target&&null!==e.target?t.target=p(e.target):t.target=0,t},toJSON:function(e){var t={};return void 0!==e.candidateInit&&(t.candidateInit=e.candidateInit),void 0!==e.target&&(t.target=d(e.target)),t},fromPartial:function(e){var t=Object.assign({},S);return void 0!==e.candidateInit&&null!==e.candidateInit?t.candidateInit=e.candidateInit:t.candidateInit="",void 0!==e.target&&null!==e.target?t.target=e.target:t.target=0,t}};var O={sid:"",muted:!1};t.MuteTrackRequest={encode:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.default.Writer.create();return""!==e.sid&&t.uint32(10).string(e.sid),!0===e.muted&&t.uint32(16).bool(e.muted),t},decode:function(e,t){for(var r=e instanceof l.default.Reader?e:new l.default.Reader(e),n=void 0===t?r.len:r.pos+t,o=Object.assign({},O);r.pos<n;){var i=r.uint32();switch(i>>>3){case 1:o.sid=r.string();break;case 2:o.muted=r.bool();break;default:r.skipType(7&i)}}return o},fromJSON:function(e){var t=Object.assign({},O);return void 0!==e.sid&&null!==e.sid?t.sid=String(e.sid):t.sid="",void 0!==e.muted&&null!==e.muted?t.muted=Boolean(e.muted):t.muted=!1,t},toJSON:function(e){var t={};return void 0!==e.sid&&(t.sid=e.sid),void 0!==e.muted&&(t.muted=e.muted),t},fromPartial:function(e){var t=Object.assign({},O);return void 0!==e.sid&&null!==e.sid?t.sid=e.sid:t.sid="",void 0!==e.muted&&null!==e.muted?t.muted=e.muted:t.muted=!1,t}};var P={trackSid:"",layers:0};t.SetSimulcastLayers={encode:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.default.Writer.create();""!==e.trackSid&&t.uint32(10).string(e.trackSid),t.uint32(18).fork();var r,o=n(e.layers);try{for(o.s();!(r=o.n()).done;){var i=r.value;t.int32(i)}}catch(e){o.e(e)}finally{o.f()}return t.ldelim(),t},decode:function(e,t){var r=e instanceof l.default.Reader?e:new l.default.Reader(e),n=void 0===t?r.len:r.pos+t,o=Object.assign({},P);for(o.layers=[];r.pos<n;){var i=r.uint32();switch(i>>>3){case 1:o.trackSid=r.string();break;case 2:if(2==(7&i))for(var a=r.uint32()+r.pos;r.pos<a;)o.layers.push(r.int32());else o.layers.push(r.int32());break;default:r.skipType(7&i)}}return o},fromJSON:function(e){var t=Object.assign({},P);if(t.layers=[],void 0!==e.trackSid&&null!==e.trackSid?t.trackSid=String(e.trackSid):t.trackSid="",void 0!==e.layers&&null!==e.layers){var r,o=n(e.layers);try{for(o.s();!(r=o.n()).done;){var i=r.value;t.layers.push(h(i))}}catch(e){o.e(e)}finally{o.f()}}return t},toJSON:function(e){var t={};return void 0!==e.trackSid&&(t.trackSid=e.trackSid),e.layers?t.layers=e.layers.map((function(e){return y(e)})):t.layers=[],t},fromPartial:function(e){var t=Object.assign({},P);if(t.layers=[],void 0!==e.trackSid&&null!==e.trackSid?t.trackSid=e.trackSid:t.trackSid="",void 0!==e.layers&&null!==e.layers){var r,o=n(e.layers);try{for(o.s();!(r=o.n()).done;){var i=r.value;t.layers.push(i)}}catch(e){o.e(e)}finally{o.f()}}return t}};var k={serverVersion:""};t.JoinResponse={encode:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.default.Writer.create();void 0!==e.room&&f.Room.encode(e.room,r.uint32(10).fork()).ldelim(),void 0!==e.participant&&f.ParticipantInfo.encode(e.participant,r.uint32(18).fork()).ldelim();var o,i=n(e.otherParticipants);try{for(i.s();!(o=i.n()).done;){var a=o.value;f.ParticipantInfo.encode(a,r.uint32(26).fork()).ldelim()}}catch(e){i.e(e)}finally{i.f()}""!==e.serverVersion&&r.uint32(34).string(e.serverVersion);var c,s=n(e.iceServers);try{for(s.s();!(c=s.n()).done;){var u=c.value;t.ICEServer.encode(u,r.uint32(42).fork()).ldelim()}}catch(e){s.e(e)}finally{s.f()}return r},decode:function(e,r){var n=e instanceof l.default.Reader?e:new l.default.Reader(e),o=void 0===r?n.len:n.pos+r,i=Object.assign({},k);for(i.otherParticipants=[],i.iceServers=[];n.pos<o;){var a=n.uint32();switch(a>>>3){case 1:i.room=f.Room.decode(n,n.uint32());break;case 2:i.participant=f.ParticipantInfo.decode(n,n.uint32());break;case 3:i.otherParticipants.push(f.ParticipantInfo.decode(n,n.uint32()));break;case 4:i.serverVersion=n.string();break;case 5:i.iceServers.push(t.ICEServer.decode(n,n.uint32()));break;default:n.skipType(7&a)}}return i},fromJSON:function(e){var r=Object.assign({},k);if(r.otherParticipants=[],r.iceServers=[],void 0!==e.room&&null!==e.room?r.room=f.Room.fromJSON(e.room):r.room=void 0,void 0!==e.participant&&null!==e.participant?r.participant=f.ParticipantInfo.fromJSON(e.participant):r.participant=void 0,void 0!==e.otherParticipants&&null!==e.otherParticipants){var o,i=n(e.otherParticipants);try{for(i.s();!(o=i.n()).done;){var a=o.value;r.otherParticipants.push(f.ParticipantInfo.fromJSON(a))}}catch(e){i.e(e)}finally{i.f()}}if(void 0!==e.serverVersion&&null!==e.serverVersion?r.serverVersion=String(e.serverVersion):r.serverVersion="",void 0!==e.iceServers&&null!==e.iceServers){var c,s=n(e.iceServers);try{for(s.s();!(c=s.n()).done;){var u=c.value;r.iceServers.push(t.ICEServer.fromJSON(u))}}catch(e){s.e(e)}finally{s.f()}}return r},toJSON:function(e){var r={};return void 0!==e.room&&(r.room=e.room?f.Room.toJSON(e.room):void 0),void 0!==e.participant&&(r.participant=e.participant?f.ParticipantInfo.toJSON(e.participant):void 0),e.otherParticipants?r.otherParticipants=e.otherParticipants.map((function(e){return e?f.ParticipantInfo.toJSON(e):void 0})):r.otherParticipants=[],void 0!==e.serverVersion&&(r.serverVersion=e.serverVersion),e.iceServers?r.iceServers=e.iceServers.map((function(e){return e?t.ICEServer.toJSON(e):void 0})):r.iceServers=[],r},fromPartial:function(e){var r=Object.assign({},k);if(r.otherParticipants=[],r.iceServers=[],void 0!==e.room&&null!==e.room?r.room=f.Room.fromPartial(e.room):r.room=void 0,void 0!==e.participant&&null!==e.participant?r.participant=f.ParticipantInfo.fromPartial(e.participant):r.participant=void 0,void 0!==e.otherParticipants&&null!==e.otherParticipants){var o,i=n(e.otherParticipants);try{for(i.s();!(o=i.n()).done;){var a=o.value;r.otherParticipants.push(f.ParticipantInfo.fromPartial(a))}}catch(e){i.e(e)}finally{i.f()}}if(void 0!==e.serverVersion&&null!==e.serverVersion?r.serverVersion=e.serverVersion:r.serverVersion="",void 0!==e.iceServers&&null!==e.iceServers){var c,s=n(e.iceServers);try{for(s.s();!(c=s.n()).done;){var u=c.value;r.iceServers.push(t.ICEServer.fromPartial(u))}}catch(e){s.e(e)}finally{s.f()}}return r}};var _={cid:""};t.TrackPublishedResponse={encode:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.default.Writer.create();return""!==e.cid&&t.uint32(10).string(e.cid),void 0!==e.track&&f.TrackInfo.encode(e.track,t.uint32(18).fork()).ldelim(),t},decode:function(e,t){for(var r=e instanceof l.default.Reader?e:new l.default.Reader(e),n=void 0===t?r.len:r.pos+t,o=Object.assign({},_);r.pos<n;){var i=r.uint32();switch(i>>>3){case 1:o.cid=r.string();break;case 2:o.track=f.TrackInfo.decode(r,r.uint32());break;default:r.skipType(7&i)}}return o},fromJSON:function(e){var t=Object.assign({},_);return void 0!==e.cid&&null!==e.cid?t.cid=String(e.cid):t.cid="",void 0!==e.track&&null!==e.track?t.track=f.TrackInfo.fromJSON(e.track):t.track=void 0,t},toJSON:function(e){var t={};return void 0!==e.cid&&(t.cid=e.cid),void 0!==e.track&&(t.track=e.track?f.TrackInfo.toJSON(e.track):void 0),t},fromPartial:function(e){var t=Object.assign({},_);return void 0!==e.cid&&null!==e.cid?t.cid=e.cid:t.cid="",void 0!==e.track&&null!==e.track?t.track=f.TrackInfo.fromPartial(e.track):t.track=void 0,t}};var E={type:"",sdp:""};t.SessionDescription={encode:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.default.Writer.create();return""!==e.type&&t.uint32(10).string(e.type),""!==e.sdp&&t.uint32(18).string(e.sdp),t},decode:function(e,t){for(var r=e instanceof l.default.Reader?e:new l.default.Reader(e),n=void 0===t?r.len:r.pos+t,o=Object.assign({},E);r.pos<n;){var i=r.uint32();switch(i>>>3){case 1:o.type=r.string();break;case 2:o.sdp=r.string();break;default:r.skipType(7&i)}}return o},fromJSON:function(e){var t=Object.assign({},E);return void 0!==e.type&&null!==e.type?t.type=String(e.type):t.type="",void 0!==e.sdp&&null!==e.sdp?t.sdp=String(e.sdp):t.sdp="",t},toJSON:function(e){var t={};return void 0!==e.type&&(t.type=e.type),void 0!==e.sdp&&(t.sdp=e.sdp),t},fromPartial:function(e){var t=Object.assign({},E);return void 0!==e.type&&null!==e.type?t.type=e.type:t.type="",void 0!==e.sdp&&null!==e.sdp?t.sdp=e.sdp:t.sdp="",t}};var j={};t.ParticipantUpdate={encode:function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.default.Writer.create(),o=n(e.participants);try{for(o.s();!(t=o.n()).done;){var i=t.value;f.ParticipantInfo.encode(i,r.uint32(10).fork()).ldelim()}}catch(e){o.e(e)}finally{o.f()}return r},decode:function(e,t){var r=e instanceof l.default.Reader?e:new l.default.Reader(e),n=void 0===t?r.len:r.pos+t,o=Object.assign({},j);for(o.participants=[];r.pos<n;){var i=r.uint32();i>>>3==1?o.participants.push(f.ParticipantInfo.decode(r,r.uint32())):r.skipType(7&i)}return o},fromJSON:function(e){var t=Object.assign({},j);if(t.participants=[],void 0!==e.participants&&null!==e.participants){var r,o=n(e.participants);try{for(o.s();!(r=o.n()).done;){var i=r.value;t.participants.push(f.ParticipantInfo.fromJSON(i))}}catch(e){o.e(e)}finally{o.f()}}return t},toJSON:function(e){var t={};return e.participants?t.participants=e.participants.map((function(e){return e?f.ParticipantInfo.toJSON(e):void 0})):t.participants=[],t},fromPartial:function(e){var t=Object.assign({},j);if(t.participants=[],void 0!==e.participants&&null!==e.participants){var r,o=n(e.participants);try{for(o.s();!(r=o.n()).done;){var i=r.value;t.participants.push(f.ParticipantInfo.fromPartial(i))}}catch(e){o.e(e)}finally{o.f()}}return t}};var C={};t.ActiveSpeakerUpdate={encode:function(e){var r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.default.Writer.create(),i=n(e.speakers);try{for(i.s();!(r=i.n()).done;){var a=r.value;t.SpeakerInfo.encode(a,o.uint32(10).fork()).ldelim()}}catch(e){i.e(e)}finally{i.f()}return o},decode:function(e,r){var n=e instanceof l.default.Reader?e:new l.default.Reader(e),o=void 0===r?n.len:n.pos+r,i=Object.assign({},C);for(i.speakers=[];n.pos<o;){var a=n.uint32();a>>>3==1?i.speakers.push(t.SpeakerInfo.decode(n,n.uint32())):n.skipType(7&a)}return i},fromJSON:function(e){var r=Object.assign({},C);if(r.speakers=[],void 0!==e.speakers&&null!==e.speakers){var o,i=n(e.speakers);try{for(i.s();!(o=i.n()).done;){var a=o.value;r.speakers.push(t.SpeakerInfo.fromJSON(a))}}catch(e){i.e(e)}finally{i.f()}}return r},toJSON:function(e){var r={};return e.speakers?r.speakers=e.speakers.map((function(e){return e?t.SpeakerInfo.toJSON(e):void 0})):r.speakers=[],r},fromPartial:function(e){var r=Object.assign({},C);if(r.speakers=[],void 0!==e.speakers&&null!==e.speakers){var o,i=n(e.speakers);try{for(i.s();!(o=i.n()).done;){var a=o.value;r.speakers.push(t.SpeakerInfo.fromPartial(a))}}catch(e){i.e(e)}finally{i.f()}}return r}};var T={sid:"",level:0,active:!1};t.SpeakerInfo={encode:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.default.Writer.create();return""!==e.sid&&t.uint32(10).string(e.sid),0!==e.level&&t.uint32(21).float(e.level),!0===e.active&&t.uint32(24).bool(e.active),t},decode:function(e,t){for(var r=e instanceof l.default.Reader?e:new l.default.Reader(e),n=void 0===t?r.len:r.pos+t,o=Object.assign({},T);r.pos<n;){var i=r.uint32();switch(i>>>3){case 1:o.sid=r.string();break;case 2:o.level=r.float();break;case 3:o.active=r.bool();break;default:r.skipType(7&i)}}return o},fromJSON:function(e){var t=Object.assign({},T);return void 0!==e.sid&&null!==e.sid?t.sid=String(e.sid):t.sid="",void 0!==e.level&&null!==e.level?t.level=Number(e.level):t.level=0,void 0!==e.active&&null!==e.active?t.active=Boolean(e.active):t.active=!1,t},toJSON:function(e){var t={};return void 0!==e.sid&&(t.sid=e.sid),void 0!==e.level&&(t.level=e.level),void 0!==e.active&&(t.active=e.active),t},fromPartial:function(e){var t=Object.assign({},T);return void 0!==e.sid&&null!==e.sid?t.sid=e.sid:t.sid="",void 0!==e.level&&null!==e.level?t.level=e.level:t.level=0,void 0!==e.active&&null!==e.active?t.active=e.active:t.active=!1,t}};var x={trackSids:"",subscribe:!1};t.UpdateSubscription={encode:function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.default.Writer.create(),o=n(e.trackSids);try{for(o.s();!(t=o.n()).done;){var i=t.value;r.uint32(10).string(i)}}catch(e){o.e(e)}finally{o.f()}return!0===e.subscribe&&r.uint32(16).bool(e.subscribe),r},decode:function(e,t){var r=e instanceof l.default.Reader?e:new l.default.Reader(e),n=void 0===t?r.len:r.pos+t,o=Object.assign({},x);for(o.trackSids=[];r.pos<n;){var i=r.uint32();switch(i>>>3){case 1:o.trackSids.push(r.string());break;case 2:o.subscribe=r.bool();break;default:r.skipType(7&i)}}return o},fromJSON:function(e){var t=Object.assign({},x);if(t.trackSids=[],void 0!==e.trackSids&&null!==e.trackSids){var r,o=n(e.trackSids);try{for(o.s();!(r=o.n()).done;){var i=r.value;t.trackSids.push(String(i))}}catch(e){o.e(e)}finally{o.f()}}return void 0!==e.subscribe&&null!==e.subscribe?t.subscribe=Boolean(e.subscribe):t.subscribe=!1,t},toJSON:function(e){var t={};return e.trackSids?t.trackSids=e.trackSids.map((function(e){return e})):t.trackSids=[],void 0!==e.subscribe&&(t.subscribe=e.subscribe),t},fromPartial:function(e){var t=Object.assign({},x);if(t.trackSids=[],void 0!==e.trackSids&&null!==e.trackSids){var r,o=n(e.trackSids);try{for(o.s();!(r=o.n()).done;){var i=r.value;t.trackSids.push(i)}}catch(e){o.e(e)}finally{o.f()}}return void 0!==e.subscribe&&null!==e.subscribe?t.subscribe=e.subscribe:t.subscribe=!1,t}};var R={trackSids:"",disabled:!1,quality:0};t.UpdateTrackSettings={encode:function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.default.Writer.create(),o=n(e.trackSids);try{for(o.s();!(t=o.n()).done;){var i=t.value;r.uint32(10).string(i)}}catch(e){o.e(e)}finally{o.f()}return!0===e.disabled&&r.uint32(24).bool(e.disabled),0!==e.quality&&r.uint32(32).int32(e.quality),r},decode:function(e,t){var r=e instanceof l.default.Reader?e:new l.default.Reader(e),n=void 0===t?r.len:r.pos+t,o=Object.assign({},R);for(o.trackSids=[];r.pos<n;){var i=r.uint32();switch(i>>>3){case 1:o.trackSids.push(r.string());break;case 3:o.disabled=r.bool();break;case 4:o.quality=r.int32();break;default:r.skipType(7&i)}}return o},fromJSON:function(e){var t=Object.assign({},R);if(t.trackSids=[],void 0!==e.trackSids&&null!==e.trackSids){var r,o=n(e.trackSids);try{for(o.s();!(r=o.n()).done;){var i=r.value;t.trackSids.push(String(i))}}catch(e){o.e(e)}finally{o.f()}}return void 0!==e.disabled&&null!==e.disabled?t.disabled=Boolean(e.disabled):t.disabled=!1,void 0!==e.quality&&null!==e.quality?t.quality=h(e.quality):t.quality=0,t},toJSON:function(e){var t={};return e.trackSids?t.trackSids=e.trackSids.map((function(e){return e})):t.trackSids=[],void 0!==e.disabled&&(t.disabled=e.disabled),void 0!==e.quality&&(t.quality=y(e.quality)),t},fromPartial:function(e){var t=Object.assign({},R);if(t.trackSids=[],void 0!==e.trackSids&&null!==e.trackSids){var r,o=n(e.trackSids);try{for(o.s();!(r=o.n()).done;){var i=r.value;t.trackSids.push(i)}}catch(e){o.e(e)}finally{o.f()}}return void 0!==e.disabled&&null!==e.disabled?t.disabled=e.disabled:t.disabled=!1,void 0!==e.quality&&null!==e.quality?t.quality=e.quality:t.quality=0,t}};var I={canReconnect:!1};t.LeaveRequest={encode:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.default.Writer.create();return!0===e.canReconnect&&t.uint32(8).bool(e.canReconnect),t},decode:function(e,t){for(var r=e instanceof l.default.Reader?e:new l.default.Reader(e),n=void 0===t?r.len:r.pos+t,o=Object.assign({},I);r.pos<n;){var i=r.uint32();i>>>3==1?o.canReconnect=r.bool():r.skipType(7&i)}return o},fromJSON:function(e){var t=Object.assign({},I);return void 0!==e.canReconnect&&null!==e.canReconnect?t.canReconnect=Boolean(e.canReconnect):t.canReconnect=!1,t},toJSON:function(e){var t={};return void 0!==e.canReconnect&&(t.canReconnect=e.canReconnect),t},fromPartial:function(e){var t=Object.assign({},I);return void 0!==e.canReconnect&&null!==e.canReconnect?t.canReconnect=e.canReconnect:t.canReconnect=!1,t}};var L={urls:"",username:"",credential:""};t.ICEServer={encode:function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.default.Writer.create(),o=n(e.urls);try{for(o.s();!(t=o.n()).done;){var i=t.value;r.uint32(10).string(i)}}catch(e){o.e(e)}finally{o.f()}return""!==e.username&&r.uint32(18).string(e.username),""!==e.credential&&r.uint32(26).string(e.credential),r},decode:function(e,t){var r=e instanceof l.default.Reader?e:new l.default.Reader(e),n=void 0===t?r.len:r.pos+t,o=Object.assign({},L);for(o.urls=[];r.pos<n;){var i=r.uint32();switch(i>>>3){case 1:o.urls.push(r.string());break;case 2:o.username=r.string();break;case 3:o.credential=r.string();break;default:r.skipType(7&i)}}return o},fromJSON:function(e){var t=Object.assign({},L);if(t.urls=[],void 0!==e.urls&&null!==e.urls){var r,o=n(e.urls);try{for(o.s();!(r=o.n()).done;){var i=r.value;t.urls.push(String(i))}}catch(e){o.e(e)}finally{o.f()}}return void 0!==e.username&&null!==e.username?t.username=String(e.username):t.username="",void 0!==e.credential&&null!==e.credential?t.credential=String(e.credential):t.credential="",t},toJSON:function(e){var t={};return e.urls?t.urls=e.urls.map((function(e){return e})):t.urls=[],void 0!==e.username&&(t.username=e.username),void 0!==e.credential&&(t.credential=e.credential),t},fromPartial:function(e){var t=Object.assign({},L);if(t.urls=[],void 0!==e.urls&&null!==e.urls){var r,o=n(e.urls);try{for(o.s();!(r=o.n()).done;){var i=r.value;t.urls.push(i)}}catch(e){o.e(e)}finally{o.f()}}return void 0!==e.username&&null!==e.username?t.username=e.username:t.username="",void 0!==e.credential&&null!==e.credential?t.credential=e.credential:t.credential="",t}};var M={kind:0};t.DataPacket={encode:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.default.Writer.create();return 0!==e.kind&&r.uint32(8).int32(e.kind),void 0!==e.user&&t.UserPacket.encode(e.user,r.uint32(18).fork()).ldelim(),void 0!==e.speaker&&t.ActiveSpeakerUpdate.encode(e.speaker,r.uint32(26).fork()).ldelim(),r},decode:function(e,r){for(var n=e instanceof l.default.Reader?e:new l.default.Reader(e),o=void 0===r?n.len:n.pos+r,i=Object.assign({},M);n.pos<o;){var a=n.uint32();switch(a>>>3){case 1:i.kind=n.int32();break;case 2:i.user=t.UserPacket.decode(n,n.uint32());break;case 3:i.speaker=t.ActiveSpeakerUpdate.decode(n,n.uint32());break;default:n.skipType(7&a)}}return i},fromJSON:function(e){var r=Object.assign({},M);return void 0!==e.kind&&null!==e.kind?r.kind=m(e.kind):r.kind=0,void 0!==e.user&&null!==e.user?r.user=t.UserPacket.fromJSON(e.user):r.user=void 0,void 0!==e.speaker&&null!==e.speaker?r.speaker=t.ActiveSpeakerUpdate.fromJSON(e.speaker):r.speaker=void 0,r},toJSON:function(e){var r={};return void 0!==e.kind&&(r.kind=v(e.kind)),void 0!==e.user&&(r.user=e.user?t.UserPacket.toJSON(e.user):void 0),void 0!==e.speaker&&(r.speaker=e.speaker?t.ActiveSpeakerUpdate.toJSON(e.speaker):void 0),r},fromPartial:function(e){var r=Object.assign({},M);return void 0!==e.kind&&null!==e.kind?r.kind=e.kind:r.kind=0,void 0!==e.user&&null!==e.user?r.user=t.UserPacket.fromPartial(e.user):r.user=void 0,void 0!==e.speaker&&null!==e.speaker?r.speaker=t.ActiveSpeakerUpdate.fromPartial(e.speaker):r.speaker=void 0,r}};var D={participantSid:"",destinationSids:""};t.UserPacket={encode:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.default.Writer.create();""!==e.participantSid&&t.uint32(10).string(e.participantSid),0!==e.payload.length&&t.uint32(18).bytes(e.payload);var r,o=n(e.destinationSids);try{for(o.s();!(r=o.n()).done;){var i=r.value;t.uint32(26).string(i)}}catch(e){o.e(e)}finally{o.f()}return t},decode:function(e,t){var r=e instanceof l.default.Reader?e:new l.default.Reader(e),n=void 0===t?r.len:r.pos+t,o=Object.assign({},D);for(o.destinationSids=[],o.payload=new Uint8Array;r.pos<n;){var i=r.uint32();switch(i>>>3){case 1:o.participantSid=r.string();break;case 2:o.payload=r.bytes();break;case 3:o.destinationSids.push(r.string());break;default:r.skipType(7&i)}}return o},fromJSON:function(e){var t=Object.assign({},D);if(t.destinationSids=[],t.payload=new Uint8Array,void 0!==e.participantSid&&null!==e.participantSid?t.participantSid=String(e.participantSid):t.participantSid="",void 0!==e.payload&&null!==e.payload&&(t.payload=function(e){for(var t=N(e),r=new Uint8Array(t.length),n=0;n<t.length;++n)r[n]=t.charCodeAt(n);return r}(e.payload)),void 0!==e.destinationSids&&null!==e.destinationSids){var r,o=n(e.destinationSids);try{for(o.s();!(r=o.n()).done;){var i=r.value;t.destinationSids.push(String(i))}}catch(e){o.e(e)}finally{o.f()}}return t},toJSON:function(e){var t={};return void 0!==e.participantSid&&(t.participantSid=e.participantSid),void 0!==e.payload&&(t.payload=function(e){for(var t=[],r=0;r<e.byteLength;++r)t.push(String.fromCharCode(e[r]));return U(t.join(""))}(void 0!==e.payload?e.payload:new Uint8Array)),e.destinationSids?t.destinationSids=e.destinationSids.map((function(e){return e})):t.destinationSids=[],t},fromPartial:function(e){var t=Object.assign({},D);if(t.destinationSids=[],void 0!==e.participantSid&&null!==e.participantSid?t.participantSid=e.participantSid:t.participantSid="",void 0!==e.payload&&null!==e.payload?t.payload=e.payload:t.payload=new Uint8Array,void 0!==e.destinationSids&&null!==e.destinationSids){var r,o=n(e.destinationSids);try{for(o.s();!(r=o.n()).done;){var i=r.value;t.destinationSids.push(i)}}catch(e){o.e(e)}finally{o.f()}}return t}};var A=function(){if(void 0!==A)return A;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==r.g)return r.g;throw"Unable to locate global object"}(),N=A.atob||function(e){return A.Buffer.from(e,"base64").toString("binary")},U=A.btoa||function(e){return A.Buffer.from(e,"binary").toString("base64")};l.default.util.Long!==u.default&&(l.default.util.Long=u.default,l.default.configure())},70686:function(e,t){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function n(){n=function(){return e};var e={},t=Object.prototype,o=t.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},c=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function f(e,t,r,n){var o=t&&t.prototype instanceof h?t:h,a=Object.create(o.prototype),c=new j(n||[]);return i(a,"_invoke",{value:P(e,r,c)}),a}function p(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=f;var d={};function h(){}function y(){}function m(){}var v={};l(v,c,(function(){return this}));var b=Object.getPrototypeOf,g=b&&b(b(C([])));g&&g!==t&&o.call(g,c)&&(v=g);var w=m.prototype=h.prototype=Object.create(v);function S(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function n(i,a,c,s){var u=p(e[i],e,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==r(f)&&o.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,c,s)}),(function(e){n("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return n("throw",e,c,s)}))}s(u.arg)}var a;i(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function P(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=k(a,r);if(c){if(c===d)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=p(e,t,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}function k(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,k(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var o=p(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function C(e){if(e){var t=e[c];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(o.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:T}}function T(){return{value:void 0,done:!0}}return y.prototype=m,i(w,"constructor",{value:m,configurable:!0}),i(m,"constructor",{value:y,configurable:!0}),y.displayName=l(m,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,u,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},S(O.prototype),l(O.prototype,s,(function(){return this})),e.AsyncIterator=O,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new O(f(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},S(w),l(w,u,"Generator"),l(w,c,(function(){return this})),l(w,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=C,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&o.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=o.call(i,"catchLoc"),s=o.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),E(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;E(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:C(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},e}function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===r(i)?i:String(i)),o)}var i}var i=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{s(n.next(e))}catch(e){i(e)}}function c(e){try{s(n.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,c)}s((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.pendingCandidates=[],this.restartingIce=!1,this.pc=new RTCPeerConnection(t)}var t,r;return t=e,(r=[{key:"addIceCandidate",value:function(e){return i(this,void 0,void 0,n().mark((function t(){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.pc.remoteDescription||this.restartingIce){t.next=2;break}return t.abrupt("return",this.pc.addIceCandidate(e));case 2:this.pendingCandidates.push(e);case 3:case"end":return t.stop()}}),t,this)})))}},{key:"setRemoteDescription",value:function(e){return i(this,void 0,void 0,n().mark((function t(){var r=this;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.pc.setRemoteDescription(e);case 2:this.pendingCandidates.forEach((function(e){r.pc.addIceCandidate(e)})),this.pendingCandidates=[];case 4:case"end":return t.stop()}}),t,this)})))}},{key:"close",value:function(){this.pc.close()}}])&&o(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.default=a},39577:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){o=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},c=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function f(e,t,r,n){var o=t&&t.prototype instanceof h?t:h,a=Object.create(o.prototype),c=new j(n||[]);return i(a,"_invoke",{value:P(e,r,c)}),a}function p(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=f;var d={};function h(){}function y(){}function m(){}var v={};l(v,c,(function(){return this}));var b=Object.getPrototypeOf,g=b&&b(b(C([])));g&&g!==t&&r.call(g,c)&&(v=g);var w=m.prototype=h.prototype=Object.create(v);function S(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function o(i,a,c,s){var u=p(e[i],e,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,c,s)}),(function(e){o("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return o("throw",e,c,s)}))}s(u.arg)}var a;i(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function P(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=k(a,r);if(c){if(c===d)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=p(e,t,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}function k(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,k(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var o=p(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function C(e){if(e){var t=e[c];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return y.prototype=m,i(w,"constructor",{value:m,configurable:!0}),i(m,"constructor",{value:y,configurable:!0}),y.displayName=l(m,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,u,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},S(O.prototype),l(O.prototype,s,(function(){return this})),e.AsyncIterator=O,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new O(f(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},S(w),l(w,u,"Generator"),l(w,c,(function(){return this})),l(w,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=C,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),E(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;E(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:C(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},e}function i(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===n(i)?i:String(i)),o)}var i}function a(e,t){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},a(e,t)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}var u=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{s(n.next(e))}catch(e){i(e)}}function c(e){try{s(n.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,c)}s((n=n.apply(e,t||[])).next())}))},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var f=r(40063),p=l(r(65657)),d=r(71970),h=r(36917),y=r(38390),m=l(r(70686)),v=r(97370),b=r(28413),g=5,w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}(S,e);var t,r,l,f,w=(l=S,f=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=s(l);if(f){var r=s(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return c(e)}(this,e)});function S(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,S),(r=w.call(this)).iceConnected=!1,r.isClosed=!0,r.pendingTrackResolvers={},r.reconnectAttempts=0,r.handleDataMessage=function(e){return u(c(r),void 0,void 0,o().mark((function t(){var r,n;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.data instanceof ArrayBuffer)){t.next=4;break}r=e.data,t.next=12;break;case 4:if(!(e.data instanceof Blob)){t.next=10;break}return t.next=7,e.data.arrayBuffer();case 7:r=t.sent,t.next=12;break;case 10:return p.default.error("unsupported data type",e.data),t.abrupt("return");case 12:(n=d.DataPacket.decode(new Uint8Array(r))).speaker?this.emit(y.EngineEvent.SpeakersUpdate,n.speaker.speakers):n.user&&this.emit(y.EngineEvent.DataPacketReceived,n.user,n.kind);case 14:case"end":return t.stop()}}),t,this)})))},r.handleDisconnect=function(e){if(!r.isClosed){if(p.default.debug("".concat(e," disconnected")),r.reconnectAttempts>=g)return p.default.info("could not connect to signal after",g,"attempts. giving up"),r.close(),void r.emit(y.EngineEvent.Disconnected);var t=r.reconnectAttempts*r.reconnectAttempts*300;setTimeout((function(){r.reconnect().then((function(){r.reconnectAttempts=0})).catch(r.handleDisconnect)}),t)}},r.emitTrackEvent=function(e,t,n){r.emit(y.EngineEvent.MediaTrackAdded,e,t,n)},r.client=e,r.rtcConfig=t||{},r.useLegacy=b.useLegacyAPI(),p.default.trace("creating RTCEngine","useLegacy",r.useLegacy),r}return t=S,(r=[{key:"join",value:function(e,t,r){return u(this,void 0,void 0,o().mark((function n(){var i,a,c;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return this.url=e,this.token=t,n.next=4,this.client.join(e,t,this.useLegacy,r);case 4:return i=n.sent,this.isClosed=!1,i.iceServers&&!this.rtcConfig.iceServers&&(a=[],i.iceServers.forEach((function(e){var t={urls:e.urls};e.username&&(t.username=e.username),e.credential&&(t.credential=e.credential),a.push(t)})),this.rtcConfig.iceServers=a),this.publisher||(c=this.rtcConfig,this.useLegacy&&(c.sdpSemantics="plan-b"),this.publisher=new m.default(this.rtcConfig),this.subscriber=new m.default(this.rtcConfig),this.configure()),n.next=10,this.negotiate();case 10:return n.abrupt("return",i);case 11:case"end":return n.stop()}}),n,this)})))}},{key:"close",value:function(){var e=this;this.isClosed=!0,this.publisher&&(this.publisher.pc.getSenders().forEach((function(t){var r;null===(r=e.publisher)||void 0===r||r.pc.removeTrack(t)})),this.publisher.close(),this.publisher=void 0),this.subscriber&&(this.subscriber.close(),this.subscriber=void 0),this.client.close()}},{key:"addTrack",value:function(e,t,r,n){var o=this;if(this.pendingTrackResolvers[e])throw new h.TrackInvalidError("a track with the same ID has already been published");return new Promise((function(i){o.pendingTrackResolvers[e]=i,o.client.sendAddTrack(e,t,v.Track.kindToProto(r),n)}))}},{key:"updateMuteStatus",value:function(e,t){this.client.sendMuteTrack(e,t)}},{key:"configure",value:function(){var e=this;this.publisher&&this.subscriber&&(this.publisher.pc.onicecandidate=function(t){t.candidate&&(p.default.trace("adding ICE candidate for peer",t.candidate),e.client.sendIceCandidate(t.candidate,d.SignalTarget.PUBLISHER))},this.subscriber.pc.onicecandidate=function(t){t.candidate&&e.client.sendIceCandidate(t.candidate,d.SignalTarget.SUBSCRIBER)},this.publisher.pc.onnegotiationneeded=function(){var t;"new"!==(null===(t=e.publisher)||void 0===t?void 0:t.pc.iceConnectionState)&&e.negotiate()},this.publisher.pc.oniceconnectionstatechange=function(){e.publisher&&("connected"===e.publisher.pc.iceConnectionState?(p.default.trace("ICE connected"),e.iceConnected||(e.iceConnected=!0,e.emit(y.EngineEvent.Connected))):"failed"===e.publisher.pc.iceConnectionState&&(e.iceConnected=!1,p.default.trace("ICE disconnected"),e.handleDisconnect("peerconnection")))},this.useLegacy?this.subscriber.pc.addEventListener("addstream",(function(t){var r=t.stream;r.getTracks().forEach((function(t){e.emitTrackEvent(t,r)}))})):this.subscriber.pc.ontrack=function(t){e.emitTrackEvent(t.track,t.streams[0],t.receiver)},this.lossyDC=this.publisher.pc.createDataChannel("_lossy",{ordered:!0,maxRetransmits:1}),this.reliableDC=this.publisher.pc.createDataChannel("_reliable",{ordered:!0}),this.lossyDC.onmessage=this.handleDataMessage,this.reliableDC.onmessage=this.handleDataMessage,this.client.onAnswer=function(t){return u(e,void 0,void 0,o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.publisher){e.next=2;break}return e.abrupt("return");case 2:return p.default.debug("received server answer",t.type,this.publisher.pc.signalingState),e.next=5,this.publisher.setRemoteDescription(t);case 5:case"end":return e.stop()}}),e,this)})))},this.client.onTrickle=function(t,r){e.publisher&&e.subscriber&&(p.default.trace("got ICE candidate from peer",t,r),r===d.SignalTarget.PUBLISHER?e.publisher.addIceCandidate(t):e.subscriber.addIceCandidate(t))},this.client.onOffer=function(t){return u(e,void 0,void 0,o().mark((function e(){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.subscriber){e.next=2;break}return e.abrupt("return");case 2:return p.default.debug("received server offer",t.type,this.subscriber.pc.signalingState),e.next=5,this.subscriber.setRemoteDescription(t);case 5:return e.next=7,this.subscriber.pc.createAnswer();case 7:return r=e.sent,e.next=10,this.subscriber.pc.setLocalDescription(r);case 10:this.client.sendAnswer(r);case 11:case"end":return e.stop()}}),e,this)})))},this.client.onParticipantUpdate=function(t){e.emit(y.EngineEvent.ParticipantUpdate,t)},this.client.onLocalTrackPublished=function(t){var r=e.pendingTrackResolvers[t.cid];r?(delete e.pendingTrackResolvers[t.cid],r(t.track)):p.default.error("missing track resolver for ",t.cid)},this.client.onActiveSpeakersChanged=function(t){e.emit(y.EngineEvent.SpeakersUpdate,t)},this.client.onClose=function(){e.handleDisconnect("signal")},this.client.onLeave=function(){e.close(),e.emit(y.EngineEvent.Disconnected)})}},{key:"reconnect",value:function(){return u(this,void 0,void 0,o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isClosed){e.next=2;break}return e.abrupt("return");case 2:if(this.url&&this.token){e.next=4;break}throw new h.ConnectionError("could not reconnect, url or token not saved");case 4:return p.default.info("reconnecting to signal connection, attempt",this.reconnectAttempts),0===this.reconnectAttempts&&this.emit(y.EngineEvent.Reconnecting),this.reconnectAttempts+=1,e.next=9,this.client.reconnect(this.url,this.token);case 9:if(this.publisher&&this.subscriber){e.next=11;break}throw new h.UnexpectedConnectionState("publisher and subscriber connections unset");case 11:if(this.publisher.restartingIce=!0,this.subscriber.restartingIce=!0,!this.publisher.pc.restartIce){e.next=17;break}this.publisher.pc.restartIce(),e.next=19;break;case 17:return e.next=19,this.negotiate({iceRestart:!0});case 19:t=(new Date).getTime();case 20:if(!((new Date).getTime()-t<1e4)){e.next=28;break}if(!this.iceConnected){e.next=24;break}return this.emit(y.EngineEvent.Reconnected),e.abrupt("return");case 24:return e.next=26,b.sleep(500);case 26:e.next=20;break;case 28:throw new h.ConnectionError("could not establish ICE connection");case 29:case"end":return e.stop()}}),e,this)})))}},{key:"negotiate",value:function(e){return u(this,void 0,void 0,o().mark((function t(){var r,n;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.publisher){t.next=2;break}return t.abrupt("return");case 2:if(!(r=this.publisher.pc).remoteDescription||"have-local-offer"!==r.signalingState){t.next=6;break}return t.next=6,r.setRemoteDescription(r.remoteDescription);case 6:return p.default.debug("starting to negotiate",r.signalingState),t.next=9,r.createOffer(e);case 9:return n=t.sent,t.next=12,r.setLocalDescription(n);case 12:this.client.sendOffer(n);case 13:case"end":return t.stop()}}),t,this)})))}}])&&i(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),S}(f.EventEmitter);t.default=w},43140:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){o=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},c=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function f(e,t,r,n){var o=t&&t.prototype instanceof h?t:h,a=Object.create(o.prototype),c=new j(n||[]);return i(a,"_invoke",{value:P(e,r,c)}),a}function p(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=f;var d={};function h(){}function y(){}function m(){}var v={};l(v,c,(function(){return this}));var b=Object.getPrototypeOf,g=b&&b(b(C([])));g&&g!==t&&r.call(g,c)&&(v=g);var w=m.prototype=h.prototype=Object.create(v);function S(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function o(i,a,c,s){var u=p(e[i],e,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,c,s)}),(function(e){o("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return o("throw",e,c,s)}))}s(u.arg)}var a;i(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function P(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=k(a,r);if(c){if(c===d)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=p(e,t,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}function k(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,k(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var o=p(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function C(e){if(e){var t=e[c];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return y.prototype=m,i(w,"constructor",{value:m,configurable:!0}),i(m,"constructor",{value:y,configurable:!0}),y.displayName=l(m,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,u,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},S(O.prototype),l(O.prototype,s,(function(){return this})),e.AsyncIterator=O,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new O(f(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},S(w),l(w,u,"Generator"),l(w,c,(function(){return this})),l(w,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=C,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),E(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;E(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:C(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},e}function i(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===n(i)?i:String(i)),o)}var i}function a(){return a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=u(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},a.apply(this,arguments)}function c(e,t){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},c(e,t)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}var l=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{s(n.next(e))}catch(e){i(e)}}function c(e){try{s(n.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,c)}s((n=n.apply(e,t||[])).next())}))},f=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.RoomState=void 0;var p,d=r(40063),h=f(r(65657)),y=r(5501),m=r(36917),v=r(38390),b=f(r(24350)),g=f(r(46422)),w=f(r(39577)),S=r(28413);!function(e){e.Disconnected="disconnected",e.Connected="connected",e.Reconnecting="reconnecting"}(p=t.RoomState||(t.RoomState={}));var O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(P,e);var t,r,f,d,O=(f=P,d=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=u(f);if(d){var r=u(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return s(e)}(this,e)});function P(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,P),(r=O.call(this)).state=p.Disconnected,r.activeSpeakers=[],r.connect=function(e,t,n){return l(s(r),void 0,void 0,o().mark((function r(){var i,a,c=this;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!this.localParticipant){r.next=3;break}return h.default.warn("already connected to room",this.name),r.abrupt("return",this);case 3:return r.prev=3,r.next=6,this.engine.join(e,t,n);case 6:if(i=r.sent,h.default.debug("connected to Livekit Server",i.serverVersion),i.serverVersion){r.next=10;break}throw new m.UnsupportedServer("unknown server version");case 10:this.state=p.Connected,a=i.participant,this.localParticipant=new b.default(a.sid,a.identity,this.engine),this.localParticipant.updateInfo(a),this.localParticipant.on(v.ParticipantEvent.MetadataChanged,(function(e,t){c.emit(v.RoomEvent.MetadataChanged,e,t)})),i.otherParticipants.forEach((function(e){c.getOrCreateParticipant(e.sid,e)})),this.name=i.room.name,this.sid=i.room.sid,r.next=24;break;case 20:throw r.prev=20,r.t0=r.catch(3),this.engine.close(),r.t0;case 24:return r.abrupt("return",new Promise((function(e,t){var r=setTimeout((function(){c.engine.close(),t(new m.ConnectionError("could not connect after timeout"))}),5e3);c.engine.once(v.EngineEvent.Connected,(function(){clearTimeout(r),window.addEventListener("beforeunload",c.disconnect),e(c)}))})));case 25:case"end":return r.stop()}}),r,this,[[3,20]])})))},r.disconnect=function(){r.engine.client.sendLeave(),r.engine.close(),r.handleDisconnect()},r.handleSpeakerUpdate=function(e){var t=[],n={};e.forEach((function(e){if(n[e.sid]=!0,e.sid===r.localParticipant.sid)r.localParticipant.audioLevel=e.level,r.localParticipant.setIsSpeaking(!0),t.push(r.localParticipant);else{var o=r.participants.get(e.sid);o&&(o.audioLevel=e.level,o.setIsSpeaking(!0),t.push(o))}})),n[r.localParticipant.sid]||(r.localParticipant.audioLevel=0,r.localParticipant.setIsSpeaking(!1)),r.participants.forEach((function(e){n[e.sid]||(e.audioLevel=0,e.setIsSpeaking(!1))})),r.activeSpeakers=t,r.emit(v.RoomEvent.ActiveSpeakersChanged,t)},r.handleDataPacket=function(e,t){var n=r.participants.get(e.participantSid);n&&(r.emit(v.RoomEvent.DataReceived,e.payload,n,t),n.emit(v.ParticipantEvent.DataReceived,e.payload,t))},r.participants=new Map,r.engine=new w.default(e,t),r.engine.on(v.EngineEvent.MediaTrackAdded,(function(e,t,n){r.onTrackAdded(e,t,n)})),r.engine.on(v.EngineEvent.Disconnected,(function(){r.handleDisconnect()})),r.engine.on(v.EngineEvent.ParticipantUpdate,(function(e){r.handleParticipantUpdates(e)})),r.engine.on(v.EngineEvent.SpeakersUpdate,r.handleSpeakerUpdate),r.engine.on(v.EngineEvent.DataPacketReceived,r.handleDataPacket),r.engine.on(v.EngineEvent.Reconnecting,(function(){r.state=p.Reconnecting,r.emit(v.RoomEvent.Reconnecting)})),r.engine.on(v.EngineEvent.Reconnected,(function(){r.state=p.Connected,r.emit(v.RoomEvent.Reconnected)})),r}return t=P,r=[{key:"onTrackAdded",value:function(e,t,r){var n=S.unpackStreamId(t.id),o=n[0],i=n[1];i&&""!==i||(i=e.id),this.getOrCreateParticipant(o).addSubscribedMediaTrack(e,i,r)}},{key:"handleDisconnect",value:function(){this.state!==p.Disconnected&&(this.participants.forEach((function(e){e.tracks.forEach((function(t){e.unpublishTrack(t.trackSid)}))})),this.localParticipant.tracks.forEach((function(e){var t,r;null===(t=e.track)||void 0===t||t.stop(),null===(r=e.track)||void 0===r||r.detach()})),this.participants.clear(),this.activeSpeakers=[],window.removeEventListener("beforeunload",this.disconnect),this.emit(v.RoomEvent.Disconnected),this.state=p.Disconnected)}},{key:"handleParticipantUpdates",value:function(e){var t=this;e.forEach((function(e){if(e.sid!==t.localParticipant.sid){var r=t.participants.get(e.sid),n=!r;r=t.getOrCreateParticipant(e.sid,e),e.state===y.ParticipantInfo_State.DISCONNECTED?t.handleParticipantDisconnected(e.sid,r):n?t.emit(v.RoomEvent.ParticipantConnected,r):r.updateInfo(e)}else t.localParticipant.updateInfo(e)}))}},{key:"handleParticipantDisconnected",value:function(e,t){this.participants.delete(e),t&&(t.tracks.forEach((function(e){t.unpublishTrack(e.trackSid)})),this.emit(v.RoomEvent.ParticipantDisconnected,t))}},{key:"getOrCreateParticipant",value:function(e,t){var r=this,n=this.participants.get(e);return n||(n=t?g.default.fromParticipantInfo(this.engine.client,t):new g.default(this.engine.client,e,""),this.participants.set(e,n),n.on(v.ParticipantEvent.TrackPublished,(function(e){r.emit(v.RoomEvent.TrackPublished,e,n)})),n.on(v.ParticipantEvent.TrackSubscribed,(function(e,t){r.emit(v.RoomEvent.TrackSubscribed,e,t,n)})),n.on(v.ParticipantEvent.TrackUnpublished,(function(e){r.emit(v.RoomEvent.TrackUnpublished,e,n)})),n.on(v.ParticipantEvent.TrackUnsubscribed,(function(e,t){r.emit(v.RoomEvent.TrackUnsubscribed,e,t,n)})),n.on(v.ParticipantEvent.TrackSubscriptionFailed,(function(e){r.emit(v.RoomEvent.TrackSubscriptionFailed,e,n)})),n.on(v.ParticipantEvent.TrackMuted,(function(e){r.emit(v.RoomEvent.TrackMuted,e,n)})),n.on(v.ParticipantEvent.TrackUnmuted,(function(e){r.emit(v.RoomEvent.TrackUnmuted,e,n)})),n.on(v.ParticipantEvent.MetadataChanged,(function(e,t){r.emit(v.RoomEvent.MetadataChanged,e,t)}))),n}},{key:"emit",value:function(e){for(var t,r,n=arguments.length,o=new Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];return(t=h.default).debug.apply(t,["room event",e].concat(o)),(r=a(u(P.prototype),"emit",this)).call.apply(r,[this,e].concat(o))}}],r&&i(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),P}(d.EventEmitter);t.default=O},36917:(e,t)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function n(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===r(i)?i:String(i)),o)}var i}function o(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}function c(e){var t=l();return function(){var n,o=p(e);if(t){var i=p(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function s(e){var t="function"==typeof Map?new Map:void 0;return s=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return u(e,arguments,p(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),f(n,e)},s(e)}function u(e,t,r){return u=l()?Reflect.construct.bind():function(e,t,r){var n=[null];n.push.apply(n,t);var o=new(Function.bind.apply(e,n));return r&&f(o,r.prototype),o},u.apply(null,arguments)}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function f(e,t){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},f(e,t)}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.PublishDataError=t.UnexpectedConnectionState=t.UnsupportedServer=t.TrackInvalidError=t.ConnectionError=t.LivekitError=void 0;var d=function(e){a(r,e);var t=c(r);function r(e,n){var o;return i(this,r),(o=t.call(this,n||"an error has occured")).code=e,o}return o(r)}(s(Error));t.LivekitError=d;var h=function(e){a(r,e);var t=c(r);function r(e){return i(this,r),t.call(this,1,e)}return o(r)}(d);t.ConnectionError=h;var y=function(e){a(r,e);var t=c(r);function r(e){return i(this,r),t.call(this,20,e||"Track is invalid")}return o(r)}(d);t.TrackInvalidError=y;var m=function(e){a(r,e);var t=c(r);function r(e){return i(this,r),t.call(this,10,e||"Unsupported server")}return o(r)}(d);t.UnsupportedServer=m;var v=function(e){a(r,e);var t=c(r);function r(e){return i(this,r),t.call(this,12,e||"Unexpected connection state")}return o(r)}(d);t.UnexpectedConnectionState=v;var b=function(e){a(r,e);var t=c(r);function r(e){return i(this,r),t.call(this,13,e||"Unable to publish data")}return o(r)}(d);t.PublishDataError=b},38390:(e,t)=>{"use strict";var r,n,o,i;Object.defineProperty(t,"__esModule",{value:!0}),t.TrackEvent=t.EngineEvent=t.ParticipantEvent=t.RoomEvent=void 0,(i=t.RoomEvent||(t.RoomEvent={})).Reconnecting="reconnecting",i.Reconnected="reconnected",i.Disconnected="disconnected",i.ParticipantConnected="participantConnected",i.ParticipantDisconnected="participantDisconnected",i.TrackPublished="trackPublished",i.TrackSubscribed="trackSubscribed",i.TrackSubscriptionFailed="trackSubscriptionFailed",i.TrackUnpublished="trackUnpublished",i.TrackUnsubscribed="trackUnsubscribed",i.TrackMuted="trackMuted",i.TrackUnmuted="trackUnmuted",i.ActiveSpeakersChanged="activeSpeakersChanged",i.MetadataChanged="metadataChanged",i.DataReceived="dataReceived",(o=t.ParticipantEvent||(t.ParticipantEvent={})).TrackPublished="trackPublished",o.TrackSubscribed="trackSubscribed",o.TrackSubscriptionFailed="trackSubscriptionFailed",o.TrackUnpublished="trackUnpublished",o.TrackUnsubscribed="trackUnsubscribed",o.TrackMuted="trackMuted",o.TrackUnmuted="trackUnmuted",o.MetadataChanged="metadataChanged",o.DataReceived="dataReceived",o.IsSpeakingChanged="isSpeakingChanged",(n=t.EngineEvent||(t.EngineEvent={})).Connected="connected",n.Disconnected="disconnected",n.Reconnecting="reconnecting",n.Reconnected="reconnected",n.ParticipantUpdate="participantUpdate",n.MediaTrackAdded="mediaTrackAdded",n.SpeakersUpdate="speakersUpdate",n.DataPacketReceived="dataPacketReceived",(r=t.TrackEvent||(t.TrackEvent={})).Message="message",r.Muted="muted",r.Unmuted="unmuted",r.UpdateSettings="updateSettings",r.UpdateSubscription="updateSubscription"},24350:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){o=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},c=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function f(e,t,r,n){var o=t&&t.prototype instanceof h?t:h,a=Object.create(o.prototype),c=new j(n||[]);return i(a,"_invoke",{value:P(e,r,c)}),a}function p(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=f;var d={};function h(){}function y(){}function m(){}var v={};l(v,c,(function(){return this}));var b=Object.getPrototypeOf,g=b&&b(b(C([])));g&&g!==t&&r.call(g,c)&&(v=g);var w=m.prototype=h.prototype=Object.create(v);function S(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function o(i,a,c,s){var u=p(e[i],e,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,c,s)}),(function(e){o("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return o("throw",e,c,s)}))}s(u.arg)}var a;i(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function P(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=k(a,r);if(c){if(c===d)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=p(e,t,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}function k(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,k(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var o=p(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function C(e){if(e){var t=e[c];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return y.prototype=m,i(w,"constructor",{value:m,configurable:!0}),i(m,"constructor",{value:y,configurable:!0}),y.displayName=l(m,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,u,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},S(O.prototype),l(O.prototype,s,(function(){return this})),e.AsyncIterator=O,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new O(f(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},S(w),l(w,u,"Generator"),l(w,c,(function(){return this})),l(w,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=C,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),E(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;E(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:C(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},e}function i(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===n(i)?i:String(i)),o)}var i}function a(){return a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},a.apply(this,arguments)}function c(e,t){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},c(e,t)}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}var u=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{s(n.next(e))}catch(e){i(e)}}function c(e){try{s(n.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,c)}s((n=n.apply(e,t||[])).next())}))},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var f=l(r(65657)),p=r(65643),d=r(71970),h=r(36917),y=r(38390),m=l(r(80198)),v=l(r(55690)),b=l(r(86662)),g=r(97370),w=l(r(3410)),S=l(r(46422)),O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(P,e);var t,r,l,w,O=(l=P,w=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=s(l);if(w){var r=s(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function P(e,t,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,P),(n=O.call(this,e,t)).onTrackUnmuted=function(e){n.onTrackMuted(e,!1)},n.onTrackMuted=function(e,t){void 0===t&&(t=!0),e.sid?n.engine.updateMuteStatus(e.sid,t):f.default.error("could not update mute status for unpublished track",e)},n.presets169=[p.VideoPresets.qvga,p.VideoPresets.vga,p.VideoPresets.qhd,p.VideoPresets.hd,p.VideoPresets.fhd],n.presets43=[p.VideoPresets43.qvga,p.VideoPresets43.vga,p.VideoPresets43.qhd,p.VideoPresets43.hd,p.VideoPresets43.fhd],n.audioTracks=new Map,n.videoTracks=new Map,n.tracks=new Map,n.engine=r,n}return t=P,(r=[{key:"publishTrack",value:function(e,t){return u(this,void 0,void 0,o().mark((function r(){var n,i,a,c,s,u,l,p;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(e instanceof MediaStreamTrack)){r.next=9;break}r.t0=e.kind,r.next="audio"===r.t0?4:"video"===r.t0?6:8;break;case 4:return e=new m.default(e,null==t?void 0:t.name),r.abrupt("break",9);case 6:return e=new b.default(e,null==t?void 0:t.name),r.abrupt("break",9);case 8:throw new h.TrackInvalidError("unsupported MediaStreamTrack kind ".concat(e.kind));case 9:if(this.tracks.forEach((function(t){t.track&&t.track===e&&(n=t)})),!n){r.next=12;break}return r.abrupt("return",n);case 12:return e.on(y.TrackEvent.Muted,this.onTrackMuted),e.on(y.TrackEvent.Unmuted,this.onTrackUnmuted),i=e.mediaStreamTrack.id,r.next=17,this.engine.addTrack(i,e.name,e.kind,e.dimensions);case 17:if(a=r.sent,c=new v.default(e.kind,a,e),e.sid=a.sid,e.kind===g.Track.Kind.Video?(u=e.mediaStreamTrack.getSettings(),s=this.computeVideoEncodings(u.width,u.height,t)):e.kind===g.Track.Kind.Audio&&(null==t?void 0:t.audioBitrate)&&(s=[{maxBitrate:null==t?void 0:t.audioBitrate}]),this.engine.publisher){r.next=23;break}throw new h.UnexpectedConnectionState("publisher is closed");case 23:return f.default.debug("publishing with encodings",s),l={direction:"sendonly"},s&&(l.sendEncodings=s),p=this.engine.publisher.pc.addTransceiver(e.mediaStreamTrack,l),e.sender=p.sender,e instanceof b.default&&e.startMonitor(this.engine.client),(null==t?void 0:t.videoCodec)&&this.setPreferredCodec(p,e.kind,t.videoCodec),this.addTrackPublication(c),this.emit(y.ParticipantEvent.TrackPublished,c),r.abrupt("return",c);case 33:case"end":return r.stop()}}),r,this)})))}},{key:"unpublishTrack",value:function(e){var t,r=this,n=this.getPublicationForTrack(e);if(f.default.debug("unpublishTrack","unpublishing track",e),!n)return f.default.warn("unpublishTrack","track was not unpublished because no publication was found",e),null;switch((e instanceof m.default||e instanceof b.default)&&(e.removeListener(y.TrackEvent.Muted,this.onTrackMuted),e.removeListener(y.TrackEvent.Unmuted,this.onTrackUnmuted)),e.stop(),t=e instanceof MediaStreamTrack?e:e.mediaStreamTrack,this.engine.publisher&&this.engine.publisher.pc.getSenders().forEach((function(e){var n;e.track===t&&(null===(n=r.engine.publisher)||void 0===n||n.pc.removeTrack(e))})),this.tracks.delete(n.trackSid),n.kind){case g.Track.Kind.Audio:this.audioTracks.delete(n.trackSid);break;case g.Track.Kind.Video:this.videoTracks.delete(n.trackSid)}return n}},{key:"unpublishTracks",value:function(e){var t=this,r=[];return e.forEach((function(e){var n=t.unpublishTrack(e);n&&r.push(n)})),r}},{key:"publisherMetrics",get:function(){return null}},{key:"updateInfo",value:function(e){var t=this;a(s(P.prototype),"updateInfo",this).call(this,e),e.tracks.forEach((function(e){var r=t.tracks.get(e.sid);r&&(e.muted&&!r.isMuted?r.mute():!e.muted&&r.isMuted&&r.unmute())}))}},{key:"publishData",value:function(e,t,r){if(e.length>14e3)throw new h.PublishDataError("data cannot be larger than 14k");var n=[];void 0!==r&&r.forEach((function(e){e instanceof S.default?n.push(e.sid):n.push(e)}));var o={kind:t,user:{participantSid:this.sid,payload:e,destinationSids:n}},i=d.DataPacket.encode(o).finish();t===d.DataPacket_Kind.LOSSY&&this.engine.lossyDC?this.engine.lossyDC.send(i):t===d.DataPacket_Kind.RELIABLE&&this.engine.reliableDC&&this.engine.reliableDC.send(i)}},{key:"getPublicationForTrack",value:function(e){var t;return this.tracks.forEach((function(r){var n=r.track;n&&(e instanceof MediaStreamTrack?(n instanceof m.default||n instanceof b.default)&&n.mediaStreamTrack===e&&(t=r):e===n&&(t=r))})),t}},{key:"setPreferredCodec",value:function(e,t,r){if("getCapabilities"in RTCRtpSender){var n=RTCRtpSender.getCapabilities(t);if(n){var o=n.codecs.find((function(e){return e.mimeType.toLowerCase()==="video/".concat(r)||"audio/opus"===e.mimeType.toLowerCase()}));o&&"setCodecPreferences"in e&&e.setCodecPreferences([o])}}}},{key:"computeVideoEncodings",value:function(e,t,r){var n,o=null==r?void 0:r.videoEncoding;if((o||(null==r?void 0:r.simulcast))&&e&&t){if(o||(o=this.determineAppropriateEncoding(e,t),f.default.debug("using video encoding",o)),null==r?void 0:r.simulcast){n=[{rid:"f",maxBitrate:o.maxBitrate,maxFramerate:o.maxFramerate}];var i=this.presetsForResolution(e,t),a=i[1],c=i[0];.7*t>=a.height?(n.push({rid:"h",scaleResolutionDownBy:t/a.height,maxBitrate:a.encoding.maxBitrate,maxFramerate:a.encoding.maxFramerate}),n.push({rid:"q",scaleResolutionDownBy:t/c.height,maxBitrate:c.encoding.maxBitrate,maxFramerate:c.encoding.maxFramerate})):n.push({rid:"h",scaleResolutionDownBy:t/c.height,maxBitrate:c.encoding.maxBitrate,maxFramerate:c.encoding.maxFramerate})}else n=[o];return n}}},{key:"determineAppropriateEncoding",value:function(e,t){for(var r=this.presetsForResolution(e,t),n=r[0].encoding,o=0;o<r.length;o+=1){var i=r[o];e>=i.width&&t>=i.height&&(n=i.encoding)}return n}},{key:"presetsForResolution",value:function(e,t){var r=e/t;return Math.abs(r-16/9)<Math.abs(r-4/3)?this.presets169:this.presets43}}])&&i(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),P}(w.default);t.default=O},3410:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===n(i)?i:String(i)),o)}var i}function i(e,t){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},i(e,t)}function a(e){return a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},a(e)}Object.defineProperty(t,"__esModule",{value:!0});var c=r(40063),s=r(38390),u=r(97370),l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i(e,t)}(p,e);var t,r,c,l,f=(c=p,l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=a(c);if(l){var r=a(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function p(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),(r=f.call(this)).audioLevel=0,r.isSpeaking=!1,r.sid=e,r.identity=t,r.audioTracks=new Map,r.videoTracks=new Map,r.tracks=new Map,r}return t=p,(r=[{key:"getTracks",value:function(){return Array.from(this.tracks.values())}},{key:"joinedAt",get:function(){return this.participantInfo?new Date(1e3*this.participantInfo.joinedAt):new Date}},{key:"updateInfo",value:function(e){this.identity=e.identity,this.sid=e.sid,this.setMetadata(e.metadata),this.participantInfo=e}},{key:"setMetadata",value:function(e){var t=!this.participantInfo||this.participantInfo.metadata!==e,r=this.metadata;this.metadata=e,t&&this.emit(s.ParticipantEvent.MetadataChanged,r)}},{key:"setIsSpeaking",value:function(e){e!==this.isSpeaking&&(this.isSpeaking=e,e&&(this.lastSpokeAt=new Date),this.emit(s.ParticipantEvent.IsSpeakingChanged,e))}},{key:"addTrackPublication",value:function(e){var t=this;e.on(s.TrackEvent.Muted,(function(){t.emit(s.ParticipantEvent.TrackMuted,e)})),e.on(s.TrackEvent.Unmuted,(function(){t.emit(s.ParticipantEvent.TrackUnmuted,e)}));var r=e;switch(r.track&&(r.track.sid=e.trackSid),this.tracks.set(e.trackSid,e),e.kind){case u.Track.Kind.Audio:this.audioTracks.set(e.trackSid,e);break;case u.Track.Kind.Video:this.videoTracks.set(e.trackSid,e)}}}])&&o(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),p}(c.EventEmitter);t.default=l},46422:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===n(i)?i:String(i)),o)}var i}function i(){return i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},i.apply(this,arguments)}function a(e,t){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},a(e,t)}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=s(r(65657)),l=r(38390),f=s(r(76882)),p=s(r(90823)),d=s(r(21233)),h=r(97370),y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}(b,e);var t,r,s,y,m,v=(y=b,m=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=c(y);if(m){var r=c(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function b(e,t,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,b),(n=v.call(this,t,r||"")).signalClient=e,n.tracks=new Map,n.audioTracks=new Map,n.videoTracks=new Map,n}return t=b,r=[{key:"addTrackPublication",value:function(e){var t=this;i(c(b.prototype),"addTrackPublication",this).call(this,e),e.on(l.TrackEvent.UpdateSettings,(function(e){t.signalClient.sendUpdateTrackSettings(e)})),e.on(l.TrackEvent.UpdateSubscription,(function(e){t.signalClient.sendUpdateSubscription(e)}))}},{key:"addSubscribedMediaTrack",value:function(e,t,r,n){var o=this,i=this.getTrackPublication(t);if(i||t.startsWith("TR")||this.tracks.forEach((function(t){i||e.kind!==t.kind.toString()||(i=t)})),!i)return 0===n?(u.default.error("could not find published track",this.sid,t),void this.emit(l.ParticipantEvent.TrackSubscriptionFailed,t)):(void 0===n&&(n=20),void setTimeout((function(){o.addSubscribedMediaTrack(e,t,r,n-1)}),150));var a,c="video"===e.kind;return a=c?new d.default(e,t,r):new f.default(e,t,r),i.setTrack(a),a.name=i.trackName,a.sid=i.trackSid,a.isMuted=i.isMuted,e.onended=function(){o.emit(l.ParticipantEvent.TrackUnsubscribed,a,i)},this.emit(l.ParticipantEvent.TrackSubscribed,a,i),i}},{key:"hasMetadata",get:function(){return!!this.participantInfo}},{key:"getTrackPublication",value:function(e){return this.tracks.get(e)}},{key:"updateInfo",value:function(e){var t=this,r=this.hasMetadata;i(c(b.prototype),"updateInfo",this).call(this,e);var n=new Map,o=new Map;e.tracks.forEach((function(e){var r=t.getTrackPublication(e.sid);if(r)r.updateInfo(e);else{var i=h.Track.kindFromProto(e.type);if(!i)return;(r=new p.default(i,e.sid,e.name)).updateInfo(e),o.set(e.sid,r),t.addTrackPublication(r)}n.set(e.sid,r)})),r&&o.forEach((function(e){t.emit(l.ParticipantEvent.TrackPublished,e)})),this.tracks.forEach((function(e){n.has(e.trackSid)||t.unpublishTrack(e.trackSid,!0)}))}},{key:"unpublishTrack",value:function(e,t){var r=this.tracks.get(e);if(r){switch(this.tracks.delete(e),r.kind){case h.Track.Kind.Audio:this.audioTracks.delete(e);break;case h.Track.Kind.Video:this.videoTracks.delete(e)}if(r.track){var n=r.track;n.stop(),r.setTrack(void 0),this.emit(l.ParticipantEvent.TrackUnsubscribed,n,r)}t&&this.emit(l.ParticipantEvent.TrackUnpublished,r)}}},{key:"emit",value:function(e){for(var t,r,n=arguments.length,o=new Array(n>1?n-1:0),a=1;a<n;a++)o[a-1]=arguments[a];return(t=u.default).trace.apply(t,["participant event",this.sid,e].concat(o)),(r=i(c(b.prototype),"emit",this)).call.apply(r,[this,e].concat(o))}}],s=[{key:"fromParticipantInfo",value:function(e,t){var r=new b(e,t.sid,t.identity);return r.updateInfo(t),r}}],r&&o(t.prototype,r),s&&o(t,s),Object.defineProperty(t,"prototype",{writable:!1}),b}(s(r(3410)).default);t.default=y},27597:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.monitorFrequency=void 0,t.monitorFrequency=2e3},80198:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},o(e,t)}function i(e){return i=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},i(e)}var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var c=a(r(64914)),s=r(97370),u=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}(u,e);var t,r,a,c=(r=u,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=i(r);if(a){var o=i(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function u(e,t,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(n=c.call(this,e,s.Track.Kind.Audio,t)).constraints=r||{},n}return t=u,Object.defineProperty(t,"prototype",{writable:!1}),t}(c.default);t.default=u},64914:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){o=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},c=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function f(e,t,r,n){var o=t&&t.prototype instanceof h?t:h,a=Object.create(o.prototype),c=new j(n||[]);return i(a,"_invoke",{value:P(e,r,c)}),a}function p(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=f;var d={};function h(){}function y(){}function m(){}var v={};l(v,c,(function(){return this}));var b=Object.getPrototypeOf,g=b&&b(b(C([])));g&&g!==t&&r.call(g,c)&&(v=g);var w=m.prototype=h.prototype=Object.create(v);function S(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function o(i,a,c,s){var u=p(e[i],e,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,c,s)}),(function(e){o("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return o("throw",e,c,s)}))}s(u.arg)}var a;i(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function P(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=k(a,r);if(c){if(c===d)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=p(e,t,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}function k(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,k(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var o=p(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function C(e){if(e){var t=e[c];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return y.prototype=m,i(w,"constructor",{value:m,configurable:!0}),i(m,"constructor",{value:y,configurable:!0}),y.displayName=l(m,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,u,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},S(O.prototype),l(O.prototype,s,(function(){return this})),e.AsyncIterator=O,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new O(f(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},S(w),l(w,u,"Generator"),l(w,c,(function(){return this})),l(w,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=C,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),E(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;E(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:C(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},e}function i(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===n(i)?i:String(i)),o)}var i}function a(e,t){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},a(e,t)}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}var s=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{s(n.next(e))}catch(e){i(e)}}function c(e){try{s(n.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,c)}s((n=n.apply(e,t||[])).next())}))},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var l=u(r(65657)),f=r(36917),p=r(38390),d=r(97370),h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}(m,e);var t,r,u,h,y=(u=m,h=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=c(u);if(h){var r=c(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function m(e,t,r,n){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,m),(o=y.call(this,e,t,r)).constraints=n||{},o}return t=m,(r=[{key:"id",get:function(){return this.mediaStreamTrack.id}},{key:"dimensions",get:function(){if(this.kind===d.Track.Kind.Video){var e=this.mediaStreamTrack.getSettings(),t=e.width,r=e.height;return t&&r?{width:t,height:r}:void 0}}},{key:"mute",value:function(){return this.setTrackMuted(!0),this}},{key:"unmute",value:function(){return this.setTrackMuted(!1),this}},{key:"restart",value:function(e){return s(this,void 0,void 0,o().mark((function t(){var r,n,i;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.sender){t.next=2;break}throw new f.TrackInvalidError("unable to restart an unpublished track");case 2:return e||(e=this.constraints),this.mediaStreamTrack.stop(),r={audio:!1,video:!1},this.kind===d.Track.Kind.Video?r.video=e:r.audio=e,t.next=8,navigator.mediaDevices.getUserMedia(r);case 8:return n=t.sent,i=n.getTracks()[0],l.default.info("re-acquired MediaStreamTrack"),this.constraints=e,i.enabled=this.mediaStreamTrack.enabled,t.next=15,this.sender.replaceTrack(i);case 15:return this.mediaStreamTrack=i,this.attachedElements.forEach((function(e){d.attachToElement(i,e)})),t.abrupt("return",this);case 18:case"end":return t.stop()}}),t,this)})))}},{key:"setTrackMuted",value:function(e){this.isMuted!==e&&(this.isMuted=e,this.mediaStreamTrack.enabled=!e,this.emit(e?p.TrackEvent.Muted:p.TrackEvent.Unmuted,this))}}])&&i(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),m}(d.Track);t.default=h},55690:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===n(i)?i:String(i)),o)}var i}function i(){return i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},i.apply(this,arguments)}function a(e,t){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},a(e,t)}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}(f,e);var t,r,s,u,l=(s=f,u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=c(s);if(u){var r=c(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function f(e,t,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),(n=l.call(this,e,t.sid,t.name)).updateInfo(t),n.setTrack(r),n}return t=f,(r=[{key:"isMuted",get:function(){return this.track?this.track.isMuted:i(c(f.prototype),"isMuted",this)}},{key:"mute",value:function(){var e;null===(e=this.track)||void 0===e||e.mute()}},{key:"unmute",value:function(){var e;null===(e=this.track)||void 0===e||e.unmute()}}])&&o(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),f}(s(r(18764)).default);t.default=u},86662:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){o=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},c=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function f(e,t,r,n){var o=t&&t.prototype instanceof h?t:h,a=Object.create(o.prototype),c=new j(n||[]);return i(a,"_invoke",{value:P(e,r,c)}),a}function p(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=f;var d={};function h(){}function y(){}function m(){}var v={};l(v,c,(function(){return this}));var b=Object.getPrototypeOf,g=b&&b(b(C([])));g&&g!==t&&r.call(g,c)&&(v=g);var w=m.prototype=h.prototype=Object.create(v);function S(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function o(i,a,c,s){var u=p(e[i],e,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,c,s)}),(function(e){o("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return o("throw",e,c,s)}))}s(u.arg)}var a;i(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function P(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=k(a,r);if(c){if(c===d)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=p(e,t,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}function k(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,k(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var o=p(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function C(e){if(e){var t=e[c];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return y.prototype=m,i(w,"constructor",{value:m,configurable:!0}),i(m,"constructor",{value:y,configurable:!0}),y.displayName=l(m,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,u,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},S(O.prototype),l(O.prototype,s,(function(){return this})),e.AsyncIterator=O,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new O(f(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},S(w),l(w,u,"Generator"),l(w,c,(function(){return this})),l(w,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=C,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),E(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;E(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:C(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},e}function i(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===n(i)?i:String(i)),o)}var i}function a(){return a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=u(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},a.apply(this,arguments)}function c(e,t){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},c(e,t)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}var l=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{s(n.next(e))}catch(e){i(e)}}function c(e){try{s(n.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,c)}s((n=n.apply(e,t||[])).next())}))},f=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var p=f(r(65657)),d=r(71970),h=r(27597),y=f(r(64914)),m=r(97370),v=["f","h","q"],b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(w,e);var t,r,f,y,b=(f=w,y=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=u(f);if(y){var r=u(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return s(e)}(this,e)});function w(e,t,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,w),(n=b.call(this,e,m.Track.Kind.Video,t)).disableCount={2:0,1:0,0:0},n.monitorSender=function(){return l(s(n),void 0,void 0,o().mark((function e(){var t,r,n=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getSenderStats();case 4:t=e.sent,r=new Map(t.map((function(e){return[e.rid,e]}))),this.prevStats&&this.isSimulcast&&this.checkAndUpdateSimulcast(r),this.prevStats=r,setTimeout((function(){n.monitorSender()}),h.monitorFrequency);case 9:case"end":return e.stop()}}),e,this)})))},n.constraints=r||{},n}return t=w,(r=[{key:"isSimulcast",get:function(){return!!(this.sender&&this.sender.getParameters().encodings.length>1)}},{key:"startMonitor",value:function(e){var t=this;this.isSimulcast&&(this.signalClient=e,setTimeout((function(){t.monitorSender()}),h.monitorFrequency))}},{key:"stop",value:function(){this.sender=void 0,a(u(w.prototype),"stop",this).call(this)}},{key:"getSenderStats",value:function(){return l(this,void 0,void 0,o().mark((function e(){var t,r,n,i=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender){e.next=2;break}return e.abrupt("return",[]);case 2:return t=[],e.next=5,this.sender.getStats();case 5:if((r=e.sent).forEach((function(e){"track"===e.type&&e.trackIdentifier===i.mediaStreamTrack.id&&(n=e)})),n){e.next=9;break}return e.abrupt("return",t);case 9:return r.forEach((function(e){if("outbound-rtp"===e.type&&e.trackId===n.id){var o={type:"video",streamId:e.id,frameHeight:e.frameHeight,frameWidth:e.frameWidth,firCount:e.firCount,pliCount:e.pliCount,nackCount:e.nackCount,packetsSent:e.packetsSent,framesSent:e.framesSent,timestamp:e.timestamp,rid:e.rid,retransmittedPacketsSent:e.retransmittedPacketsSent,qualityLimitationReason:e.qualityLimitationReason,qualityLimitationResolutionChanges:e.qualityLimitationResolutionChanges},i=r.get(e.remoteId);i&&(o.jitter=i.jitter,o.packetsLost=i.packetsLost,o.roundTripTime=i.roundTripTime),t.push(o)}})),t.sort((function(e,t){var r=v.indexOf(e.rid),n=v.indexOf(t.rid);return r===n?0:r<n?-1:1})),e.abrupt("return",t);case 12:case"end":return e.stop()}}),e,this)})))}},{key:"setPublishingQuality",value:function(e){var t;if(this.isSimulcast&&this.encodings){var r=!1,n=[];if(this.encodings.forEach((function(t){var o,i=g(null!==(o=t.rid)&&void 0!==o?o:""),a=i<=e;a!==t.active&&(r=!0,t.active=a),a&&n.push(i)})),r&&this.sender&&this.sid){this.lastQualityChange=(new Date).getTime(),null===(t=this.signalClient)||void 0===t||t.sendSetSimulcastLayers(this.sid,n);var o=this.sender.getParameters();o.encodings=this.encodings,p.default.debug("setting publishing quality. max quality",e),this.sender.setParameters(o)}}}},{key:"checkAndUpdateSimulcast",value:function(e){var t,r;if(this.sender){var n,o=this.sender.getParameters();if(this.encodings=o.encodings,this.encodings.forEach((function(e){void 0===n&&e.active&&(n=e)})),n){var i=null!==(t=n.rid)&&void 0!==t?t:"",a=e.get(i),c=null===(r=this.prevStats)||void 0===r?void 0:r.get(i);if(a&&c){var s=g(i);if(a.qualityLimitationResolutionChanges-c.qualityLimitationResolutionChanges>0&&(this.lastQualityChange=(new Date).getTime()),a.framesSent-c.framesSent>0){if(s===d.VideoQuality.HIGH||!this.lastQualityChange)return;if((new Date).getTime()-this.lastQualityChange<18e4)return;var u=s+1;if(this.disableCount[u]>=3)return;return p.default.debug("upgrading video quality to",u),void this.setPublishingQuality(u)}s!==d.VideoQuality.UNRECOGNIZED&&s!==d.VideoQuality.LOW&&(p.default.debug("downgrading video quality to",s-1),this.disableCount[s]+=1,this.setPublishingQuality(s-1))}}}}}])&&i(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),w}(y.default);function g(e){switch(e){case"f":return d.VideoQuality.HIGH;case"h":return d.VideoQuality.MEDIUM;case"q":return d.VideoQuality.LOW;default:return d.VideoQuality.UNRECOGNIZED}}t.default=b},76882:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===n(i)?i:String(i)),o)}var i}function i(e,t){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},i(e,t)}function a(e){return a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},a(e)}Object.defineProperty(t,"__esModule",{value:!0});var c=r(38390),s=r(97370),u=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i(e,t)}(p,e);var t,r,u,l,f=(u=p,l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=a(u);if(l){var r=a(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function p(e,t,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),(n=f.call(this,e,s.Track.Kind.Audio)).sid=t,n.receiver=r,n}return t=p,(r=[{key:"setMuted",value:function(e){this.isMuted!==e&&(this.isMuted=e,this.emit(e?c.TrackEvent.Muted:c.TrackEvent.Unmuted,this))}}])&&o(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),p}(s.Track);t.default=u},90823:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===n(i)?i:String(i)),o)}var i}function i(){return i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},i.apply(this,arguments)}function a(e,t){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},a(e,t)}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=r(71970),l=r(38390),f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}(d,e);var t,r,s,f,p=(s=d,f=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=c(s);if(f){var r=c(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function d(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),(e=p.apply(this,arguments)).disabled=!1,e.currentVideoQuality=u.VideoQuality.HIGH,e}return t=d,(r=[{key:"setSubscribed",value:function(e){this.subscribed=e;var t={trackSids:[this.trackSid],subscribe:this.subscribed};this.emit(l.TrackEvent.UpdateSubscription,t)}},{key:"isSubscribed",get:function(){return!1!==this.subscribed&&i(c(d.prototype),"isSubscribed",this)}},{key:"isEnabled",get:function(){return!this.disabled}},{key:"setEnabled",value:function(e){this.disabled!==!e&&(this.disabled=!e,this.emitTrackUpdate())}},{key:"setVideoQuality",value:function(e){this.currentVideoQuality!==e&&(this.currentVideoQuality=e,this.emitTrackUpdate())}},{key:"videoQuality",get:function(){return this.currentVideoQuality}},{key:"updateInfo",value:function(e){var t;i(c(d.prototype),"updateInfo",this).call(this,e),this.metadataMuted=e.muted,null===(t=this.track)||void 0===t||t.setMuted(e.muted)}},{key:"emitTrackUpdate",value:function(){var e={trackSids:[this.trackSid],disabled:this.disabled,quality:this.currentVideoQuality};this.emit(l.TrackEvent.UpdateSettings,e)}}])&&o(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),d}(s(r(18764)).default);t.default=f},21233:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===n(i)?i:String(i)),o)}var i}function i(){return i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},i.apply(this,arguments)}function a(e,t){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},a(e,t)}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}Object.defineProperty(t,"__esModule",{value:!0});var s=r(38390),u=r(97370),l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}(d,e);var t,r,l,f,p=(l=d,f=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=c(l);if(f){var r=c(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function d(e,t,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),(n=p.call(this,e,u.Track.Kind.Video)).sid=t,n.receiver=r,n}return t=d,(r=[{key:"setMuted",value:function(e){this.isMuted!==e&&(this.isMuted=e,this.emit(e?s.TrackEvent.Muted:s.TrackEvent.Unmuted,this))}},{key:"stop",value:function(){i(c(d.prototype),"stop",this).call(this)}}])&&o(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),d}(u.Track);t.default=l},97370:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===n(i)?i:String(i)),o)}var i}function i(e,t){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},i(e,t)}function a(e){return a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},a(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.attachToElement=t.Track=void 0;var c=r(40063),s=r(5501),u=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i(e,t)}(p,e);var t,r,c,s,u=(c=p,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=a(c);if(s){var r=a(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function p(e,t,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),(n=u.call(this)).attachedElements=[],n.isMuted=!1,n.kind=t,n.mediaStreamTrack=e,n.name=r||"",n}return t=p,(r=[{key:"attach",value:function(e){var t="audio";return this.kind===p.Kind.Video&&(t="video"),e?(e instanceof HTMLVideoElement&&(e.playsInline=!0),e.autoplay=!0):((e=document.createElement(t)).autoplay=!0,e instanceof HTMLVideoElement&&(e.playsInline=!0)),this.attachedElements.includes(e)||(l(this.mediaStreamTrack,e),this.attachedElements.push(e)),e}},{key:"detach",value:function(e){var t=this;if(e){f(this.mediaStreamTrack,e);var r=this.attachedElements.indexOf(e);return r>=0&&this.attachedElements.splice(r,1),e}var n=[];return this.attachedElements.forEach((function(e){f(t.mediaStreamTrack,e),n.push(e)})),this.attachedElements=[],n}},{key:"stop",value:function(){this.mediaStreamTrack.stop()}}])&&o(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),p}(c.EventEmitter);function l(e,t){var r;t.srcObject instanceof MediaStream?r=t.srcObject:(r=new MediaStream,t.srcObject=r),("audio"===e.kind?r.getAudioTracks():r.getVideoTracks()).forEach((function(e){r.removeTrack(e)})),r.addTrack(e)}function f(e,t){t.srcObject instanceof MediaStream&&t.srcObject.removeTrack(e)}t.Track=u,t.attachToElement=l,function(e){var t;!function(e){e.Audio="audio",e.Video="video",e.Unknown="unknown"}(t=e.Kind||(e.Kind={})),e.kindToProto=function(e){switch(e){case t.Audio:return s.TrackType.AUDIO;case t.Video:return s.TrackType.VIDEO;default:return s.TrackType.UNRECOGNIZED}},e.kindFromProto=function(e){switch(e){case s.TrackType.AUDIO:return t.Audio;case s.TrackType.VIDEO:return t.Video;default:return t.Unknown}}}(u=t.Track||(t.Track={}))},18764:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===n(i)?i:String(i)),o)}var i}function i(e,t){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},i(e,t)}function a(e){return a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},a(e)}var c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=r(40063),u=r(38390),l=c(r(80198)),f=c(r(86662)),p=c(r(76882)),d=c(r(21233)),h=r(97370),y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i(e,t)}(m,e);var t,r,c,s,y=(c=m,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=a(c);if(s){var r=a(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function m(e,t,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,m),(n=y.call(this)).metadataMuted=!1,n.kind=e,n.trackSid=t,n.trackName=r,n}return t=m,(r=[{key:"setTrack",value:function(e){var t=this;this.track=e,e&&(e.on(u.TrackEvent.Muted,(function(){t.emit(u.TrackEvent.Muted)})),e.on(u.TrackEvent.Unmuted,(function(){t.emit(u.TrackEvent.Unmuted)})))}},{key:"isMuted",get:function(){return this.metadataMuted}},{key:"isSubscribed",get:function(){return void 0!==this.track}},{key:"audioTrack",get:function(){if(this.track instanceof l.default||this.track instanceof p.default)return this.track}},{key:"videoTrack",get:function(){if(this.track instanceof f.default||this.track instanceof d.default)return this.track}},{key:"updateInfo",value:function(e){this.trackSid=e.sid,this.trackName=e.name,this.kind===h.Track.Kind.Video&&e.width>0&&(this.dimensions={width:e.width,height:e.height},this.simulcasted=e.simulcast)}}])&&o(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),m}(s.EventEmitter);t.default=y},47577:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},55409:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},28413:function(e,t){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function n(){n=function(){return e};var e={},t=Object.prototype,o=t.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},c=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function f(e,t,r,n){var o=t&&t.prototype instanceof h?t:h,a=Object.create(o.prototype),c=new j(n||[]);return i(a,"_invoke",{value:P(e,r,c)}),a}function p(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=f;var d={};function h(){}function y(){}function m(){}var v={};l(v,c,(function(){return this}));var b=Object.getPrototypeOf,g=b&&b(b(C([])));g&&g!==t&&o.call(g,c)&&(v=g);var w=m.prototype=h.prototype=Object.create(v);function S(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function n(i,a,c,s){var u=p(e[i],e,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==r(f)&&o.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,c,s)}),(function(e){n("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return n("throw",e,c,s)}))}s(u.arg)}var a;i(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function P(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=k(a,r);if(c){if(c===d)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=p(e,t,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}function k(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,k(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var o=p(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function C(e){if(e){var t=e[c];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(o.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:T}}function T(){return{value:void 0,done:!0}}return y.prototype=m,i(w,"constructor",{value:m,configurable:!0}),i(m,"constructor",{value:y,configurable:!0}),y.displayName=l(m,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,u,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},S(O.prototype),l(O.prototype,s,(function(){return this})),e.AsyncIterator=O,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new O(f(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},S(w),l(w,u,"Generator"),l(w,c,(function(){return this})),l(w,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=C,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&o.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=o.call(i,"catchLoc"),s=o.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),E(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;E(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:C(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},e}var o=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{s(n.next(e))}catch(e){i(e)}}function c(e){try{s(n.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,c)}s((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.sleep=t.useLegacyAPI=t.unpackStreamId=void 0;t.unpackStreamId=function(e){var t=e.split("|");return t.length>1?[t[0],e.substr(t[0].length+1)]:[e,""]},t.useLegacyAPI=function(){return"undefined"!=typeof navigator&&"ReactNative"===navigator.product},t.sleep=function(e){return o(this,void 0,void 0,n().mark((function t(){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){return setTimeout(t,e)})));case 1:case"end":return t.stop()}}),t)})))}},70044:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.protocolVersion=t.version=void 0,t.version="0.10.1",t.protocolVersion=2},65657:function(e,t,r){var n,o;function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}!function(a,c){"use strict";n=function(){var e=function(){},t="undefined",r=("undefined"==typeof window?"undefined":i(window))!==t&&i(window.navigator)!==t&&/Trident\/|MSIE /.test(window.navigator.userAgent),n=["trace","debug","info","warn","error"];function o(e,t){var r=e[t];if("function"==typeof r.bind)return r.bind(e);try{return Function.prototype.bind.call(r,e)}catch(t){return function(){return Function.prototype.apply.apply(r,[e,arguments])}}}function a(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function c(t,r){for(var o=0;o<n.length;o++){var i=n[o];this[i]=o<t?e:this.methodFactory(i,t,r)}this.log=this.debug}function s(e,r,n){return function(){("undefined"==typeof console?"undefined":i(console))!==t&&(c.call(this,r,n),this[e].apply(this,arguments))}}function u(n,c,u){return function(n){return"debug"===n&&(n="log"),("undefined"==typeof console?"undefined":i(console))!==t&&("trace"===n&&r?a:void 0!==console[n]?o(console,n):void 0!==console.log?o(console,"log"):e)}(n)||s.apply(this,arguments)}function l(e,r,o){var a,s=this,l="loglevel";function f(){var e;if(("undefined"==typeof window?"undefined":i(window))!==t&&l){try{e=window.localStorage[l]}catch(e){}if(i(e)===t)try{var r=window.document.cookie,n=r.indexOf(encodeURIComponent(l)+"=");-1!==n&&(e=/^([^;]+)/.exec(r.slice(n))[1])}catch(e){}return void 0===s.levels[e]&&(e=void 0),e}}"string"==typeof e?l+=":"+e:"symbol"===i(e)&&(l=void 0),s.name=e,s.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},s.methodFactory=o||u,s.getLevel=function(){return a},s.setLevel=function(r,o){if("string"==typeof r&&void 0!==s.levels[r.toUpperCase()]&&(r=s.levels[r.toUpperCase()]),!("number"==typeof r&&r>=0&&r<=s.levels.SILENT))throw"log.setLevel() called with invalid level: "+r;if(a=r,!1!==o&&function(e){var r=(n[e]||"silent").toUpperCase();if(("undefined"==typeof window?"undefined":i(window))!==t&&l){try{return void(window.localStorage[l]=r)}catch(e){}try{window.document.cookie=encodeURIComponent(l)+"="+r+";"}catch(e){}}}(r),c.call(s,r,e),("undefined"==typeof console?"undefined":i(console))===t&&r<s.levels.SILENT)return"No console available for logging"},s.setDefaultLevel=function(e){f()||s.setLevel(e,!1)},s.enableAll=function(e){s.setLevel(s.levels.TRACE,e)},s.disableAll=function(e){s.setLevel(s.levels.SILENT,e)};var p=f();null==p&&(p=null==r?"WARN":r),s.setLevel(p,!1)}var f=new l,p={};f.getLogger=function(e){if("symbol"!==i(e)&&"string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=p[e];return t||(t=p[e]=new l(e,f.getLevel(),f.methodFactory)),t};var d=("undefined"==typeof window?"undefined":i(window))!==t?window.log:void 0;return f.noConflict=function(){return("undefined"==typeof window?"undefined":i(window))!==t&&window.log===f&&(window.log=d),f},f.getLoggers=function(){return p},f.default=f,f},void 0===(o=n.call(t,r,t,e))||(e.exports=o)}()},15626:e=>{e.exports=r;var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){}function r(e,t,r){this.low=0|e,this.high=0|t,this.unsigned=!!r}function n(e){return!0===(e&&e.__isLong__)}r.prototype.__isLong__,Object.defineProperty(r.prototype,"__isLong__",{value:!0}),r.isLong=n;var o={},i={};function a(e,t){var r,n,a;return t?(a=0<=(e>>>=0)&&e<256)&&(n=i[e])?n:(r=s(e,(0|e)<0?-1:0,!0),a&&(i[e]=r),r):(a=-128<=(e|=0)&&e<128)&&(n=o[e])?n:(r=s(e,e<0?-1:0,!1),a&&(o[e]=r),r)}function c(e,t){if(isNaN(e))return t?v:m;if(t){if(e<0)return v;if(e>=d)return O}else{if(e<=-h)return P;if(e+1>=h)return S}return e<0?c(-e,t).neg():s(e%p|0,e/p|0,t)}function s(e,t,n){return new r(e,t,n)}r.fromInt=a,r.fromNumber=c,r.fromBits=s;var u=Math.pow;function l(e,t,r){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return m;if("number"==typeof t?(r=t,t=!1):t=!!t,(r=r||10)<2||36<r)throw RangeError("radix");var n;if((n=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===n)return l(e.substring(1),t,r).neg();for(var o=c(u(r,8)),i=m,a=0;a<e.length;a+=8){var s=Math.min(8,e.length-a),f=parseInt(e.substring(a,a+s),r);if(s<8){var p=c(u(r,s));i=i.mul(p).add(c(f))}else i=(i=i.mul(o)).add(c(f))}return i.unsigned=t,i}function f(e,t){return"number"==typeof e?c(e,t):"string"==typeof e?l(e,t):s(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}r.fromString=l,r.fromValue=f;var p=4294967296,d=p*p,h=d/2,y=a(1<<24),m=a(0);r.ZERO=m;var v=a(0,!0);r.UZERO=v;var b=a(1);r.ONE=b;var g=a(1,!0);r.UONE=g;var w=a(-1);r.NEG_ONE=w;var S=s(-1,2147483647,!1);r.MAX_VALUE=S;var O=s(-1,-1,!0);r.MAX_UNSIGNED_VALUE=O;var P=s(0,-2147483648,!1);r.MIN_VALUE=P;var k=r.prototype;k.toInt=function(){return this.unsigned?this.low>>>0:this.low},k.toNumber=function(){return this.unsigned?(this.high>>>0)*p+(this.low>>>0):this.high*p+(this.low>>>0)},k.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(P)){var t=c(e),r=this.div(t),n=r.mul(t).sub(this);return r.toString(e)+n.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var o=c(u(e,6),this.unsigned),i=this,a="";;){var s=i.div(o),l=(i.sub(s.mul(o)).toInt()>>>0).toString(e);if((i=s).isZero())return l+a;for(;l.length<6;)l="0"+l;a=""+l+a}},k.getHighBits=function(){return this.high},k.getHighBitsUnsigned=function(){return this.high>>>0},k.getLowBits=function(){return this.low},k.getLowBitsUnsigned=function(){return this.low>>>0},k.getNumBitsAbs=function(){if(this.isNegative())return this.eq(P)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},k.isZero=function(){return 0===this.high&&0===this.low},k.eqz=k.isZero,k.isNegative=function(){return!this.unsigned&&this.high<0},k.isPositive=function(){return this.unsigned||this.high>=0},k.isOdd=function(){return 1==(1&this.low)},k.isEven=function(){return 0==(1&this.low)},k.equals=function(e){return n(e)||(e=f(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low},k.eq=k.equals,k.notEquals=function(e){return!this.eq(e)},k.neq=k.notEquals,k.ne=k.notEquals,k.lessThan=function(e){return this.comp(e)<0},k.lt=k.lessThan,k.lessThanOrEqual=function(e){return this.comp(e)<=0},k.lte=k.lessThanOrEqual,k.le=k.lessThanOrEqual,k.greaterThan=function(e){return this.comp(e)>0},k.gt=k.greaterThan,k.greaterThanOrEqual=function(e){return this.comp(e)>=0},k.gte=k.greaterThanOrEqual,k.ge=k.greaterThanOrEqual,k.compare=function(e){if(n(e)||(e=f(e)),this.eq(e))return 0;var t=this.isNegative(),r=e.isNegative();return t&&!r?-1:!t&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},k.comp=k.compare,k.negate=function(){return!this.unsigned&&this.eq(P)?P:this.not().add(b)},k.neg=k.negate,k.add=function(e){n(e)||(e=f(e));var t=this.high>>>16,r=65535&this.high,o=this.low>>>16,i=65535&this.low,a=e.high>>>16,c=65535&e.high,u=e.low>>>16,l=0,p=0,d=0,h=0;return d+=(h+=i+(65535&e.low))>>>16,p+=(d+=o+u)>>>16,l+=(p+=r+c)>>>16,l+=t+a,s((d&=65535)<<16|(h&=65535),(l&=65535)<<16|(p&=65535),this.unsigned)},k.subtract=function(e){return n(e)||(e=f(e)),this.add(e.neg())},k.sub=k.subtract,k.multiply=function(e){if(this.isZero())return m;if(n(e)||(e=f(e)),t)return s(t.mul(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned);if(e.isZero())return m;if(this.eq(P))return e.isOdd()?P:m;if(e.eq(P))return this.isOdd()?P:m;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(y)&&e.lt(y))return c(this.toNumber()*e.toNumber(),this.unsigned);var r=this.high>>>16,o=65535&this.high,i=this.low>>>16,a=65535&this.low,u=e.high>>>16,l=65535&e.high,p=e.low>>>16,d=65535&e.low,h=0,v=0,b=0,g=0;return b+=(g+=a*d)>>>16,v+=(b+=i*d)>>>16,b&=65535,v+=(b+=a*p)>>>16,h+=(v+=o*d)>>>16,v&=65535,h+=(v+=i*p)>>>16,v&=65535,h+=(v+=a*l)>>>16,h+=r*d+o*p+i*l+a*u,s((b&=65535)<<16|(g&=65535),(h&=65535)<<16|(v&=65535),this.unsigned)},k.mul=k.multiply,k.divide=function(e){if(n(e)||(e=f(e)),e.isZero())throw Error("division by zero");var r,o,i;if(t)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?s((this.unsigned?t.div_u:t.div_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?v:m;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return v;if(e.gt(this.shru(1)))return g;i=v}else{if(this.eq(P))return e.eq(b)||e.eq(w)?P:e.eq(P)?b:(r=this.shr(1).div(e).shl(1)).eq(m)?e.isNegative()?b:w:(o=this.sub(e.mul(r)),i=r.add(o.div(e)));if(e.eq(P))return this.unsigned?v:m;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();i=m}for(o=this;o.gte(e);){r=Math.max(1,Math.floor(o.toNumber()/e.toNumber()));for(var a=Math.ceil(Math.log(r)/Math.LN2),l=a<=48?1:u(2,a-48),p=c(r),d=p.mul(e);d.isNegative()||d.gt(o);)d=(p=c(r-=l,this.unsigned)).mul(e);p.isZero()&&(p=b),i=i.add(p),o=o.sub(d)}return i},k.div=k.divide,k.modulo=function(e){return n(e)||(e=f(e)),t?s((this.unsigned?t.rem_u:t.rem_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},k.mod=k.modulo,k.rem=k.modulo,k.not=function(){return s(~this.low,~this.high,this.unsigned)},k.and=function(e){return n(e)||(e=f(e)),s(this.low&e.low,this.high&e.high,this.unsigned)},k.or=function(e){return n(e)||(e=f(e)),s(this.low|e.low,this.high|e.high,this.unsigned)},k.xor=function(e){return n(e)||(e=f(e)),s(this.low^e.low,this.high^e.high,this.unsigned)},k.shiftLeft=function(e){return n(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?s(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):s(0,this.low<<e-32,this.unsigned)},k.shl=k.shiftLeft,k.shiftRight=function(e){return n(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?s(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):s(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},k.shr=k.shiftRight,k.shiftRightUnsigned=function(e){if(n(e)&&(e=e.toInt()),0==(e&=63))return this;var t=this.high;return e<32?s(this.low>>>e|t<<32-e,t>>>e,this.unsigned):s(32===e?t:t>>>e-32,0,this.unsigned)},k.shru=k.shiftRightUnsigned,k.shr_u=k.shiftRightUnsigned,k.toSigned=function(){return this.unsigned?s(this.low,this.high,!1):this},k.toUnsigned=function(){return this.unsigned?this:s(this.low,this.high,!0)},k.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},k.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},k.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},r.fromBytes=function(e,t,n){return n?r.fromBytesLE(e,t):r.fromBytesBE(e,t)},r.fromBytesLE=function(e,t){return new r(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},r.fromBytesBE=function(e,t){return new r(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}},96338:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}var o="function"==typeof Map&&Map.prototype,i=Object.getOwnPropertyDescriptor&&o?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,a=o&&i&&"function"==typeof i.get?i.get:null,c=o&&Map.prototype.forEach,s="function"==typeof Set&&Set.prototype,u=Object.getOwnPropertyDescriptor&&s?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,l=s&&u&&"function"==typeof u.get?u.get:null,f=s&&Set.prototype.forEach,p="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,d="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,h="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,y=Boolean.prototype.valueOf,m=Object.prototype.toString,v=Function.prototype.toString,b=String.prototype.match,g="function"==typeof BigInt?BigInt.prototype.valueOf:null,w=Object.getOwnPropertySymbols,S="function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?Symbol.prototype.toString:null,O="function"==typeof Symbol&&"object"===n(Symbol.iterator),P=Object.prototype.propertyIsEnumerable,k=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null),_=r(65863).custom,E=_&&R(_)?_:null,j="function"==typeof Symbol&&void 0!==Symbol.toStringTag?Symbol.toStringTag:null;function C(e,t,r){var n="double"===(r.quoteStyle||t)?'"':"'";return n+e+n}function T(e){return String(e).replace(/"/g,"&quot;")}function x(e){return!("[object Array]"!==M(e)||j&&"object"===n(e)&&j in e)}function R(e){if(O)return e&&"object"===n(e)&&e instanceof Symbol;if("symbol"===n(e))return!0;if(!e||"object"!==n(e)||!S)return!1;try{return S.call(e),!0}catch(e){}return!1}e.exports=function e(t,r,o,i){var s=r||{};if(L(s,"quoteStyle")&&"single"!==s.quoteStyle&&"double"!==s.quoteStyle)throw new TypeError('option "quoteStyle" must be "single" or "double"');if(L(s,"maxStringLength")&&("number"==typeof s.maxStringLength?s.maxStringLength<0&&s.maxStringLength!==1/0:null!==s.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var u=!L(s,"customInspect")||s.customInspect;if("boolean"!=typeof u&&"symbol"!==u)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(L(s,"indent")&&null!==s.indent&&"\t"!==s.indent&&!(parseInt(s.indent,10)===s.indent&&s.indent>0))throw new TypeError('options "indent" must be "\\t", an integer > 0, or `null`');if(void 0===t)return"undefined";if(null===t)return"null";if("boolean"==typeof t)return t?"true":"false";if("string"==typeof t)return A(t,s);if("number"==typeof t)return 0===t?1/0/t>0?"0":"-0":String(t);if("bigint"==typeof t)return String(t)+"n";var m=void 0===s.depth?5:s.depth;if(void 0===o&&(o=0),o>=m&&m>0&&"object"===n(t))return x(t)?"[Array]":"[Object]";var w,P=function(e,t){var r;if("\t"===e.indent)r="\t";else{if(!("number"==typeof e.indent&&e.indent>0))return null;r=Array(e.indent+1).join(" ")}return{base:r,prev:Array(t+1).join(r)}}(s,o);if(void 0===i)i=[];else if(D(i,t)>=0)return"[Circular]";function _(t,r,n){if(r&&(i=i.slice()).push(r),n){var a={depth:s.depth};return L(s,"quoteStyle")&&(a.quoteStyle=s.quoteStyle),e(t,a,o+1,i)}return e(t,s,o+1,i)}if("function"==typeof t){var I=function(e){if(e.name)return e.name;var t=b.call(v.call(e),/^function\s*([\w$]+)/);return t?t[1]:null}(t),N=z(t,_);return"[Function"+(I?": "+I:" (anonymous)")+"]"+(N.length>0?" { "+N.join(", ")+" }":"")}if(R(t)){var W=O?String(t).replace(/^(Symbol\(.*\))_[^)]*$/,"$1"):S.call(t);return"object"!==n(t)||O?W:U(W)}if((w=t)&&"object"===n(w)&&("undefined"!=typeof HTMLElement&&w instanceof HTMLElement||"string"==typeof w.nodeName&&"function"==typeof w.getAttribute)){for(var V="<"+String(t.nodeName).toLowerCase(),G=t.attributes||[],H=0;H<G.length;H++)V+=" "+G[H].name+"="+C(T(G[H].value),"double",s);return V+=">",t.childNodes&&t.childNodes.length&&(V+="..."),V+"</"+String(t.nodeName).toLowerCase()+">"}if(x(t)){if(0===t.length)return"[]";var J=z(t,_);return P&&!function(e){for(var t=0;t<e.length;t++)if(D(e[t],"\n")>=0)return!1;return!0}(J)?"["+q(J,P)+"]":"[ "+J.join(", ")+" ]"}if(function(e){return!("[object Error]"!==M(e)||j&&"object"===n(e)&&j in e)}(t)){var Y=z(t,_);return 0===Y.length?"["+String(t)+"]":"{ ["+String(t)+"] "+Y.join(", ")+" }"}if("object"===n(t)&&u){if(E&&"function"==typeof t[E])return t[E]();if("symbol"!==u&&"function"==typeof t.inspect)return t.inspect()}if(function(e){if(!a||!e||"object"!==n(e))return!1;try{a.call(e);try{l.call(e)}catch(e){return!0}return e instanceof Map}catch(e){}return!1}(t)){var K=[];return c.call(t,(function(e,r){K.push(_(r,t,!0)+" => "+_(e,t))})),F("Map",a.call(t),K,P)}if(function(e){if(!l||!e||"object"!==n(e))return!1;try{l.call(e);try{a.call(e)}catch(e){return!0}return e instanceof Set}catch(e){}return!1}(t)){var $=[];return f.call(t,(function(e){$.push(_(e,t))})),F("Set",l.call(t),$,P)}if(function(e){if(!p||!e||"object"!==n(e))return!1;try{p.call(e,p);try{d.call(e,d)}catch(e){return!0}return e instanceof WeakMap}catch(e){}return!1}(t))return B("WeakMap");if(function(e){if(!d||!e||"object"!==n(e))return!1;try{d.call(e,d);try{p.call(e,p)}catch(e){return!0}return e instanceof WeakSet}catch(e){}return!1}(t))return B("WeakSet");if(function(e){if(!h||!e||"object"!==n(e))return!1;try{return h.call(e),!0}catch(e){}return!1}(t))return B("WeakRef");if(function(e){return!("[object Number]"!==M(e)||j&&"object"===n(e)&&j in e)}(t))return U(_(Number(t)));if(function(e){if(!e||"object"!==n(e)||!g)return!1;try{return g.call(e),!0}catch(e){}return!1}(t))return U(_(g.call(t)));if(function(e){return!("[object Boolean]"!==M(e)||j&&"object"===n(e)&&j in e)}(t))return U(y.call(t));if(function(e){return!("[object String]"!==M(e)||j&&"object"===n(e)&&j in e)}(t))return U(_(String(t)));if(!function(e){return!("[object Date]"!==M(e)||j&&"object"===n(e)&&j in e)}(t)&&!function(e){return!("[object RegExp]"!==M(e)||j&&"object"===n(e)&&j in e)}(t)){var X=z(t,_),Q=k?k(t)===Object.prototype:t instanceof Object||t.constructor===Object,Z=t instanceof Object?"":"null prototype",ee=!Q&&j&&Object(t)===t&&j in t?M(t).slice(8,-1):Z?"Object":"",te=(Q||"function"!=typeof t.constructor?"":t.constructor.name?t.constructor.name+" ":"")+(ee||Z?"["+[].concat(ee||[],Z||[]).join(": ")+"] ":"");return 0===X.length?te+"{}":P?te+"{"+q(X,P)+"}":te+"{ "+X.join(", ")+" }"}return String(t)};var I=Object.prototype.hasOwnProperty||function(e){return e in this};function L(e,t){return I.call(e,t)}function M(e){return m.call(e)}function D(e,t){if(e.indexOf)return e.indexOf(t);for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}function A(e,t){if(e.length>t.maxStringLength){var r=e.length-t.maxStringLength,n="... "+r+" more character"+(r>1?"s":"");return A(e.slice(0,t.maxStringLength),t)+n}return C(e.replace(/(['\\])/g,"\\$1").replace(/[\x00-\x1f]/g,N),"single",t)}function N(e){var t=e.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return r?"\\"+r:"\\x"+(t<16?"0":"")+t.toString(16).toUpperCase()}function U(e){return"Object("+e+")"}function B(e){return e+" { ? }"}function F(e,t,r,n){return e+" ("+t+") {"+(n?q(r,n):r.join(", "))+"}"}function q(e,t){if(0===e.length)return"";var r="\n"+t.prev+t.base;return r+e.join(","+r)+"\n"+t.prev}function z(e,t){var r=x(e),n=[];if(r){n.length=e.length;for(var o=0;o<e.length;o++)n[o]=L(e,o)?t(e[o],e):""}var i,a="function"==typeof w?w(e):[];if(O){i={};for(var c=0;c<a.length;c++)i["$"+a[c]]=a[c]}for(var s in e)L(e,s)&&(r&&String(Number(s))===s&&s<e.length||O&&i["$"+s]instanceof Symbol||(/[^\w$]/.test(s)?n.push(t(s,e)+": "+t(e[s],e)):n.push(s+": "+t(e[s],e))));if("function"==typeof w)for(var u=0;u<a.length;u++)P.call(e,a[u])&&n.push("["+t(a[u])+"]: "+t(e[a[u]],e));return n}},75268:e=>{"use strict";var t=function(e){return e!=e};e.exports=function(e,r){return 0===e&&0===r?1/e==1/r:e===r||!(!t(e)||!t(r))}},28675:(e,t,r)=>{"use strict";var n=r(10635),o=r(64411),i=r(75268),a=r(8231),c=r(62627),s=o(a(),Object);n(s,{getPolyfill:a,implementation:i,shim:c}),e.exports=s},8231:(e,t,r)=>{"use strict";var n=r(75268);e.exports=function(){return"function"==typeof Object.is?Object.is:n}},62627:(e,t,r)=>{"use strict";var n=r(8231),o=r(10635);e.exports=function(){var e=n();return o(Object,{is:e},{is:function(){return Object.is!==e}}),e}},45131:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}var o;if(!Object.keys){var i=Object.prototype.hasOwnProperty,a=Object.prototype.toString,c=r(97631),s=Object.prototype.propertyIsEnumerable,u=!s.call({toString:null},"toString"),l=s.call((function(){}),"prototype"),f=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],p=function(e){var t=e.constructor;return t&&t.prototype===e},d={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},h=function(){if("undefined"==typeof window)return!1;for(var e in window)try{if(!d["$"+e]&&i.call(window,e)&&null!==window[e]&&"object"===n(window[e]))try{p(window[e])}catch(e){return!0}}catch(e){return!0}return!1}();o=function(e){var t=null!==e&&"object"===n(e),r="[object Function]"===a.call(e),o=c(e),s=t&&"[object String]"===a.call(e),d=[];if(!t&&!r&&!o)throw new TypeError("Object.keys called on a non-object");var y=l&&r;if(s&&e.length>0&&!i.call(e,0))for(var m=0;m<e.length;++m)d.push(String(m));if(o&&e.length>0)for(var v=0;v<e.length;++v)d.push(String(v));else for(var b in e)y&&"prototype"===b||!i.call(e,b)||d.push(String(b));if(u)for(var g=function(e){if("undefined"==typeof window||!h)return p(e);try{return p(e)}catch(e){return!1}}(e),w=0;w<f.length;++w)g&&"constructor"===f[w]||!i.call(e,f[w])||d.push(f[w]);return d}}e.exports=o},42801:(e,t,r)=>{"use strict";var n=Array.prototype.slice,o=r(97631),i=Object.keys,a=i?function(e){return i(e)}:r(45131),c=Object.keys;a.shim=function(){if(Object.keys){var e=function(){var e=Object.keys(arguments);return e&&e.length===arguments.length}(1,2);e||(Object.keys=function(e){return o(e)?c(n.call(e)):c(e)})}else Object.keys=a;return Object.keys||a},e.exports=a},97631:e=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}var r=Object.prototype.toString;e.exports=function(e){var n=r.call(e),o="[object Arguments]"===n;return o||(o="[object Array]"!==n&&null!==e&&"object"===t(e)&&"number"==typeof e.length&&e.length>=0&&"[object Function]"===r.call(e.callee)),o}},10938:(e,t,r)=>{"use strict";var n=r(42801),o=function(e){return null!=e},i=r(2112)(),a=r(49493),c=Object,s=a("Array.prototype.push"),u=a("Object.prototype.propertyIsEnumerable"),l=i?Object.getOwnPropertySymbols:null;e.exports=function(e,t){if(!o(e))throw new TypeError("target must be an object");var r,a,f,p,d,h,y,m=c(e);for(r=1;r<arguments.length;++r){a=c(arguments[r]),p=n(a);var v=i&&(Object.getOwnPropertySymbols||l);if(v)for(d=v(a),f=0;f<d.length;++f)y=d[f],u(a,y)&&s(p,y);for(f=0;f<p.length;++f)h=a[y=p[f]],u(a,y)&&(m[y]=h)}return m}},46880:(e,t,r)=>{"use strict";var n=r(10635),o=r(64411),i=r(10938),a=r(25611),c=r(28993),s=o.apply(a()),u=function(e,t){return s(Object,arguments)};n(u,{getPolyfill:a,implementation:i,shim:c}),e.exports=u},25611:(e,t,r)=>{"use strict";var n=r(10938);e.exports=function(){return Object.assign?function(){if(!Object.assign)return!1;for(var e="abcdefghijklmnopqrst",t=e.split(""),r={},n=0;n<t.length;++n)r[t[n]]=t[n];var o=Object.assign({},r),i="";for(var a in o)i+=a;return e!==i}()||function(){if(!Object.assign||!Object.preventExtensions)return!1;var e=Object.preventExtensions({1:2});try{Object.assign(e,"xy")}catch(t){return"y"===e[1]}return!1}()?n:Object.assign:n}},28993:(e,t,r)=>{"use strict";var n=r(10635),o=r(25611);e.exports=function(){var e=o();return n(Object,{assign:e},{assign:function(){return Object.assign!==e}}),e}},33870:(e,t,r)=>{"use strict";e.exports=r(70361)},70361:(e,t,r)=>{"use strict";var n=t;function o(){n.util._configure(),n.Writer._configure(n.BufferWriter),n.Reader._configure(n.BufferReader)}n.build="minimal",n.Writer=r(25938),n.BufferWriter=r(84001),n.Reader=r(51729),n.BufferReader=r(92881),n.util=r(86072),n.rpc=r(58464),n.roots=r(69390),n.configure=o,o()},51729:(e,t,r)=>{"use strict";e.exports=s;var n,o=r(86072),i=o.LongBits,a=o.utf8;function c(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function s(e){this.buf=e,this.pos=0,this.len=e.length}var u,l="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new s(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new s(e);throw Error("illegal buffer")},f=function(){return o.Buffer?function(e){return(s.create=function(e){return o.Buffer.isBuffer(e)?new n(e):l(e)})(e)}:l};function p(){var e=new i(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw c(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw c(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function d(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function h(){if(this.pos+8>this.len)throw c(this,8);return new i(d(this.buf,this.pos+=4),d(this.buf,this.pos+=4))}s.create=f(),s.prototype._slice=o.Array.prototype.subarray||o.Array.prototype.slice,s.prototype.uint32=(u=4294967295,function(){if(u=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return u;if((this.pos+=5)>this.len)throw this.pos=this.len,c(this,10);return u}),s.prototype.int32=function(){return 0|this.uint32()},s.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},s.prototype.bool=function(){return 0!==this.uint32()},s.prototype.fixed32=function(){if(this.pos+4>this.len)throw c(this,4);return d(this.buf,this.pos+=4)},s.prototype.sfixed32=function(){if(this.pos+4>this.len)throw c(this,4);return 0|d(this.buf,this.pos+=4)},s.prototype.float=function(){if(this.pos+4>this.len)throw c(this,4);var e=o.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},s.prototype.double=function(){if(this.pos+8>this.len)throw c(this,4);var e=o.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},s.prototype.bytes=function(){var e=this.uint32(),t=this.pos,r=this.pos+e;if(r>this.len)throw c(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,r):t===r?new this.buf.constructor(0):this._slice.call(this.buf,t,r)},s.prototype.string=function(){var e=this.bytes();return a.read(e,0,e.length)},s.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw c(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw c(this)}while(128&this.buf[this.pos++]);return this},s.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},s._configure=function(e){n=e,s.create=f(),n._configure();var t=o.Long?"toLong":"toNumber";o.merge(s.prototype,{int64:function(){return p.call(this)[t](!1)},uint64:function(){return p.call(this)[t](!0)},sint64:function(){return p.call(this).zzDecode()[t](!1)},fixed64:function(){return h.call(this)[t](!0)},sfixed64:function(){return h.call(this)[t](!1)}})}},92881:(e,t,r)=>{"use strict";e.exports=i;var n=r(51729);(i.prototype=Object.create(n.prototype)).constructor=i;var o=r(86072);function i(e){n.call(this,e)}i._configure=function(){o.Buffer&&(i.prototype._slice=o.Buffer.prototype.slice)},i.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},i._configure()},69390:e=>{"use strict";e.exports={}},58464:(e,t,r)=>{"use strict";t.Service=r(37419)},37419:(e,t,r)=>{"use strict";e.exports=o;var n=r(86072);function o(e,t,r){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");n.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(r)}(o.prototype=Object.create(n.EventEmitter.prototype)).constructor=o,o.prototype.rpcCall=function e(t,r,o,i,a){if(!i)throw TypeError("request must be specified");var c=this;if(!a)return n.asPromise(e,c,t,r,o,i);if(c.rpcImpl)try{return c.rpcImpl(t,r[c.requestDelimited?"encodeDelimited":"encode"](i).finish(),(function(e,r){if(e)return c.emit("error",e,t),a(e);if(null!==r){if(!(r instanceof o))try{r=o[c.responseDelimited?"decodeDelimited":"decode"](r)}catch(e){return c.emit("error",e,t),a(e)}return c.emit("data",r,t),a(null,r)}c.end(!0)}))}catch(e){return c.emit("error",e,t),void setTimeout((function(){a(e)}),0)}else setTimeout((function(){a(Error("already ended"))}),0)},o.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},47401:(e,t,r)=>{"use strict";e.exports=o;var n=r(86072);function o(e,t){this.lo=e>>>0,this.hi=t>>>0}var i=o.zero=new o(0,0);i.toNumber=function(){return 0},i.zzEncode=i.zzDecode=function(){return this},i.length=function(){return 1};var a=o.zeroHash="\0\0\0\0\0\0\0\0";o.fromNumber=function(e){if(0===e)return i;var t=e<0;t&&(e=-e);var r=e>>>0,n=(e-r)/4294967296>>>0;return t&&(n=~n>>>0,r=~r>>>0,++r>4294967295&&(r=0,++n>4294967295&&(n=0))),new o(r,n)},o.from=function(e){if("number"==typeof e)return o.fromNumber(e);if(n.isString(e)){if(!n.Long)return o.fromNumber(parseInt(e,10));e=n.Long.fromString(e)}return e.low||e.high?new o(e.low>>>0,e.high>>>0):i},o.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,r=~this.hi>>>0;return t||(r=r+1>>>0),-(t+4294967296*r)}return this.lo+4294967296*this.hi},o.prototype.toLong=function(e){return n.Long?new n.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var c=String.prototype.charCodeAt;o.fromHash=function(e){return e===a?i:new o((c.call(e,0)|c.call(e,1)<<8|c.call(e,2)<<16|c.call(e,3)<<24)>>>0,(c.call(e,4)|c.call(e,5)<<8|c.call(e,6)<<16|c.call(e,7)<<24)>>>0)},o.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},o.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},o.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},o.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,r=this.hi>>>24;return 0===r?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:r<128?9:10}},86072:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}var o=t;function i(e,t,r){for(var n=Object.keys(t),o=0;o<n.length;++o)void 0!==e[n[o]]&&r||(e[n[o]]=t[n[o]]);return e}function a(e){function t(e,r){if(!(this instanceof t))return new t(e,r);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),r&&i(this,r)}return(t.prototype=Object.create(Error.prototype)).constructor=t,Object.defineProperty(t.prototype,"name",{get:function(){return e}}),t.prototype.toString=function(){return this.name+": "+this.message},t}o.asPromise=r(48446),o.base64=r(32129),o.EventEmitter=r(91186),o.float=r(80756),o.inquire=r(81578),o.utf8=r(95793),o.pool=r(49187),o.LongBits=r(47401),o.isNode=Boolean(void 0!==r.g&&r.g&&r.g.process&&r.g.process.versions&&r.g.process.versions.node),o.global=o.isNode&&r.g||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,o.emptyArray=Object.freeze?Object.freeze([]):[],o.emptyObject=Object.freeze?Object.freeze({}):{},o.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},o.isString=function(e){return"string"==typeof e||e instanceof String},o.isObject=function(e){return e&&"object"===n(e)},o.isset=o.isSet=function(e,t){var r=e[t];return!(null==r||!e.hasOwnProperty(t))&&("object"!==n(r)||(Array.isArray(r)?r.length:Object.keys(r).length)>0)},o.Buffer=function(){try{var e=o.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}(),o._Buffer_from=null,o._Buffer_allocUnsafe=null,o.newBuffer=function(e){return"number"==typeof e?o.Buffer?o._Buffer_allocUnsafe(e):new o.Array(e):o.Buffer?o._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},o.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,o.Long=o.global.dcodeIO&&o.global.dcodeIO.Long||o.global.Long||o.inquire("long"),o.key2Re=/^true|false|0|1$/,o.key32Re=/^-?(?:0|[1-9][0-9]*)$/,o.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,o.longToHash=function(e){return e?o.LongBits.from(e).toHash():o.LongBits.zeroHash},o.longFromHash=function(e,t){var r=o.LongBits.fromHash(e);return o.Long?o.Long.fromBits(r.lo,r.hi,t):r.toNumber(Boolean(t))},o.merge=i,o.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},o.newError=a,o.ProtocolError=a("ProtocolError"),o.oneOfGetter=function(e){for(var t={},r=0;r<e.length;++r)t[e[r]]=1;return function(){for(var e=Object.keys(this),r=e.length-1;r>-1;--r)if(1===t[e[r]]&&void 0!==this[e[r]]&&null!==this[e[r]])return e[r]}},o.oneOfSetter=function(e){return function(t){for(var r=0;r<e.length;++r)e[r]!==t&&delete this[e[r]]}},o.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},o._configure=function(){var e=o.Buffer;e?(o._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,r){return new e(t,r)},o._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):o._Buffer_from=o._Buffer_allocUnsafe=null}},25938:(e,t,r)=>{"use strict";e.exports=f;var n,o=r(86072),i=o.LongBits,a=o.base64,c=o.utf8;function s(e,t,r){this.fn=e,this.len=t,this.next=void 0,this.val=r}function u(){}function l(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function f(){this.len=0,this.head=new s(u,0,0),this.tail=this.head,this.states=null}var p=function(){return o.Buffer?function(){return(f.create=function(){return new n})()}:function(){return new f}};function d(e,t,r){t[r]=255&e}function h(e,t){this.len=e,this.next=void 0,this.val=t}function y(e,t,r){for(;e.hi;)t[r++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[r++]=127&e.lo|128,e.lo=e.lo>>>7;t[r++]=e.lo}function m(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}f.create=p(),f.alloc=function(e){return new o.Array(e)},o.Array!==Array&&(f.alloc=o.pool(f.alloc,o.Array.prototype.subarray)),f.prototype._push=function(e,t,r){return this.tail=this.tail.next=new s(e,t,r),this.len+=t,this},h.prototype=Object.create(s.prototype),h.prototype.fn=function(e,t,r){for(;e>127;)t[r++]=127&e|128,e>>>=7;t[r]=e},f.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new h((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},f.prototype.int32=function(e){return e<0?this._push(y,10,i.fromNumber(e)):this.uint32(e)},f.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},f.prototype.uint64=function(e){var t=i.from(e);return this._push(y,t.length(),t)},f.prototype.int64=f.prototype.uint64,f.prototype.sint64=function(e){var t=i.from(e).zzEncode();return this._push(y,t.length(),t)},f.prototype.bool=function(e){return this._push(d,1,e?1:0)},f.prototype.fixed32=function(e){return this._push(m,4,e>>>0)},f.prototype.sfixed32=f.prototype.fixed32,f.prototype.fixed64=function(e){var t=i.from(e);return this._push(m,4,t.lo)._push(m,4,t.hi)},f.prototype.sfixed64=f.prototype.fixed64,f.prototype.float=function(e){return this._push(o.float.writeFloatLE,4,e)},f.prototype.double=function(e){return this._push(o.float.writeDoubleLE,8,e)};var v=o.Array.prototype.set?function(e,t,r){t.set(e,r)}:function(e,t,r){for(var n=0;n<e.length;++n)t[r+n]=e[n]};f.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(d,1,0);if(o.isString(e)){var r=f.alloc(t=a.length(e));a.decode(e,r,0),e=r}return this.uint32(t)._push(v,t,e)},f.prototype.string=function(e){var t=c.length(e);return t?this.uint32(t)._push(c.write,t,e):this._push(d,1,0)},f.prototype.fork=function(){return this.states=new l(this),this.head=this.tail=new s(u,0,0),this.len=0,this},f.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new s(u,0,0),this.len=0),this},f.prototype.ldelim=function(){var e=this.head,t=this.tail,r=this.len;return this.reset().uint32(r),r&&(this.tail.next=e.next,this.tail=t,this.len+=r),this},f.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),r=0;e;)e.fn(e.val,t,r),r+=e.len,e=e.next;return t},f._configure=function(e){n=e,f.create=p(),n._configure()}},84001:(e,t,r)=>{"use strict";e.exports=i;var n=r(25938);(i.prototype=Object.create(n.prototype)).constructor=i;var o=r(86072);function i(){n.call(this)}function a(e,t,r){e.length<40?o.utf8.write(e,t,r):t.utf8Write?t.utf8Write(e,r):t.write(e,r)}i._configure=function(){i.alloc=o._Buffer_allocUnsafe,i.writeBytesBuffer=o.Buffer&&o.Buffer.prototype instanceof Uint8Array&&"set"===o.Buffer.prototype.set.name?function(e,t,r){t.set(e,r)}:function(e,t,r){if(e.copy)e.copy(t,r,0,e.length);else for(var n=0;n<e.length;)t[r++]=e[n++]}},i.prototype.bytes=function(e){o.isString(e)&&(e=o._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(i.writeBytesBuffer,t,e),this},i.prototype.string=function(e){var t=o.Buffer.byteLength(e);return this.uint32(t),t&&this._push(a,t,e),this},i._configure()},94600:(e,t,r)=>{"use strict";t.ZP=void 0;var n=i(r(52843)),o=i(r(44868));function i(e){return e&&e.__esModule?e:{default:e}}var a=n.default;t.ZP=a,o.default},52843:(e,t,r)=>{"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,o(n.key),n)}}function o(e){var t=function(e,t){if("object"!==s(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===s(t)?t:String(t)}function i(e,t){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},i(e,t)}function a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}t.__esModule=!0,t.default=void 0;var u=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==s(e)&&"function"!=typeof e)return{default:e};var t=l();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=n?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}return r.default=e,t&&t.set(e,r),r}(r(16689));function l(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return l=function(){return e},e}function f(){return f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},f.apply(this,arguments)}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var d="--aspect-ratio",h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i(e,t)}(m,e);var t,r,l,h,y=(l=m,h=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=c(l);if(h){var r=c(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return a(e)}(this,e)});function m(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,m),p(a(e=y.apply(this,arguments)),"node",null),p(a(e),"setNode",(function(t){e.node=t})),e}return t=m,(r=[{key:"componentDidUpdate",value:function(){if(this.node){var e=this.node;e.style.getPropertyValue(d)||e.style.setProperty(d,"("+this.props.ratio+")")}}},{key:"render",value:function(){var e,t,r,n=this.props,i=n.children,a=n.ratio,c=n.style,s=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(n,["children","ratio","style"]),l=f({},c,(e={},r="("+a+")",(t=o(t=d))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e));return u.default.createElement("div",f({},s,{ref:this.setNode,style:l}),i)}}])&&n(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),m}(u.Component);p(h,"defaultProps",{className:"react-aspect-ratio-placeholder",ratio:1});var y=h;t.default=y},44868:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}t.__esModule=!0,t.default=void 0;var o,i=(o=r(16689))&&o.__esModule?o:{default:o};function a(){return a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a.apply(this,arguments)}var c=function(e){var t=e.children,r=e.ratio,o=e.style,c=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,["children","ratio","style"]),s=a({},o,function(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===n(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}({},"--aspect-ratio","("+r+")"));return i.default.createElement("div",a({},c,{style:s}),t)};c.defaultProps={className:"react-aspect-ratio-placeholder",ratio:1};var s=c;t.default=s},6860:function(e,t,r){var n,o,i,a;function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}e=r.nmd(e),"undefined"!=typeof self&&self,a=function(e){return function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=7)}([function(e,t,r){"use strict";function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(n=(a=c.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==c.return||c.return()}finally{if(o)throw i}}return r}}(e,t)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var i=r(1),a=r.n(i),c=r(8),s=r.n(c),u=r(2),l=r(10),f=r.n(l),p=r(3),d=r(6),h=function(e){if(!e)return null;var t=Object.keys(e);return 0===t.length?null:t.reduce((function(t,r){return t[Object(u.a)(r)]=e[r],t}),{})},y=function(){var e=a.a.useRef(!1);return a.a.useEffect((function(){e.current=!0}),[]),e.current};t.a=function(e,t,r){var o=function(e){var t=a.a.useContext(d.a),r=function(){return h(e)||h(t)},o=n(a.a.useState(r),2),i=o[0],c=o[1];return a.a.useEffect((function(){var e=r();f()(i,e)||c(e)}),[e,t]),i}(t),i=function(e){var t=function(){return function(e){return e.query||Object(p.a)(e)}(e)},r=n(a.a.useState(t),2),o=r[0],i=r[1];return a.a.useEffect((function(){var e=t();o!==e&&i(e)}),[e]),o}(e);if(!i)throw new Error("Invalid or missing MediaQuery!");var c=function(e,t){var r=function(){return s()(e,t||{},!!t)},o=n(a.a.useState(r),2),i=o[0],c=o[1],u=y();return a.a.useEffect((function(){return u&&c(r()),function(){i.dispose()}}),[e,t]),i}(i,o),u=function(e){var t=n(a.a.useState(e.matches),2),r=t[0],o=t[1];return a.a.useEffect((function(){var t=function(){o(e.matches)};return e.addListener(t),t(),function(){e.removeListener(t)}}),[e]),r}(c),l=y();return a.a.useEffect((function(){l&&r&&r(u)}),[u]),u}},function(t,r){t.exports=e},function(e,t,r){"use strict";function n(e){return"-"+e.toLowerCase()}var o=/[A-Z]/g,i=/^ms-/,a={};t.a=function(e){if(a.hasOwnProperty(e))return a[e];var t=e.replace(o,n);return a[e]=i.test(t)?"-"+t:t}},function(e,t,r){"use strict";var n=r(2),o=r(11);t.a=function(e){var t=[];return Object.keys(o.a.all).forEach((function(r){var o=e[r];null!=o&&t.push(function(e,t){var r=Object(n.a)(e);return"number"==typeof t&&(t="".concat(t,"px")),!0===t?r:!1===t?"not ".concat(r):"(".concat(r,": ").concat(t,")")}(r,o))})),t.join(" and ")}},function(e,t,r){"use strict";e.exports=r(13)},function(e,t,r){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,r){"use strict";var n=r(1),o=r.n(n).a.createContext();t.a=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),o=r(17),i=r(3),a=r(6);r.d(t,"default",(function(){return o.a})),r.d(t,"useMediaQuery",(function(){return n.a})),r.d(t,"toQuery",(function(){return i.a})),r.d(t,"Context",(function(){return a.a}))},function(e,t,r){"use strict";function n(e,t,r){function n(e){a.matches=e.matches,a.media=e.media}var a=this;if(i&&!r){var c=i.call(window,e);this.matches=c.matches,this.media=c.media,c.addListener(n)}else this.matches=o(e,t),this.media=e;this.addListener=function(e){c&&c.addListener(e)},this.removeListener=function(e){c&&c.removeListener(e)},this.dispose=function(){c&&c.removeListener(n)}}var o=r(9).match,i="undefined"!=typeof window?window.matchMedia:null;e.exports=function(e,t,r){return new n(e,t,r)}},function(e,t,r){"use strict";function n(e){return e.split(",").map((function(e){var t=(e=e.trim()).match(c),r=t[1],n=t[2],o=t[3]||"",i={};return i.inverse=!!r&&"not"===r.toLowerCase(),i.type=n?n.toLowerCase():"all",o=o.match(/\([^\)]+\)/g)||[],i.expressions=o.map((function(e){var t=e.match(s),r=t[1].toLowerCase().match(u);return{modifier:r[1],feature:r[2],value:t[2]}})),i}))}function o(e){var t,r=Number(e);return r||(r=(t=e.match(/^(\d+)\s*\/\s*(\d+)$/))[1]/t[2]),r}function i(e){var t=parseFloat(e);switch(String(e).match(f)[1]){case"dpcm":return t/2.54;case"dppx":return 96*t;default:return t}}function a(e){var t=parseFloat(e);switch(String(e).match(l)[1]){case"em":case"rem":return 16*t;case"cm":return 96*t/2.54;case"mm":return 96*t/2.54/10;case"in":return 96*t;case"pt":return 72*t;case"pc":return 72*t/12;default:return t}}t.match=function(e,t){return n(e).some((function(e){var r=e.inverse,n="all"===e.type||t.type===e.type;if(n&&r||!n&&!r)return!1;var c=e.expressions.every((function(e){var r=e.feature,n=e.modifier,c=e.value,s=t[r];if(!s)return!1;switch(r){case"orientation":case"scan":return s.toLowerCase()===c.toLowerCase();case"width":case"height":case"device-width":case"device-height":c=a(c),s=a(s);break;case"resolution":c=i(c),s=i(s);break;case"aspect-ratio":case"device-aspect-ratio":case"device-pixel-ratio":c=o(c),s=o(s);break;case"grid":case"color":case"color-index":case"monochrome":c=parseInt(c,10)||1,s=parseInt(s,10)||0}switch(n){case"min":return s>=c;case"max":return s<=c;default:return s===c}}));return c&&!r||!c&&r}))},t.parse=n;var c=/(?:(only|not)?\s*([^\s\(\)]+)(?:\s*and)?\s*)?(.+)?/i,s=/\(\s*([^\s\:\)]+)\s*(?:\:\s*([^\s\)]+))?\s*\)/,u=/^(?:(min|max)-)?(.+)/,l=/(em|rem|px|cm|mm|in|pt|pc)?$/,f=/(dpi|dpcm|dppx)?$/},function(e,t,r){"use strict";e.exports=function(e,t){if(e===t)return!0;if(!e||!t)return!1;var r=Object.keys(e),n=Object.keys(t),o=r.length;if(n.length!==o)return!1;for(var i=0;i<o;i++){var a=r[i];if(e[a]!==t[a]||!Object.prototype.hasOwnProperty.call(t,a))return!1}return!0}},function(e,t,r){"use strict";function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=r(12),c=r.n(a),s=c.a.oneOfType([c.a.string,c.a.number]),u={orientation:c.a.oneOf(["portrait","landscape"]),scan:c.a.oneOf(["progressive","interlace"]),aspectRatio:c.a.string,deviceAspectRatio:c.a.string,height:s,deviceHeight:s,width:s,deviceWidth:s,color:c.a.bool,colorIndex:c.a.bool,monochrome:c.a.bool,resolution:s},l=o({minAspectRatio:c.a.string,maxAspectRatio:c.a.string,minDeviceAspectRatio:c.a.string,maxDeviceAspectRatio:c.a.string,minHeight:s,maxHeight:s,minDeviceHeight:s,maxDeviceHeight:s,minWidth:s,maxWidth:s,minDeviceWidth:s,maxDeviceWidth:s,minColor:c.a.number,maxColor:c.a.number,minColorIndex:c.a.number,maxColorIndex:c.a.number,minMonochrome:c.a.number,maxMonochrome:c.a.number,minResolution:s,maxResolution:s},u),f={all:c.a.bool,grid:c.a.bool,aural:c.a.bool,braille:c.a.bool,handheld:c.a.bool,print:c.a.bool,projection:c.a.bool,screen:c.a.bool,tty:c.a.bool,tv:c.a.bool,embossed:c.a.bool},p=o(o({},f),l);u.type=Object.keys(f),t.a={all:p,types:f,matchers:u,features:l}},function(e,t,r){var n=r(4);e.exports=r(14)(n.isElement,!0)},function(e,t,r){"use strict";!function(){function e(e){if("object"==c(e)&&null!==e){var t=e.$$typeof;switch(t){case o:var r=e.type;switch(r){case p:case d:case a:case u:case s:case y:return r;default:var n=r&&r.$$typeof;switch(n){case f:case h:case b:case v:case l:return n;default:return t}}case i:return t}}}function r(t){return e(t)===d}var n="function"==typeof Symbol&&Symbol.for,o=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,s=n?Symbol.for("react.strict_mode"):60108,u=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,f=n?Symbol.for("react.context"):60110,p=n?Symbol.for("react.async_mode"):60111,d=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,y=n?Symbol.for("react.suspense"):60113,m=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,b=n?Symbol.for("react.lazy"):60116,g=n?Symbol.for("react.block"):60121,w=n?Symbol.for("react.fundamental"):60117,S=n?Symbol.for("react.responder"):60118,O=n?Symbol.for("react.scope"):60119,P=p,k=d,_=f,E=l,j=o,C=h,T=a,x=b,R=v,I=i,L=u,M=s,D=y,A=!1;t.AsyncMode=P,t.ConcurrentMode=k,t.ContextConsumer=_,t.ContextProvider=E,t.Element=j,t.ForwardRef=C,t.Fragment=T,t.Lazy=x,t.Memo=R,t.Portal=I,t.Profiler=L,t.StrictMode=M,t.Suspense=D,t.isAsyncMode=function(t){return A||(A=!0,console.warn("The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API.")),r(t)||e(t)===p},t.isConcurrentMode=r,t.isContextConsumer=function(t){return e(t)===f},t.isContextProvider=function(t){return e(t)===l},t.isElement=function(e){return"object"==c(e)&&null!==e&&e.$$typeof===o},t.isForwardRef=function(t){return e(t)===h},t.isFragment=function(t){return e(t)===a},t.isLazy=function(t){return e(t)===b},t.isMemo=function(t){return e(t)===v},t.isPortal=function(t){return e(t)===i},t.isProfiler=function(t){return e(t)===u},t.isStrictMode=function(t){return e(t)===s},t.isSuspense=function(t){return e(t)===y},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===a||e===d||e===u||e===s||e===y||e===m||"object"==c(e)&&null!==e&&(e.$$typeof===b||e.$$typeof===v||e.$$typeof===l||e.$$typeof===f||e.$$typeof===h||e.$$typeof===w||e.$$typeof===S||e.$$typeof===O||e.$$typeof===g)},t.typeOf=e}()},function(e,t,r){"use strict";function n(){return null}var o=r(4),i=r(15),a=r(5),s=r(16),u=Function.call.bind(Object.prototype.hasOwnProperty),l=function(){};l=function(e){var t="Warning: "+e;"undefined"!=typeof console&&console.error(t);try{throw new Error(t)}catch(e){}},e.exports=function(e,t){function r(e){this.message=e,this.stack=""}function f(e){function n(n,c,s,u,f,p,d){if(u=u||g,p=p||s,d!==a){if(t){var h=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}if("undefined"!=typeof console){var y=u+":"+s;!o[y]&&i<3&&(l("You are manually calling a React.PropTypes validation function for the `"+p+"` prop on `"+u+"`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details."),o[y]=!0,i++)}}return null==c[s]?n?new r(null===c[s]?"The "+f+" `"+p+"` is marked as required in `"+u+"`, but its value is `null`.":"The "+f+" `"+p+"` is marked as required in `"+u+"`, but its value is `undefined`."):null:e(c,s,u,f,p)}var o={},i=0,c=n.bind(null,!1);return c.isRequired=n.bind(null,!0),c}function p(e){return f((function(t,n,o,i,a,c){var s=t[n];return h(s)!==e?new r("Invalid "+i+" `"+a+"` of type `"+y(s)+"` supplied to `"+o+"`, expected `"+e+"`."):null}))}function d(t){switch(c(t)){case"number":case"string":case"undefined":return!0;case"boolean":return!t;case"object":if(Array.isArray(t))return t.every(d);if(null===t||e(t))return!0;var r=function(e){var t=e&&(v&&e[v]||e[b]);if("function"==typeof t)return t}(t);if(!r)return!1;var n,o=r.call(t);if(r!==t.entries){for(;!(n=o.next()).done;)if(!d(n.value))return!1}else for(;!(n=o.next()).done;){var i=n.value;if(i&&!d(i[1]))return!1}return!0;default:return!1}}function h(e){var t=c(e);return Array.isArray(e)?"array":e instanceof RegExp?"object":function(e,t){return"symbol"===e||!!t&&("Symbol"===t["@@toStringTag"]||"function"==typeof Symbol&&t instanceof Symbol)}(t,e)?"symbol":t}function y(e){if(null==e)return""+e;var t=h(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}function m(e){var t=y(e);switch(t){case"array":case"object":return"an "+t;case"boolean":case"date":case"regexp":return"a "+t;default:return t}}var v="function"==typeof Symbol&&Symbol.iterator,b="@@iterator",g="<<anonymous>>",w={array:p("array"),bool:p("boolean"),func:p("function"),number:p("number"),object:p("object"),string:p("string"),symbol:p("symbol"),any:f(n),arrayOf:function(e){return f((function(t,n,o,i,c){if("function"!=typeof e)return new r("Property `"+c+"` of component `"+o+"` has invalid PropType notation inside arrayOf.");var s=t[n];if(!Array.isArray(s))return new r("Invalid "+i+" `"+c+"` of type `"+h(s)+"` supplied to `"+o+"`, expected an array.");for(var u=0;u<s.length;u++){var l=e(s,u,o,i,c+"["+u+"]",a);if(l instanceof Error)return l}return null}))},element:f((function(t,n,o,i,a){var c=t[n];return e(c)?null:new r("Invalid "+i+" `"+a+"` of type `"+h(c)+"` supplied to `"+o+"`, expected a single ReactElement.")})),elementType:f((function(e,t,n,i,a){var c=e[t];return o.isValidElementType(c)?null:new r("Invalid "+i+" `"+a+"` of type `"+h(c)+"` supplied to `"+n+"`, expected a single ReactElement type.")})),instanceOf:function(e){return f((function(t,n,o,i,a){if(!(t[n]instanceof e)){var c=e.name||g;return new r("Invalid "+i+" `"+a+"` of type `"+((s=t[n]).constructor&&s.constructor.name?s.constructor.name:g)+"` supplied to `"+o+"`, expected instance of `"+c+"`.")}var s;return null}))},node:f((function(e,t,n,o,i){return d(e[t])?null:new r("Invalid "+o+" `"+i+"` supplied to `"+n+"`, expected a ReactNode.")})),objectOf:function(e){return f((function(t,n,o,i,c){if("function"!=typeof e)return new r("Property `"+c+"` of component `"+o+"` has invalid PropType notation inside objectOf.");var s=t[n],l=h(s);if("object"!==l)return new r("Invalid "+i+" `"+c+"` of type `"+l+"` supplied to `"+o+"`, expected an object.");for(var f in s)if(u(s,f)){var p=e(s,f,o,i,c+"."+f,a);if(p instanceof Error)return p}return null}))},oneOf:function(e){return Array.isArray(e)?f((function(t,n,o,i,a){for(var c=t[n],s=0;s<e.length;s++)if((u=c)===(l=e[s])?0!==u||1/u==1/l:u!=u&&l!=l)return null;var u,l,f=JSON.stringify(e,(function(e,t){return"symbol"===y(t)?String(t):t}));return new r("Invalid "+i+" `"+a+"` of value `"+String(c)+"` supplied to `"+o+"`, expected one of "+f+".")})):(l(arguments.length>1?"Invalid arguments supplied to oneOf, expected an array, got "+arguments.length+" arguments. A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z]).":"Invalid argument supplied to oneOf, expected an array."),n)},oneOfType:function(e){if(!Array.isArray(e))return l("Invalid argument supplied to oneOfType, expected an instance of array."),n;for(var t=0;t<e.length;t++){var o=e[t];if("function"!=typeof o)return l("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+m(o)+" at index "+t+"."),n}return f((function(t,n,o,i,c){for(var s=0;s<e.length;s++)if(null==(0,e[s])(t,n,o,i,c,a))return null;return new r("Invalid "+i+" `"+c+"` supplied to `"+o+"`.")}))},shape:function(e){return f((function(t,n,o,i,c){var s=t[n],u=h(s);if("object"!==u)return new r("Invalid "+i+" `"+c+"` of type `"+u+"` supplied to `"+o+"`, expected `object`.");for(var l in e){var f=e[l];if(f){var p=f(s,l,o,i,c+"."+l,a);if(p)return p}}return null}))},exact:function(e){return f((function(t,n,o,c,s){var u=t[n],l=h(u);if("object"!==l)return new r("Invalid "+c+" `"+s+"` of type `"+l+"` supplied to `"+o+"`, expected `object`.");var f=i({},t[n],e);for(var p in f){var d=e[p];if(!d)return new r("Invalid "+c+" `"+s+"` key `"+p+"` supplied to `"+o+"`.\nBad object: "+JSON.stringify(t[n],null,"  ")+"\nValid keys: "+JSON.stringify(Object.keys(e),null,"  "));var y=d(u,p,o,c,s+"."+p,a);if(y)return y}return null}))}};return r.prototype=Error.prototype,w.checkPropTypes=s,w.resetWarningCache=s.resetWarningCache,w.PropTypes=w,w}},function(e,t,r){"use strict";var n=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach((function(e){n[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var r,a,c=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),s=1;s<arguments.length;s++){for(var u in r=Object(arguments[s]))o.call(r,u)&&(c[u]=r[u]);if(n){a=n(r);for(var l=0;l<a.length;l++)i.call(r,a[l])&&(c[a[l]]=r[a[l]])}}return c}},function(e,t,r){"use strict";function n(e,t,r,n,u){for(var l in e)if(s(e,l)){var f;try{if("function"!=typeof e[l]){var p=Error((n||"React class")+": "+r+" type `"+l+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+c(e[l])+"`.");throw p.name="Invariant Violation",p}f=e[l](t,l,n,r,null,i)}catch(e){f=e}if(!f||f instanceof Error||o((n||"React class")+": type specification of "+r+" `"+l+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+c(f)+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument)."),f instanceof Error&&!(f.message in a)){a[f.message]=!0;var d=u?u():"";o("Failed "+r+" type: "+f.message+(null!=d?d:""))}}}var o=function(){},i=r(5),a={},s=Function.call.bind(Object.prototype.hasOwnProperty);o=function(e){var t="Warning: "+e;"undefined"!=typeof console&&console.error(t);try{throw new Error(t)}catch(e){}},n.resetWarningCache=function(){a={}},e.exports=n},function(e,t,r){"use strict";t.a=function(e){var t=e.children,r=e.device,o=e.onChange,i=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["children","device","onChange"]),a=Object(n.a)(i,r,o);return"function"==typeof t?t(a):a?t:null};var n=r(0)}])},"object"==c(t)&&"object"==c(e)?e.exports=a(r(16689)):(o=[r(16689)],void 0===(i="function"==typeof(n=a)?n.apply(t,o):n)||(e.exports=i))},90691:function(e,t,r){var n,o,i,a;function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}e=r.nmd(e),a=function(e){return function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r(31);var n=function(e){return e&&e.__esModule?e:{default:e}}(r(13));t.default=n.default},function(t,r){t.exports=e},function(e,t,r){e.exports=r(19)()},function(e,t){"use strict";t.__esModule=!0,t.default=function(e){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]="number"==typeof e[r]?e[r]:e[r].val);return t},e.exports=t.default},function(e,t,r){(function(t){(function(){var r,n,o;"undefined"!=typeof performance&&null!==performance&&performance.now?e.exports=function(){return performance.now()}:null!=t&&t.hrtime?(e.exports=function(){return(r()-o)/1e6},n=t.hrtime,r=function(){var e;return 1e9*(e=n())[0]+e[1]},o=r()):Date.now?(e.exports=function(){return Date.now()-o},o=Date.now()):(e.exports=function(){return(new Date).getTime()-o},o=(new Date).getTime())}).call(this)}).call(t,r(10))},function(e,t,r){(function(t){for(var n=r(23),o="undefined"==typeof window?t:window,i=["moz","webkit"],a="AnimationFrame",c=o["request"+a],s=o["cancel"+a]||o["cancelRequest"+a],u=0;!c&&u<i.length;u++)c=o[i[u]+"Request"+a],s=o[i[u]+"Cancel"+a]||o[i[u]+"CancelRequest"+a];if(!c||!s){var l=0,f=0,p=[];c=function(e){if(0===p.length){var t=n(),r=Math.max(0,16.666666666666668-(t-l));l=r+t,setTimeout((function(){var e=p.slice(0);p.length=0;for(var t=0;t<e.length;t++)if(!e[t].cancelled)try{e[t].callback(l)}catch(e){setTimeout((function(){throw e}),0)}}),Math.round(r))}return p.push({handle:++f,callback:e,cancelled:!1}),f},s=function(e){for(var t=0;t<p.length;t++)p[t].handle===e&&(p[t].cancelled=!0)}}e.exports=function(e){return c.call(o,e)},e.exports.cancel=function(){s.apply(o,arguments)},e.exports.polyfill=function(e){e||(e=o),e.requestAnimationFrame=c,e.cancelAnimationFrame=s}}).call(t,function(){return this}())},function(e,t){"use strict";t.__esModule=!0,t.default=function(e){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=0);return t},e.exports=t.default},function(e,t){"use strict";t.__esModule=!0,t.default=function(e,t,r){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(0!==r[n])return!1;var o="number"==typeof t[n]?t[n]:t[n].val;if(e[n]!==o)return!1}return!0},e.exports=t.default},function(e,t){"use strict";t.__esModule=!0,t.default=function(e,t,n,o,i,a,c){var s=n+(-i*(t-o)+-a*n)*e,u=t+s*e;return Math.abs(s)<c&&Math.abs(u-o)<c?(r[0]=o,r[1]=0,r):(r[0]=u,r[1]=s,r)};var r=[0,0];e.exports=t.default},function(e,t,r){"use strict";function n(e){var t=e.version;if("string"!=typeof t)return!0;var r=t.split("."),n=parseInt(r[0],10),o=parseInt(r[1],10);return 0===n&&13===o}Object.defineProperty(t,"__esModule",{value:!0}),t.findDOMNode=function(e){return i?o.default.findDOMNode(e):e},t.warnAboutFunctionChild=function(){a||i||(a=!0,console.error("With React 0.14 and later versions, you no longer need to wrap <ScrollArea> child into a function."))},t.warnAboutElementChild=function(){!a&&i&&(a=!0,console.error("With React 0.13, you need to wrap <ScrollArea> child into a function."))},t.positiveOrZero=function(e){return e<0?0:e},t.modifyObjValues=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e},r={};for(var n in e)e.hasOwnProperty(n)&&(r[n]=t(e[n]));return r},t.isReact13=n;var o=function(e){return e&&e.__esModule?e:{default:e}}(r(1)),i=n(o.default),a=!1},function(e,t){function r(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function o(e){if(u===setTimeout)return setTimeout(e,0);if((u===r||!u)&&setTimeout)return u=setTimeout,setTimeout(e,0);try{return u(e,0)}catch(t){try{return u.call(null,e,0)}catch(t){return u.call(this,e,0)}}}function i(){h&&p&&(h=!1,p.length?d=p.concat(d):y=-1,d.length&&a())}function a(){if(!h){var e=o(i);h=!0;for(var t=d.length;t;){for(p=d,d=[];++y<t;)p&&p[y].run();y=-1,t=d.length}p=null,h=!1,function(e){if(l===clearTimeout)return clearTimeout(e);if((l===n||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(e);try{l(e)}catch(t){try{return l.call(null,e)}catch(t){return l.call(this,e)}}}(e)}}function c(e,t){this.fun=e,this.array=t}function s(){}var u,l,f=e.exports={};!function(){try{u="function"==typeof setTimeout?setTimeout:r}catch(e){u=r}try{l="function"==typeof clearTimeout?clearTimeout:n}catch(e){l=n}}();var p,d=[],h=!1,y=-1;f.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];d.push(new c(e,t)),1!==d.length||h||o(a)},c.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=s,f.addListener=s,f.once=s,f.off=s,f.removeListener=s,f.removeAllListeners=s,f.emit=s,f.binding=function(e){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(e){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},function(e,t){"use strict";t.__esModule=!0,t.default={noWobble:{stiffness:170,damping:26},gentle:{stiffness:120,damping:14},wobbly:{stiffness:180,damping:12},stiff:{stiffness:210,damping:20}},e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e.default:e}t.__esModule=!0;var o=r(24);t.Motion=n(o);var i=r(25);t.StaggeredMotion=n(i);var a=r(26);t.TransitionMotion=n(a);var c=r(29);t.spring=n(c);var s=r(11);t.presets=n(s);var u=r(3);t.stripStyle=n(u);var l=r(28);t.reorderKeys=n(l)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==c(Symbol.iterator)?function(e){return c(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":c(e)},i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=n(r(1)),u=n(r(2)),l=n(r(18)),f=r(12),p=r(9),d=n(r(14)),h="wheel",y="api",m="touchEnd",v="keypress",b=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=c(t)&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.state={topPosition:0,leftPosition:0,realHeight:0,containerHeight:0,realWidth:0,containerWidth:0},r.scrollArea={refresh:function(){r.setSizesToState()},scrollTop:function(){r.scrollTop()},scrollBottom:function(){r.scrollBottom()},scrollYTo:function(e){r.scrollYTo(e)},scrollLeft:function(){r.scrollLeft()},scrollRight:function(){r.scrollRight()},scrollXTo:function(e){r.scrollXTo(e)}},r.evntsPreviousValues={clientX:0,clientY:0,deltaX:0,deltaY:0},r.bindedHandleWindowResize=r.handleWindowResize.bind(r),r.bindedHandleWheel=r.handleWheel.bind(r),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+c(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"getChildContext",value:function(){return{scrollArea:this.scrollArea}}},{key:"componentDidMount",value:function(){this.props.contentWindow&&this.props.contentWindow.addEventListener("resize",this.bindedHandleWindowResize),this.lineHeightPx=(0,l.default)((0,p.findDOMNode)(this.content)),this.setSizesToState(),this.wrapper.addEventListener("wheel",this.bindedHandleWheel,{passive:!1})}},{key:"componentWillUnmount",value:function(){this.props.contentWindow&&this.props.contentWindow.removeEventListener("resize",this.bindedHandleWindowResize),this.wrapper.removeEventListener("wheel",this.bindedHandleWheel)}},{key:"componentDidUpdate",value:function(){this.setSizesToState()}},{key:"render",value:function(){var e=this,t=this.props,r=t.children,n=t.className,o=t.contentClassName,a=t.ownerDocument,c=this.props.smoothScrolling&&(this.state.eventType===h||this.state.eventType===y||this.state.eventType===m||this.state.eventType===v),u=this.canScrollY()?s.default.createElement(d.default,{ownerDocument:a,realSize:this.state.realHeight,containerSize:this.state.containerHeight,position:this.state.topPosition,onMove:this.handleScrollbarMove.bind(this),onPositionChange:this.handleScrollbarYPositionChange.bind(this),containerStyle:this.props.verticalContainerStyle,scrollbarStyle:this.props.verticalScrollbarStyle,smoothScrolling:c,minScrollSize:this.props.minScrollSize,onFocus:this.focusContent.bind(this),type:"vertical"}):null,l=this.canScrollX()?s.default.createElement(d.default,{ownerDocument:a,realSize:this.state.realWidth,containerSize:this.state.containerWidth,position:this.state.leftPosition,onMove:this.handleScrollbarMove.bind(this),onPositionChange:this.handleScrollbarXPositionChange.bind(this),containerStyle:this.props.horizontalContainerStyle,scrollbarStyle:this.props.horizontalScrollbarStyle,smoothScrolling:c,minScrollSize:this.props.minScrollSize,onFocus:this.focusContent.bind(this),type:"horizontal"}):null;"function"==typeof r?((0,p.warnAboutFunctionChild)(),r=r()):(0,p.warnAboutElementChild)();var b="scrollarea "+(n||""),g="scrollarea-content "+(o||""),w={marginTop:-this.state.topPosition,marginLeft:-this.state.leftPosition},S=c?(0,p.modifyObjValues)(w,(function(e){return(0,f.spring)(e)})):w;return s.default.createElement(f.Motion,{style:S},(function(t){return s.default.createElement("div",{ref:function(t){return e.wrapper=t},className:b,style:e.props.style},s.default.createElement("div",{ref:function(t){return e.content=t},style:i({},e.props.contentStyle,t),className:g,onTouchStart:e.handleTouchStart.bind(e),onTouchMove:e.handleTouchMove.bind(e),onTouchEnd:e.handleTouchEnd.bind(e),onKeyDown:e.handleKeyDown.bind(e),tabIndex:e.props.focusableTabIndex},r),u,l)}))}},{key:"setStateFromEvent",value:function(e,t){this.props.onScroll&&this.props.onScroll(e),this.setState(i({},e,{eventType:t}))}},{key:"handleTouchStart",value:function(e){var t=e.touches;if(1===t.length){var r=t[0],n=r.clientX,o=r.clientY;this.eventPreviousValues=i({},this.eventPreviousValues,{clientY:o,clientX:n,timestamp:Date.now()})}}},{key:"handleTouchMove",value:function(e){this.canScroll()&&(e.preventDefault(),e.stopPropagation());var t=e.touches;if(1===t.length){var r=t[0],n=r.clientX,o=r.clientY,a=this.eventPreviousValues.clientY-o,c=this.eventPreviousValues.clientX-n;this.eventPreviousValues=i({},this.eventPreviousValues,{deltaY:a,deltaX:c,clientY:o,clientX:n,timestamp:Date.now()}),this.setStateFromEvent(this.composeNewState(-c,-a))}}},{key:"handleTouchEnd",value:function(e){var t=this.eventPreviousValues,r=t.deltaX,n=t.deltaY,o=t.timestamp;void 0===r&&(r=0),void 0===n&&(n=0),Date.now()-o<200&&this.setStateFromEvent(this.composeNewState(10*-r,10*-n),m),this.eventPreviousValues=i({},this.eventPreviousValues,{deltaY:0,deltaX:0})}},{key:"handleScrollbarMove",value:function(e,t){this.setStateFromEvent(this.composeNewState(t,e))}},{key:"handleScrollbarXPositionChange",value:function(e){this.scrollXTo(e)}},{key:"handleScrollbarYPositionChange",value:function(e){this.scrollYTo(e)}},{key:"handleWheel",value:function(e){var t=e.deltaY,r=e.deltaX;if(this.props.swapWheelAxes){var n=[r,t];t=n[0],r=n[1]}1===e.deltaMode&&(t*=this.lineHeightPx,r*=this.lineHeightPx),t*=this.props.speed,r*=this.props.speed;var o=this.composeNewState(-r,-t);(o.topPosition&&this.state.topPosition!==o.topPosition||o.leftPosition&&this.state.leftPosition!==o.leftPosition||this.props.stopScrollPropagation)&&(e.preventDefault(),e.stopPropagation()),this.setStateFromEvent(o,h),this.focusContent()}},{key:"handleKeyDown",value:function(e){if("input"!==e.target.tagName.toLowerCase()&&"textarea"!==e.target.tagName.toLowerCase()&&!e.target.isContentEditable){var t=0,r=0,n=this.lineHeightPx?this.lineHeightPx:10;switch(e.keyCode){case 33:t=this.state.containerHeight-n;break;case 34:t=-this.state.containerHeight+n;break;case 37:r=n;break;case 38:t=n;break;case 39:r=-n;break;case 40:t=-n}if(0!==t||0!==r){var o=this.composeNewState(r,t);e.preventDefault(),e.stopPropagation(),this.setStateFromEvent(o,v)}}}},{key:"handleWindowResize",value:function(){var e=this.computeSizes();e=this.getModifiedPositionsIfNeeded(e),this.setStateFromEvent(e)}},{key:"composeNewState",value:function(e,t){var r=this.computeSizes();return this.canScrollY(r)?r.topPosition=this.computeTopPosition(t,r):r.topPosition=0,this.canScrollX(r)&&(r.leftPosition=this.computeLeftPosition(e,r)),r}},{key:"computeTopPosition",value:function(e,t){var r=this.state.topPosition-e;return this.normalizeTopPosition(r,t)}},{key:"computeLeftPosition",value:function(e,t){var r=this.state.leftPosition-e;return this.normalizeLeftPosition(r,t)}},{key:"normalizeTopPosition",value:function(e,t){return e>t.realHeight-t.containerHeight&&(e=t.realHeight-t.containerHeight),e<0&&(e=0),e}},{key:"normalizeLeftPosition",value:function(e,t){return e>t.realWidth-t.containerWidth?e=t.realWidth-t.containerWidth:e<0&&(e=0),e}},{key:"computeSizes",value:function(){return{realHeight:this.content.offsetHeight,containerHeight:this.wrapper.offsetHeight,realWidth:this.content.offsetWidth,containerWidth:this.wrapper.offsetWidth}}},{key:"setSizesToState",value:function(){var e=this.computeSizes();e.realHeight===this.state.realHeight&&e.realWidth===this.state.realWidth||this.setStateFromEvent(this.getModifiedPositionsIfNeeded(e))}},{key:"scrollTop",value:function(){this.scrollYTo(0)}},{key:"scrollBottom",value:function(){this.scrollYTo(this.state.realHeight-this.state.containerHeight)}},{key:"scrollLeft",value:function(){this.scrollXTo(0)}},{key:"scrollRight",value:function(){this.scrollXTo(this.state.realWidth-this.state.containerWidth)}},{key:"scrollYTo",value:function(e){if(this.canScrollY()){var t=this.normalizeTopPosition(e,this.computeSizes());this.setStateFromEvent({topPosition:t},y)}}},{key:"scrollXTo",value:function(e){if(this.canScrollX()){var t=this.normalizeLeftPosition(e,this.computeSizes());this.setStateFromEvent({leftPosition:t},y)}}},{key:"canScrollY",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state;return e.realHeight>e.containerHeight&&this.props.vertical}},{key:"canScrollX",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state;return e.realWidth>e.containerWidth&&this.props.horizontal}},{key:"canScroll",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state;return this.canScrollY(e)||this.canScrollX(e)}},{key:"getModifiedPositionsIfNeeded",value:function(e){var t=e.realHeight-e.containerHeight;this.state.topPosition>=t&&(e.topPosition=this.canScrollY(e)?(0,p.positiveOrZero)(t):0);var r=e.realWidth-e.containerWidth;return this.state.leftPosition>=r&&(e.leftPosition=this.canScrollX(e)?(0,p.positiveOrZero)(r):0),e}},{key:"focusContent",value:function(){this.content&&(0,p.findDOMNode)(this.content).focus()}}]),t}(s.default.Component);t.default=b,b.childContextTypes={scrollArea:u.default.object},b.propTypes={className:u.default.string,style:u.default.object,speed:u.default.number,contentClassName:u.default.string,contentStyle:u.default.object,vertical:u.default.bool,verticalContainerStyle:u.default.object,verticalScrollbarStyle:u.default.object,horizontal:u.default.bool,horizontalContainerStyle:u.default.object,horizontalScrollbarStyle:u.default.object,onScroll:u.default.func,contentWindow:u.default.any,ownerDocument:u.default.any,smoothScrolling:u.default.bool,minScrollSize:u.default.number,swapWheelAxes:u.default.bool,stopScrollPropagation:u.default.bool,focusableTabIndex:u.default.number},b.defaultProps={speed:1,vertical:!0,horizontal:!0,smoothScrolling:!1,swapWheelAxes:!1,contentWindow:"object"===("undefined"==typeof window?"undefined":o(window))?window:void 0,ownerDocument:"object"===("undefined"==typeof document?"undefined":o(document))?document:void 0,focusableTabIndex:1}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=n(r(1)),s=n(r(2)),u=r(12),l=r(9),f=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=c(t)&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),n=r.calculateState(e);return r.state={position:n.position,scrollSize:n.scrollSize,isDragging:!1,lastClientPosition:0},"vertical"===e.type?r.bindedHandleMouseMove=r.handleMouseMoveForVertical.bind(r):r.bindedHandleMouseMove=r.handleMouseMoveForHorizontal.bind(r),r.bindedHandleMouseUp=r.handleMouseUp.bind(r),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+c(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"componentDidMount",value:function(){this.props.ownerDocument&&(this.props.ownerDocument.addEventListener("mousemove",this.bindedHandleMouseMove),this.props.ownerDocument.addEventListener("mouseup",this.bindedHandleMouseUp))}},{key:"componentWillReceiveProps",value:function(e){this.setState(this.calculateState(e))}},{key:"componentWillUnmount",value:function(){this.props.ownerDocument&&(this.props.ownerDocument.removeEventListener("mousemove",this.bindedHandleMouseMove),this.props.ownerDocument.removeEventListener("mouseup",this.bindedHandleMouseUp))}},{key:"calculateFractionalPosition",value:function(e,t,r){var n=e-t;return 1-(n-r)/n}},{key:"calculateState",value:function(e){var t=this.calculateFractionalPosition(e.realSize,e.containerSize,e.position),r=e.containerSize*e.containerSize/e.realSize,n=r<e.minScrollSize?e.minScrollSize:r,o=(e.containerSize-n)*t;return{scrollSize:n,position:Math.round(o)}}},{key:"render",value:function(){var e=this,t=this.props,r=t.smoothScrolling,n=t.isDragging,i=t.type,c=t.scrollbarStyle,s=t.containerStyle,f="horizontal"===i,p="vertical"===i,d=this.createScrollStyles(),h=r?(0,l.modifyObjValues)(d,(function(e){return(0,u.spring)(e)})):d,y="scrollbar-container "+(n?"active":"")+" "+(f?"horizontal":"")+" "+(p?"vertical":"");return a.default.createElement(u.Motion,{style:h},(function(t){return a.default.createElement("div",{className:y,style:s,onMouseDown:e.handleScrollBarContainerClick.bind(e),ref:function(t){return e.scrollbarContainer=t}},a.default.createElement("div",{className:"scrollbar",style:o({},c,t),onMouseDown:e.handleMouseDown.bind(e)}))}))}},{key:"handleScrollBarContainerClick",value:function(e){e.preventDefault();var t=this.computeMultiplier(),r=this.isVertical()?e.clientY:e.clientX,n=this.scrollbarContainer.getBoundingClientRect(),o=n.top,i=n.left,a=r-(this.isVertical()?o:i),c=this.props.containerSize*this.props.containerSize/this.props.realSize;this.setState({isDragging:!0,lastClientPosition:r}),this.props.onPositionChange((a-c/2)/t)}},{key:"handleMouseMoveForHorizontal",value:function(e){var t=this.computeMultiplier();if(this.state.isDragging){e.preventDefault();var r=this.state.lastClientPosition-e.clientX;this.setState({lastClientPosition:e.clientX}),this.props.onMove(0,r/t)}}},{key:"handleMouseMoveForVertical",value:function(e){var t=this.computeMultiplier();if(this.state.isDragging){e.preventDefault();var r=this.state.lastClientPosition-e.clientY;this.setState({lastClientPosition:e.clientY}),this.props.onMove(r/t,0)}}},{key:"handleMouseDown",value:function(e){e.preventDefault(),e.stopPropagation();var t=this.isVertical()?e.clientY:e.clientX;this.setState({isDragging:!0,lastClientPosition:t}),this.props.onFocus()}},{key:"handleMouseUp",value:function(e){this.state.isDragging&&(e.preventDefault(),this.setState({isDragging:!1}))}},{key:"createScrollStyles",value:function(){return"vertical"===this.props.type?{height:this.state.scrollSize,marginTop:this.state.position}:{width:this.state.scrollSize,marginLeft:this.state.position}}},{key:"computeMultiplier",value:function(){return this.props.containerSize/this.props.realSize}},{key:"isVertical",value:function(){return"vertical"===this.props.type}}]),t}(a.default.Component);f.propTypes={onMove:s.default.func,onPositionChange:s.default.func,onFocus:s.default.func,realSize:s.default.number,containerSize:s.default.number,position:s.default.number,containerStyle:s.default.object,scrollbarStyle:s.default.object,type:s.default.oneOf(["vertical","horizontal"]),ownerDocument:s.default.any,smoothScrolling:s.default.bool,minScrollSize:s.default.number},f.defaultProps={type:"vertical",smoothScrolling:!1},t.default=f},function(e,t){e.exports=function(e,t,r){return((r=window.getComputedStyle)?r(e):e.currentStyle)[t.replace(/-(\w)/gi,(function(e,t){return t.toUpperCase()}))]}},function(e,t,r){(e.exports=r(17)()).push([e.id,".scrollarea-content{margin:0;padding:0;overflow:hidden;position:relative;touch-action:none}.scrollarea-content:focus{outline:0}.scrollarea{position:relative;overflow:hidden}.scrollarea .scrollbar-container{position:absolute;background:none;opacity:.1;z-index:99;-webkit-transition:all .4s;transition:all .4s}.scrollarea .scrollbar-container.horizontal{width:100%;height:10px;left:0;bottom:0}.scrollarea .scrollbar-container.horizontal .scrollbar{width:20px;height:8px;background:#000;margin-top:1px}.scrollarea .scrollbar-container.vertical{width:10px;height:100%;right:0;top:0}.scrollarea .scrollbar-container.vertical .scrollbar{width:8px;height:20px;background:#000;margin-left:1px}.scrollarea .scrollbar-container.active,.scrollarea .scrollbar-container:hover{background:gray;opacity:.6!important}.scrollarea:hover .scrollbar-container{opacity:.3}",""])},function(e,t){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var r=this[t];r[2]?e.push("@media "+r[2]+"{"+r[1]+"}"):e.push(r[1])}return e.join("")},e.i=function(t,r){"string"==typeof t&&(t=[[null,t,""]]);for(var n={},o=0;o<this.length;o++){var i=this[o][0];"number"==typeof i&&(n[i]=!0)}for(o=0;o<t.length;o++){var a=t[o];"number"==typeof a[0]&&n[a[0]]||(r&&!a[2]?a[2]=r:r&&(a[2]="("+a[2]+") and ("+r+")"),e.push(a))}},e}},function(e,t,r){var n=r(15);e.exports=function(e){var t=n(e,"line-height"),r=parseFloat(t,10);if(t===r+""){var o=e.style.lineHeight;e.style.lineHeight=t+"em",t=n(e,"line-height"),r=parseFloat(t,10),o?e.style.lineHeight=o:delete e.style.lineHeight}if(-1!==t.indexOf("pt")?(r*=4,r/=3):-1!==t.indexOf("mm")?(r*=96,r/=25.4):-1!==t.indexOf("cm")?(r*=96,r/=2.54):-1!==t.indexOf("in")?r*=96:-1!==t.indexOf("pc")&&(r*=16),r=Math.round(r),"normal"===t){var i=e.nodeName,a=document.createElement(i);a.innerHTML="&nbsp;";var c=n(e,"font-size");a.style.fontSize=c;var s=document.body;s.appendChild(a),r=a.offsetHeight,s.removeChild(a)}return r}},function(e,t,r){"use strict";var n=r(21),o=r(22),i=r(20);e.exports=function(){function e(e,t,r,n,a,c){c!==i&&o(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function t(){return e}e.isRequired=e;var r={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return r.checkPropTypes=n,r.PropTypes=r,r}},function(e,t){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t){"use strict";function r(e){return function(){return e}}var n=function(){};n.thatReturns=r,n.thatReturnsFalse=r(!1),n.thatReturnsTrue=r(!0),n.thatReturnsNull=r(null),n.thatReturnsThis=function(){return this},n.thatReturnsArgument=function(e){return e},e.exports=n},function(e,t,r){"use strict";e.exports=function(e,t,r,n,o,i,a,c){if(!e){var s;if(void 0===t)s=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[r,n,o,i,a,c],l=0;(s=new Error(t.replace(/%s/g,(function(){return u[l++]})))).name="Invariant Violation"}throw s.framesToPop=1,s}}},function(e,t,r){(function(t){(function(){var r,n,o,i,a,c;"undefined"!=typeof performance&&null!==performance&&performance.now?e.exports=function(){return performance.now()}:null!=t&&t.hrtime?(e.exports=function(){return(r()-a)/1e6},n=t.hrtime,r=function(){var e;return 1e9*(e=n())[0]+e[1]},i=r(),c=1e9*t.uptime(),a=i-c):Date.now?(e.exports=function(){return Date.now()-o},o=Date.now()):(e.exports=function(){return(new Date).getTime()-o},o=(new Date).getTime())}).call(this)}).call(t,r(10))},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=n(r(6)),s=n(r(3)),u=n(r(8)),l=n(r(4)),f=n(r(5)),p=n(r(7)),d=n(r(1)),h=n(r(2)),y=1e3/60,m=function(e){function t(r){var n=this;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),e.call(this,r),this.wasAnimating=!1,this.animationID=null,this.prevTime=0,this.accumulatedTime=0,this.unreadPropStyle=null,this.clearUnreadPropStyle=function(e){var t=!1,r=n.state,i=r.currentStyle,a=r.currentVelocity,c=r.lastIdealStyle,s=r.lastIdealVelocity;for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)){var l=e[u];"number"==typeof l&&(t||(t=!0,i=o({},i),a=o({},a),c=o({},c),s=o({},s)),i[u]=l,a[u]=0,c[u]=l,s[u]=0)}t&&n.setState({currentStyle:i,currentVelocity:a,lastIdealStyle:c,lastIdealVelocity:s})},this.startAnimationIfNecessary=function(){n.animationID=f.default((function(e){var t=n.props.style;if(p.default(n.state.currentStyle,t,n.state.currentVelocity))return n.wasAnimating&&n.props.onRest&&n.props.onRest(),n.animationID=null,n.wasAnimating=!1,void(n.accumulatedTime=0);n.wasAnimating=!0;var r=e||l.default(),o=r-n.prevTime;if(n.prevTime=r,n.accumulatedTime=n.accumulatedTime+o,n.accumulatedTime>10*y&&(n.accumulatedTime=0),0===n.accumulatedTime)return n.animationID=null,void n.startAnimationIfNecessary();var i=(n.accumulatedTime-Math.floor(n.accumulatedTime/y)*y)/y,a=Math.floor(n.accumulatedTime/y),c={},s={},f={},d={};for(var h in t)if(Object.prototype.hasOwnProperty.call(t,h)){var m=t[h];if("number"==typeof m)f[h]=m,d[h]=0,c[h]=m,s[h]=0;else{for(var v=n.state.lastIdealStyle[h],b=n.state.lastIdealVelocity[h],g=0;g<a;g++){var w=u.default(y/1e3,v,b,m.val,m.stiffness,m.damping,m.precision);v=w[0],b=w[1]}var S=u.default(y/1e3,v,b,m.val,m.stiffness,m.damping,m.precision),O=S[0],P=S[1];f[h]=v+(O-v)*i,d[h]=b+(P-b)*i,c[h]=v,s[h]=b}}n.animationID=null,n.accumulatedTime-=a*y,n.setState({currentStyle:f,currentVelocity:d,lastIdealStyle:c,lastIdealVelocity:s}),n.unreadPropStyle=null,n.startAnimationIfNecessary()}))},this.state=this.defaultState()}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+c(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,null,[{key:"propTypes",value:{defaultStyle:h.default.objectOf(h.default.number),style:h.default.objectOf(h.default.oneOfType([h.default.number,h.default.object])).isRequired,children:h.default.func.isRequired,onRest:h.default.func},enumerable:!0}]),t.prototype.defaultState=function(){var e=this.props,t=e.defaultStyle,r=e.style,n=t||s.default(r),o=a.default(n);return{currentStyle:n,currentVelocity:o,lastIdealStyle:n,lastIdealVelocity:o}},t.prototype.componentDidMount=function(){this.prevTime=l.default(),this.startAnimationIfNecessary()},t.prototype.componentWillReceiveProps=function(e){null!=this.unreadPropStyle&&this.clearUnreadPropStyle(this.unreadPropStyle),this.unreadPropStyle=e.style,null==this.animationID&&(this.prevTime=l.default(),this.startAnimationIfNecessary())},t.prototype.componentWillUnmount=function(){null!=this.animationID&&(f.default.cancel(this.animationID),this.animationID=null)},t.prototype.render=function(){var e=this.props.children(this.state.currentStyle);return e&&d.default.Children.only(e)},t}(d.default.Component);t.default=m,e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t,r){for(var n=0;n<e.length;n++)if(!d.default(e[n],t[n],r[n]))return!1;return!0}t.__esModule=!0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=n(r(6)),u=n(r(3)),l=n(r(8)),f=n(r(4)),p=n(r(5)),d=n(r(7)),h=n(r(1)),y=n(r(2)),m=1e3/60,v=function(e){function t(r){var n=this;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),e.call(this,r),this.animationID=null,this.prevTime=0,this.accumulatedTime=0,this.unreadPropStyles=null,this.clearUnreadPropStyle=function(e){for(var t=n.state,r=t.currentStyles,o=t.currentVelocities,a=t.lastIdealStyles,c=t.lastIdealVelocities,s=!1,u=0;u<e.length;u++){var l=e[u],f=!1;for(var p in l)if(Object.prototype.hasOwnProperty.call(l,p)){var d=l[p];"number"==typeof d&&(f||(f=!0,s=!0,r[u]=i({},r[u]),o[u]=i({},o[u]),a[u]=i({},a[u]),c[u]=i({},c[u])),r[u][p]=d,o[u][p]=0,a[u][p]=d,c[u][p]=0)}}s&&n.setState({currentStyles:r,currentVelocities:o,lastIdealStyles:a,lastIdealVelocities:c})},this.startAnimationIfNecessary=function(){n.animationID=p.default((function(e){var t=n.props.styles(n.state.lastIdealStyles);if(o(n.state.currentStyles,t,n.state.currentVelocities))return n.animationID=null,void(n.accumulatedTime=0);var r=e||f.default(),i=r-n.prevTime;if(n.prevTime=r,n.accumulatedTime=n.accumulatedTime+i,n.accumulatedTime>10*m&&(n.accumulatedTime=0),0===n.accumulatedTime)return n.animationID=null,void n.startAnimationIfNecessary();for(var a=(n.accumulatedTime-Math.floor(n.accumulatedTime/m)*m)/m,c=Math.floor(n.accumulatedTime/m),s=[],u=[],p=[],d=[],h=0;h<t.length;h++){var y=t[h],v={},b={},g={},w={};for(var S in y)if(Object.prototype.hasOwnProperty.call(y,S)){var O=y[S];if("number"==typeof O)v[S]=O,b[S]=0,g[S]=O,w[S]=0;else{for(var P=n.state.lastIdealStyles[h][S],k=n.state.lastIdealVelocities[h][S],_=0;_<c;_++){var E=l.default(m/1e3,P,k,O.val,O.stiffness,O.damping,O.precision);P=E[0],k=E[1]}var j=l.default(m/1e3,P,k,O.val,O.stiffness,O.damping,O.precision),C=j[0],T=j[1];v[S]=P+(C-P)*a,b[S]=k+(T-k)*a,g[S]=P,w[S]=k}}p[h]=v,d[h]=b,s[h]=g,u[h]=w}n.animationID=null,n.accumulatedTime-=c*m,n.setState({currentStyles:p,currentVelocities:d,lastIdealStyles:s,lastIdealVelocities:u}),n.unreadPropStyles=null,n.startAnimationIfNecessary()}))},this.state=this.defaultState()}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+c(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,null,[{key:"propTypes",value:{defaultStyles:y.default.arrayOf(y.default.objectOf(y.default.number)),styles:y.default.func.isRequired,children:y.default.func.isRequired},enumerable:!0}]),t.prototype.defaultState=function(){var e=this.props,t=e.defaultStyles,r=e.styles,n=t||r().map(u.default),o=n.map((function(e){return s.default(e)}));return{currentStyles:n,currentVelocities:o,lastIdealStyles:n,lastIdealVelocities:o}},t.prototype.componentDidMount=function(){this.prevTime=f.default(),this.startAnimationIfNecessary()},t.prototype.componentWillReceiveProps=function(e){null!=this.unreadPropStyles&&this.clearUnreadPropStyle(this.unreadPropStyles),this.unreadPropStyles=e.styles(this.state.lastIdealStyles),null==this.animationID&&(this.prevTime=f.default(),this.startAnimationIfNecessary())},t.prototype.componentWillUnmount=function(){null!=this.animationID&&(p.default.cancel(this.animationID),this.animationID=null)},t.prototype.render=function(){var e=this.props.children(this.state.currentStyles);return e&&h.default.Children.only(e)},t}(h.default.Component);t.default=v,e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t,r){var n=t;return null==n?e.map((function(e,t){return{key:e.key,data:e.data,style:r[t]}})):e.map((function(e,t){for(var o=0;o<n.length;o++)if(n[o].key===e.key)return{key:n[o].key,data:n[o].data,style:r[t]};return{key:e.key,data:e.data,style:r[t]}}))}function i(e,t,r,n){if(n.length!==t.length)return!1;for(var o=0;o<n.length;o++)if(n[o].key!==t[o].key)return!1;for(o=0;o<n.length;o++)if(!m.default(e[o],t[o].style,r[o]))return!1;return!0}function a(e,t,r,n,o,i,a,c,s){for(var u=d.default(n,o,(function(e,n){var o=t(n);return null==o||m.default(i[e],o,a[e])?(r({key:n.key,data:n.data}),null):{key:n.key,data:n.data,style:o}})),f=[],p=[],h=[],y=[],v=0;v<u.length;v++){for(var b=u[v],g=null,w=0;w<n.length;w++)if(n[w].key===b.key){g=w;break}if(null==g){var S=e(b);f[v]=S,h[v]=S;var O=l.default(b.style);p[v]=O,y[v]=O}else f[v]=i[g],h[v]=c[g],p[v]=a[g],y[v]=s[g]}return[u,f,p,h,y]}t.__esModule=!0;var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=n(r(6)),f=n(r(3)),p=n(r(8)),d=n(r(27)),h=n(r(4)),y=n(r(5)),m=n(r(7)),v=n(r(1)),b=n(r(2)),g=1e3/60,w=function(e){function t(r){var n=this;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),e.call(this,r),this.unmounting=!1,this.animationID=null,this.prevTime=0,this.accumulatedTime=0,this.unreadPropStyles=null,this.clearUnreadPropStyle=function(e){for(var t=a(n.props.willEnter,n.props.willLeave,n.props.didLeave,n.state.mergedPropsStyles,e,n.state.currentStyles,n.state.currentVelocities,n.state.lastIdealStyles,n.state.lastIdealVelocities),r=t[0],o=t[1],i=t[2],c=t[3],u=t[4],l=0;l<e.length;l++){var f=e[l].style,p=!1;for(var d in f)if(Object.prototype.hasOwnProperty.call(f,d)){var h=f[d];"number"==typeof h&&(p||(p=!0,o[l]=s({},o[l]),i[l]=s({},i[l]),c[l]=s({},c[l]),u[l]=s({},u[l]),r[l]={key:r[l].key,data:r[l].data,style:s({},r[l].style)}),o[l][d]=h,i[l][d]=0,c[l][d]=h,u[l][d]=0,r[l].style[d]=h)}}n.setState({currentStyles:o,currentVelocities:i,mergedPropsStyles:r,lastIdealStyles:c,lastIdealVelocities:u})},this.startAnimationIfNecessary=function(){n.unmounting||(n.animationID=y.default((function(e){if(!n.unmounting){var t=n.props.styles,r="function"==typeof t?t(o(n.state.mergedPropsStyles,n.unreadPropStyles,n.state.lastIdealStyles)):t;if(i(n.state.currentStyles,r,n.state.currentVelocities,n.state.mergedPropsStyles))return n.animationID=null,void(n.accumulatedTime=0);var c=e||h.default(),s=c-n.prevTime;if(n.prevTime=c,n.accumulatedTime=n.accumulatedTime+s,n.accumulatedTime>10*g&&(n.accumulatedTime=0),0===n.accumulatedTime)return n.animationID=null,void n.startAnimationIfNecessary();for(var u=(n.accumulatedTime-Math.floor(n.accumulatedTime/g)*g)/g,l=Math.floor(n.accumulatedTime/g),f=a(n.props.willEnter,n.props.willLeave,n.props.didLeave,n.state.mergedPropsStyles,r,n.state.currentStyles,n.state.currentVelocities,n.state.lastIdealStyles,n.state.lastIdealVelocities),d=f[0],y=f[1],m=f[2],v=f[3],b=f[4],w=0;w<d.length;w++){var S=d[w].style,O={},P={},k={},_={};for(var E in S)if(Object.prototype.hasOwnProperty.call(S,E)){var j=S[E];if("number"==typeof j)O[E]=j,P[E]=0,k[E]=j,_[E]=0;else{for(var C=v[w][E],T=b[w][E],x=0;x<l;x++){var R=p.default(g/1e3,C,T,j.val,j.stiffness,j.damping,j.precision);C=R[0],T=R[1]}var I=p.default(g/1e3,C,T,j.val,j.stiffness,j.damping,j.precision),L=I[0],M=I[1];O[E]=C+(L-C)*u,P[E]=T+(M-T)*u,k[E]=C,_[E]=T}}v[w]=k,b[w]=_,y[w]=O,m[w]=P}n.animationID=null,n.accumulatedTime-=l*g,n.setState({currentStyles:y,currentVelocities:m,lastIdealStyles:v,lastIdealVelocities:b,mergedPropsStyles:d}),n.unreadPropStyles=null,n.startAnimationIfNecessary()}})))},this.state=this.defaultState()}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+c(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),u(t,null,[{key:"propTypes",value:{defaultStyles:b.default.arrayOf(b.default.shape({key:b.default.string.isRequired,data:b.default.any,style:b.default.objectOf(b.default.number).isRequired})),styles:b.default.oneOfType([b.default.func,b.default.arrayOf(b.default.shape({key:b.default.string.isRequired,data:b.default.any,style:b.default.objectOf(b.default.oneOfType([b.default.number,b.default.object])).isRequired}))]).isRequired,children:b.default.func.isRequired,willEnter:b.default.func,willLeave:b.default.func,didLeave:b.default.func},enumerable:!0},{key:"defaultProps",value:{willEnter:function(e){return f.default(e.style)},willLeave:function(){return null},didLeave:function(){}},enumerable:!0}]),t.prototype.defaultState=function(){var e,t=this.props,r=t.defaultStyles,n=t.styles,o=t.willEnter,i=t.willLeave,c=t.didLeave,s="function"==typeof n?n(r):n;e=null==r?s:r.map((function(e){for(var t=0;t<s.length;t++)if(s[t].key===e.key)return s[t];return e}));var u=null==r?s.map((function(e){return f.default(e.style)})):r.map((function(e){return f.default(e.style)})),p=null==r?s.map((function(e){return l.default(e.style)})):r.map((function(e){return l.default(e.style)})),d=a(o,i,c,e,s,u,p,u,p),h=d[0];return{currentStyles:d[1],currentVelocities:d[2],lastIdealStyles:d[3],lastIdealVelocities:d[4],mergedPropsStyles:h}},t.prototype.componentDidMount=function(){this.prevTime=h.default(),this.startAnimationIfNecessary()},t.prototype.componentWillReceiveProps=function(e){this.unreadPropStyles&&this.clearUnreadPropStyle(this.unreadPropStyles);var t=e.styles;this.unreadPropStyles="function"==typeof t?t(o(this.state.mergedPropsStyles,this.unreadPropStyles,this.state.lastIdealStyles)):t,null==this.animationID&&(this.prevTime=h.default(),this.startAnimationIfNecessary())},t.prototype.componentWillUnmount=function(){this.unmounting=!0,null!=this.animationID&&(y.default.cancel(this.animationID),this.animationID=null)},t.prototype.render=function(){var e=o(this.state.mergedPropsStyles,this.unreadPropStyles,this.state.currentStyles),t=this.props.children(e);return t&&v.default.Children.only(t)},t}(v.default.Component);t.default=w,e.exports=t.default},function(e,t){"use strict";t.__esModule=!0,t.default=function(e,t,r){for(var n={},o=0;o<e.length;o++)n[e[o].key]=o;var i={};for(o=0;o<t.length;o++)i[t[o].key]=o;var a=[];for(o=0;o<t.length;o++)a[o]=t[o];for(o=0;o<e.length;o++)if(!Object.prototype.hasOwnProperty.call(i,e[o].key)){var c=r(o,e[o]);null!=c&&a.push(c)}return a.sort((function(e,r){var o=i[e.key],a=i[r.key],c=n[e.key],s=n[r.key];if(null!=o&&null!=a)return i[e.key]-i[r.key];if(null!=c&&null!=s)return n[e.key]-n[r.key];if(null!=o){for(var u=0;u<t.length;u++){var l=t[u].key;if(Object.prototype.hasOwnProperty.call(n,l)){if(o<i[l]&&s>n[l])return-1;if(o>i[l]&&s<n[l])return 1}}return 1}for(u=0;u<t.length;u++)if(l=t[u].key,Object.prototype.hasOwnProperty.call(n,l)){if(a<i[l]&&c>n[l])return 1;if(a>i[l]&&c<n[l])return-1}return-1}))},e.exports=t.default},function(e,t,r){"use strict";t.__esModule=!0,t.default=function(){},e.exports=t.default},function(e,t,r){"use strict";t.__esModule=!0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};t.default=function(e,t){return n({},i,t,{val:e})};var o=function(e){return e&&e.__esModule?e:{default:e}}(r(11)),i=n({},o.default.noWobble,{precision:.01});e.exports=t.default},function(e,t,r){function n(e,t){for(var r=0;r<e.length;r++){var n=e[r],o=d[n.id];if(o){o.refs++;for(var i=0;i<o.parts.length;i++)o.parts[i](n.parts[i]);for(;i<n.parts.length;i++)o.parts.push(u(n.parts[i],t))}else{var a=[];for(i=0;i<n.parts.length;i++)a.push(u(n.parts[i],t));d[n.id]={id:n.id,refs:1,parts:a}}}}function o(e){for(var t=[],r={},n=0;n<e.length;n++){var o=e[n],i=o[0],a={css:o[1],media:o[2],sourceMap:o[3]};r[i]?r[i].parts.push(a):t.push(r[i]={id:i,parts:[a]})}return t}function i(e,t){var r=m(),n=g[g.length-1];if("top"===e.insertAt)n?n.nextSibling?r.insertBefore(t,n.nextSibling):r.appendChild(t):r.insertBefore(t,r.firstChild),g.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");r.appendChild(t)}}function a(e){e.parentNode.removeChild(e);var t=g.indexOf(e);t>=0&&g.splice(t,1)}function c(e){var t=document.createElement("style");return t.type="text/css",i(e,t),t}function s(e){var t=document.createElement("link");return t.rel="stylesheet",i(e,t),t}function u(e,t){var r,n,o;if(t.singleton){var i=b++;r=v||(v=c(t)),n=l.bind(null,r,i,!1),o=l.bind(null,r,i,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(r=s(t),n=p.bind(null,r),o=function(){a(r),r.href&&URL.revokeObjectURL(r.href)}):(r=c(t),n=f.bind(null,r),o=function(){a(r)});return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else o()}}function l(e,t,r,n){var o=r?"":n.css;if(e.styleSheet)e.styleSheet.cssText=w(t,o);else{var i=document.createTextNode(o),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(i,a[t]):e.appendChild(i)}}function f(e,t){var r=t.css,n=t.media;if(n&&e.setAttribute("media",n),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}function p(e,t){var r=t.css,n=t.sourceMap;n&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */");var o=new Blob([r],{type:"text/css"}),i=e.href;e.href=URL.createObjectURL(o),i&&URL.revokeObjectURL(i)}var d={},h=function(e){var t;return function(){return void 0===t&&(t=e.apply(this,arguments)),t}},y=h((function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())})),m=h((function(){return document.head||document.getElementsByTagName("head")[0]})),v=null,b=0,g=[];e.exports=function(e,t){void 0===(t=t||{}).singleton&&(t.singleton=y()),void 0===t.insertAt&&(t.insertAt="bottom");var r=o(e);return n(r,t),function(e){for(var i=[],a=0;a<r.length;a++){var c=r[a];(s=d[c.id]).refs--,i.push(s)}for(e&&n(o(e),t),a=0;a<i.length;a++){var s;if(0===(s=i[a]).refs){for(var u=0;u<s.parts.length;u++)s.parts[u]();delete d[s.id]}}}};var w=function(){var e=[];return function(t,r){return e[t]=r,e.filter(Boolean).join("\n")}}()},function(e,t,r){var n=r(16);"string"==typeof n&&(n=[[e.id,n,""]]),r(30)(n,{}),n.locals&&(e.exports=n.locals)}])},"object"==c(t)&&"object"==c(e)?e.exports=a(r(16689)):(o=[r(16689)],void 0===(i="function"==typeof(n=a)?n.apply(t,o):n)||(e.exports=i))},8943:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)},o=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&o(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ArrowContainer=void 0;var c=a(r(16689)),s=r(25033);t.ArrowContainer=function(e){var t=e.childRect,r=e.popoverRect,o=e.position,i=e.arrowColor,a=e.arrowSize,u=e.arrowStyle,l=e.className,f=e.children,p=e.style,d=s.useArrowContainer({childRect:t,popoverRect:r,position:o,arrowColor:i,arrowSize:a}),h=d.arrowContainerStyle,y=d.arrowStyle,m=c.useMemo((function(){return n(n({},h),p)}),[h,p]),v=c.useMemo((function(){return n(n({},y),u)}),[y,u]);return c.default.createElement("div",{className:l,style:m},c.default.createElement("div",{style:v}),f)}},87001:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}var o=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&o(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Popover=t.usePopover=t.ArrowContainer=t.useArrowContainer=void 0;var c=a(r(16689)),s=r(31692),u=r(72993),l=r(38027);Object.defineProperty(t,"usePopover",{enumerable:!0,get:function(){return l.usePopover}});var f=r(4287),p=r(25033);Object.defineProperty(t,"useArrowContainer",{enumerable:!0,get:function(){return p.useArrowContainer}});var d=r(8943);Object.defineProperty(t,"ArrowContainer",{enumerable:!0,get:function(){return d.ArrowContainer}}),t.Popover=c.forwardRef((function(e,t){var r=e.isOpen,o=e.children,i=e.content,a=e.positions,p=void 0===a?u.Constants.DEFAULT_POSITIONS:a,d=e.align,h=void 0===d?u.Constants.DEFAULT_ALIGN:d,y=e.padding,m=void 0===y?0:y,v=e.reposition,b=void 0===v||v,g=e.containerParent,w=void 0===g?window.document.body:g,S=e.containerClassName,O=void 0===S?"react-tiny-popover-container":S,P=e.containerStyle,k=e.contentLocation,_=e.boundaryInset,E=void 0===_?0:_,j=e.onClickOutside,C=f.useMemoizedArray(p),T=c.useRef(!1),x=c.useRef(),R=c.useRef(),I=c.useRef(b),L=c.useRef(),M=c.useState({align:h,nudgedLeft:0,nudgedTop:0,position:C[0],padding:m,childRect:u.Constants.EMPTY_CLIENT_RECT,popoverRect:u.Constants.EMPTY_CLIENT_RECT,parentRect:u.Constants.EMPTY_CLIENT_RECT,boundaryInset:E}),D=M[0],A=M[1],N=c.useCallback((function(e){return A(e)}),[]),U=l.usePopover({childRef:L,containerClassName:O,containerParent:w,contentLocation:k,positions:C,align:h,padding:m,boundaryInset:E,reposition:b,onPositionPopover:N}),B=U[0],F=U[1];c.useLayoutEffect((function(){var e=!0;return window.requestAnimationFrame((function t(){var n,o;if(r&&e&&L.current&&F.current){var i=null===(n=L.current)||void 0===n?void 0:n.getBoundingClientRect(),a=null===(o=F.current)||void 0===o?void 0:o.getBoundingClientRect();u.rectsAreEqual(i,{top:D.childRect.top,left:D.childRect.left,width:D.childRect.width,height:D.childRect.height,bottom:D.childRect.top+D.childRect.height,right:D.childRect.left+D.childRect.width})&&a.width===D.popoverRect.width&&a.height===D.popoverRect.height&&D.padding===m&&D.align===h&&C===x.current&&k===R.current&&b===I.current||B(),C!==x.current&&(x.current=C),k!==R.current&&(R.current=k),b!==I.current&&(I.current=b),e&&window.requestAnimationFrame(t)}T.current=r})),function(){e=!1}}),[h,k,r,m,F,D.align,D.childRect.height,D.childRect.left,D.childRect.top,D.childRect.width,D.padding,D.popoverRect.height,D.popoverRect.width,B,C,b]),c.useEffect((function(){var e=F.current;return Object.assign(e.style,P),function(){Object.keys(null!=P?P:{}).forEach((function(t){return e.style[t]=null}))}}),[P,r,F]);var q=c.useCallback((function(e){var t,n;!r||(null===(t=null==F?void 0:F.current)||void 0===t?void 0:t.contains(e.target))||(null===(n=null==L?void 0:L.current)||void 0===n?void 0:n.contains(e.target))||null==j||j(e)}),[r,j,F]),z=c.useCallback((function(){window.requestAnimationFrame((function(){return B()}))}),[B]);c.useEffect((function(){return window.addEventListener("click",q),window.addEventListener("resize",z),function(){window.removeEventListener("click",q),window.removeEventListener("resize",z)}}),[q,z]);var W=c.useCallback((function(e){L.current=e,null!=t&&("object"===n(t)?t.current=e:"function"==typeof t&&t(e))}),[t]);return c.default.createElement(c.default.Fragment,null,c.default.cloneElement(o,{ref:W}),r?c.default.createElement(s.PopoverPortal,{element:F.current,container:w},"function"==typeof i?i(D):i):null)}))},31692:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PopoverPortal=void 0;var n=r(16689),o=r(66405);t.PopoverPortal=function(e){var t=e.container,r=e.element,i=e.children;return n.useLayoutEffect((function(){return t.appendChild(r),function(){return t.removeChild(r)}}),[t,r]),o.createPortal(i,r)}},25033:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.useArrowContainer=void 0;var o=r(16689);t.useArrowContainer=function(e){var t=e.childRect,r=e.popoverRect,i=e.position,a=e.arrowSize,c=e.arrowColor;return{arrowContainerStyle:o.useMemo((function(){return{padding:a}}),[a]),arrowStyle:o.useMemo((function(){return n({position:"absolute"},function(){var e=2*a,n=t.top-r.top+t.height/2-e/2,o=t.left-r.left+t.width/2-e/2,s=a,u=r.width-a,l=r.height-a;switch(o=(o=o<s?s:o)+e>u?u-e:o,n=(n=n<s?s:n)+e>l?l-e:n,n=Number.isNaN(n)?0:n,o=Number.isNaN(o)?0:o,i){case"right":return{borderTop:a+"px solid transparent",borderBottom:a+"px solid transparent",borderRight:a+"px solid "+c,left:0,top:n};case"left":return{borderTop:a+"px solid transparent",borderBottom:a+"px solid transparent",borderLeft:a+"px solid "+c,right:0,top:n};case"bottom":return{borderLeft:a+"px solid transparent",borderRight:a+"px solid transparent",borderBottom:a+"px solid "+c,top:0,left:o};default:return{borderLeft:a+"px solid transparent",borderRight:a+"px solid transparent",borderTop:a+"px solid "+c,bottom:0,left:o}}}())}),[c,a,t.height,t.left,t.top,t.width,r.height,r.left,r.top,r.width,i])}}},9613:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useElementRef=void 0;var n=r(16689),o=r(72993);t.useElementRef=function(e,t){var r=n.useMemo((function(){return o.createContainer(t,e)}),[e,t]);return n.useRef(r)}},4287:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useMemoizedArray=void 0;var n=r(16689);t.useMemoizedArray=function(e){var t=n.useRef(e);return n.useMemo((function(){if(t.current===e)return t.current;if(t.current.length!==e.length)return t.current=e,e;for(var r=0;r<e.length;r+=1)if(e[r]!==t.current[r])return t.current=e,e;return t.current}),[e])}},38027:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.usePopover=void 0;var n=r(16689),o=r(72993),i=r(9613);t.usePopover=function(e){var t=e.childRef,r=e.positions,a=e.containerClassName,c=e.containerParent,s=e.contentLocation,u=e.align,l=e.padding,f=e.reposition,p=e.boundaryInset,d=e.onPositionPopover,h=i.useElementRef(a,{position:"fixed",overflow:"visible",top:"0px",left:"0px"}),y=n.useCallback((function(e,n,i,a){if(void 0===e&&(e=0),void 0===n&&(n=t.current.getBoundingClientRect()),void 0===i&&(i=h.current.getBoundingClientRect()),void 0===a&&(a=c.getBoundingClientRect()),s){var m="function"==typeof s?s({childRect:n,popoverRect:i,parentRect:a,position:"custom",align:"custom",padding:l,nudgedTop:0,nudgedLeft:0,boundaryInset:p}):s,v=m.top,b=m.left,g=a.left+b,w=a.top+v;return h.current.style.transform="translate("+g+"px, "+w+"px)",void d({childRect:n,popoverRect:i,parentRect:a,position:"custom",align:"custom",padding:l,nudgedTop:0,nudgedLeft:0,boundaryInset:p})}var S=e===r.length,O=S?r[0]:r[e],P=o.getNewPopoverRect({childRect:n,popoverRect:i,parentRect:a,position:O,align:u,padding:l,reposition:f},p),k=P.rect;if(P.boundaryViolation&&f&&!S)y(e+1,n,i,a);else{var _=k.top,E=k.left,j=k.width,C=k.height,T=f&&!S,x=o.getNudgedPopoverRect(k,a,p),R=x.left,I=x.top,L=_,M=E;T&&(L=I,M=R),h.current.style.transform="translate("+M+"px, "+L+"px)",d({childRect:n,popoverRect:{top:L,left:M,width:j,height:C,right:M+j,bottom:L+C},parentRect:a,position:O,align:u,padding:l,nudgedTop:I-_,nudgedLeft:R-E,boundaryInset:p})}}),[t,h,r,u,l,f,p,c,s,d]);return[y,h]}},72993:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getNudgedPopoverRect=t.getNewPopoverRect=t.popoverRectForPosition=t.createContainer=t.targetPositionHasChanged=t.popoverStatesAreEqual=t.rectsAreEqual=t.arrayUnique=t.Constants=void 0,t.Constants={POPOVER_CONTAINER_CLASS_NAME:"react-tiny-popover-container",DEFAULT_ALIGN:"center",OBSERVER_THRESHOLDS:Array(1e3).fill(null).map((function(e,t){return t/1e3})).reverse(),DEFAULT_POSITIONS:["top","left","right","bottom"],EMPTY_CLIENT_RECT:{top:0,left:0,bottom:0,height:0,right:0,width:0}},t.arrayUnique=function(e){return e.filter((function(e,t,r){return r.indexOf(e)===t}))},t.rectsAreEqual=function(e,t){return e===t||(null==e?void 0:e.bottom)===(null==t?void 0:t.bottom)&&(null==e?void 0:e.height)===(null==t?void 0:t.height)&&(null==e?void 0:e.left)===(null==t?void 0:t.left)&&(null==e?void 0:e.right)===(null==t?void 0:t.right)&&(null==e?void 0:e.top)===(null==t?void 0:t.top)&&(null==e?void 0:e.width)===(null==t?void 0:t.width)},t.popoverStatesAreEqual=function(e,r){return e===r||(null==e?void 0:e.align)===(null==r?void 0:r.align)&&(null==e?void 0:e.nudgedLeft)===(null==r?void 0:r.nudgedLeft)&&(null==e?void 0:e.nudgedTop)===(null==r?void 0:r.nudgedTop)&&e.padding===r.padding&&t.rectsAreEqual(null==e?void 0:e.popoverRect,null==r?void 0:r.popoverRect)&&t.rectsAreEqual(null==e?void 0:e.childRect,null==r?void 0:r.childRect)&&(null==e?void 0:e.position)===(null==r?void 0:r.position)},t.targetPositionHasChanged=function(e,t){return void 0===e||e.left!==t.left||e.top!==t.top||e.width!==t.width||e.height!==t.height},t.createContainer=function(e,t){var r=window.document.createElement("div");return t&&(r.className=t),Object.assign(r.style,e),r},t.popoverRectForPosition=function(e,t,r,n,o){var i,a,c=t.left+t.width/2,s=t.top+t.height/2,u=r.width,l=r.height;switch(e){case"top":i=t.top-l-n,a=c-u/2,"start"===o&&(a=t.left),"end"===o&&(a=t.right-u);break;case"left":i=s-l/2,a=t.left-n-u,"start"===o&&(i=t.top),"end"===o&&(i=t.bottom-l);break;case"bottom":i=t.bottom+n,a=c-u/2,"start"===o&&(a=t.left),"end"===o&&(a=t.right-u);break;case"right":i=s-l/2,a=t.right+n,"start"===o&&(i=t.top),"end"===o&&(i=t.bottom-l)}return{top:i,left:a,width:u,height:l,right:a+u,bottom:i+l}},t.getNewPopoverRect=function(e,r){var n=e.position,o=e.align,i=e.childRect,a=e.popoverRect,c=e.parentRect,s=e.padding,u=e.reposition,l=t.popoverRectForPosition(n,i,a,s,o);return{rect:l,boundaryViolation:u&&("top"===n&&l.top<c.top+r||"left"===n&&l.left<c.left+r||"right"===n&&l.right>c.right-r||"bottom"===n&&l.bottom>c.bottom-r)}},t.getNudgedPopoverRect=function(e,t,r){var n=t.top+r,o=t.left+r,i=t.right-r,a=t.bottom-r,c=e.top<n?n:e.top;c=c+e.height>a?a-e.height:c;var s=e.left<o?o:e.left;return{top:c,left:s=s+e.width>i?i-e.width:s,width:e.width,height:e.height,right:s+e.width,bottom:c+e.height}}},12590:e=>{"use strict";var t=function(e){return e&&2===e.CLOSING},r=function(e,t,r){Object.defineProperty(t,r,{get:function(){return e[r]},set:function(t){e[r]=t},enumerable:!0,configurable:!0})},n=function(e){return e.minReconnectionDelay+Math.random()*e.minReconnectionDelay},o=["onopen","onclose","onmessage","onerror"];e.exports=function e(i,a,c){var s,u,l=this;void 0===c&&(c={});var f=0,p=0,d=!0,h=null,y={};if(!(this instanceof e))throw new TypeError("Failed to construct 'ReconnectingWebSocket': Please use the 'new' operator");var m={constructor:"undefined"!=typeof WebSocket&&t(WebSocket)?WebSocket:null,maxReconnectionDelay:1e4,minReconnectionDelay:1500,reconnectionDelayGrowFactor:1.3,connectionTimeout:4e3,maxRetries:1/0,debug:!1};if(Object.keys(m).filter((function(e){return c.hasOwnProperty(e)})).forEach((function(e){return m[e]=c[e]})),!t(m.constructor))throw new TypeError("Invalid WebSocket constructor. Set `options.constructor`");var v=m.debug?function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return console.log.apply(console,["RWS:"].concat(e))}:function(){},b=function(e,t){return setTimeout((function(){var r=new Error(t);r.code=e,Array.isArray(y.error)&&y.error.forEach((function(e){return(0,e[0])(r)})),s.onerror&&s.onerror(r)}),0)},g=function(){v("handleClose",{shouldRetry:d}),p++,v("retries count:",p),p>m.maxRetries?b("EHOSTDOWN","Too many failed connection attempts"):(f=f?function(e,t){var r=t*e.reconnectionDelayGrowFactor;return r>e.maxReconnectionDelay?e.maxReconnectionDelay:r}(m,f):n(m),v("handleClose - reconnectDelay:",f),d&&setTimeout(w,f))},w=function(){if(d){v("connect");var e=s,t="function"==typeof i?i():i;for(var c in s=new m.constructor(t,a),u=setTimeout((function(){v("timeout"),s.close(),b("ETIMEDOUT","Connection timeout")}),m.connectionTimeout),v("bypass properties"),s)["addEventListener","removeEventListener","close","send"].indexOf(c)<0&&r(s,l,c);s.addEventListener("open",(function(){clearTimeout(u),v("open"),f=n(m),v("reconnectDelay:",f),p=0})),s.addEventListener("close",g),function(e,t,r){Object.keys(r).forEach((function(t){r[t].forEach((function(r){var n=r[0],o=r[1];e.addEventListener(t,n,o)}))})),t&&o.forEach((function(r){e[r]=t[r]}))}(s,e,y),s.onclose=s.onclose||h,h=null}};v("init"),w(),this.close=function(e,t,r){void 0===e&&(e=1e3),void 0===t&&(t="");var n=void 0===r?{}:r,o=n.keepClosed,i=void 0!==o&&o,a=n.fastClose,c=void 0===a||a,u=n.delay,l=void 0===u?0:u;if(v("close - params:",{reason:t,keepClosed:i,fastClose:c,delay:l,retriesCount:p,maxRetries:m.maxRetries}),d=!i&&p<=m.maxRetries,l&&(f=l),s.close(e,t),c){var b={code:e,reason:t,wasClean:!0};g(),s.removeEventListener("close",g),Array.isArray(y.close)&&y.close.forEach((function(e){var t=e[0],r=e[1];t(b),s.removeEventListener("close",t,r)})),s.onclose&&(h=s.onclose,s.onclose(b),s.onclose=null)}},this.send=function(e){s.send(e)},this.addEventListener=function(e,t,r){Array.isArray(y[e])?y[e].some((function(e){return e[0]===t}))||y[e].push([t,r]):y[e]=[[t,r]],s.addEventListener(e,t,r)},this.removeEventListener=function(e,t,r){Array.isArray(y[e])&&(y[e]=y[e].filter((function(e){return e[0]!==t}))),s.removeEventListener(e,t,r)}}},239:(e,t,r)=>{"use strict";var n=r(81091).functionsHaveConfigurableNames(),o=Object,i=TypeError;e.exports=function(){if(null!=this&&this!==o(this))throw new i("RegExp.prototype.flags getter called on non-object");var e="";return this.hasIndices&&(e+="d"),this.global&&(e+="g"),this.ignoreCase&&(e+="i"),this.multiline&&(e+="m"),this.dotAll&&(e+="s"),this.unicode&&(e+="u"),this.sticky&&(e+="y"),e},n&&Object.defineProperty&&Object.defineProperty(e.exports,"name",{value:"get flags"})},30907:(e,t,r)=>{"use strict";var n=r(10635),o=r(64411),i=r(239),a=r(12019),c=r(44238),s=o(a());n(s,{getPolyfill:a,implementation:i,shim:c}),e.exports=s},12019:(e,t,r)=>{"use strict";var n=r(239),o=r(10635).supportsDescriptors,i=Object.getOwnPropertyDescriptor;e.exports=function(){if(o&&"gim"===/a/gim.flags){var e=i(RegExp.prototype,"flags");if(e&&"function"==typeof e.get&&"boolean"==typeof RegExp.prototype.dotAll&&"boolean"==typeof RegExp.prototype.hasIndices){var t="",r={};if(Object.defineProperty(r,"hasIndices",{get:function(){t+="d"}}),Object.defineProperty(r,"sticky",{get:function(){t+="y"}}),"dy"===t)return e.get}}return n}},44238:(e,t,r)=>{"use strict";var n=r(10635).supportsDescriptors,o=r(12019),i=Object.getOwnPropertyDescriptor,a=Object.defineProperty,c=TypeError,s=Object.getPrototypeOf,u=/a/;e.exports=function(){if(!n||!s)throw new c("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var e=o(),t=s(u),r=i(t,"flags");return r&&r.get===e||a(t,"flags",{configurable:!0,enumerable:!1,get:e}),e}},83850:(e,t,r)=>{"use strict";var n=r(73569);function o(e,t,r,o,i){var a=n.writeRtpDescription(e.kind,t);if(a+=n.writeIceParameters(e.iceGatherer.getLocalParameters()),a+=n.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===r?"actpass":i||"active"),a+="a=mid:"+e.mid+"\r\n",e.rtpSender&&e.rtpReceiver?a+="a=sendrecv\r\n":e.rtpSender?a+="a=sendonly\r\n":e.rtpReceiver?a+="a=recvonly\r\n":a+="a=inactive\r\n",e.rtpSender){var c=e.rtpSender._initialTrackId||e.rtpSender.track.id;e.rtpSender._initialTrackId=c;var s="msid:"+(o?o.id:"-")+" "+c+"\r\n";a+="a="+s,a+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+s,e.sendEncodingParameters[0].rtx&&(a+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+s,a+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return a+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+n.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(a+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+n.localCName+"\r\n"),a}function i(e,t){var r={codecs:[],headerExtensions:[],fecMechanisms:[]},n=function(e,t){e=parseInt(e,10);for(var r=0;r<t.length;r++)if(t[r].payloadType===e||t[r].preferredPayloadType===e)return t[r]},o=function(e,t,r,o){var i=n(e.parameters.apt,r),a=n(t.parameters.apt,o);return i&&a&&i.name.toLowerCase()===a.name.toLowerCase()};return e.codecs.forEach((function(n){for(var i=0;i<t.codecs.length;i++){var a=t.codecs[i];if(n.name.toLowerCase()===a.name.toLowerCase()&&n.clockRate===a.clockRate){if("rtx"===n.name.toLowerCase()&&n.parameters&&a.parameters.apt&&!o(n,a,e.codecs,t.codecs))continue;(a=JSON.parse(JSON.stringify(a))).numChannels=Math.min(n.numChannels,a.numChannels),r.codecs.push(a),a.rtcpFeedback=a.rtcpFeedback.filter((function(e){for(var t=0;t<n.rtcpFeedback.length;t++)if(n.rtcpFeedback[t].type===e.type&&n.rtcpFeedback[t].parameter===e.parameter)return!0;return!1}));break}}})),e.headerExtensions.forEach((function(e){for(var n=0;n<t.headerExtensions.length;n++){var o=t.headerExtensions[n];if(e.uri===o.uri){r.headerExtensions.push(o);break}}})),r}function a(e,t,r){return-1!=={offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[t][e].indexOf(r)}function c(e,t){var r=e.getRemoteCandidates().find((function(e){return t.foundation===e.foundation&&t.ip===e.ip&&t.port===e.port&&t.priority===e.priority&&t.protocol===e.protocol&&t.type===e.type}));return r||e.addRemoteCandidate(t),!r}function s(e,t){var r=new Error(t);return r.name=e,r.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[e],r}e.exports=function(e,t){function r(t,r){r.addTrack(t),r.dispatchEvent(new e.MediaStreamTrackEvent("addtrack",{track:t}))}function u(t,r,n,o){var i=new Event("track");i.track=r,i.receiver=n,i.transceiver={receiver:n},i.streams=o,e.setTimeout((function(){t._dispatchEvent("track",i)}))}var l=function(r){var o=this,i=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach((function(e){o[e]=i[e].bind(i)})),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",r=JSON.parse(JSON.stringify(r||{})),this.usingBundle="max-bundle"===r.bundlePolicy,"negotiate"===r.rtcpMuxPolicy)throw s("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(r.rtcpMuxPolicy||(r.rtcpMuxPolicy="require"),r.iceTransportPolicy){case"all":case"relay":break;default:r.iceTransportPolicy="all"}switch(r.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:r.bundlePolicy="balanced"}if(r.iceServers=function(e,t){var r=!1;return(e=JSON.parse(JSON.stringify(e))).filter((function(e){if(e&&(e.urls||e.url)){var n=e.urls||e.url;e.url&&!e.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var o="string"==typeof n;return o&&(n=[n]),n=n.filter((function(e){return 0!==e.indexOf("turn:")||-1===e.indexOf("transport=udp")||-1!==e.indexOf("turn:[")||r?0===e.indexOf("stun:")&&t>=14393&&-1===e.indexOf("?transport=udp"):(r=!0,!0)})),delete e.url,e.urls=o?n[0]:n,!!n.length}}))}(r.iceServers||[],t),this._iceGatherers=[],r.iceCandidatePoolSize)for(var a=r.iceCandidatePoolSize;a>0;a--)this._iceGatherers.push(new e.RTCIceGatherer({iceServers:r.iceServers,gatherPolicy:r.iceTransportPolicy}));else r.iceCandidatePoolSize=0;this._config=r,this.transceivers=[],this._sdpSessionId=n.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(l.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(l.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),l.prototype.onicecandidate=null,l.prototype.onaddstream=null,l.prototype.ontrack=null,l.prototype.onremovestream=null,l.prototype.onsignalingstatechange=null,l.prototype.oniceconnectionstatechange=null,l.prototype.onconnectionstatechange=null,l.prototype.onicegatheringstatechange=null,l.prototype.onnegotiationneeded=null,l.prototype.ondatachannel=null,l.prototype._dispatchEvent=function(e,t){this._isClosed||(this.dispatchEvent(t),"function"==typeof this["on"+e]&&this["on"+e](t))},l.prototype._emitGatheringStateChange=function(){var e=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",e)},l.prototype.getConfiguration=function(){return this._config},l.prototype.getLocalStreams=function(){return this.localStreams},l.prototype.getRemoteStreams=function(){return this.remoteStreams},l.prototype._createTransceiver=function(e,t){var r=this.transceivers.length>0,n={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:e,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&r)n.iceTransport=this.transceivers[0].iceTransport,n.dtlsTransport=this.transceivers[0].dtlsTransport;else{var o=this._createIceAndDtlsTransports();n.iceTransport=o.iceTransport,n.dtlsTransport=o.dtlsTransport}return t||this.transceivers.push(n),n},l.prototype.addTrack=function(t,r){if(this._isClosed)throw s("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var n;if(this.transceivers.find((function(e){return e.track===t})))throw s("InvalidAccessError","Track already exists.");for(var o=0;o<this.transceivers.length;o++)this.transceivers[o].track||this.transceivers[o].kind!==t.kind||(n=this.transceivers[o]);return n||(n=this._createTransceiver(t.kind)),this._maybeFireNegotiationNeeded(),-1===this.localStreams.indexOf(r)&&this.localStreams.push(r),n.track=t,n.stream=r,n.rtpSender=new e.RTCRtpSender(t,n.dtlsTransport),n.rtpSender},l.prototype.addStream=function(e){var r=this;if(t>=15025)e.getTracks().forEach((function(t){r.addTrack(t,e)}));else{var n=e.clone();e.getTracks().forEach((function(e,t){var r=n.getTracks()[t];e.addEventListener("enabled",(function(e){r.enabled=e.enabled}))})),n.getTracks().forEach((function(e){r.addTrack(e,n)}))}},l.prototype.removeTrack=function(t){if(this._isClosed)throw s("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(t instanceof e.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var r=this.transceivers.find((function(e){return e.rtpSender===t}));if(!r)throw s("InvalidAccessError","Sender was not created by this connection.");var n=r.stream;r.rtpSender.stop(),r.rtpSender=null,r.track=null,r.stream=null,-1===this.transceivers.map((function(e){return e.stream})).indexOf(n)&&this.localStreams.indexOf(n)>-1&&this.localStreams.splice(this.localStreams.indexOf(n),1),this._maybeFireNegotiationNeeded()},l.prototype.removeStream=function(e){var t=this;e.getTracks().forEach((function(e){var r=t.getSenders().find((function(t){return t.track===e}));r&&t.removeTrack(r)}))},l.prototype.getSenders=function(){return this.transceivers.filter((function(e){return!!e.rtpSender})).map((function(e){return e.rtpSender}))},l.prototype.getReceivers=function(){return this.transceivers.filter((function(e){return!!e.rtpReceiver})).map((function(e){return e.rtpReceiver}))},l.prototype._createIceGatherer=function(t,r){var n=this;if(r&&t>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var o=new e.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(o,"state",{value:"new",writable:!0}),this.transceivers[t].bufferedCandidateEvents=[],this.transceivers[t].bufferCandidates=function(e){var r=!e.candidate||0===Object.keys(e.candidate).length;o.state=r?"completed":"gathering",null!==n.transceivers[t].bufferedCandidateEvents&&n.transceivers[t].bufferedCandidateEvents.push(e)},o.addEventListener("localcandidate",this.transceivers[t].bufferCandidates),o},l.prototype._gather=function(t,r){var o=this,i=this.transceivers[r].iceGatherer;if(!i.onlocalcandidate){var a=this.transceivers[r].bufferedCandidateEvents;this.transceivers[r].bufferedCandidateEvents=null,i.removeEventListener("localcandidate",this.transceivers[r].bufferCandidates),i.onlocalcandidate=function(e){if(!(o.usingBundle&&r>0)){var a=new Event("icecandidate");a.candidate={sdpMid:t,sdpMLineIndex:r};var c=e.candidate,s=!c||0===Object.keys(c).length;if(s)"new"!==i.state&&"gathering"!==i.state||(i.state="completed");else{"new"===i.state&&(i.state="gathering"),c.component=1,c.ufrag=i.getLocalParameters().usernameFragment;var u=n.writeCandidate(c);a.candidate=Object.assign(a.candidate,n.parseCandidate(u)),a.candidate.candidate=u,a.candidate.toJSON=function(){return{candidate:a.candidate.candidate,sdpMid:a.candidate.sdpMid,sdpMLineIndex:a.candidate.sdpMLineIndex,usernameFragment:a.candidate.usernameFragment}}}var l=n.getMediaSections(o._localDescription.sdp);l[a.candidate.sdpMLineIndex]+=s?"a=end-of-candidates\r\n":"a="+a.candidate.candidate+"\r\n",o._localDescription.sdp=n.getDescription(o._localDescription.sdp)+l.join("");var f=o.transceivers.every((function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state}));"gathering"!==o.iceGatheringState&&(o.iceGatheringState="gathering",o._emitGatheringStateChange()),s||o._dispatchEvent("icecandidate",a),f&&(o._dispatchEvent("icecandidate",new Event("icecandidate")),o.iceGatheringState="complete",o._emitGatheringStateChange())}},e.setTimeout((function(){a.forEach((function(e){i.onlocalcandidate(e)}))}),0)}},l.prototype._createIceAndDtlsTransports=function(){var t=this,r=new e.RTCIceTransport(null);r.onicestatechange=function(){t._updateIceConnectionState(),t._updateConnectionState()};var n=new e.RTCDtlsTransport(r);return n.ondtlsstatechange=function(){t._updateConnectionState()},n.onerror=function(){Object.defineProperty(n,"state",{value:"failed",writable:!0}),t._updateConnectionState()},{iceTransport:r,dtlsTransport:n}},l.prototype._disposeIceAndDtlsTransports=function(e){var t=this.transceivers[e].iceGatherer;t&&(delete t.onlocalcandidate,delete this.transceivers[e].iceGatherer);var r=this.transceivers[e].iceTransport;r&&(delete r.onicestatechange,delete this.transceivers[e].iceTransport);var n=this.transceivers[e].dtlsTransport;n&&(delete n.ondtlsstatechange,delete n.onerror,delete this.transceivers[e].dtlsTransport)},l.prototype._transceive=function(e,r,o){var a=i(e.localCapabilities,e.remoteCapabilities);r&&e.rtpSender&&(a.encodings=e.sendEncodingParameters,a.rtcp={cname:n.localCName,compound:e.rtcpParameters.compound},e.recvEncodingParameters.length&&(a.rtcp.ssrc=e.recvEncodingParameters[0].ssrc),e.rtpSender.send(a)),o&&e.rtpReceiver&&a.codecs.length>0&&("video"===e.kind&&e.recvEncodingParameters&&t<15019&&e.recvEncodingParameters.forEach((function(e){delete e.rtx})),e.recvEncodingParameters.length?a.encodings=e.recvEncodingParameters:a.encodings=[{}],a.rtcp={compound:e.rtcpParameters.compound},e.rtcpParameters.cname&&(a.rtcp.cname=e.rtcpParameters.cname),e.sendEncodingParameters.length&&(a.rtcp.ssrc=e.sendEncodingParameters[0].ssrc),e.rtpReceiver.receive(a))},l.prototype.setLocalDescription=function(e){var t,r,o=this;if(-1===["offer","answer"].indexOf(e.type))return Promise.reject(s("TypeError",'Unsupported type "'+e.type+'"'));if(!a("setLocalDescription",e.type,o.signalingState)||o._isClosed)return Promise.reject(s("InvalidStateError","Can not set local "+e.type+" in state "+o.signalingState));if("offer"===e.type)t=n.splitSections(e.sdp),r=t.shift(),t.forEach((function(e,t){var r=n.parseRtpParameters(e);o.transceivers[t].localCapabilities=r})),o.transceivers.forEach((function(e,t){o._gather(e.mid,t)}));else if("answer"===e.type){t=n.splitSections(o._remoteDescription.sdp),r=t.shift();var c=n.matchPrefix(r,"a=ice-lite").length>0;t.forEach((function(e,t){var a=o.transceivers[t],s=a.iceGatherer,u=a.iceTransport,l=a.dtlsTransport,f=a.localCapabilities,p=a.remoteCapabilities;if(!(n.isRejected(e)&&0===n.matchPrefix(e,"a=bundle-only").length||a.rejected)){var d=n.getIceParameters(e,r),h=n.getDtlsParameters(e,r);c&&(h.role="server"),o.usingBundle&&0!==t||(o._gather(a.mid,t),"new"===u.state&&u.start(s,d,c?"controlling":"controlled"),"new"===l.state&&l.start(h));var y=i(f,p);o._transceive(a,y.codecs.length>0,!1)}}))}return o._localDescription={type:e.type,sdp:e.sdp},"offer"===e.type?o._updateSignalingState("have-local-offer"):o._updateSignalingState("stable"),Promise.resolve()},l.prototype.setRemoteDescription=function(o){var l=this;if(-1===["offer","answer"].indexOf(o.type))return Promise.reject(s("TypeError",'Unsupported type "'+o.type+'"'));if(!a("setRemoteDescription",o.type,l.signalingState)||l._isClosed)return Promise.reject(s("InvalidStateError","Can not set remote "+o.type+" in state "+l.signalingState));var f={};l.remoteStreams.forEach((function(e){f[e.id]=e}));var p=[],d=n.splitSections(o.sdp),h=d.shift(),y=n.matchPrefix(h,"a=ice-lite").length>0,m=n.matchPrefix(h,"a=group:BUNDLE ").length>0;l.usingBundle=m;var v=n.matchPrefix(h,"a=ice-options:")[0];return l.canTrickleIceCandidates=!!v&&v.substr(14).split(" ").indexOf("trickle")>=0,d.forEach((function(a,s){var u=n.splitLines(a),d=n.getKind(a),v=n.isRejected(a)&&0===n.matchPrefix(a,"a=bundle-only").length,b=u[0].substr(2).split(" ")[2],g=n.getDirection(a,h),w=n.parseMsid(a),S=n.getMid(a)||n.generateIdentifier();if(v||"application"===d&&("DTLS/SCTP"===b||"UDP/DTLS/SCTP"===b))l.transceivers[s]={mid:S,kind:d,protocol:b,rejected:!0};else{var O,P,k,_,E,j,C,T,x;!v&&l.transceivers[s]&&l.transceivers[s].rejected&&(l.transceivers[s]=l._createTransceiver(d,!0));var R,I,L=n.parseRtpParameters(a);v||(R=n.getIceParameters(a,h),(I=n.getDtlsParameters(a,h)).role="client"),C=n.parseRtpEncodingParameters(a);var M=n.parseRtcpParameters(a),D=n.matchPrefix(a,"a=end-of-candidates",h).length>0,A=n.matchPrefix(a,"a=candidate:").map((function(e){return n.parseCandidate(e)})).filter((function(e){return 1===e.component}));if(("offer"===o.type||"answer"===o.type)&&!v&&m&&s>0&&l.transceivers[s]&&(l._disposeIceAndDtlsTransports(s),l.transceivers[s].iceGatherer=l.transceivers[0].iceGatherer,l.transceivers[s].iceTransport=l.transceivers[0].iceTransport,l.transceivers[s].dtlsTransport=l.transceivers[0].dtlsTransport,l.transceivers[s].rtpSender&&l.transceivers[s].rtpSender.setTransport(l.transceivers[0].dtlsTransport),l.transceivers[s].rtpReceiver&&l.transceivers[s].rtpReceiver.setTransport(l.transceivers[0].dtlsTransport)),"offer"!==o.type||v)"answer"!==o.type||v||(P=(O=l.transceivers[s]).iceGatherer,k=O.iceTransport,_=O.dtlsTransport,E=O.rtpReceiver,j=O.sendEncodingParameters,T=O.localCapabilities,l.transceivers[s].recvEncodingParameters=C,l.transceivers[s].remoteCapabilities=L,l.transceivers[s].rtcpParameters=M,A.length&&"new"===k.state&&(!y&&!D||m&&0!==s?A.forEach((function(e){c(O.iceTransport,e)})):k.setRemoteCandidates(A)),m&&0!==s||("new"===k.state&&k.start(P,R,"controlling"),"new"===_.state&&_.start(I)),!i(O.localCapabilities,O.remoteCapabilities).codecs.filter((function(e){return"rtx"===e.name.toLowerCase()})).length&&O.sendEncodingParameters[0].rtx&&delete O.sendEncodingParameters[0].rtx,l._transceive(O,"sendrecv"===g||"recvonly"===g,"sendrecv"===g||"sendonly"===g),!E||"sendrecv"!==g&&"sendonly"!==g?delete O.rtpReceiver:(x=E.track,w?(f[w.stream]||(f[w.stream]=new e.MediaStream),r(x,f[w.stream]),p.push([x,E,f[w.stream]])):(f.default||(f.default=new e.MediaStream),r(x,f.default),p.push([x,E,f.default]))));else{(O=l.transceivers[s]||l._createTransceiver(d)).mid=S,O.iceGatherer||(O.iceGatherer=l._createIceGatherer(s,m)),A.length&&"new"===O.iceTransport.state&&(!D||m&&0!==s?A.forEach((function(e){c(O.iceTransport,e)})):O.iceTransport.setRemoteCandidates(A)),T=e.RTCRtpReceiver.getCapabilities(d),t<15019&&(T.codecs=T.codecs.filter((function(e){return"rtx"!==e.name}))),j=O.sendEncodingParameters||[{ssrc:1001*(2*s+2)}];var N,U=!1;"sendrecv"===g||"sendonly"===g?(U=!O.rtpReceiver,E=O.rtpReceiver||new e.RTCRtpReceiver(O.dtlsTransport,d),U&&(x=E.track,w&&"-"===w.stream||(w?(f[w.stream]||(f[w.stream]=new e.MediaStream,Object.defineProperty(f[w.stream],"id",{get:function(){return w.stream}})),Object.defineProperty(x,"id",{get:function(){return w.track}}),N=f[w.stream]):(f.default||(f.default=new e.MediaStream),N=f.default)),N&&(r(x,N),O.associatedRemoteMediaStreams.push(N)),p.push([x,E,N]))):O.rtpReceiver&&O.rtpReceiver.track&&(O.associatedRemoteMediaStreams.forEach((function(t){var r=t.getTracks().find((function(e){return e.id===O.rtpReceiver.track.id}));r&&function(t,r){r.removeTrack(t),r.dispatchEvent(new e.MediaStreamTrackEvent("removetrack",{track:t}))}(r,t)})),O.associatedRemoteMediaStreams=[]),O.localCapabilities=T,O.remoteCapabilities=L,O.rtpReceiver=E,O.rtcpParameters=M,O.sendEncodingParameters=j,O.recvEncodingParameters=C,l._transceive(l.transceivers[s],!1,U)}}})),void 0===l._dtlsRole&&(l._dtlsRole="offer"===o.type?"active":"passive"),l._remoteDescription={type:o.type,sdp:o.sdp},"offer"===o.type?l._updateSignalingState("have-remote-offer"):l._updateSignalingState("stable"),Object.keys(f).forEach((function(t){var r=f[t];if(r.getTracks().length){if(-1===l.remoteStreams.indexOf(r)){l.remoteStreams.push(r);var n=new Event("addstream");n.stream=r,e.setTimeout((function(){l._dispatchEvent("addstream",n)}))}p.forEach((function(e){var t=e[0],n=e[1];r.id===e[2].id&&u(l,t,n,[r])}))}})),p.forEach((function(e){e[2]||u(l,e[0],e[1],[])})),e.setTimeout((function(){l&&l.transceivers&&l.transceivers.forEach((function(e){e.iceTransport&&"new"===e.iceTransport.state&&e.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),e.iceTransport.addRemoteCandidate({}))}))}),4e3),Promise.resolve()},l.prototype.close=function(){this.transceivers.forEach((function(e){e.iceTransport&&e.iceTransport.stop(),e.dtlsTransport&&e.dtlsTransport.stop(),e.rtpSender&&e.rtpSender.stop(),e.rtpReceiver&&e.rtpReceiver.stop()})),this._isClosed=!0,this._updateSignalingState("closed")},l.prototype._updateSignalingState=function(e){this.signalingState=e;var t=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",t)},l.prototype._maybeFireNegotiationNeeded=function(){var t=this;"stable"===this.signalingState&&!0!==this.needNegotiation&&(this.needNegotiation=!0,e.setTimeout((function(){if(t.needNegotiation){t.needNegotiation=!1;var e=new Event("negotiationneeded");t._dispatchEvent("negotiationneeded",e)}}),0))},l.prototype._updateIceConnectionState=function(){var e,t={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach((function(e){e.iceTransport&&!e.rejected&&t[e.iceTransport.state]++})),e="new",t.failed>0?e="failed":t.checking>0?e="checking":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0?e="connected":t.completed>0&&(e="completed"),e!==this.iceConnectionState){this.iceConnectionState=e;var r=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",r)}},l.prototype._updateConnectionState=function(){var e,t={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach((function(e){e.iceTransport&&e.dtlsTransport&&!e.rejected&&(t[e.iceTransport.state]++,t[e.dtlsTransport.state]++)})),t.connected+=t.completed,e="new",t.failed>0?e="failed":t.connecting>0?e="connecting":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0&&(e="connected"),e!==this.connectionState){this.connectionState=e;var r=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",r)}},l.prototype.createOffer=function(){var r=this;if(r._isClosed)return Promise.reject(s("InvalidStateError","Can not call createOffer after close"));var i=r.transceivers.filter((function(e){return"audio"===e.kind})).length,a=r.transceivers.filter((function(e){return"video"===e.kind})).length,c=arguments[0];if(c){if(c.mandatory||c.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==c.offerToReceiveAudio&&(i=!0===c.offerToReceiveAudio?1:!1===c.offerToReceiveAudio?0:c.offerToReceiveAudio),void 0!==c.offerToReceiveVideo&&(a=!0===c.offerToReceiveVideo?1:!1===c.offerToReceiveVideo?0:c.offerToReceiveVideo)}for(r.transceivers.forEach((function(e){"audio"===e.kind?--i<0&&(e.wantReceive=!1):"video"===e.kind&&--a<0&&(e.wantReceive=!1)}));i>0||a>0;)i>0&&(r._createTransceiver("audio"),i--),a>0&&(r._createTransceiver("video"),a--);var u=n.writeSessionBoilerplate(r._sdpSessionId,r._sdpSessionVersion++);r.transceivers.forEach((function(o,i){var a=o.track,c=o.kind,s=o.mid||n.generateIdentifier();o.mid=s,o.iceGatherer||(o.iceGatherer=r._createIceGatherer(i,r.usingBundle));var u=e.RTCRtpSender.getCapabilities(c);t<15019&&(u.codecs=u.codecs.filter((function(e){return"rtx"!==e.name}))),u.codecs.forEach((function(e){"H264"===e.name&&void 0===e.parameters["level-asymmetry-allowed"]&&(e.parameters["level-asymmetry-allowed"]="1"),o.remoteCapabilities&&o.remoteCapabilities.codecs&&o.remoteCapabilities.codecs.forEach((function(t){e.name.toLowerCase()===t.name.toLowerCase()&&e.clockRate===t.clockRate&&(e.preferredPayloadType=t.payloadType)}))})),u.headerExtensions.forEach((function(e){(o.remoteCapabilities&&o.remoteCapabilities.headerExtensions||[]).forEach((function(t){e.uri===t.uri&&(e.id=t.id)}))}));var l=o.sendEncodingParameters||[{ssrc:1001*(2*i+1)}];a&&t>=15019&&"video"===c&&!l[0].rtx&&(l[0].rtx={ssrc:l[0].ssrc+1}),o.wantReceive&&(o.rtpReceiver=new e.RTCRtpReceiver(o.dtlsTransport,c)),o.localCapabilities=u,o.sendEncodingParameters=l})),"max-compat"!==r._config.bundlePolicy&&(u+="a=group:BUNDLE "+r.transceivers.map((function(e){return e.mid})).join(" ")+"\r\n"),u+="a=ice-options:trickle\r\n",r.transceivers.forEach((function(e,t){u+=o(e,e.localCapabilities,"offer",e.stream,r._dtlsRole),u+="a=rtcp-rsize\r\n",!e.iceGatherer||"new"===r.iceGatheringState||0!==t&&r.usingBundle||(e.iceGatherer.getLocalCandidates().forEach((function(e){e.component=1,u+="a="+n.writeCandidate(e)+"\r\n"})),"completed"===e.iceGatherer.state&&(u+="a=end-of-candidates\r\n"))}));var l=new e.RTCSessionDescription({type:"offer",sdp:u});return Promise.resolve(l)},l.prototype.createAnswer=function(){var r=this;if(r._isClosed)return Promise.reject(s("InvalidStateError","Can not call createAnswer after close"));if("have-remote-offer"!==r.signalingState&&"have-local-pranswer"!==r.signalingState)return Promise.reject(s("InvalidStateError","Can not call createAnswer in signalingState "+r.signalingState));var a=n.writeSessionBoilerplate(r._sdpSessionId,r._sdpSessionVersion++);r.usingBundle&&(a+="a=group:BUNDLE "+r.transceivers.map((function(e){return e.mid})).join(" ")+"\r\n"),a+="a=ice-options:trickle\r\n";var c=n.getMediaSections(r._remoteDescription.sdp).length;r.transceivers.forEach((function(e,n){if(!(n+1>c)){if(e.rejected)return"application"===e.kind?"DTLS/SCTP"===e.protocol?a+="m=application 0 DTLS/SCTP 5000\r\n":a+="m=application 0 "+e.protocol+" webrtc-datachannel\r\n":"audio"===e.kind?a+="m=audio 0 UDP/TLS/RTP/SAVPF 0\r\na=rtpmap:0 PCMU/8000\r\n":"video"===e.kind&&(a+="m=video 0 UDP/TLS/RTP/SAVPF 120\r\na=rtpmap:120 VP8/90000\r\n"),void(a+="c=IN IP4 0.0.0.0\r\na=inactive\r\na=mid:"+e.mid+"\r\n");var s;e.stream&&("audio"===e.kind?s=e.stream.getAudioTracks()[0]:"video"===e.kind&&(s=e.stream.getVideoTracks()[0]),s&&t>=15019&&"video"===e.kind&&!e.sendEncodingParameters[0].rtx&&(e.sendEncodingParameters[0].rtx={ssrc:e.sendEncodingParameters[0].ssrc+1}));var u=i(e.localCapabilities,e.remoteCapabilities);!u.codecs.filter((function(e){return"rtx"===e.name.toLowerCase()})).length&&e.sendEncodingParameters[0].rtx&&delete e.sendEncodingParameters[0].rtx,a+=o(e,u,"answer",e.stream,r._dtlsRole),e.rtcpParameters&&e.rtcpParameters.reducedSize&&(a+="a=rtcp-rsize\r\n")}}));var u=new e.RTCSessionDescription({type:"answer",sdp:a});return Promise.resolve(u)},l.prototype.addIceCandidate=function(e){var t,r=this;return e&&void 0===e.sdpMLineIndex&&!e.sdpMid?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise((function(o,i){if(!r._remoteDescription)return i(s("InvalidStateError","Can not add ICE candidate without a remote description"));if(e&&""!==e.candidate){var a=e.sdpMLineIndex;if(e.sdpMid)for(var u=0;u<r.transceivers.length;u++)if(r.transceivers[u].mid===e.sdpMid){a=u;break}var l=r.transceivers[a];if(!l)return i(s("OperationError","Can not add ICE candidate"));if(l.rejected)return o();var f=Object.keys(e.candidate).length>0?n.parseCandidate(e.candidate):{};if("tcp"===f.protocol&&(0===f.port||9===f.port))return o();if(f.component&&1!==f.component)return o();if((0===a||a>0&&l.iceTransport!==r.transceivers[0].iceTransport)&&!c(l.iceTransport,f))return i(s("OperationError","Can not add ICE candidate"));var p=e.candidate.trim();0===p.indexOf("a=")&&(p=p.substr(2)),(t=n.getMediaSections(r._remoteDescription.sdp))[a]+="a="+(f.type?p:"end-of-candidates")+"\r\n",r._remoteDescription.sdp=n.getDescription(r._remoteDescription.sdp)+t.join("")}else for(var d=0;d<r.transceivers.length&&(r.transceivers[d].rejected||(r.transceivers[d].iceTransport.addRemoteCandidate({}),(t=n.getMediaSections(r._remoteDescription.sdp))[d]+="a=end-of-candidates\r\n",r._remoteDescription.sdp=n.getDescription(r._remoteDescription.sdp)+t.join(""),!r.usingBundle));d++);o()}))},l.prototype.getStats=function(t){if(t&&t instanceof e.MediaStreamTrack){var r=null;if(this.transceivers.forEach((function(e){e.rtpSender&&e.rtpSender.track===t?r=e.rtpSender:e.rtpReceiver&&e.rtpReceiver.track===t&&(r=e.rtpReceiver)})),!r)throw s("InvalidAccessError","Invalid selector.");return r.getStats()}var n=[];return this.transceivers.forEach((function(e){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach((function(t){e[t]&&n.push(e[t].getStats())}))})),Promise.all(n).then((function(e){var t=new Map;return e.forEach((function(e){e.forEach((function(e){t.set(e.id,e)}))})),t}))},["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"].forEach((function(t){var r=e[t];if(r&&r.prototype&&r.prototype.getStats){var n=r.prototype.getStats;r.prototype.getStats=function(){return n.apply(this).then((function(e){var t=new Map;return Object.keys(e).forEach((function(r){var n;e[r].type={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[(n=e[r]).type]||n.type,t.set(r,e[r])})),t}))}}}));var f=["createOffer","createAnswer"];return f.forEach((function(e){var t=l.prototype[e];l.prototype[e]=function(){var e=arguments;return"function"==typeof e[0]||"function"==typeof e[1]?t.apply(this,[arguments[2]]).then((function(t){"function"==typeof e[0]&&e[0].apply(null,[t])}),(function(t){"function"==typeof e[1]&&e[1].apply(null,[t])})):t.apply(this,arguments)}})),(f=["setLocalDescription","setRemoteDescription","addIceCandidate"]).forEach((function(e){var t=l.prototype[e];l.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]||"function"==typeof e[2]?t.apply(this,arguments).then((function(){"function"==typeof e[1]&&e[1].apply(null)}),(function(t){"function"==typeof e[2]&&e[2].apply(null,[t])})):t.apply(this,arguments)}})),["getStats"].forEach((function(e){var t=l.prototype[e];l.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]?t.apply(this,arguments).then((function(){"function"==typeof e[1]&&e[1].apply(null)})):t.apply(this,arguments)}})),l}},73569:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}e=r.nmd(e);var o={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};o.localCName=o.generateIdentifier(),o.splitLines=function(e){return e.trim().split("\n").map((function(e){return e.trim()}))},o.splitSections=function(e){return e.split("\nm=").map((function(e,t){return(t>0?"m="+e:e).trim()+"\r\n"}))},o.getDescription=function(e){var t=o.splitSections(e);return t&&t[0]},o.getMediaSections=function(e){var t=o.splitSections(e);return t.shift(),t},o.matchPrefix=function(e,t){return o.splitLines(e).filter((function(e){return 0===e.indexOf(t)}))},o.parseCandidate=function(e){for(var t,r={foundation:(t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" "))[0],component:parseInt(t[1],10),protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]},n=8;n<t.length;n+=2)switch(t[n]){case"raddr":r.relatedAddress=t[n+1];break;case"rport":r.relatedPort=parseInt(t[n+1],10);break;case"tcptype":r.tcpType=t[n+1];break;case"ufrag":r.ufrag=t[n+1],r.usernameFragment=t[n+1];break;default:r[t[n]]=t[n+1]}return r},o.writeCandidate=function(e){var t=[];t.push(e.foundation),t.push(e.component),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);var r=e.type;return t.push("typ"),t.push(r),"host"!==r&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},o.parseIceOptions=function(e){return e.substr(14).split(" ")},o.parseRtpMap=function(e){var t=e.substr(9).split(" "),r={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),r.name=t[0],r.clockRate=parseInt(t[1],10),r.channels=3===t.length?parseInt(t[2],10):1,r.numChannels=r.channels,r},o.writeRtpMap=function(e){var t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);var r=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==r?"/"+r:"")+"\r\n"},o.parseExtmap=function(e){var t=e.substr(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1]}},o.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+"\r\n"},o.parseFmtp=function(e){for(var t,r={},n=e.substr(e.indexOf(" ")+1).split(";"),o=0;o<n.length;o++)r[(t=n[o].trim().split("="))[0].trim()]=t[1];return r},o.writeFmtp=function(e){var t="",r=e.payloadType;if(void 0!==e.preferredPayloadType&&(r=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){var n=[];Object.keys(e.parameters).forEach((function(t){e.parameters[t]?n.push(t+"="+e.parameters[t]):n.push(t)})),t+="a=fmtp:"+r+" "+n.join(";")+"\r\n"}return t},o.parseRtcpFb=function(e){var t=e.substr(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},o.writeRtcpFb=function(e){var t="",r=e.payloadType;return void 0!==e.preferredPayloadType&&(r=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach((function(e){t+="a=rtcp-fb:"+r+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"})),t},o.parseSsrcMedia=function(e){var t=e.indexOf(" "),r={ssrc:parseInt(e.substr(7,t-7),10)},n=e.indexOf(":",t);return n>-1?(r.attribute=e.substr(t+1,n-t-1),r.value=e.substr(n+1)):r.attribute=e.substr(t+1),r},o.parseSsrcGroup=function(e){var t=e.substr(13).split(" ");return{semantics:t.shift(),ssrcs:t.map((function(e){return parseInt(e,10)}))}},o.getMid=function(e){var t=o.matchPrefix(e,"a=mid:")[0];if(t)return t.substr(6)},o.parseFingerprint=function(e){var t=e.substr(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1]}},o.getDtlsParameters=function(e,t){return{role:"auto",fingerprints:o.matchPrefix(e+t,"a=fingerprint:").map(o.parseFingerprint)}},o.writeDtlsParameters=function(e,t){var r="a=setup:"+t+"\r\n";return e.fingerprints.forEach((function(e){r+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"})),r},o.parseCryptoLine=function(e){var t=e.substr(9).split(" ");return{tag:parseInt(t[0],10),cryptoSuite:t[1],keyParams:t[2],sessionParams:t.slice(3)}},o.writeCryptoLine=function(e){return"a=crypto:"+e.tag+" "+e.cryptoSuite+" "+("object"===n(e.keyParams)?o.writeCryptoKeyParams(e.keyParams):e.keyParams)+(e.sessionParams?" "+e.sessionParams.join(" "):"")+"\r\n"},o.parseCryptoKeyParams=function(e){if(0!==e.indexOf("inline:"))return null;var t=e.substr(7).split("|");return{keyMethod:"inline",keySalt:t[0],lifeTime:t[1],mkiValue:t[2]?t[2].split(":")[0]:void 0,mkiLength:t[2]?t[2].split(":")[1]:void 0}},o.writeCryptoKeyParams=function(e){return e.keyMethod+":"+e.keySalt+(e.lifeTime?"|"+e.lifeTime:"")+(e.mkiValue&&e.mkiLength?"|"+e.mkiValue+":"+e.mkiLength:"")},o.getCryptoParameters=function(e,t){return o.matchPrefix(e+t,"a=crypto:").map(o.parseCryptoLine)},o.getIceParameters=function(e,t){var r=o.matchPrefix(e+t,"a=ice-ufrag:")[0],n=o.matchPrefix(e+t,"a=ice-pwd:")[0];return r&&n?{usernameFragment:r.substr(12),password:n.substr(10)}:null},o.writeIceParameters=function(e){return"a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n"},o.parseRtpParameters=function(e){for(var t={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},r=o.splitLines(e)[0].split(" "),n=3;n<r.length;n++){var i=r[n],a=o.matchPrefix(e,"a=rtpmap:"+i+" ")[0];if(a){var c=o.parseRtpMap(a),s=o.matchPrefix(e,"a=fmtp:"+i+" ");switch(c.parameters=s.length?o.parseFmtp(s[0]):{},c.rtcpFeedback=o.matchPrefix(e,"a=rtcp-fb:"+i+" ").map(o.parseRtcpFb),t.codecs.push(c),c.name.toUpperCase()){case"RED":case"ULPFEC":t.fecMechanisms.push(c.name.toUpperCase())}}}return o.matchPrefix(e,"a=extmap:").forEach((function(e){t.headerExtensions.push(o.parseExtmap(e))})),t},o.writeRtpDescription=function(e,t){var r="";r+="m="+e+" ",r+=t.codecs.length>0?"9":"0",r+=" UDP/TLS/RTP/SAVPF ",r+=t.codecs.map((function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType})).join(" ")+"\r\n",r+="c=IN IP4 0.0.0.0\r\n",r+="a=rtcp:9 IN IP4 0.0.0.0\r\n",t.codecs.forEach((function(e){r+=o.writeRtpMap(e),r+=o.writeFmtp(e),r+=o.writeRtcpFb(e)}));var n=0;return t.codecs.forEach((function(e){e.maxptime>n&&(n=e.maxptime)})),n>0&&(r+="a=maxptime:"+n+"\r\n"),r+="a=rtcp-mux\r\n",t.headerExtensions&&t.headerExtensions.forEach((function(e){r+=o.writeExtmap(e)})),r},o.parseRtpEncodingParameters=function(e){var t,r=[],n=o.parseRtpParameters(e),i=-1!==n.fecMechanisms.indexOf("RED"),a=-1!==n.fecMechanisms.indexOf("ULPFEC"),c=o.matchPrefix(e,"a=ssrc:").map((function(e){return o.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute})),s=c.length>0&&c[0].ssrc,u=o.matchPrefix(e,"a=ssrc-group:FID").map((function(e){return e.substr(17).split(" ").map((function(e){return parseInt(e,10)}))}));u.length>0&&u[0].length>1&&u[0][0]===s&&(t=u[0][1]),n.codecs.forEach((function(e){if("RTX"===e.name.toUpperCase()&&e.parameters.apt){var n={ssrc:s,codecPayloadType:parseInt(e.parameters.apt,10)};s&&t&&(n.rtx={ssrc:t}),r.push(n),i&&((n=JSON.parse(JSON.stringify(n))).fec={ssrc:s,mechanism:a?"red+ulpfec":"red"},r.push(n))}})),0===r.length&&s&&r.push({ssrc:s});var l=o.matchPrefix(e,"b=");return l.length&&(l=0===l[0].indexOf("b=TIAS:")?parseInt(l[0].substr(7),10):0===l[0].indexOf("b=AS:")?1e3*parseInt(l[0].substr(5),10)*.95-16e3:void 0,r.forEach((function(e){e.maxBitrate=l}))),r},o.parseRtcpParameters=function(e){var t={},r=o.matchPrefix(e,"a=ssrc:").map((function(e){return o.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute}))[0];r&&(t.cname=r.value,t.ssrc=r.ssrc);var n=o.matchPrefix(e,"a=rtcp-rsize");t.reducedSize=n.length>0,t.compound=0===n.length;var i=o.matchPrefix(e,"a=rtcp-mux");return t.mux=i.length>0,t},o.parseMsid=function(e){var t,r=o.matchPrefix(e,"a=msid:");if(1===r.length)return{stream:(t=r[0].substr(7).split(" "))[0],track:t[1]};var n=o.matchPrefix(e,"a=ssrc:").map((function(e){return o.parseSsrcMedia(e)})).filter((function(e){return"msid"===e.attribute}));return n.length>0?{stream:(t=n[0].value.split(" "))[0],track:t[1]}:void 0},o.parseSctpDescription=function(e){var t,r=o.parseMLine(e),n=o.matchPrefix(e,"a=max-message-size:");n.length>0&&(t=parseInt(n[0].substr(19),10)),isNaN(t)&&(t=65536);var i=o.matchPrefix(e,"a=sctp-port:");if(i.length>0)return{port:parseInt(i[0].substr(12),10),protocol:r.fmt,maxMessageSize:t};if(o.matchPrefix(e,"a=sctpmap:").length>0){var a=o.matchPrefix(e,"a=sctpmap:")[0].substr(10).split(" ");return{port:parseInt(a[0],10),protocol:a[1],maxMessageSize:t}}},o.writeSctpDescription=function(e,t){var r=[];return r="DTLS/SCTP"!==e.protocol?["m="+e.kind+" 9 "+e.protocol+" "+t.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+t.port+"\r\n"]:["m="+e.kind+" 9 "+e.protocol+" "+t.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+t.port+" "+t.protocol+" 65535\r\n"],void 0!==t.maxMessageSize&&r.push("a=max-message-size:"+t.maxMessageSize+"\r\n"),r.join("")},o.generateSessionId=function(){return Math.random().toString().substr(2,21)},o.writeSessionBoilerplate=function(e,t,r){var n=void 0!==t?t:2;return"v=0\r\no="+(r||"thisisadapterortc")+" "+(e||o.generateSessionId())+" "+n+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},o.writeMediaSection=function(e,t,r,n){var i=o.writeRtpDescription(e.kind,t);if(i+=o.writeIceParameters(e.iceGatherer.getLocalParameters()),i+=o.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===r?"actpass":"active"),i+="a=mid:"+e.mid+"\r\n",e.direction?i+="a="+e.direction+"\r\n":e.rtpSender&&e.rtpReceiver?i+="a=sendrecv\r\n":e.rtpSender?i+="a=sendonly\r\n":e.rtpReceiver?i+="a=recvonly\r\n":i+="a=inactive\r\n",e.rtpSender){var a="msid:"+n.id+" "+e.rtpSender.track.id+"\r\n";i+="a="+a,i+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+a,e.sendEncodingParameters[0].rtx&&(i+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+a,i+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return i+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+o.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(i+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+o.localCName+"\r\n"),i},o.getDirection=function(e,t){for(var r=o.splitLines(e),n=0;n<r.length;n++)switch(r[n]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return r[n].substr(2)}return t?o.getDirection(t):"sendrecv"},o.getKind=function(e){return o.splitLines(e)[0].split(" ")[0].substr(2)},o.isRejected=function(e){return"0"===e.split(" ",2)[1]},o.parseMLine=function(e){var t=o.splitLines(e)[0].substr(2).split(" ");return{kind:t[0],port:parseInt(t[1],10),protocol:t[2],fmt:t.slice(3).join(" ")}},o.parseOLine=function(e){var t=o.matchPrefix(e,"o=")[0].substr(2).split(" ");return{username:t[0],sessionId:t[1],sessionVersion:parseInt(t[2],10),netType:t[3],addressType:t[4],address:t[5]}},o.isValidSDP=function(e){if("string"!=typeof e||0===e.length)return!1;for(var t=o.splitLines(e),r=0;r<t.length;r++)if(t[r].length<2||"="!==t[r].charAt(1))return!1;return!0},"object"===n(e)&&(e.exports=o)},645:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}var o=r(43532),i=r(49493),a=r(96338),c=o("%TypeError%"),s=o("%WeakMap%",!0),u=o("%Map%",!0),l=i("WeakMap.prototype.get",!0),f=i("WeakMap.prototype.set",!0),p=i("WeakMap.prototype.has",!0),d=i("Map.prototype.get",!0),h=i("Map.prototype.set",!0),y=i("Map.prototype.has",!0),m=function(e,t){for(var r,n=e;null!==(r=n.next);n=r)if(r.key===t)return n.next=r.next,r.next=e.next,e.next=r,r};e.exports=function(){var e,t,r,o={assert:function(e){if(!o.has(e))throw new c("Side channel does not contain "+a(e))},get:function(o){if(s&&o&&("object"===n(o)||"function"==typeof o)){if(e)return l(e,o)}else if(u){if(t)return d(t,o)}else if(r)return function(e,t){var r=m(e,t);return r&&r.value}(r,o)},has:function(o){if(s&&o&&("object"===n(o)||"function"==typeof o)){if(e)return p(e,o)}else if(u){if(t)return y(t,o)}else if(r)return function(e,t){return!!m(e,t)}(r,o);return!1},set:function(o,i){s&&o&&("object"===n(o)||"function"==typeof o)?(e||(e=new s),f(e,o,i)):u?(t||(t=new u),h(t,o,i)):(r||(r={key:{},next:null}),function(e,t,r){var n=m(e,t);n?n.value=r:e.next={key:t,next:e.next,value:r}}(r,o,i))}};return o}},48750:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>Oe});var n={};r.r(n),r.d(n,{fixNegotiationNeeded:()=>D,shimAddTrackRemoveTrack:()=>L,shimAddTrackRemoveTrackWithNative:()=>I,shimGetDisplayMedia:()=>k,shimGetSendersWithDtmf:()=>T,shimGetStats:()=>x,shimGetUserMedia:()=>P,shimMediaStream:()=>j,shimOnTrack:()=>C,shimPeerConnection:()=>M,shimSenderReceiverGetStats:()=>R});var o={};r.r(o),r.d(o,{shimGetDisplayMedia:()=>B,shimGetUserMedia:()=>U,shimPeerConnection:()=>F,shimReplaceTrack:()=>q});var i={};r.r(i),r.d(i,{shimAddTransceiver:()=>Q,shimCreateAnswer:()=>te,shimCreateOffer:()=>ee,shimGetDisplayMedia:()=>V,shimGetParameters:()=>Z,shimGetUserMedia:()=>W,shimOnTrack:()=>H,shimPeerConnection:()=>J,shimRTCDataChannel:()=>X,shimReceiverGetStats:()=>K,shimRemoveStream:()=>$,shimSenderGetStats:()=>Y});var a={};r.r(a),r.d(a,{shimAudioContext:()=>fe,shimCallbacksAPI:()=>ie,shimConstraints:()=>ce,shimCreateOfferLegacy:()=>le,shimGetUserMedia:()=>ae,shimLocalStreamsAPI:()=>ne,shimRTCIceServerUrls:()=>se,shimRemoteStreamsAPI:()=>oe,shimTrackEventTransceiver:()=>ue});var c={};function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}r.r(c),r.d(c,{removeExtmapAllowMixed:()=>ge,shimAddIceCandidateNullOrEmpty:()=>we,shimConnectionState:()=>be,shimMaxMessageSize:()=>me,shimRTCIceCandidate:()=>ye,shimSendThrowTypeError:()=>ve});var u=!0,l=!0;function f(e,t,r){var n=e.match(t);return n&&n.length>=r&&parseInt(n[r],10)}function p(e,t,r){if(e.RTCPeerConnection){var n=e.RTCPeerConnection.prototype,o=n.addEventListener;n.addEventListener=function(e,n){if(e!==t)return o.apply(this,arguments);var i=function(e){var t=r(e);t&&(n.handleEvent?n.handleEvent(t):n(t))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(n,i),o.apply(this,[e,i])};var i=n.removeEventListener;n.removeEventListener=function(e,r){if(e!==t||!this._eventMap||!this._eventMap[t])return i.apply(this,arguments);if(!this._eventMap[t].has(r))return i.apply(this,arguments);var n=this._eventMap[t].get(r);return this._eventMap[t].delete(r),0===this._eventMap[t].size&&delete this._eventMap[t],0===Object.keys(this._eventMap).length&&delete this._eventMap,i.apply(this,[e,n])},Object.defineProperty(n,"on"+t,{get:function(){return this["_on"+t]},set:function(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})}}function d(e){return"boolean"!=typeof e?new Error("Argument type: "+s(e)+". Please use a boolean."):(u=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function h(e){return"boolean"!=typeof e?new Error("Argument type: "+s(e)+". Please use a boolean."):(l=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function y(){if("object"===("undefined"==typeof window?"undefined":s(window))){if(u)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}}function m(e,t){l&&console.warn(e+" is deprecated, please use "+t+" instead.")}function v(e){return"[object Object]"===Object.prototype.toString.call(e)}function b(e){return v(e)?Object.keys(e).reduce((function(t,r){var n=v(e[r]),o=n?b(e[r]):e[r],i=n&&!Object.keys(o).length;return void 0===o||i?t:Object.assign(t,function(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==s(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===s(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}({},r,o))}),{}):e}function g(e,t,r){t&&!r.has(t.id)&&(r.set(t.id,t),Object.keys(t).forEach((function(n){n.endsWith("Id")?g(e,e.get(t[n]),r):n.endsWith("Ids")&&t[n].forEach((function(t){g(e,e.get(t),r)}))})))}function w(e,t,r){var n=r?"outbound-rtp":"inbound-rtp",o=new Map;if(null===t)return o;var i=[];return e.forEach((function(e){"track"===e.type&&e.trackIdentifier===t.id&&i.push(e)})),i.forEach((function(t){e.forEach((function(r){r.type===n&&r.trackId===t.id&&g(e,r,o)}))})),o}function S(e){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S(e)}var O=y;function P(e,t){var r=e&&e.navigator;if(r.mediaDevices){var n=function(e){if("object"!==S(e)||e.mandatory||e.optional)return e;var t={};return Object.keys(e).forEach((function(r){if("require"!==r&&"advanced"!==r&&"mediaSource"!==r){var n="object"===S(e[r])?e[r]:{ideal:e[r]};void 0!==n.exact&&"number"==typeof n.exact&&(n.min=n.max=n.exact);var o=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==n.ideal){t.optional=t.optional||[];var i={};"number"==typeof n.ideal?(i[o("min",r)]=n.ideal,t.optional.push(i),(i={})[o("max",r)]=n.ideal,t.optional.push(i)):(i[o("",r)]=n.ideal,t.optional.push(i))}void 0!==n.exact&&"number"!=typeof n.exact?(t.mandatory=t.mandatory||{},t.mandatory[o("",r)]=n.exact):["min","max"].forEach((function(e){void 0!==n[e]&&(t.mandatory=t.mandatory||{},t.mandatory[o(e,r)]=n[e])}))}})),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},o=function(e,o){if(t.version>=61)return o(e);if((e=JSON.parse(JSON.stringify(e)))&&"object"===S(e.audio)){var i=function(e,t,r){t in e&&!(r in e)&&(e[r]=e[t],delete e[t])};i((e=JSON.parse(JSON.stringify(e))).audio,"autoGainControl","googAutoGainControl"),i(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=n(e.audio)}if(e&&"object"===S(e.video)){var a=e.video.facingMode;a=a&&("object"===S(a)?a:{ideal:a});var c,s=t.version<66;if(a&&("user"===a.exact||"environment"===a.exact||"user"===a.ideal||"environment"===a.ideal)&&(!r.mediaDevices.getSupportedConstraints||!r.mediaDevices.getSupportedConstraints().facingMode||s)&&(delete e.video.facingMode,"environment"===a.exact||"environment"===a.ideal?c=["back","rear"]:"user"!==a.exact&&"user"!==a.ideal||(c=["front"]),c))return r.mediaDevices.enumerateDevices().then((function(t){var r=(t=t.filter((function(e){return"videoinput"===e.kind}))).find((function(e){return c.some((function(t){return e.label.toLowerCase().includes(t)}))}));return!r&&t.length&&c.includes("back")&&(r=t[t.length-1]),r&&(e.video.deviceId=a.exact?{exact:r.deviceId}:{ideal:r.deviceId}),e.video=n(e.video),O("chrome: "+JSON.stringify(e)),o(e)}));e.video=n(e.video)}return O("chrome: "+JSON.stringify(e)),o(e)},i=function(e){return t.version>=64?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}};if(r.getUserMedia=function(e,t,n){o(e,(function(e){r.webkitGetUserMedia(e,t,(function(e){n&&n(i(e))}))}))}.bind(r),r.mediaDevices.getUserMedia){var a=r.mediaDevices.getUserMedia.bind(r.mediaDevices);r.mediaDevices.getUserMedia=function(e){return o(e,(function(e){return a(e).then((function(t){if(e.audio&&!t.getAudioTracks().length||e.video&&!t.getVideoTracks().length)throw t.getTracks().forEach((function(e){e.stop()})),new DOMException("","NotFoundError");return t}),(function(e){return Promise.reject(i(e))}))}))}}}}function k(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&("function"==typeof t?e.navigator.mediaDevices.getDisplayMedia=function(r){return t(r).then((function(t){var n=r.video&&r.video.width,o=r.video&&r.video.height,i=r.video&&r.video.frameRate;return r.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t,maxFrameRate:i||3}},n&&(r.video.mandatory.maxWidth=n),o&&(r.video.mandatory.maxHeight=o),e.navigator.mediaDevices.getUserMedia(r)}))}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}function _(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==E(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==E(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===E(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function E(e){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}function j(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function C(e){if("object"===E(e)&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var r=this;return this._ontrackpoly||(this._ontrackpoly=function(t){t.stream.addEventListener("addtrack",(function(n){var o;o=e.RTCPeerConnection.prototype.getReceivers?r.getReceivers().find((function(e){return e.track&&e.track.id===n.track.id})):{track:n.track};var i=new Event("track");i.track=n.track,i.receiver=o,i.transceiver={receiver:o},i.streams=[t.stream],r.dispatchEvent(i)})),t.stream.getTracks().forEach((function(n){var o;o=e.RTCPeerConnection.prototype.getReceivers?r.getReceivers().find((function(e){return e.track&&e.track.id===n.id})):{track:n};var i=new Event("track");i.track=n,i.receiver=o,i.transceiver={receiver:o},i.streams=[t.stream],r.dispatchEvent(i)}))},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else p(e,"track",(function(e){return e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e}))}function T(e){if("object"===E(e)&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){var t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};var r=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,n){var o=r.apply(this,arguments);return o||(o=t(this,e),this._senders.push(o)),o};var n=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){n.apply(this,arguments);var t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}var o=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var r=this;this._senders=this._senders||[],o.apply(this,[e]),e.getTracks().forEach((function(e){r._senders.push(t(r,e))}))};var i=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;this._senders=this._senders||[],i.apply(this,[e]),e.getTracks().forEach((function(e){var r=t._senders.find((function(t){return t.track===e}));r&&t._senders.splice(t._senders.indexOf(r),1)}))}}else if("object"===E(e)&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){var a=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){var e=this,t=a.apply(this,[]);return t.forEach((function(t){return t._pc=e})),t},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function x(e){if(e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){var e=this,r=Array.prototype.slice.call(arguments),n=r[0],o=r[1],i=r[2];if(arguments.length>0&&"function"==typeof n)return t.apply(this,arguments);if(0===t.length&&(0===arguments.length||"function"!=typeof n))return t.apply(this,[]);var a=function(e){var t={};return e.result().forEach((function(e){var r={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};e.names().forEach((function(t){r[t]=e.stat(t)})),t[r.id]=r})),t},c=function(e){return new Map(Object.keys(e).map((function(t){return[t,e[t]]})))};return arguments.length>=2?t.apply(this,[function(e){o(c(a(e)))},n]):new Promise((function(r,n){t.apply(e,[function(e){r(c(a(e)))},n])})).then(o,i)}}}function R(e){if("object"===E(e)&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver){if(!("getStats"in e.RTCRtpSender.prototype)){var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,r=t.apply(this,[]);return r.forEach((function(t){return t._pc=e})),r});var r=e.RTCPeerConnection.prototype.addTrack;r&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=r.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){var e=this;return this._pc.getStats().then((function(t){return w(t,e.track,!0)}))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){var n=e.RTCPeerConnection.prototype.getReceivers;n&&(e.RTCPeerConnection.prototype.getReceivers=function(){var e=this,t=n.apply(this,[]);return t.forEach((function(t){return t._pc=e})),t}),p(e,"track",(function(e){return e.receiver._pc=e.srcElement,e})),e.RTCRtpReceiver.prototype.getStats=function(){var e=this;return this._pc.getStats().then((function(t){return w(t,e.track,!1)}))}}if("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype){var o=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){var t,r,n,i=arguments[0];return this.getSenders().forEach((function(e){e.track===i&&(t?n=!0:t=e)})),this.getReceivers().forEach((function(e){return e.track===i&&(r?n=!0:r=e),e.track===i})),n||t&&r?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):t?t.getStats():r?r.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return o.apply(this,arguments)}}}}function I(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map((function(t){return e._shimmedLocalStreams[t][0]}))};var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,r){if(!r)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};var n=t.apply(this,arguments);return this._shimmedLocalStreams[r.id]?-1===this._shimmedLocalStreams[r.id].indexOf(n)&&this._shimmedLocalStreams[r.id].push(n):this._shimmedLocalStreams[r.id]=[r,n],n};var r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var t=this;this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach((function(e){if(t.getSenders().find((function(t){return t.track===e})))throw new DOMException("Track already exists.","InvalidAccessError")}));var n=this.getSenders();r.apply(this,arguments);var o=this.getSenders().filter((function(e){return-1===n.indexOf(e)}));this._shimmedLocalStreams[e.id]=[e].concat(o)};var n=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],n.apply(this,arguments)};var o=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){var t=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach((function(r){var n=t._shimmedLocalStreams[r].indexOf(e);-1!==n&&t._shimmedLocalStreams[r].splice(n,1),1===t._shimmedLocalStreams[r].length&&delete t._shimmedLocalStreams[r]})),o.apply(this,arguments)}}function L(e,t){if(e.RTCPeerConnection){if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return I(e);var r=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this,t=r.apply(this);return this._reverseStreams=this._reverseStreams||{},t.map((function(t){return e._reverseStreams[t.id]}))};var n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){var r=this;if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},t.getTracks().forEach((function(e){if(r.getSenders().find((function(t){return t.track===e})))throw new DOMException("Track already exists.","InvalidAccessError")})),!this._reverseStreams[t.id]){var o=new e.MediaStream(t.getTracks());this._streams[t.id]=o,this._reverseStreams[o.id]=t,t=o}n.apply(this,[t])};var o=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},o.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,r){var n=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");var o=[].slice.call(arguments,1);if(1!==o.length||!o[0].getTracks().find((function(e){return e===t})))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find((function(e){return e.track===t})))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};var i=this._streams[r.id];if(i)i.addTrack(t),Promise.resolve().then((function(){n.dispatchEvent(new Event("negotiationneeded"))}));else{var a=new e.MediaStream([t]);this._streams[r.id]=a,this._reverseStreams[a.id]=r,this.addStream(a)}return this.getSenders().find((function(e){return e.track===t}))},["createOffer","createAnswer"].forEach((function(t){var r=e.RTCPeerConnection.prototype[t],n=_({},t,(function(){var e=this,t=arguments;return arguments.length&&"function"==typeof arguments[0]?r.apply(this,[function(r){var n=c(e,r);t[0].apply(null,[n])},function(e){t[1]&&t[1].apply(null,e)},arguments[2]]):r.apply(this,arguments).then((function(t){return c(e,t)}))}));e.RTCPeerConnection.prototype[t]=n[t]}));var i=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=function(e,t){var r=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((function(t){var n=e._reverseStreams[t],o=e._streams[n.id];r=r.replace(new RegExp(n.id,"g"),o.id)})),new RTCSessionDescription({type:t.type,sdp:r})}(this,arguments[0]),i.apply(this,arguments)):i.apply(this,arguments)};var a=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get:function(){var e=a.get.apply(this);return""===e.type?e:c(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){var t,r=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(e._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{},Object.keys(this._streams).forEach((function(n){r._streams[n].getTracks().find((function(t){return e.track===t}))&&(t=r._streams[n])})),t&&(1===t.getTracks().length?this.removeStream(this._reverseStreams[t.id]):t.removeTrack(e.track),this.dispatchEvent(new Event("negotiationneeded")))}}function c(e,t){var r=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((function(t){var n=e._reverseStreams[t],o=e._streams[n.id];r=r.replace(new RegExp(o.id,"g"),n.id)})),new RTCSessionDescription({type:t.type,sdp:r})}}function M(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){var r=e.RTCPeerConnection.prototype[t],n=_({},t,(function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}));e.RTCPeerConnection.prototype[t]=n[t]}))}function D(e,t){p(e,"negotiationneeded",(function(e){var r=e.target;if(!(t.version<72||r.getConfiguration&&"plan-b"===r.getConfiguration().sdpSemantics)||"stable"===r.signalingState)return e}))}var A=r(83850),N=r.n(A);function U(e){var t=e&&e.navigator,r=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(e){return r(e).catch((function(e){return Promise.reject(function(e){return{name:{PermissionDeniedError:"NotAllowedError"}[e.name]||e.name,message:e.message,constraint:e.constraint,toString:function(){return this.name}}}(e))}))}}function B(e){"getDisplayMedia"in e.navigator&&e.navigator.mediaDevices&&(e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||(e.navigator.mediaDevices.getDisplayMedia=e.navigator.getDisplayMedia.bind(e.navigator)))}function F(e,t){if(e.RTCIceGatherer&&(e.RTCIceCandidate||(e.RTCIceCandidate=function(e){return e}),e.RTCSessionDescription||(e.RTCSessionDescription=function(e){return e}),t.version<15025)){var r=Object.getOwnPropertyDescriptor(e.MediaStreamTrack.prototype,"enabled");Object.defineProperty(e.MediaStreamTrack.prototype,"enabled",{set:function(e){r.set.call(this,e);var t=new Event("enabled");t.enabled=e,this.dispatchEvent(t)}})}e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)&&Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=new e.RTCDtmfSender(this):"video"===this.track.kind&&(this._dtmf=null)),this._dtmf}}),e.RTCDtmfSender&&!e.RTCDTMFSender&&(e.RTCDTMFSender=e.RTCDtmfSender);var n=N()(e,t.version);e.RTCPeerConnection=function(e){var r,o;return e&&e.iceServers&&(e.iceServers=(r=e.iceServers,t.version,o=!1,(r=JSON.parse(JSON.stringify(r))).filter((function(e){if(e&&(e.urls||e.url)){var t=e.urls||e.url;e.url&&!e.urls&&m("RTCIceServer.url","RTCIceServer.urls");var r="string"==typeof t;return r&&(t=[t]),t=t.filter((function(e){if(0===e.indexOf("stun:"))return!1;var t=e.startsWith("turn")&&!e.startsWith("turn:[")&&e.includes("transport=udp");return t&&!o?(o=!0,!0):t&&!o})),delete e.url,e.urls=r?t[0]:t,!!t.length}}))),y("ICE servers after filtering:",e.iceServers)),new n(e)},e.RTCPeerConnection.prototype=n.prototype}function q(e){e.RTCRtpSender&&!("replaceTrack"in e.RTCRtpSender.prototype)&&(e.RTCRtpSender.prototype.replaceTrack=e.RTCRtpSender.prototype.setTrack)}function z(e){return z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},z(e)}function W(e,t){var r=e&&e.navigator,n=e&&e.MediaStreamTrack;if(r.getUserMedia=function(e,t,n){m("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),r.mediaDevices.getUserMedia(e).then(t,n)},!(t.version>55&&"autoGainControl"in r.mediaDevices.getSupportedConstraints())){var o=function(e,t,r){t in e&&!(r in e)&&(e[r]=e[t],delete e[t])},i=r.mediaDevices.getUserMedia.bind(r.mediaDevices);if(r.mediaDevices.getUserMedia=function(e){return"object"===z(e)&&"object"===z(e.audio)&&(e=JSON.parse(JSON.stringify(e)),o(e.audio,"autoGainControl","mozAutoGainControl"),o(e.audio,"noiseSuppression","mozNoiseSuppression")),i(e)},n&&n.prototype.getSettings){var a=n.prototype.getSettings;n.prototype.getSettings=function(){var e=a.apply(this,arguments);return o(e,"mozAutoGainControl","autoGainControl"),o(e,"mozNoiseSuppression","noiseSuppression"),e}}if(n&&n.prototype.applyConstraints){var c=n.prototype.applyConstraints;n.prototype.applyConstraints=function(e){return"audio"===this.kind&&"object"===z(e)&&(e=JSON.parse(JSON.stringify(e)),o(e,"autoGainControl","mozAutoGainControl"),o(e,"noiseSuppression","mozNoiseSuppression")),c.apply(this,[e])}}}}function V(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(r){if(!r||!r.video){var n=new DOMException("getDisplayMedia without video constraints is undefined");return n.name="NotFoundError",n.code=8,Promise.reject(n)}return!0===r.video?r.video={mediaSource:t}:r.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(r)})}function G(e){return G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},G(e)}function H(e){"object"===G(e)&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function J(e,t){if("object"===G(e)&&(e.RTCPeerConnection||e.mozRTCPeerConnection)){!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){var r,n,o,i=e.RTCPeerConnection.prototype[t],a=(r={},o=function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),i.apply(this,arguments)},(n=function(e){var t=function(e,t){if("object"!==G(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==G(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===G(t)?t:String(t)}(n=t))in r?Object.defineProperty(r,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[n]=o,r);e.RTCPeerConnection.prototype[t]=a[t]}));var r={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},n=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){var e=Array.prototype.slice.call(arguments),o=e[0],i=e[1],a=e[2];return n.apply(this,[o||null]).then((function(e){if(t.version<53&&!i)try{e.forEach((function(e){e.type=r[e.type]||e.type}))}catch(t){if("TypeError"!==t.name)throw t;e.forEach((function(t,n){e.set(n,Object.assign({},t,{type:r[t.type]||t.type}))}))}return e})).then(i,a)}}}function Y(e){if("object"===G(e)&&e.RTCPeerConnection&&e.RTCRtpSender&&(!e.RTCRtpSender||!("getStats"in e.RTCRtpSender.prototype))){var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,r=t.apply(this,[]);return r.forEach((function(t){return t._pc=e})),r});var r=e.RTCPeerConnection.prototype.addTrack;r&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=r.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}}function K(e){if("object"===G(e)&&e.RTCPeerConnection&&e.RTCRtpSender&&(!e.RTCRtpSender||!("getStats"in e.RTCRtpReceiver.prototype))){var t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){var e=this,r=t.apply(this,[]);return r.forEach((function(t){return t._pc=e})),r}),p(e,"track",(function(e){return e.receiver._pc=e.srcElement,e})),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}}function $(e){e.RTCPeerConnection&&!("removeStream"in e.RTCPeerConnection.prototype)&&(e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;m("removeStream","removeTrack"),this.getSenders().forEach((function(r){r.track&&e.getTracks().includes(r.track)&&t.removeTrack(r)}))})}function X(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function Q(e){if("object"===G(e)&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];var e=arguments[1],r=e&&"sendEncodings"in e;r&&e.sendEncodings.forEach((function(e){if("rid"in e&&!/^[a-z0-9]{0,16}$/i.test(e.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in e&&!(parseFloat(e.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in e&&!(parseFloat(e.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")}));var n=t.apply(this,arguments);if(r){var o=n.sender,i=o.getParameters();(!("encodings"in i)||1===i.encodings.length&&0===Object.keys(i.encodings[0]).length)&&(i.encodings=e.sendEncodings,o.sendEncodings=e.sendEncodings,this.setParametersPromises.push(o.setParameters(i).then((function(){delete o.sendEncodings})).catch((function(){delete o.sendEncodings}))))}return n})}}function Z(e){if("object"===G(e)&&e.RTCRtpSender){var t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){var e=t.apply(this,arguments);return"encodings"in e||(e.encodings=[].concat(this.sendEncodings||[{}])),e})}}function ee(e){if("object"===G(e)&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){var e=arguments,r=this;return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((function(){return t.apply(r,e)})).finally((function(){r.setParametersPromises=[]})):t.apply(this,arguments)}}}function te(e){if("object"===G(e)&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){var e=arguments,r=this;return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((function(){return t.apply(r,e)})).finally((function(){r.setParametersPromises=[]})):t.apply(this,arguments)}}}function re(e){return re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},re(e)}function ne(e){if("object"===re(e)&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){var r=this;this._localStreams||(this._localStreams=[]),this._localStreams.includes(e)||this._localStreams.push(e),e.getAudioTracks().forEach((function(n){return t.call(r,n,e)})),e.getVideoTracks().forEach((function(n){return t.call(r,n,e)}))},e.RTCPeerConnection.prototype.addTrack=function(e){for(var r=this,n=arguments.length,o=new Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];return o&&o.forEach((function(e){r._localStreams?r._localStreams.includes(e)||r._localStreams.push(e):r._localStreams=[e]})),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;this._localStreams||(this._localStreams=[]);var r=this._localStreams.indexOf(e);if(-1!==r){this._localStreams.splice(r,1);var n=e.getTracks();this.getSenders().forEach((function(e){n.includes(e.track)&&t.removeTrack(e)}))}})}}function oe(e){if("object"===re(e)&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(e){var t=this;this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=function(e){e.streams.forEach((function(e){if(t._remoteStreams||(t._remoteStreams=[]),!t._remoteStreams.includes(e)){t._remoteStreams.push(e);var r=new Event("addstream");r.stream=e,t.dispatchEvent(r)}}))})}});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var e=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach((function(t){if(e._remoteStreams||(e._remoteStreams=[]),!(e._remoteStreams.indexOf(t)>=0)){e._remoteStreams.push(t);var r=new Event("addstream");r.stream=t,e.dispatchEvent(r)}}))}),t.apply(e,arguments)}}}function ie(e){if("object"===re(e)&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype,r=t.createOffer,n=t.createAnswer,o=t.setLocalDescription,i=t.setRemoteDescription,a=t.addIceCandidate;t.createOffer=function(e,t){var n=arguments.length>=2?arguments[2]:arguments[0],o=r.apply(this,[n]);return t?(o.then(e,t),Promise.resolve()):o},t.createAnswer=function(e,t){var r=arguments.length>=2?arguments[2]:arguments[0],o=n.apply(this,[r]);return t?(o.then(e,t),Promise.resolve()):o};var c=function(e,t,r){var n=o.apply(this,[e]);return r?(n.then(t,r),Promise.resolve()):n};t.setLocalDescription=c,c=function(e,t,r){var n=i.apply(this,[e]);return r?(n.then(t,r),Promise.resolve()):n},t.setRemoteDescription=c,c=function(e,t,r){var n=a.apply(this,[e]);return r?(n.then(t,r),Promise.resolve()):n},t.addIceCandidate=c}}function ae(e){var t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){var r=t.mediaDevices,n=r.getUserMedia.bind(r);t.mediaDevices.getUserMedia=function(e){return n(ce(e))}}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,r,n){t.mediaDevices.getUserMedia(e).then(r,n)}.bind(t))}function ce(e){return e&&void 0!==e.video?Object.assign({},e,{video:b(e.video)}):e}function se(e){if(e.RTCPeerConnection){var t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,r){if(e&&e.iceServers){for(var n=[],o=0;o<e.iceServers.length;o++){var i=e.iceServers[o];!i.hasOwnProperty("urls")&&i.hasOwnProperty("url")?(m("RTCIceServer.url","RTCIceServer.urls"),(i=JSON.parse(JSON.stringify(i))).urls=i.url,delete i.url,n.push(i)):n.push(e.iceServers[o])}e.iceServers=n}return new t(e,r)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:function(){return t.generateCertificate}})}}function ue(e){"object"===re(e)&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function le(e){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){void 0!==e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);var r=this.getTransceivers().find((function(e){return"audio"===e.receiver.track.kind}));!1===e.offerToReceiveAudio&&r?"sendrecv"===r.direction?r.setDirection?r.setDirection("sendonly"):r.direction="sendonly":"recvonly"===r.direction&&(r.setDirection?r.setDirection("inactive"):r.direction="inactive"):!0!==e.offerToReceiveAudio||r||this.addTransceiver("audio"),void 0!==e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);var n=this.getTransceivers().find((function(e){return"video"===e.receiver.track.kind}));!1===e.offerToReceiveVideo&&n?"sendrecv"===n.direction?n.setDirection?n.setDirection("sendonly"):n.direction="sendonly":"recvonly"===n.direction&&(n.setDirection?n.setDirection("inactive"):n.direction="inactive"):!0!==e.offerToReceiveVideo||n||this.addTransceiver("video")}return t.apply(this,arguments)}}function fe(e){"object"!==re(e)||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}var pe=r(73569),de=r.n(pe);function he(e){return he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},he(e)}function ye(e){if(!(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)){var t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){if("object"===he(e)&&e.candidate&&0===e.candidate.indexOf("a=")&&((e=JSON.parse(JSON.stringify(e))).candidate=e.candidate.substr(2)),e.candidate&&e.candidate.length){var r=new t(e),n=de().parseCandidate(e.candidate),o=Object.assign(r,n);return o.toJSON=function(){return{candidate:o.candidate,sdpMid:o.sdpMid,sdpMLineIndex:o.sdpMLineIndex,usernameFragment:o.usernameFragment}},o}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,p(e,"icecandidate",(function(t){return t.candidate&&Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t}))}}function me(e,t){if(e.RTCPeerConnection){"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get:function(){return void 0===this._sctp?null:this._sctp}});var r=function(e){if(!e||!e.sdp)return!1;var t=de().splitSections(e.sdp);return t.shift(),t.some((function(e){var t=de().parseMLine(e);return t&&"application"===t.kind&&-1!==t.protocol.indexOf("SCTP")}))},n=function(e){var t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||t.length<2)return-1;var r=parseInt(t[1],10);return r!=r?-1:r},o=function(e){var r=65536;return"firefox"===t.browser&&(r=t.version<57?-1===e?16384:2147483637:t.version<60?57===t.version?65535:65536:2147483637),r},i=function(e,r){var n=65536;"firefox"===t.browser&&57===t.version&&(n=65535);var o=de().matchPrefix(e.sdp,"a=max-message-size:");return o.length>0?n=parseInt(o[0].substr(19),10):"firefox"===t.browser&&-1!==r&&(n=2147483637),n},a=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===t.browser&&t.version>=76&&"plan-b"===this.getConfiguration().sdpSemantics&&Object.defineProperty(this,"sctp",{get:function(){return void 0===this._sctp?null:this._sctp},enumerable:!0,configurable:!0}),r(arguments[0])){var e,c=n(arguments[0]),s=o(c),u=i(arguments[0],c);e=0===s&&0===u?Number.POSITIVE_INFINITY:0===s||0===u?Math.max(s,u):Math.min(s,u);var l={};Object.defineProperty(l,"maxMessageSize",{get:function(){return e}}),this._sctp=l}return a.apply(this,arguments)}}}function ve(e){if(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype){var t=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){var e=t.apply(this,arguments);return r(e,this),e},p(e,"datachannel",(function(e){return r(e.channel,e.target),e}))}function r(e,t){var r=e.send;e.send=function(){var n=arguments[0],o=n.length||n.size||n.byteLength;if("open"===e.readyState&&t.sctp&&o>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return r.apply(e,arguments)}}}function be(e){if(e.RTCPeerConnection&&!("connectionState"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get:function(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get:function(){return this._onconnectionstatechange||null},set:function(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach((function(e){var r=t[e];t[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=function(e){var t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;var r=new Event("connectionstatechange",e);t.dispatchEvent(r)}return e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),r.apply(this,arguments)}}))}}function ge(e,t){if(e.RTCPeerConnection&&!("chrome"===t.browser&&t.version>=71||"safari"===t.browser&&t.version>=605)){var r=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(t){if(t&&t.sdp&&-1!==t.sdp.indexOf("\na=extmap-allow-mixed")){var n=t.sdp.split("\n").filter((function(e){return"a=extmap-allow-mixed"!==e.trim()})).join("\n");e.RTCSessionDescription&&t instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:t.type,sdp:n}):t.sdp=n}return r.apply(this,arguments)}}}function we(e,t){if(e.RTCPeerConnection&&e.RTCPeerConnection.prototype){var r=e.RTCPeerConnection.prototype.addIceCandidate;r&&0!==r.length&&(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?("chrome"===t.browser&&t.version<78||"firefox"===t.browser&&t.version<68||"safari"===t.browser)&&arguments[0]&&""===arguments[0].candidate?Promise.resolve():r.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}}var Se=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).window,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0},r=y,s=function(e){var t={browser:null,version:null};if(void 0===e||!e.navigator)return t.browser="Not a browser.",t;var r=e.navigator;if(r.mozGetUserMedia)t.browser="firefox",t.version=f(r.userAgent,/Firefox\/(\d+)\./,1);else if(r.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection&&!e.RTCIceGatherer)t.browser="chrome",t.version=f(r.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(r.mediaDevices&&r.userAgent.match(/Edge\/(\d+).(\d+)$/))t.browser="edge",t.version=f(r.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!e.RTCPeerConnection||!r.userAgent.match(/AppleWebKit\/(\d+)\./))return t.browser="Not a supported browser.",t;t.browser="safari",t.version=f(r.userAgent,/AppleWebKit\/(\d+)\./,1),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype}return t}(e),u={browserDetails:s,commonShim:c,extractVersion:f,disableLog:d,disableWarnings:h};switch(s.browser){case"chrome":if(!n||!M||!t.shimChrome)return r("Chrome shim is not included in this adapter release."),u;if(null===s.version)return r("Chrome shim can not determine version, not shimming."),u;r("adapter.js shimming chrome."),u.browserShim=n,we(e,s),P(e,s),j(e),M(e,s),C(e),L(e,s),T(e),x(e),R(e),D(e,s),ye(e),be(e),me(e,s),ve(e),ge(e,s);break;case"firefox":if(!i||!J||!t.shimFirefox)return r("Firefox shim is not included in this adapter release."),u;r("adapter.js shimming firefox."),u.browserShim=i,we(e,s),W(e,s),J(e,s),H(e),$(e),Y(e),K(e),X(e),Q(e),Z(e),ee(e),te(e),ye(e),be(e),me(e,s),ve(e);break;case"edge":if(!o||!F||!t.shimEdge)return r("MS edge shim is not included in this adapter release."),u;r("adapter.js shimming edge."),u.browserShim=o,U(e),B(e),F(e,s),q(e),me(e,s),ve(e);break;case"safari":if(!a||!t.shimSafari)return r("Safari shim is not included in this adapter release."),u;r("adapter.js shimming safari."),u.browserShim=a,we(e,s),se(e),le(e),ie(e),ne(e),oe(e),ue(e),ae(e),fe(e),ye(e),me(e,s),ve(e),ge(e,s);break;default:r("Unsupported browser!")}return u}({window:"undefined"==typeof window?void 0:window});const Oe=Se},65176:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}var o=r(50434),i=r(33524),a=r(30293),c=r(57764),s=r(39518);e.exports=function(e){return null==e||"object"!==n(e)&&"function"!=typeof e?null:o(e)?"String":i(e)?"Number":a(e)?"Boolean":c(e)?"Symbol":s(e)?"BigInt":void 0}},2607:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}var o=r(77758),i=r(93167),a=r(49493),c=a("Object.prototype.toString"),s=r(87285)()&&"symbol"===n(Symbol.toStringTag),u=i(),l=a("String.prototype.slice"),f={},p=r(16992),d=Object.getPrototypeOf;s&&p&&d&&o(u,(function(e){if("function"==typeof r.g[e]){var t=new r.g[e];if(!(Symbol.toStringTag in t))throw new EvalError("this engine has support for Symbol.toStringTag, but "+e+" does not have the property! Please report this.");var n=d(t),o=p(n,Symbol.toStringTag);if(!o){var i=d(n);o=p(i,Symbol.toStringTag)}f[e]=o.get}}));var h=r(18215);e.exports=function(e){return!!h(e)&&(s?function(e){var t=!1;return o(f,(function(r,n){if(!t)try{var o=r.call(e);o===n&&(t=o)}catch(e){}})),t}(e):l(c(e),8,-1))}},59003:e=>{"use strict";e.exports=require("classnames")},39105:e=>{"use strict";e.exports=require("color")},4305:e=>{"use strict";e.exports=require("lodash.debounce")},39455:e=>{"use strict";e.exports=require("material-ui")},13173:e=>{"use strict";e.exports=require("material-ui/styles")},580:e=>{"use strict";e.exports=require("prop-types")},10757:e=>{"use strict";e.exports=require("pydio")},56880:e=>{"use strict";e.exports=require("pydio/http/api")},85829:e=>{"use strict";e.exports=require("pydio/http/meta-cache-service")},62610:e=>{"use strict";e.exports=require("pydio/http/resources-manager")},82702:e=>{"use strict";e.exports=require("pydio/http/users-api")},2282:e=>{"use strict";e.exports=require("pydio/model/controller")},14603:e=>{"use strict";e.exports=require("pydio/model/data-model")},7180:e=>{"use strict";e.exports=require("pydio/util/func")},14021:e=>{"use strict";e.exports=require("pydio/util/periodical-executer")},16689:e=>{"use strict";e.exports=require("react")},66405:e=>{"use strict";e.exports=require("react-dom")},70192:e=>{"use strict";e.exports=require("react-draggable")},65863:()=>{},93167:(e,t,r)=>{"use strict";var n=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"];e.exports=function(){for(var e=[],t=0;t<n.length;t++)"function"==typeof r.g[n[t]]&&(e[e.length]=n[t]);return e}},16992:(e,t,r)=>{"use strict";var n=r(43532)("%Object.getOwnPropertyDescriptor%");if(n)try{n([],"length")}catch(e){n=null}e.exports=n},23382:(e,t,r)=>{"use strict";var n=r(80288);if(r(87285)()||r(2112)()){var o=Symbol.iterator;e.exports=function(e){return null!=e&&void 0!==e[o]?e[o]():n(e)?Array.prototype[o].call(e):void 0}}else{var i=r(99776),a=r(50434),c=r(43532),s=c("%Map%",!0),u=c("%Set%",!0),l=r(49493),f=l("Array.prototype.push"),p=l("String.prototype.charCodeAt"),d=l("String.prototype.slice"),h=function(e){var t=0;return{next:function(){var r,n=t>=e.length;return n||(r=e[t],t+=1),{done:n,value:r}}}},y=function(e,t){if(i(e)||n(e))return h(e);if(a(e)){var r=0;return{next:function(){var t=function(e,t){if(t+1>=e.length)return t+1;var r=p(e,t);if(r<55296||r>56319)return t+1;var n=p(e,t+1);return n<56320||n>57343?t+1:t+2}(e,r),n=d(e,r,t);return r=t,{done:t>e.length,value:n}}}}return t&&void 0!==e["_es6-shim iterator_"]?e["_es6-shim iterator_"]():void 0};if(s||u){var m=r(33410),v=r(32454),b=l("Map.prototype.forEach",!0),g=l("Set.prototype.forEach",!0);if("undefined"==typeof process||!process.versions||!process.versions.node)var w=l("Map.prototype.iterator",!0),S=l("Set.prototype.iterator",!0),O=function(e){var t=!1;return{next:function(){try{return{done:t,value:t?void 0:e.next()}}catch(e){return t=!0,{done:!0,value:void 0}}}}};var P=l("Map.prototype.@@iterator",!0)||l("Map.prototype._es6-shim iterator_",!0),k=l("Set.prototype.@@iterator",!0)||l("Set.prototype._es6-shim iterator_",!0);e.exports=function(e){return function(e){if(m(e)){if(w)return O(w(e));if(P)return P(e);if(b){var t=[];return b(e,(function(e,r){f(t,[r,e])})),h(t)}}if(v(e)){if(S)return O(S(e));if(k)return k(e);if(g){var r=[];return g(e,(function(e){f(r,e)})),h(r)}}}(e)||y(e)}}else e.exports=function(e){if(null!=e)return y(e,!0)}}},18724:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}var o=r(33410),i=r(32454),a=r(30464),c=r(77799);e.exports=function(e){if(e&&"object"===n(e)){if(o(e))return"Map";if(i(e))return"Set";if(a(e))return"WeakMap";if(c(e))return"WeakSet"}return!1}}},__webpack_module_cache__={},leafPrototypes,getProto,inProgress,dataWebpackPrefix;function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var r=__webpack_module_cache__[e]={id:e,loaded:!1,exports:{}};return __webpack_modules__[e].call(r.exports,r,r.exports,__webpack_require__),r.loaded=!0,r.exports}__webpack_require__.m=__webpack_modules__,__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},getProto=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,__webpack_require__.t=function(e,t){if(1&t&&(e=this(e)),8&t)return e;if("object"==typeof e&&e){if(4&t&&e.__esModule)return e;if(16&t&&"function"==typeof e.then)return e}var r=Object.create(null);__webpack_require__.r(r);var n={};leafPrototypes=leafPrototypes||[null,getProto({}),getProto([]),getProto(getProto)];for(var o=2&t&&e;"object"==typeof o&&!~leafPrototypes.indexOf(o);o=getProto(o))Object.getOwnPropertyNames(o).forEach((t=>n[t]=()=>e[t]));return n.default=()=>e,__webpack_require__.d(r,n),r},__webpack_require__.d=(e,t)=>{for(var r in t)__webpack_require__.o(t,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},__webpack_require__.f={},__webpack_require__.e=e=>Promise.all(Object.keys(__webpack_require__.f).reduce(((t,r)=>(__webpack_require__.f[r](e,t),t)),[])),__webpack_require__.u=e=>"rgl.min.js",__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),inProgress={},dataWebpackPrefix="gui.ajax:",__webpack_require__.l=(e,t,r,n)=>{if(inProgress[e])inProgress[e].push(t);else{var o,i;if(void 0!==r)for(var a=document.getElementsByTagName("script"),c=0;c<a.length;c++){var s=a[c];if(s.getAttribute("src")==e||s.getAttribute("data-webpack")==dataWebpackPrefix+r){o=s;break}}o||(i=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,__webpack_require__.nc&&o.setAttribute("nonce",__webpack_require__.nc),o.setAttribute("data-webpack",dataWebpackPrefix+r),o.src=e),inProgress[e]=[t];var u=(t,r)=>{o.onerror=o.onload=null,clearTimeout(l);var n=inProgress[e];if(delete inProgress[e],o.parentNode&&o.parentNode.removeChild(o),n&&n.forEach((e=>e(r))),t)return t(r)},l=setTimeout(u.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=u.bind(null,o.onerror),o.onload=u.bind(null,o.onload),i&&document.head.appendChild(o)}},__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),__webpack_require__.p="plug/gui.ajax/res/dist/libs/",(()=>{var e={543:0};__webpack_require__.f.j=(t,r)=>{var n=__webpack_require__.o(e,t)?e[t]:void 0;if(0!==n)if(n)r.push(n[2]);else{var o=new Promise(((r,o)=>n=e[t]=[r,o]));r.push(n[2]=o);var i=__webpack_require__.p+__webpack_require__.u(t),a=new Error;__webpack_require__.l(i,(r=>{if(__webpack_require__.o(e,t)&&(0!==(n=e[t])&&(e[t]=void 0),n)){var o=r&&("load"===r.type?"missing":r.type),i=r&&r.target&&r.target.src;a.message="Loading chunk "+t+" failed.\n("+o+": "+i+")",a.name="ChunkLoadError",a.type=o,a.request=i,n[1](a)}}),"chunk-"+t,t)}};var t=(t,r)=>{var n,o,[i,a,c]=r,s=0;if(i.some((t=>0!==e[t]))){for(n in a)__webpack_require__.o(a,n)&&(__webpack_require__.m[n]=a[n]);c&&c(__webpack_require__)}for(t&&t(r);s<i.length;s++)o=i[s],__webpack_require__.o(e,o)&&e[o]&&e[o][0](),e[o]=0},r=self.webpackChunkgui_ajax=self.webpackChunkgui_ajax||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var __webpack_exports__={};(()=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>qv});var e=__webpack_require__(16689),t=__webpack_require__.n(e),r=__webpack_require__(66405),n=__webpack_require__.n(r),o=__webpack_require__(14603),i=__webpack_require__.n(o);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==a(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===a(o)?o:String(o)),n)}var o}var s=__webpack_require__(7180),u=__webpack_require__(62610),l={NODE_PROVIDER:"node",SORTABLE_LIST_ITEM:"sortable-list-item"};function f(e,t){return{connectDragSource:e.dragSource(),isDragging:t.isDragging()}}function p(e,t){return{connectDropTarget:e.dropTarget(),canDrop:t.canDrop(),isOver:t.isOver(),isOverCurrent:t.isOver({shallow:!0})}}var d=function(){function e(t,r,n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._source=t,this._target=r,this._step=n,this._dropEffect=o}var t,r;return t=e,(r=[{key:"getSource",value:function(){return this._source}},{key:"getTarget",value:function(){return this._target}},{key:"getStep",value:function(){return this._step}},{key:"getDropEffect",value:function(){return this._dropEffect}}])&&c(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();d.STEP_BEGIN_DRAG="beginDrag",d.STEP_END_DRAG="endDrag",d.STEP_CAN_DROP="canDrop",d.STEP_HOVER_DROP="hover";var h=function(e,t,r,n){var o=window.pydio.Controller,a=o.defaultActions.get("dragndrop");if(!a)throw new Error("No DND Actions available");var c=o.getActionByName(a);if(c.deny){var l=new(i());if(l.setSelectedNodes([e]),c.fireSelectionChange(l),c.deny)throw new Error("DND action disabled")}var f=new d(e,t,r,n),p=c.options.dragndropCheckModule;if(r===d.STEP_CAN_DROP&&p){if(!s.getFunctionByName(p,window))throw u.detectModuleToLoadAndApply(p,(function(){})),new Error("Cannot find test module, trying to load it");s.executeFunctionByName(c.options.dragndropCheckModule,window,o,f)}else c.apply(f)},y={beginDrag:function(e){return{node:e.node}},endDrag:function(e,t,r){if(t.didDrop()){var n=t.getItem(),o=t.getDropResult();try{h(n.node,o.node,d.STEP_END_DRAG,o.dropEffect)}catch(e){}}}},m={hover:function(e,t){},canDrop:function(e,t){var r=t.getItem().node,n=e.node;try{h(r,n,d.STEP_CAN_DROP)}catch(e){return!1}return!0},drop:function(e,t){if(!t.didDrop())return{node:e.node}}},v=__webpack_require__(39455);const b=require("react-dnd");var g=__webpack_require__.n(b);function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach((function(t){P(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function P(e,t,r){return(t=j(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function k(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,j(n.key),n)}}function E(e,t,r){return t&&_(e.prototype,t),r&&_(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function j(e){var t=function(e,t){if("object"!==w(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==w(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===w(t)?t:String(t)}function C(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&T(e,t)}function T(e,t){return T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},T(e,t)}function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=R(e);if(t){var o=R(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===w(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function R(e){return R=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},R(e)}var I=function(e){C(o,e);var r=x(o);function o(){return k(this,o),r.apply(this,arguments)}return E(o,[{key:"removeClicked",value:function(){this.props.onRemove(this.props.id)}},{key:"render",value:function(){var e,r=this,o=this.props,i=o.isDragging,a=o.connectDragSource,c=o.connectDropTarget,s=o.renderItem,u=o.style,l=o.item,f=o.removable,p=o.className,d=o.label;return f&&(e=t().createElement("span",{className:"button mdi mdi-close",onClick:function(e){return r.removeClicked(e)}})),s?t().createElement("div",{ref:function(e){c(n().findDOMNode(e)),a(n().findDOMNode(e))},style:O(O({},u),{},{opacity:i?0:1})},s(l)):t().createElement(v.Paper,{ref:function(e){c(n().findDOMNode(e)),a(n().findDOMNode(e))},zDepth:1,style:{opacity:i?0:1,margin:"8px 0"}},t().createElement("div",{className:p},d,e))}}]),o}(t().Component),L=function(e){C(n,e);var r=x(n);function n(){return k(this,n),r.apply(this,arguments)}return E(n,[{key:"removeClicked",value:function(){this.props.onRemove(this.props.id)}},{key:"render",value:function(){var e,r=this;return this.props.removable&&(e=t().createElement("span",{className:"button mdi mdi-close",onClick:function(e){return r.removeClicked(e)}})),t().createElement(v.Paper,{zDepth:1,style:{margin:"8px 0"}},t().createElement("div",{className:this.props.className},this.props.label,e))}}]),n}(t().Component);g()&&(L=g().flow(g().DragSource(l.SORTABLE_LIST_ITEM,{beginDrag:function(e){return{id:e.id}},endDrag:function(e){e.endSwitching()}},f),g().DropTarget(l.SORTABLE_LIST_ITEM,{hover:function(e,t){var r=t.getItem().id;r!==e.id&&e.switchItems(r,e.id)}},p))(I));var M=function(e){C(n,e);var r=x(n);function n(e){var t;return k(this,n),(t=r.call(this,e)).state={values:t.props.values},t}return E(n,[{key:"componentWillReceiveProps",value:function(e){this.setState({values:e.values,switchData:null})}},{key:"findItemIndex",value:function(e,t){for(var r=0;r<t.length;r++)if(t[r].payload===e)return r}},{key:"switchItems",value:function(e,t){var r=this.findItemIndex(e,this.state.values),n=this.state.values[r],o=this.findItemIndex(t,this.state.values),i=this.state.values[o],a=this.state.values.slice();a[r]=i,a[o]=n;var c=this.findItemIndex(e,this.props.values),s=this.findItemIndex(t,this.props.values);c===o&&s===r?this.setState({values:a,switchData:null}):this.setState({values:a,switchData:{oldId:e,newId:t}})}},{key:"endSwitching",value:function(){this.state.switchData&&this.props.onOrderUpdated&&this.props.onOrderUpdated(this.state.switchData.oldId,this.state.switchData.newId,this.state.values),this.setState({switchData:null})}},{key:"render",value:function(){return t().createElement("div",{className:this.props.className},this.state.values.map(function(e){return t().createElement(L,{id:e.payload,key:e.payload,label:e.text,switchItems:this.switchItems.bind(this),endSwitching:this.endSwitching.bind(this),removable:this.props.removable,onRemove:this.props.onRemove,className:this.props.itemClassName,item:e,style:this.props.itemStyle,renderItem:this.props.renderItem})}.bind(this)))}}]),n}(t().Component);const D=require("create-react-class");var A=__webpack_require__.n(D),N=__webpack_require__(580),U=__webpack_require__.n(N),B=__webpack_require__(10757),F=__webpack_require__.n(B);const q=require("react-infinite");var z=__webpack_require__.n(q),W=__webpack_require__(90691),V=__webpack_require__.n(W);const G=require("pydio/util/lang");var H=__webpack_require__.n(G),J=__webpack_require__(13173),Y=__webpack_require__(39105),K=__webpack_require__.n(Y);function $(e){return $="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$(e)}var X=["muiTheme","node","iconCell","firstLine","secondLine"];function Q(){return Q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Q.apply(this,arguments)}function Z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ee(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(r),!0).forEach((function(t){te(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Z(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function te(e,t,r){return(t=oe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function re(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ne(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,oe(n.key),n)}}function oe(e){var t=function(e,t){if("object"!==$(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==$(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===$(t)?t:String(t)}function ie(e,t){return ie=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ie(e,t)}function ae(e){return ae=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ae(e)}var ce=F().requireLib("hoc").withContextMenu,se=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ie(e,t)}(s,e);var r,o,i,a,c=(i=s,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ae(i);if(a){var r=ae(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===$(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function s(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),c.apply(this,arguments)}return r=s,o=[{key:"onClick",value:function(e){if(this.props.showSelector){if(this.props.selectorDisabled)return;this.props.onSelect(this.props.node,e),e.stopPropagation(),e.preventDefault()}else this.props.onClick&&this.props.onClick(this.props.node,e)}},{key:"onDoubleClick",value:function(e){this.props.onDoubleClick&&this.props.onDoubleClick(this.props.node,e)}},{key:"render",value:function(){var e,r,o,i=this,a=this.props,c=a.node,s=a.showSelector,u=a.selected,l=a.selectorDisabled,f=a.firstLine,p=a.secondLine,d=a.thirdLine,h=a.style,y=a.actions,m=a.iconCell,b=a.mainIcon,g=a.className,w=a.canDrop,S=a.isOver,O=a.nativeIsOver,P=a.connectDragSource,k=a.connectDropTarget,_=a.selectedAsBorder,E=["material-list-entry","material-list-entry-"+(d?3:p?2:1)+"-lines"];g&&E.push(g),s&&(e=t().createElement("div",{className:"material-list-selector"},t().createElement(v.Checkbox,{checked:u,ref:"selector",disabled:l}))),m?r=this.props.iconCell:this.props.mainIcon&&(r=t().createElement(v.FontIcon,{className:"mui-font-icon "+this.props.mainIcon,style:{fontSize:18,color:"#FFF",display:"inline-block",margin:16,backgroundColor:"rgb(189, 189, 189)",padding:"7px 3px",width:33,height:33,textAlign:"center"}})),(w&&S||O)&&E.push("droppable-active"),c&&(E.push("listentry_"+H().computeStringSlug(c.getPath())),E.push("ajxp_node_"+(c.isLeaf()?"leaf":"collection")),c.getAjxpMime()&&E.push("ajxp_mime_"+c.getAjxpMime()),c.getMetadata().has("local:entry-classes")&&E.push.apply(E,function(e){if(Array.isArray(e))return re(e)}(o=c.getMetadata().get("local:entry-classes"))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(o)||function(e,t){if(e){if("string"==typeof e)return re(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?re(e,t):void 0}}(o)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()));var j={};if(this.state&&this.state.hover&&!this.props.noHover&&(j=ee(ee({},j),{},{backgroundColor:"rgba(0,0,0,0.05)",borderBottom:"1px solid transparent"})),u){var C=this.props.muiTheme.palette.accent2Color,T=K()(C).dark();j=ee(ee({},j),{},_?{boxShadow:"0 0 0 2px "+C+",rgba(0, 0, 0, .4) 0px 0px 10px"}:{backgroundColor:C,color:T?"white":"rgba(0,0,0,.87)"}),E.push("selected"),E.push("selected-"+(T?"dark":"light"))}return t().createElement(ue,Q({},this.props,{ref:function(e){var t=n().findDOMNode(e);"function"==typeof k&&k(t),"function"==typeof P&&P(t)},onClick:this.onClick.bind(this),onDoubleClick:s?null:this.onDoubleClick.bind(this),className:E.join(" "),onMouseOver:function(){i.setState({hover:!0})},onMouseOut:function(){i.setState({hover:!1})},style:ee(ee({},h),j)}),e,t().createElement("div",{className:"material-list-icon"+(b||m?"":" material-list-icon-none")},r),t().createElement("div",{className:"material-list-text"},t().createElement("div",{key:"line-1",className:"material-list-line-1"},f),t().createElement("div",{key:"line-2",className:"material-list-line-2"},p),t().createElement("div",{key:"line-3",className:"material-list-line-3"},d)),t().createElement("div",{className:"material-list-actions"},y))}}],o&&ne(r.prototype,o),Object.defineProperty(r,"prototype",{writable:!1}),s}(t().Component),ue=function(e){e.muiTheme,e.node,e.iconCell,e.firstLine,e.secondLine;var r=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,X);return t().createElement("div",r)};ue=ce(ue),se.propTypes={showSelector:U().bool,selected:U().bool,selectorDisabled:U().bool,onSelect:U().func,onClick:U().func,iconCell:U().element,mainIcon:U().string,firstLine:U().node,secondLine:U().node,thirdLine:U().node,actions:U().element,activeDroppable:U().bool,className:U().string,style:U().object,noHover:U().bool},se=(0,J.muiThemeable)()(se);var le=(0,b.flow)((0,b.DragSource)(l.NODE_PROVIDER,y,f),(0,b.DropTarget)(l.NODE_PROVIDER,m,p))(se);const fe=require("pydio/util/path");var pe=__webpack_require__.n(fe);const de=require("pydio/util/dom");var he=__webpack_require__.n(de);function ye(e){return ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ye(e)}function me(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==ye(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==ye(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===ye(o)?o:String(o)),n)}var o}function ve(e,t){return ve=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ve(e,t)}function be(e){return be=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},be(e)}var ge=F().requireLib("boot").PydioContextConsumer,we=__webpack_require__(39455),Se=we.Paper,Oe=we.FlatButton,Pe=F().requireLib("hoc").ModernTextField,ke=function(r){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ve(e,t)}(s,r);var n,o,i,a,c=(i=s,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=be(i);if(a){var r=be(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===ye(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function s(t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(r=c.call(this,t)).text=(0,e.createRef)(),r}return n=s,(o=[{key:"submit",value:function(){var e;this.state&&this.state.value&&(e=this.state.value);var t=F().getMessages();e&&e!==this.props.node.getLabel()?e&&e.indexOf("/")>-1?this.setState({errorString:t["filename.forbidden.slash"]}):(this.props.callback(e),this.props.onClose()):this.setState({errorString:t["rename.newvalue.error.similar"]})}},{key:"componentDidMount",value:function(){this.text&&(he().selectBaseFileName(this.text.current.getInput()),this.text.current.focus())}},{key:"catchClicks",value:function(e){e.stopPropagation()}},{key:"onKeyDown",value:function(e){e.stopPropagation(),"Enter"===e.key?this.submit():this.setState({errorString:""})}},{key:"render",value:function(){var e=this,r=F().getMessages();return t().createElement(Se,{className:"inline-editor"+(this.props.detached?" detached":""),style:{padding:8,fontWeight:"initial"},zDepth:2},t().createElement(Pe,{ref:this.text,defaultValue:this.props.node.getLabel(),onChange:function(t,r){e.setState({value:r})},onClick:this.catch,onDoubleClick:function(t){return e.catchClicks(t)},tabIndex:"0",onKeyDown:function(t){return e.onKeyDown(t)},errorText:this.state?this.state.errorString:null}),t().createElement("div",{style:{textAlign:"right",paddingTop:8}},t().createElement(Oe,{label:r[54],onClick:this.props.onClose}),t().createElement(Oe,{label:r[48],onClick:function(){return e.submit()}})))}}])&&me(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),s}(t().Component);function _e(e){return _e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_e(e)}function Ee(){return Ee=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ee.apply(this,arguments)}function je(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==_e(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==_e(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===_e(o)?o:String(o)),n)}var o}function Ce(e,t){return Ce=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ce(e,t)}function Te(e){return Te=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Te(e)}ke=ge(ke);const xe=function(e){var r=function(r){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ce(e,t)}(s,r);var n,o,i,a,c=(i=s,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Te(i);if(a){var r=Te(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===_e(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function s(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),c.apply(this,arguments)}return n=s,(o=[{key:"attach",value:function(e){var t=this;this._nodeListener=function(){t.forceUpdate()},this._actionListener=function(e){return e&&"prompt-rename"===e.type&&e.callback&&t.setState({inlineEdition:!0,inlineEditionCallback:e.callback}),!0},e.observe("node_replaced",this._nodeListener),e.observe("node_action",this._actionListener)}},{key:"detach",value:function(e){this._nodeListener&&(e.stopObserving("node_replaced",this._nodeListener),e.stopObserving("node_action",this._actionListener))}},{key:"componentDidMount",value:function(){this.attach(this.props.node)}},{key:"componentWillUnmount",value:function(){this.detach(this.props.node)}},{key:"render",value:function(){var r=this;return t().createElement(e,Ee({},this.props,this.state,{inlineEditionDismiss:function(){return r.setState({inlineEdition:!1})}}))}}])&&je(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),s}(t().Component);return r};function Re(e){return Re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Re(e)}function Ie(){return Ie=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ie.apply(this,arguments)}function Le(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==Re(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==Re(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===Re(o)?o:String(o)),n)}var o}function Me(e,t){return Me=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Me(e,t)}function De(e){return De=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},De(e)}var Ae=F().requireLib("boot").moment,Ne=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Me(e,t)}(c,e);var r,n,o,i,a=(o=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=De(o);if(i){var r=De(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Re(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function c(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),a.apply(this,arguments)}return r=c,(n=[{key:"render",value:function(){var e=this,r=this.props,n=r.node,o=r.renderActions,i=r.tableKeys,a=r.inlineEdition,c=r.inlineEditionDismiss,s=r.inlineEditionCallback,u=this.props.actions;o&&(u=o(n));var l=[],f=!0,p=n.getMetadata();return Object.keys(i).forEach((function(r){var o,u,d,h=i[r],y=h.width?{width:h.width}:null;if(h.renderCell)h.name=r,o=h.renderCell(n,h);else if("ajxp_modiftime"===r){var m=Ae(1e3*parseFloat(p.get("ajxp_modiftime"))),v=m.calendar();v.indexOf("/")>-1&&(v=m.fromNow()),o=v}else o="bytesize"===r?parseInt(p.get(r))?pe().roundFileSize(parseInt(p.get(r))):"-":p.get(r);if(u=p.get(r),a&&f){d=t().createElement(ke,{node:n,onClose:c,callback:s});var b=e.props.style||{};b.position="relative",e.props.style=b}l.push(t().createElement("span",{key:r,className:"cell cell-"+r,title:u,style:y,"data-label":h.label},d,o)),f=!1})),t().createElement(le,Ie({},this.props,{iconCell:null,firstLine:l,actions:u}))}}])&&Le(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),c}(t().Component);const Ue=xe(Ne);function Be(e){return Be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Be(e)}function Fe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function qe(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==Be(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==Be(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===Be(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const ze={pydioActionsToItems:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=[],n=!1,o=F().getMessages();return t.map(function(t){if(t.separator){if(n)return;return r.push(t),void(n=!0)}var i;n=!1,i=t.label_id&&o[t.label_id]?o[t.label_id]:t.raw_name?t.raw_name:t.name;var a=t.icon_class;if(t.subMenu){var c=t.subMenuBeforeShow?e(t.subMenuBeforeShow()):t.subMenu;r.push({text:i,iconClassName:a,subItems:c})}else r.push({text:i,iconClassName:a,payload:t.callback})}.bind(this)),n&&(r=r.slice(0,r.length-1)),r.length&&r[0]&&r[0].separator&&r.shift(),r},itemsToMenu:function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};o=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Fe(Object(r),!0).forEach((function(t){qe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Fe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({display:"normal",width:216,desktop:!0,autoWidth:!1},o);var i=t.map((function(t,n){if(t.separator)return React.createElement(v.Divider,{key:"divider"+n});if(t.subHeader)return React.createElement(v.Subheader,{style:{marginTop:-10,marginBottom:-6}},t.subHeader);var i,a,c,s;t.subItems?i=e(t.subItems,r,!0):t.payload&&(a=function(){t.payload(),r()});var u=t.iconClassName,l=!1;return"__INSET__"===u&&(u="",l=!0),"normal"===o.display?c=u?React.createElement(v.FontIcon,{className:t.iconClassName+" menu-icons",style:{fontSize:16,padding:5}}):null:"right"===o.display&&(s=u?React.createElement(v.FontIcon,{className:t.iconClassName+" menu-icons",style:{fontSize:16,padding:5}}):null),s=i&&i.length?React.createElement(v.FontIcon,{className:"mdi mdi-menu-right menu-icons"}):s,React.createElement(v.MenuItem,{key:t.text,primaryText:t.text,insetChildren:l,leftIcon:c,rightIcon:s,onClick:a,menuItems:i})}));return n?i:React.createElement(v.Menu,o,i)}},We=require("lodash");function Ve(e){return Ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ve(e)}function Ge(){return Ge=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ge.apply(this,arguments)}function He(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==Ve(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==Ve(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===Ve(o)?o:String(o)),n)}var o}function Je(e,t){return Je=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Je(e,t)}function Ye(e){return Ye=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ye(e)}var Ke=__webpack_require__(16689),$e=__webpack_require__(580),Xe=__webpack_require__(2282);const Qe=function(e){var t=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Je(e,t)}(c,t);var r,n,o,i,a=(o=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ye(o);if(i){var r=Ye(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Ve(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function c(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(r=a.call(this,e,t)).state={menuItems:r.props.menuItems||[]},r}return r=c,(n=[{key:"componentDidMount",value:function(){var e=this;this.props.controller&&!this.props.menuItems&&(this._observer=(0,We.debounce)((function(){var t=e.props.controller.getContextActions("genericContext",null,e.props.toolbars),r=ze.pydioActionsToItems(t);e.setState({menuItems:r})}),50),this.props.controller===this.props.pydio.Controller?this.props.pydio.observe("actions_refreshed",this._observer):this.props.controller.observe("actions_refreshed",this._observer),this._observer())}},{key:"componentWillUnmount",value:function(){this._observer&&(this.props.controller===this.props.pydio.Controller?this.props.pydio.stopObserving("actions_refreshed",this._observer):this.props.controller.stopObserving("actions_refreshed",this._observer))}},{key:"componentWillReceiveProps",value:function(e){e.menuItems&&e.menuItems!==this.props.menuItems&&this.setState({menuItems:e.menuItems})}},{key:"render",value:function(){return Ke.createElement(e,Ge({},this.props,{menuItems:this.state.menuItems}))}}])&&He(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),c}(Ke.Component);return t.propTypes={menuItems:$e.array,toolbars:$e.array,controller:$e.instanceOf(Xe),pydio:$e.instanceOf(Pydio)},t};function Ze(e){return Ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ze(e)}function et(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==Ze(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==Ze(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===Ze(o)?o:String(o)),n)}var o}function tt(e,t){return tt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},tt(e,t)}function rt(e){return rt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},rt(e)}var nt=__webpack_require__(580),ot=__webpack_require__(16689),it=F().requireLib("hoc").ThemedContainers,at=it.Popover,ct=it.IconButton,st=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tt(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=rt(n);if(o){var r=rt(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Ze(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(r=i.call(this,e,t)).state={showMenu:!1},r}return t=a,(r=[{key:"showMenu",value:function(e){this.setState({showMenu:!0,anchor:e.currentTarget})}},{key:"closeMenu",value:function(e,t,r){this.setState({showMenu:!1})}},{key:"render",value:function(){var e=this,t=this.props,r=t.menuItems,n=t.className,o=t.buttonTitle,i=t.buttonClassName,a=t.containerStyle,c=t.style,s=t.buttonStyle,u=t.popoverDirection,l=t.popoverTargetPosition,f=t.menuProps;return r.length?ot.createElement("span",{className:"toolbars-button-menu "+(n||""),style:a},ot.createElement(ct,{ref:"menuButton",tooltip:o,iconClassName:i,onClick:this.showMenu.bind(this),iconStyle:s,style:c}),ot.createElement(at,{open:this.state.showMenu,anchorEl:this.state.anchor,anchorOrigin:{horizontal:u||"right",vertical:l||"bottom"},targetOrigin:{horizontal:u||"right",vertical:"top"},onRequestClose:function(){e.setState({showMenu:!1})},useLayerForClickAway:!1},ze.itemsToMenu(r,this.closeMenu.bind(this),!1,f||void 0))):null}}])&&et(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(ot.Component);st.propTypes={buttonTitle:nt.string.isRequired,buttonClassName:nt.string.isRequired,className:nt.string,popoverDirection:nt.oneOf(["right","left"]),popoverPosition:nt.oneOf(["top","bottom"]),menuProps:nt.object,menuItems:nt.array.isRequired};const ut=Qe(st);function lt(e){return lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lt(e)}function ft(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==lt(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==lt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===lt(o)?o:String(o)),n)}var o}function pt(e,t){return pt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},pt(e,t)}function dt(e){return dt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},dt(e)}var ht=F().requireLib("boot").PydioContextConsumer,yt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pt(e,t)}(c,e);var r,n,o,i,a=(o=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=dt(o);if(i){var r=dt(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===lt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function c(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),a.apply(this,arguments)}return r=c,n=[{key:"onMenuClicked",value:function(e){this.props.columnClicked(e.payload)}},{key:"onHeaderClick",value:function(e,t){var r=this.props.tableKeys[e];r&&r.sortType&&this.props.columnClicked&&(r.name=e,this.props.columnClicked(r,t))}},{key:"getColumnsItems",value:function(e){var r=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=[],i=function(){n&&n.notify("actions_refreshed")},a=function(n){if(!r.props.tableKeys.hasOwnProperty(n))return"continue";var a,c=r.props.tableKeys[n],s=c.width?{width:c.width}:null,u="cell header_cell cell-"+n;c.sortType&&(u+=" sortable",!r.props.sortingInfo||r.props.sortingInfo.attribute!==n&&r.props.sortingInfo.attribute!==c.sortAttribute&&r.props.sortingInfo.attribute!==c.remoteSortAttribute||(a="asc"===r.props.sortingInfo.direction?"mdi mdi-sort-ascending":"mdi mdi-sort-descending",u+=" active-sort-"+r.props.sortingInfo.direction)),"menu"===e?(c.name=n,o.push({payload:c,text:c.label,iconClassName:a})):"menu_data"===e?o.push({name:c.label,callback:function(){r.onHeaderClick(n,i)},icon_class:a||("number"===c.sortType?"mdi mdi-sort-numeric":"mdi mdi-sort-alphabetical")}):o.push(t().createElement("span",{key:n,className:u,style:s,onClick:function(){r.onHeaderClick(n,i)}},c.label))};for(var c in this.props.tableKeys)a(c);return o}},{key:"buildSortingMenuItems",value:function(e){return this.getColumnsItems("menu_data",e)}},{key:"componentDidMount",value:function(){var e=new Action({name:"sort_action",icon_class:"mdi mdi-sort-descending",text_id:450,title_id:450,text:this.props.getMessage(450),title:this.props.getMessage(450),hasAccessKey:!1,subMenu:!0,subMenuUpdateImage:!0,weight:50},{selection:!1,dir:!0,actionBar:!0,actionBarGroup:"display_toolbar",contextMenu:!1,infoPanel:!1},{},{},{dynamicBuilder:this.buildSortingMenuItems.bind(this)}),t=new Map;t.set("sort_action",e),this.props.pydio.getController().updateGuiActions(t)}},{key:"componentWillUnmount",value:function(){this.props.pydio.getController().deleteFromGuiActions("sort_action")}},{key:"render",value:function(){var e=this;return"hidden"===this.props.displayMode?null:"menu"===this.props.displayMode?t().createElement(ut,{buttonTitle:"Sort by...",buttonClassName:"mdi mdi-sort-descending",menuItems:this.getColumnsItems("menu",this.props.pydio.getController()),onMenuClicked:function(t){return e.onMenuClicked(t)}}):t().createElement("div",{className:"mui-toolbar-group mui-left"},this.getColumnsItems("header",this.props.pydio.getController()))}}],n&&ft(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),c}(t().Component);function mt(e){return mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mt(e)}function vt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function bt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?vt(Object(r),!0).forEach((function(t){gt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function gt(e,t,r){return(t=St(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,St(n.key),n)}}function St(e){var t=function(e,t){if("object"!==mt(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==mt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===mt(t)?t:String(t)}function Ot(e,t){return Ot=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ot(e,t)}function Pt(e){return Pt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Pt(e)}yt=ht(yt);var kt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ot(e,t)}(c,e);var r,n,o,i,a=(o=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Pt(o);if(i){var r=Pt(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===mt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=a.call(this,e)).state={node:t.props.node},t}return r=c,(n=[{key:"componentDidMount",value:function(){var e=this;if(!this.props.node){var t=this.props.dataModel;this._dmObserver=function(){e.setState({node:t.getContextNode()})},t.observe("context_changed",this._dmObserver),this.setState({node:t.getContextNode()})}}},{key:"componentWillUnmount",value:function(){this._dmObserver&&this.props.dataModel.stopObserving("context_changed",this._dmObserver)}},{key:"changePage",value:function(e){this.state.node.getMetadata().get("paginationData").set("new_page",e.currentTarget.getAttribute("data-page")),this.props.dataModel.requireContextChange(this.state.node)}},{key:"onMenuChange",value:function(e,t,r){this.state.node.getMetadata().get("paginationData").set("new_page",r),this.props.dataModel.requireContextChange(this.state.node)}},{key:"render",value:function(){var e=this,r=this.state.node,n=this.props,o=n.toolbarDisplay,i=n.toolbarColor,a=n.smallDisplay,c=n.style,s=n.id;if(!r||!r.getMetadata().get("paginationData"))return null;for(var u,l,f,p,d,h=r.getMetadata().get("paginationData"),y=parseInt(h.get("current")),m=parseInt(h.get("total")),b=[],g=F().getMessages()[331],w=1;w<=m;w++)b.push(t().createElement(v.MenuItem,{value:w,primaryText:g+" "+w+(w===y?" / "+m:"")}));return b.length<=1?null:(o&&(i&&(f={color:i}),a&&(p={fontSize:13},d={fontSize:20})),l=t().createElement(v.IconButton,{onClick:function(){e.onMenuChange(null,0,y-1)},iconClassName:"mdi mdi-chevron-left",disabled:1===y,iconStyle:bt(bt({},f),d),style:a?{marginRight:-20,width:40,height:40}:null}),u=t().createElement(v.IconButton,{onClick:function(){e.onMenuChange(null,0,y+1)},iconClassName:"mdi mdi-chevron-right",disabled:y===m,style:a?{marginLeft:-40,width:40,height:40}:{marginLeft:-20},iconStyle:bt(bt({},f),d)}),t().createElement("div",{id:s,style:bt({display:"flex",alignItems:"center"},c)},l,t().createElement(v.DropDownMenu,{style:{width:150,marginTop:-6},onChange:this.onMenuChange.bind(this),value:y,underlineStyle:{display:"none"},labelStyle:bt(bt({},f),p)},b),u))}}])&&wt(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),c}(t().Component);function _t(e){return _t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_t(e)}function Et(){return Et=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Et.apply(this,arguments)}function jt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==_t(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==_t(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===_t(o)?o:String(o)),n)}var o}function Ct(e,t){return Ct=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ct(e,t)}function Tt(e){return Tt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Tt(e)}var xt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ct(e,t)}(c,e);var r,n,o,i,a=(o=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Tt(o);if(i){var r=Tt(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===_t(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function c(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),a.apply(this,arguments)}return r=c,(n=[{key:"render",value:function(){var e;return this.props.node.getMetadata().get("paginationData")&&this.props.node.getMetadata().get("paginationData").get("total")>1&&(e=t().createElement(kt,{dataModel:this.props.dm,node:this.props.node})),t().createElement("div",{className:"mui-toolbar toolbarTableHeader"},t().createElement(yt,Et({displayMode:"tableHeader"},this.props,{columnClicked:this.props.onHeaderClick})),t().createElement("div",{className:"mui-toolbar-group mui-right"},e,t().createElement(v.FontIcon,{key:1,title:F().getMessages[149],className:"mdi mdi-refresh"+(this.props.loading?" rotating":""),onClick:this.props.reload,style:{padding:16,display:"block",cursor:"pointer",fontSize:24,color:"#9E9E9E"}}),this.props.additionalActions))}}])&&jt(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),c}(t().Component),Rt=__webpack_require__(56880),It=__webpack_require__.n(Rt);const Lt=require("pydio/model/node");var Mt=__webpack_require__.n(Lt);function Dt(e){return Dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dt(e)}function At(){return At=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},At.apply(this,arguments)}function Nt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==Dt(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==Dt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===Dt(o)?o:String(o)),n)}var o}function Ut(e,t){return Ut=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ut(e,t)}function Bt(e){return Bt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Bt(e)}var Ft=F().requireLib("hoc").NativeFileDropProvider,qt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ut(e,t)}(c,e);var r,n,o,i,a=(o=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Bt(o);if(i){var r=Bt(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Dt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function c(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),a.apply(this,arguments)}return r=c,n=[{key:"render",value:function(){var e,r,n,o=this.props,i=o.secondLine,a=o.thirdLine,c=o.style,s=void 0===c?{}:c,u=o.actions,l=this.props,f=l.renderIcon,p=l.node,d=l.renderFirstLine,h=l.renderSecondLine,y=l.renderThirdLine,m=l.renderActions,b=l.isOver;if(f)e=f(p,this.props);else{var g=p.getMetadata().get("icon_class")?p.getMetadata().get("icon_class"):p.isLeaf()?"mdi mdi-file":"mdi mdi-folder";e=t().createElement(v.FontIcon,{className:g})}if(r=d?d(this.props.node):p.getLabel(),this.props.inlineEdition&&(r=t().createElement("span",null,t().createElement(ke,{node:this.props.node,onClose:this.props.inlineEditionDismiss,callback:this.props.inlineEditionCallback}),r),s.position="relative"),h&&(i=h(p)),y&&(a=y(p)),m&&(u=m(p)),p.isLeaf()&&p.getMetadata().has("mime")&&F().getInstance().getController().getActionByName("download")){var w=p.getMetadata().get("mime");n=function(e){try{It().getClient().buildPresignedGetUrl(p).then((function(t){e.dataTransfer.setData("DownloadURL",w+":"+p.getLabel()+":"+t)}))}catch(e){console.error("Cannot set dataTransfer",e)}}}return t().createElement(le,At({},this.props,{iconCell:e,firstLine:r,secondLine:i,thirdLine:a,actions:u,style:s,nativeIsOver:b,onDragStart:n}))}}],n&&Nt(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),c}(t().Component);qt.propTypes={node:U().instanceOf(Mt()),renderIcon:U().func,renderFirstLine:U().func,renderSecondLine:U().func,renderThirdLine:U().func,renderActions:U().func,style:U().object};var zt=Ft(qt=xe(qt),(function(e,t,r){var n=__webpack_require__.g,o=n.pydio,i=n.UploaderModel,a=r.node;if("true"!==a.getMetadata().get("node_readonly")&&"true"!==a.getMetadata().get("level_readonly")){var c=i.Store.getInstance();c.handleDropEventResults(e,t,a),c.getAutoStart()&&!o.Parameters.get("MINISITE")||o.getController().fireAction("upload")}else o.UI.displayMessage("ERROR","You are not allowed to upload files here")}));function Wt(e){return Wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wt(e)}function Vt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Jt(n.key),n)}}function Gt(e,t){return Gt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Gt(e,t)}function Ht(e){return Ht=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ht(e)}function Jt(e){var t=function(e,t){if("object"!==Wt(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==Wt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===Wt(t)?t:String(t)}var Yt,Kt,$t,Xt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Gt(e,t)}(c,e);var r,n,o,i,a=(o=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ht(o);if(i){var r=Ht(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Wt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function c(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),a.apply(this,arguments)}return r=c,(n=[{key:"clickAction",value:function(e){var t=F().getInstance(),r=e.currentTarget.getAttribute("data-action"),n=this.props,o=n.dataModel,i=n.node;o.setSelectedNodes([i]);var a=t.Controller.getActionByName(r);a.fireContextChange(o,!0,t.user),a.apply([o]),e.stopPropagation(),e.preventDefault()}},{key:"render",value:function(){var e=this.props.actions.map(function(e){var r=this;return t().createElement("div",{key:e.options.name,className:e.options.icon_class+" material-list-action-inline"||0,title:e.options.title,"data-action":e.options.name,onClick:function(e){return r.clickAction(e)}})}.bind(this));return t().createElement("span",null,e)}}])&&Vt(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),c}(t().Component);function Qt(e){return Qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qt(e)}function Zt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function er(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Zt(Object(r),!0).forEach((function(t){tr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Zt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function tr(e,t,r){return(t=nr(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,nr(n.key),n)}}function nr(e){var t=function(e,t){if("object"!==Qt(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==Qt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===Qt(t)?t:String(t)}function or(e,t){return or=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},or(e,t)}function ir(e){return ir=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ir(e)}Yt=Xt,Kt="propTypes",$t={dataModel:U().instanceOf(o.PydioDataModel).isRequired,node:U().instanceOf(Lt.Node).isRequired,actions:U().array},(Kt=Jt(Kt))in Yt?Object.defineProperty(Yt,Kt,{value:$t,enumerable:!0,configurable:!0,writable:!0}):Yt[Kt]=$t;var ar=__webpack_require__(16689).Component,cr=__webpack_require__(39455),sr=cr.FlatButton,ur=cr.FontIcon,lr=__webpack_require__(13173).muiThemeable,fr=__webpack_require__(39105),pr=__webpack_require__(580),dr=__webpack_require__(10757),hr=dr.requireLib("boot").PydioContextConsumer,yr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&or(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ir(n);if(o){var r=ir(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Qt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,e,t)}return t=a,r=[{key:"render",value:function(){var e=this.props,t=e.style,r=e.iconClassName,n=e.primaryTextId,o=e.secondaryTextId,i=e.actionLabelId,a=e.actionCallback,c=e.actionStyle,s=e.actionIconClassName,u=e.getMessage,l=e.iconStyle,f=e.legendStyle,p=e.muiTheme,d=fr(p.palette.mui3.outline),h={container:er({display:"flex",alignItems:"center",justifyContent:"center",height:"100%",width:"100%",flex:1,backgroundColor:d.lightness(97).rgb().toString()},t),centered:{maxWidth:280,textAlign:"center",color:d.toString()},icon:er({fontSize:100},l),primaryText:er({fontSize:16,fontWeight:500},f),secondaryText:{marginTop:20,fontSize:13},buttonContainer:{marginTop:100,textAlign:"center"},buttonStyle:{color:p.palette.mui3.primary}},y=s?React.createElement(ur,{className:s}):null;return React.createElement("div",{style:h.container},React.createElement("div",{style:h.centered},React.createElement("div",{className:r,style:h.icon}),React.createElement("div",{style:h.primaryText},u(n)),o&&React.createElement("div",{style:h.secondaryText},u(o)),i&&a&&React.createElement("div",{style:er(er({},h.buttonContainer),c)},React.createElement(sr,{style:h.buttonStyle,label:u(i),onClick:a,icon:y}))))}}],r&&rr(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(ar);yr.propTypes={pydio:pr.instanceOf(dr).isRequired,iconClassName:pr.string.isRequired,primaryTextId:pr.string.isRequired,secondaryTextId:pr.string,actionLabelId:pr.string,actionCallback:pr.func,actionStyle:pr.object,style:pr.object,iconStyle:pr.object,legendStyle:pr.object,getMessage:pr.func},yr=hr(yr),yr=lr()(yr);var mr=F().requireLib("hoc"),vr=mr.PlaceHolder,br=mr.PhRoundShape,gr=mr.PhTextRow;function wr(e){var r,n=e.displayMode,o=e.elementHeight,i=e.tableKeys,a=[];if("grid"===n){var c=Math.max(40,o);r=t().createElement("div",{style:{width:c,height:c,display:"flex",flexDirection:"column",alignItems:"center",margin:2}},t().createElement("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center"}},t().createElement(br,{style:{width:40,height:40,borderRadius:6}})),t().createElement(gr,{style:{fontSize:20}}));for(var s=0;s<10;s++)a.push(r);a=t().createElement("div",{style:{display:"flex",flexWrap:"wrap"}},a)}else if(i){r=t().createElement("div",{style:{width:"100%",display:"flex",alignItems:"baseline",height:42,borderBottom:"1px solid rgba(0,0,0,.03)"}},Object.keys(i).map((function(e){return"ajxp_label"===e?t().createElement("span",{className:"cell cell-"+e,style:{display:"flex",fontSize:16,paddingTop:6,marginBottom:2,paddingLeft:16,paddingRight:10}},t().createElement(gr,{style:{display:"inline-block",width:16,marginRight:16}}),t().createElement(gr,{style:{flex:1}})):t().createElement("span",{className:"cell cell-"+e,style:{display:"inline-block",paddingTop:6,marginBottom:2,paddingLeft:10,paddingRight:10}},t().createElement(gr,null))})));for(var u=0;u<5;u++)a.push(r)}else{r=t().createElement("div",{style:{display:"flex",padding:"0 16px",alignItems:"center",height:o,borderBottom:"1px solid rgba(0,0,0,.03)"}},t().createElement(br,{style:{width:40,height:40,marginRight:20,borderRadius:6}}),t().createElement("div",{style:{flex:1}},t().createElement(gr,{style:{fontSize:16,width:"80%",marginTop:0}}),t().createElement(gr,{style:{fontSize:13,width:"70%"}})));for(var l=0;l<5;l++)a.push(r)}return t().createElement(vr,{showLoadingAnimation:!0,customPlaceholder:a})}function Sr(e,t){if(e.getMetadata().has("local:pinSort")&&!t.getMetadata().has("local:pinSort"))return-1;if(t.getMetadata().has("local:pinSort")&&!e.getMetadata().has("local:pinSort"))return 1;if(e.isRecycle())return 1;if(t.isRecycle())return-1;var r=e.isLeaf(),n=t.isLeaf(),o=r&&!n?1:!r&&n?-1:0;return 0===o?e.getLabel().localeCompare(t.getLabel(),void 0,{numeric:!0}):o}var Or=function(){},Pr="undefined"!=typeof window;const kr=Pr?e.useLayoutEffect:e.useEffect;var _r={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};const Er=Pr&&void 0!==window.ResizeObserver?function(){var t=(0,e.useState)(null),r=t[0],n=t[1],o=(0,e.useState)(_r),i=o[0],a=o[1],c=(0,e.useMemo)((function(){return new window.ResizeObserver((function(e){if(e[0]){var t=e[0].contentRect,r=t.x,n=t.y,o=t.width,i=t.height,c=t.top,s=t.left,u=t.bottom,l=t.right;a({x:r,y:n,width:o,height:i,top:c,left:s,bottom:u,right:l})}}))}),[]);return kr((function(){if(r)return c.observe(r),function(){c.disconnect()}}),[r]),[n,i]}:function(){return[Or,_r]};function jr(e){return jr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jr(e)}function Cr(){return Cr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Cr.apply(this,arguments)}function Tr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function xr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Tr(Object(r),!0).forEach((function(t){Rr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Tr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Rr(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==jr(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==jr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===jr(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ir(e,t){if(e){if("string"==typeof e)return Lr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Lr(e,t):void 0}}function Lr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Mr=__webpack_require__(14603),Dr=__webpack_require__(14021),Ar=function(e){var r,n,o=e.className,i=e.children,a=(r=Er(),n=2,function(e){if(Array.isArray(e))return e}(r)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],s=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);s=!0);}catch(e){u=!0,o=e}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(r,n)||Ir(r,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),c=a[0],s=a[1].height;return t().createElement("div",{ref:c,className:o},i(s))},Nr=A()({displayName:"SimpleList",propTypes:{infiniteSliceCount:U().number,filterNodes:U().func,customToolbar:U().object,tableKeys:U().object,autoRefresh:U().number,reloadAtCursor:U().bool,clearSelectionOnReload:U().bool,observeNodeReload:U().bool,defaultGroupBy:U().string,groupByLabel:U().string,groupByValueFunc:U().func,skipParentNavigation:U().bool,skipInternalDataModel:U().bool,delayInitialLoad:U().number,entryEnableSelector:U().func,renderCustomEntry:U().func,entryRenderIcon:U().func,entryRenderActions:U().func,entryRenderFirstLine:U().func,entryRenderSecondLine:U().func,entryRenderThirdLine:U().func,entryHandleClicks:U().func,hideToolbar:U().bool,computeActionsForNode:U().bool,multipleActions:U().array,openEditor:U().func,openCollection:U().func,elementStyle:U().object,passScrollingStateToChildren:U().bool,elementHeight:U().oneOfType([U().number,U().object]).isRequired},statics:{HEIGHT_ONE_LINE:50,HEIGHT_TWO_LINES:73,CLICK_TYPE_SIMPLE:"simple",CLICK_TYPE_DOUBLE:"double",PARENT_FOLDER_ICON:"mdi mdi-chevron-left"},getDefaultProps:function(){return{infiniteSliceCount:30,clearSelectionOnReload:!0}},getMessage:function(e){return F().getMessages()[e]||e},clickRow:function(e,t){var r;if(r=e.props?e.props.data.node:e,this.props.entryHandleClicks)this.props.entryHandleClicks(r,Nr.CLICK_TYPE_SIMPLE,t);else if(r.isLeaf()&&this.props.openEditor){if(!1===this.props.openEditor(r))return;var n=new Map;n.set(r,!0),this.setState({selection:n},this.rebuildLoadedElements)}else r.isLeaf()||(this.props.openCollection?this.props.openCollection(r):this.props.dataModel.setSelectedNodes([r]))},doubleClickRow:function(e,t){var r;r=e.props?e.props.data.node:e,this.props.entryHandleClicks&&this.props.entryHandleClicks(r,Nr.CLICK_TYPE_DOUBLE,t)},onColumnSort:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=this.props.node.getMetadata().get("paginationData");if(r&&r.get("total")>1&&r.get("remote_order")){var n="asc";this.props.node.getMetadata().get("paginationData").get("currentOrderDir")&&(n="asc"===this.props.node.getMetadata().get("paginationData").get("currentOrderDir")?"desc":"asc");var o=new Map;o.set("order_column",e.remoteSortAttribute?e.remoteSortAttribute:e.name),o.set("order_direction",n),this.props.node.getMetadata().set("remote_order",o),this.props.dataModel.requireContextChange(this.props.node,!0)}else{var i,a=e.sortAttribute?e.sortAttribute:e.name,c=this.state.sortingInfo,s=c.attribute,u=c.direction;i=s===a&&u?"asc"===u?{attribute:a,sortType:e.sortType,direction:"desc"}:this.props.defaultSortingInfo||{}:{attribute:a,sortType:e.sortType,direction:"asc"},this.setState({sortingInfo:i},function(){this.rebuildLoadedElements(),t&&t()}.bind(this))}},computeSelectionFromCurrentPlusTargetNode:function(e,t){var r,n,o=!1;if(!this.indexedElements)return[];for(var i=e[0],a=e[e.length-1],c=[],s=0;s<this.indexedElements.length;s++){if(void 0!==r&&c.push(this.indexedElements[s].node),this.indexedElements[s].node===t){if(void 0!==r&&void 0===n){n=s;break}r=s,o=!0,c.push(this.indexedElements[s].node)}if(this.indexedElements[s].node===i&&void 0===r&&(r=s,c.push(this.indexedElements[s].node)),this.indexedElements[s].node===a&&o){n=s;break}}return c},onKeyDown:function(e){var t,r,n=this.dm,o=this.props.elementsPerLine||1,i=e.shiftKey,a=e.key;if(!n.isEmpty()&&this.indexedElements){i&&["ArrowDown","ArrowRight","PageDown","End"].indexOf(a);var c=n.getSelectedNodes(),s=c[0],u=c[c.length-1];if("Enter"!==a){if("Delete"!==a||!F().getInstance().Controller.fireActionByKey("key_delete")){for(var l=0;l<this.indexedElements.length;l++)if(this.indexedElements[l].node===s&&(t=l),this.indexedElements[l].node===u){r=l;break}var f,p=this.indexedElements.length-1,d="PageDown"===a||"PageUp"===a?10:1;if("ArrowDown"===a||"PageDown"===a?f=Math.min(r+o*d,p):"ArrowUp"===a||"PageUp"===a?f=Math.max(t-o*d,0):"Home"===a?f=0:"End"===a&&(f=p),o>1&&("ArrowRight"===a?f=r+1:"ArrowLeft"===a&&(f=t-1)),i&&void 0!==f){var h=Math.min(t,r,f),y=Math.max(t,r,f);if(h!==y){for(var m=[],v=h;v<y+1;v++)this.indexedElements[v]&&m.push(this.indexedElements[v].node);n.setSelectedNodes(m)}}else this.indexedElements[f]&&this.indexedElements[f].node&&n.setSelectedNodes([this.indexedElements[f].node])}}else this.doubleClickRow(s)}},getInitialState:function(){return this.actionsCache={multiple:new Map},this.props.skipInternalDataModel?this.dm=this.props.dataModel:(this.dm=new Mr,this.dm.setRootNode(this.props.dataModel.getContextNode()),this.dm.setContextNode(this.props.dataModel.getContextNode())),{loaded:this.props.node.isLoaded(),loading:!this.props.node.isLoaded(),showSelector:!1,elements:this.props.node.isLoaded()?this.buildElements(0,this.props.infiniteSliceCount):[],sortingInfo:this.props.defaultSortingInfo||null,infiniteLoadBeginBottomOffset:200}},componentWillReceiveProps:function(e){this.indexedElements=null;var t=Math.max(this.state.elements.length,e.infiniteSliceCount);this.setState({loaded:e.node.isLoaded(),loading:!e.node.isLoaded(),showSelector:!1,elements:e.node.isLoaded()?this.buildElements(0,t,e.node,e):[],infiniteLoadBeginBottomOffset:200,sortingInfo:this.state.sortingInfo||e.defaultSortingInfo||null}),!e.autoRefresh&&this.refreshInterval?(window.clearInterval(this.refreshInterval),this.refreshInterval=null):e.autoRefresh&&!this.refreshInterval&&(this.refreshInterval=window.setInterval(this.reload,e.autoRefresh)),this.patchInfiniteGrid(e.elementsPerLine),this.props.node&&e.node!==this.props.node&&this.observeNodeChildren(this.props.node,!0),this._manualScrollPe&&(this._manualScrollPe.stop(),this._manualScrollPe=null)},observeNodeChildren:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t&&!this._childrenObserver||(this._childrenObserver||(this._childrenObserver=function(){this.indexedElements=null,this.rebuildLoadedElements()}.bind(this)),this._childrenActionsObserver||(this._childrenActionsObserver=function(e){"prompt-rename"===e.type&&this.setState({inlineEditionForNode:e.child,inlineEditionCallback:e.callback})}.bind(this)),t?(e.stopObserving("child_added",this._childrenObserver),e.stopObserving("child_removed",this._childrenObserver),e.stopObserving("child_replaced",this._childrenObserver),e.stopObserving("child_node_action",this._childrenActionsObserver)):(e.observe("child_added",this._childrenObserver),e.observe("child_removed",this._childrenObserver),e.observe("child_replaced",this._childrenObserver),e.observe("child_node_action",this._childrenActionsObserver)))},_loadNodeIfNotLoaded:function(){var e=this.props.node;e.isLoaded()?this.observeNodeChildren(e):(e.observeOnce("loaded",function(){this.props.node===e&&(this.observeNodeChildren(e),this.setState({loaded:!0,loading:!1,elements:this.buildElements(0,this.props.infiniteSliceCount)}))}.bind(this)),e.load())},_loadingListener:function(){this.observeNodeChildren(this.props.node,!0),this.setState({loaded:!1,loading:!0}),this.indexedElements=null},_loadedListener:function(){var e=Math.max(this.state.elements.length,this.props.infiniteSliceCount);this.setState({loading:!1,elements:this.buildElements(0,e)}),this.observeNodeChildren(this.props.node)},reload:function(){this.props.reloadAtCursor&&this._currentCursor?this.loadStartingAtCursor():(this.props.clearSelectionOnReload&&this.props.dataModel.setSelectedNodes([]),this._loadingListener(),this.props.node.observeOnce("loaded",this._loadedListener),this.props.node.reload())},loadStartingAtCursor:function(){this._loadingListener();var e=this.props.node,t=e.getChildren(),r=[];e.observeOnce("loaded",function(){var n=new Map;r.map((function(e){n.set(e.getPath(),e)})),t.forEach((function(e){n.set(e.getPath(),e)})),e._children=n,this._loadedListener()}.bind(this)),e.setLoaded(!1),e.observe("child_added",(function(t){r.push(e._children.get(t))})),this.props.node.load(null,{cursor:this._currentCursor})},wireReloadListeners:function(){this.wrappedLoading=this._loadingListener,this.wrappedLoaded=this._loadedListener,this.props.node.observe("loading",this.wrappedLoading),this.props.node.observe("loaded",this.wrappedLoaded)},stopReloadListeners:function(){this.props.node.stopObserving("loading",this.wrappedLoading),this.props.node.stopObserving("loaded",this.wrappedLoaded)},toggleSelector:function(){this.setState({showSelector:!this.state.showSelector,selection:new Map,bulkSelectorChecked:!1},this.rebuildLoadedElements)},toggleSelection:function(e){var t=this.state.selection||new Map;t.get(e)?t.delete(e):t.set(e,!0),this.setState({selection:t,bulkSelectorChecked:!1},this.rebuildLoadedElements)},selectAll:function(e){if(e){var t=new Map;this.props.node.getChildren().forEach(function(e){this.props.filterNodes&&!this.props.filterNodes(e)||e.isLeaf()&&t.set(e,!0)}.bind(this)),this.setState({selection:t,bulkSelectorChecked:!0},this.rebuildLoadedElements)}else this.setState({selection:new Map,bulkSelectorChecked:!1},this.rebuildLoadedElements)},applyMultipleAction:function(e){if(this.state.selection&&this.state.selection.size){var t=e.currentTarget.getAttribute("data-action"),r=this.dm||new Mr;r.setContextNode(this.props.node);var n=[];this.state.selection.forEach((function(e,t){n.push(t)})),r.setSelectedNodes(n);var o=this.props.pydio.Controller.getActionByName(t);o.fireContextChange(r,!0,this.props.pydio.user),o.apply([r]),e.stopPropagation(),e.preventDefault()}},getActionsForNode:function(e,t){if(!this.props.computeActionsForNode)return[];var r=t.isLeaf()?"file-"+t.getAjxpMime():"folder",n=t.isLeaf()?"file":"dir",o=[];return this.actionsCache[r]?o=this.actionsCache[r]:(e.setSelectedNodes([t]),window.pydio.Controller.actions.forEach(function(r){r.fireContextChange(e,!0,window.pydio.user),!(r.context.selection&&r.context.actionBar&&r.selectionContext[n]&&!r.deny&&r.options.icon_class)||this.props.actionBarGroups&&-1===this.props.actionBarGroups.indexOf(r.context.actionBarGroup)||r.selectionContext.allowedMimes.length&&-1===r.selectionContext.allowedMimes.indexOf(t.getAjxpMime())||(o.push(r),t.isLeaf()&&!1===r.selectionContext.unique&&this.actionsCache.multiple.set(r.options.name,r))}.bind(this)),this.actionsCache[r]=o),o},patchInfiniteGrid:function(e){this.infinite.current&&e>1&&(this.infinite.current.state.infiniteComputer.__proto__.getDisplayIndexStart=function(t){return e*Math.floor(t/this.heightData/e)},this.infinite.current.state.infiniteComputer.__proto__.getDisplayIndexEnd=function(t){return e*Math.ceil(t/this.heightData/e)})},componentWillMount:function(){this.infinite=(0,e.createRef)()},componentDidMount:function(){var e=this;this.props.delayInitialLoad?setTimeout((function(){e._loadNodeIfNotLoaded()}),this.props.delayInitialLoad):this._loadNodeIfNotLoaded(),this.patchInfiniteGrid(this.props.elementsPerLine),this.props.autoRefresh&&(this.refreshInterval=window.setInterval(this.reload,this.props.autoRefresh)),this.props.observeNodeReload&&this.wireReloadListeners(),this.props.dataModel.observe("root_node_changed",(function(t){e.rootNodeChangedFlag=!0})),this.props.dataModel.observe("selection_changed",function(){var e=this;if(this.isMounted()){var t=new Map,r=this.props.dataModel.getSelectedNodes();r.map((function(e){t.set(e,!0)})),this.setState({selection:t},(function(){e.rebuildLoadedElements(),1===r.length&&e.scrollToView(r[0])}))}}.bind(this));var t=new Map,r=this.props.dataModel.getSelectedNodes();r.length&&(r.map((function(e){t.set(e,!0)})),this.setState({selection:t},(function(){setTimeout((function(){e.scrollToView(r[0])}),500)})))},componentWillUnmount:function(){this.refreshInterval&&window.clearInterval(this.refreshInterval),this.props.observeNodeReload&&this.stopReloadListeners(),this.props.node&&this.observeNodeChildren(this.props.node,!0)},componentDidUpdate:function(e,t){!this.rootNodeChangedFlag&&e.node&&this.props.node&&e.node.getPath()===this.props.node.getPath()||(this._loadNodeIfNotLoaded(),this.rootNodeChangedFlag=!1)},onScroll:function(e){if(this.props.onScroll&&this.props.onScroll(e),this.props.passScrollingStateToChildren){this.state.scrollTimeout&&clearTimeout(this.state.scrollTimeout);var t=this,r=setTimeout((function(){t.setState({isScrolling:!1,scrollTimeout:void 0})}),150);this.setState({isScrolling:!0,scrollTimeout:r})}},scrollToLast:function(){this.indexedElements&&this.indexedElements[this.indexedElements.length-1].node&&this.scrollToView(this.indexedElements[this.indexedElements.length-1].node)},scrollToView:function(e){var t=this;if(this.indexedElements&&this.infinite.current&&this.infinite.current.scrollable){var r=n().findDOMNode(this.infinite.current),o=this.infinite.current.scrollable,i=o.scrollTop+this.props.elementHeight/2,a=o.scrollTop+r.clientHeight-this.props.elementHeight/2,c=this.indexedElements.length*this.props.elementHeight-r.clientHeight,s=-1;if(this.indexedElements.forEach((function(t,r){t.node&&t.node===e&&(s=r)})),-1!==s){var u=this.props.elementHeight,l=s*u;l>i&&l<a||(l>=a&&(l-=r.clientHeight-2*u),l=Math.min(l,c),o.scrollTop=l,this._manualScrollPe&&this._manualScrollPe.stop(),o.scrollHeight<l&&(this._manualScrollPe=new Dr((function(){o.scrollTop=l,o.scrollHeight>=l&&(t._manualScrollPe.stop(),t._manualScrollPe=null)}),.25)))}}},buildElementsFromNodeEntries:function(e,r){var n=[],o=e.length,i=this.props,a=i.entriesProps,c=i.elementStyle,s=i.tableKeys,u=i.passScrollingStateToChildren;return a=xr(xr({},a),{},{style:c}),u&&(a.parentIsScrolling=this.state.isScrolling),e.forEach(function(e,i){var c;if(e.parent)c=xr({node:e.node,key:i+":"+e.node.getPath(),id:e.node.getPath(),mainIcon:Nr.PARENT_FOLDER_ICON,firstLine:"..",className:"list-parent-node",secondLine:this.getMessage("react.1"),onClick:this.clickRow.bind(this),onDoubleClick:this.doubleClickRow.bind(this),showSelector:!1,selectorDisabled:!0,noHover:!1},a),this.props.entryRenderParentIcon&&!this.props.tableKeys?c.iconCell=this.props.entryRenderParentIcon(e.node,e):c.mainIcon=Nr.PARENT_FOLDER_ICON,s&&(c.onClick=c.onDoubleClick),n.push(t().createElement(se,c));else if(e.groupHeader){var u=e.groupHeader,l=e.groupHeaderLabel;this.props.entryRenderGroupHeader&&(l=this.props.entryRenderGroupHeader(u,l)),c=xr({node:null,key:i+":"+u,id:u,mainIcon:null,firstLine:l,className:"list-group-header",onClick:null,showSelector:!1,selectorDisabled:!0,noHover:!0},a),e.groupFill&&(c.style=xr(xr({},c.style),{},{visibility:"hidden"})),n.push(t().createElement(se,c))}else(c=xr({node:e.node,onClick:this.clickRow.bind(this),onDoubleClick:this.doubleClickRow.bind(this),onSelect:this.toggleSelection.bind(this),key:i+":"+e.node.getPath(),id:e.node.getPath(),renderIcon:this.props.entryRenderIcon,renderFirstLine:this.props.entryRenderFirstLine,renderSecondLine:this.props.entryRenderSecondLine,renderThirdLine:this.props.entryRenderThirdLine,renderActions:this.props.entryRenderActions,showSelector:r,selected:!(!this.state||!this.state.selection)&&this.state.selection.get(e.node),actions:t().createElement(Xt,{node:e.node,actions:e.actions,dataModel:this.dm}),selectorDisabled:!(this.props.entryEnableSelector?this.props.entryEnableSelector(e.node):e.node.isLeaf())},a)).isFirst=0===i,c.isLast=i===o-1,i++,this.props.renderCustomEntry?n.push(this.props.renderCustomEntry(c)):s?(this.props.defaultGroupBy?(c.tableKeys=xr({},s),delete c.tableKeys[this.props.defaultGroupBy]):c.tableKeys=s,n.push(t().createElement(Ue,c))):!e.node.isLeaf()||e.node.getMetadata().has("local:dropFunc")?n.push(t().createElement(zt,c)):n.push(t().createElement(qt,c))}.bind(this)),n},prepareSortFunction:function(){if(!(this.state||{}).sortingInfo||this.remoteSortingInfo())return null;var e,t=(this.state||{}).sortingInfo,r=t.attribute,n=t.direction,o=t.sortType;return e="file-natural"===o?Sr:function(e,t,r){return function(n,o){if(n.getMetadata().has("local:pinSort")&&!o.getMetadata().has("local:pinSort"))return-1;if(o.getMetadata().has("local:pinSort")&&!n.getMetadata().has("local:pinSort"))return 1;var i;if("number"===t){var a=n.getMetadata().get(e)||0,c=o.getMetadata().get(e)||0;a=parseFloat(a),c=parseFloat(c),i="asc"===r?a-c:c-a}else if("string"===t){var s=n.getMetadata().get(e)||"",u=o.getMetadata().get(e)||"";i="asc"===r?s.localeCompare(u):u.localeCompare(s)}if(0===i){var l=n.getLabel().localeCompare(o.getLabel(),void 0,{numeric:!0});i="asc"===r?l:-l}return i}}(r,o,n),function(t,r){return t.parent?-1:r.parent?1:e(t.node,r.node)}},buildElements:function(e,t,r){var n,o,i,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,c=r||this.props.node,s=a||this.props,u=this.prepareSortFunction();if(!this.indexedElements||this.indexedElements.length!==c.getChildren().size){this.indexedElements=[];var l,f,p,d,h=s.defaultGroupBy,y=s.groupByLabel,m=void 0!==y&&y;h&&(l={},f=[],p={}),s.skipParentNavigation||!c.getParent()||s.dataModel.getContextNode()===c&&!s.skipInternalDataModel||(o=!0,this.indexedElements.push({node:c.getParent(),parent:!0,actions:null})),c.getChildren().forEach(function(e){if(e.getMetadata().has("cursor")){var t=parseInt(e.getMetadata().get("cursor"));this._currentCursor=Math.max(this._currentCursor?this._currentCursor:0,t)}if(!s.filterNodes||s.filterNodes(e)){var r,n=this.getActionsForNode(this.dm,e);h?(r=s.groupByValueFunc?s.groupByValueFunc(e.getMetadata().get(h))||"N/A":e.getMetadata().get(h)||"N/A",l[r]||(l[r]=[],f.push(r)),m&&e.getMetadata().has(m)&&!p[r]&&(p[r]=e.getMetadata().get(m)),l[r].push({node:e,parent:!1,actions:n})):this.indexedElements.push({node:e,parent:!1,actions:n})}}.bind(this)),h&&(s.groupSkipUnique&&1===f.length?(d=this.indexedElements).push.apply(d,function(e){if(Array.isArray(e))return Lr(e)}(i=l[f[0]])||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(i)||Ir(i)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()):(n=!0,(f=f.sort()).map(function(e,t){var r=e;if(p[e]?r=p[e]:s.renderGroupLabels&&(r=s.renderGroupLabels(h,e)),this.indexedElements.push({node:null,groupHeader:e,groupHeaderLabel:r,parent:!1,actions:null}),u&&l[e].sort(u),this.indexedElements=this.indexedElements.concat(l[e]),s.elementsPerLine>1){var n=s.elementsPerLine-l[e].length%s.elementsPerLine-1;0===t&&o&&(n-=1);for(var i=0;i<n;i++)this.indexedElements.push({node:null,groupHeader:Math.random(),groupFill:!0,parent:!1,actions:null})}}.bind(this))))}return!n&&u&&this.indexedElements.sort(u),this.indexedElements.slice(e,t)},rebuildLoadedElements:function(){var e=this.buildElements(0,Math.max(this.state.elements.length,this.props.infiniteSliceCount)),t=e.length?200:0;this.setState({elements:e,infiniteLoadBeginBottomOffset:t})},handleInfiniteLoad:function(){var e=this.state.elements.length,t=this.buildElements(e,e+this.props.infiniteSliceCount),r=t.length?200:0;this.setState({isInfiniteLoading:!1,elements:this.state.elements.concat(t),infiniteLoadBeginBottomOffset:r})},remoteSortingInfo:function(){var e=this.props.node.getMetadata().get("paginationData");if(e&&e.get("total")>1&&e.has("remote_order")){var t=e.get("currentOrderCol"),r=e.get("currentOrderDir");if(t&&r)return{remote:!0,attribute:t,direction:r}}return null},renderToolbar:function(){var e,r=this;if(arguments.length>0&&void 0!==arguments[0]&&arguments[0])return this.props.sortKeys?(e=this.remoteSortingInfo()||(this.state?this.state.sortingInfo:null),t().createElement(yt,{displayMode:"hidden",tableKeys:this.props.sortKeys,columnClicked:this.onColumnSort,sortingInfo:e})):null;var n,o,i,a=[t().createElement(v.FontIcon,{key:1,tooltip:"Reload",className:"mdi mdi-reload"+(this.state.loading?" rotating":""),onClick:this.reload})],c=2;this.props.sortKeys&&(i=this.remoteSortingInfo()||(this.state?this.state.sortingInfo:null),a.push(t().createElement(yt,{key:c,displayMode:"menu",tableKeys:this.props.sortKeys,columnClicked:this.onColumnSort,sortingInfo:i})),c++);if(this.props.additionalActions&&a.push(this.props.additionalActions),this.props.node.getMetadata().get("paginationData")&&this.props.node.getMetadata().get("paginationData").get("total")>1&&(o=t().createElement(kt,{dataModel:this.dm,node:this.props.node})),this.props.listTitle&&(n=t().createElement(v.ToolbarGroup,{key:0,float:"left"},t().createElement("div",{className:"list-title"},this.props.listTitle))),this.props.searchResultData)n=t().createElement(v.ToolbarGroup,{key:0,float:"left"},t().createElement("div",{style:{fontSize:12,fontWeight:500,color:"#9e9e9e"}},this.getMessage("searchengine.topbar.title")+" "+this.props.searchResultData.term)),a=t().createElement(v.RaisedButton,{key:1,label:this.getMessage("86"),primary:!0,onClick:this.props.searchResultData.toggleState,style:{marginRight:-10}});else if(this.actionsCache.multiple.size||this.props.multipleActions){var s=this.getMessage("react.2"),u={transform:"translateX(-80px)"},l=xr({width:24},u),f=xr({},u),p=this.state,d=p.showSelector,h=p.selection,y=p.bulkSelectorChecked;d&&(l={width:24,transform:"translateX(-12px)"},f={transform:"translateX(-40px)"}),h&&d&&(s+=" ("+h.size+")"),n=t().createElement(v.ToolbarGroup,{key:0,float:"left",className:"hide-on-vertical-layout"},t().createElement(v.Checkbox,{checked:y,onCheck:function(e,t){return r.selectAll(t)},style:l}),t().createElement(v.FlatButton,{label:s,onClick:function(){return r.toggleSelector()},style:f})),d&&(a=[],(this.props.multipleActions||this.actionsCache.multiple).forEach(function(e){a.push(t().createElement(v.RaisedButton,{key:0,label:e.options.text,"data-action":e.options.name,onClick:this.applyMultipleAction,primary:!0,disabled:!h||!h.size,style:{marginLeft:5}}))}.bind(this)),a=t().createElement("span",null,a))}return t().createElement(v.Toolbar,{style:this.props.toolbarStyle},n,t().createElement(v.ToolbarGroup,{key:1,float:"right"},o,a))},render:function(){var e,r,n,o,i,a,c=this,s="material-list vertical-layout layout-fill",u=this.props,l=u.className,f=u.showSelector,p=u.tableKeys,d=u.defaultGroupBy,h=u.dataModel,y=u.node,m=u.additionalActions,v=u.customToolbar,b=u.hideToolbar,g=u.emptyStateProps,w=u.entryHandleClicks;(l&&(s+=" "+l),f&&(s+=" list-show-selectors"),p&&(s+=" table-mode"),p)?(d?delete(i=xr({},p))[d]:i=this.props.tableKeys,a=this.remoteSortingInfo()||(this.state?this.state.sortingInfo:null),e=t().createElement(xt,{tableKeys:i,loading:this.state.loading,reload:this.reload,ref:"loading_indicator",dm:h,node:y,additionalActions:m,onHeaderClick:this.onColumnSort,sortingInfo:a})):(e=v||(b?null:this.renderToolbar()),(b||v)&&(r=this.renderToolbar(!0)));if(this.state.inlineEditionForNode&&(n=t().createElement(ke,{detached:!0,node:this.state.inlineEditionForNode,callback:this.state.inlineEditionCallback,onClose:function(){c.setState({inlineEditionForNode:null})}})),g&&y.isLoaded()&&!y.isLoading()&&(!this.state.elements.length||1===this.state.elements.length&&this.state.elements[0].parent)){var S={};if(1===this.state.elements.length&&this.state.elements[0].parent){var O=this.state.elements[0].node;S={actionLabelId:"react.1",actionIconClassName:Nr.PARENT_FOLDER_ICON,actionCallback:function(e){w&&w(O,Nr.CLICK_TYPE_DOUBLE,e)}}}o=t().createElement(yr,Cr({},g,S))}else g&&g.checkEmptyState&&g.checkEmptyState(y)&&(o=t().createElement(yr,g));var P,k,_=this.buildElementsFromNodeEntries(this.state.elements,this.state.showSelector),E=this.props,j=E.verticalScroller,C=(E.heightAutoWithMax,E.usePlaceHolder),T=_;if(!_.length&&C&&(T=t().createElement(wr,this.props)),o)T=o;else if(j)P=function(e){return t().createElement(V(),{speed:.8,horizontalScroll:!1,style:{height:e},verticalScrollbarStyle:{borderRadius:10,width:6},verticalContainerStyle:{width:8}},t().createElement("div",null,T))};else{if(p)return t().createElement("div",{className:s,tabIndex:"0",onKeyDown:this.onKeyDown,style:xr(xr({},this.props.style),{},{overflowX:"auto"})},r,n,t().createElement("div",{style:{display:"flex",flexDirection:"column",flex:1,height:"100%",width:"100%",minWidth:"fit-content"}},e,t().createElement(Ar,{className:o?"layout-fill vertical_layout":"layout-fill"},(function(e){return t().createElement(z(),{elementHeight:c.state.elementHeight?c.state.elementHeight:c.props.elementHeight,containerHeight:e||1,infiniteLoadBeginEdgeOffset:c.state.infiniteLoadBeginBottomOffset,onInfiniteLoad:c.handleInfiniteLoad,handleScroll:c.onScroll,ref:c.infinite},T)}))));k=function(e){return t().createElement(z(),{elementHeight:c.state.elementHeight?c.state.elementHeight:c.props.elementHeight,containerHeight:e||1,infiniteLoadBeginEdgeOffset:c.state.infiniteLoadBeginBottomOffset,onInfiniteLoad:c.handleInfiniteLoad,handleScroll:c.onScroll,ref:c.infinite},P?P(e):T)}}return t().createElement("div",{className:s,tabIndex:"0",onKeyDown:this.onKeyDown,style:this.props.style},e,r,n,t().createElement(Ar,{className:o?"layout-fill vertical_layout":"layout-fill"},k||function(e){return T}))}});function Ur(e){return Ur="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ur(e)}function Br(){return Br=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Br.apply(this,arguments)}function Fr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,qr(n.key),n)}}function qr(e){var t=function(e,t){if("object"!==Ur(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==Ur(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===Ur(t)?t:String(t)}function zr(e,t){return zr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},zr(e,t)}function Wr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Vr(e){return Vr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Vr(e)}var Gr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zr(e,t)}(c,e);var r,n,o,i,a=(o=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Vr(o);if(i){var r=Vr(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Ur(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Wr(e)}(this,e)});function c(e){var t,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),r=(t=a.call(this,e)).props.presetDataModel?t.props.presetDataModel:PydioDataModel.RemoteDataModelFactory(t.props.nodeProviderProperties);var n=t.props.presetRootNode||r.getRootNode();return t.props.nodeClicked&&(t.openEditor=function(e){return this.props.nodeClicked(e),!1}.bind(Wr(t)),t._selObserver=function(e){var r=e.memo.getSelectedNodes();r.length&&(t.props.nodeClicked(r[0]),e.memo.setSelectedNodes([]))},r.observe("selection_changed",t._selObserver)),t.props.reloadOnServerMessage&&t.props.pydio&&(t._smObs=function(e){XMLUtils.XPathSelectSingleNode(e,this.props.reloadOnServerMessage)&&this.reload()}.bind(Wr(t)),t.props.pydio.observe("server_message",t._smObs),t.props.pydio.observe("server_message:"+t.props.reloadOnServerMessage,t.reload)),t.state={node:n,dataModel:r},t}return r=c,(n=[{key:"reload",value:function(){this.refs.list&&this.isMounted()&&this.refs.list.reload()}},{key:"componentWillUnmount",value:function(){this._smObs&&(this.props.pydio.stopObserving("server_message",this._smObs),this.props.pydio.stopObserving("server_message:"+this.props.reloadOnServerMessage,this.reload)),this._selObserver&&this.state.dataModel.stopObserving("selection_changed",this._selObserver)}},{key:"componentWillReceiveProps",value:function(e){if(this.props.nodeProviderProperties&&this.props.nodeProviderProperties!==e.nodeProviderProperties){var t=this.state,r=t.dataModel,n=t.node,o=new RemoteNodeProvider(e.nodeProviderProperties);r.setAjxpNodeProvider(o),n.updateProvider(o),this.setState({dataModel:r,node:n})}else this.props.presetDataModel!==e.presetDataModel&&this.setState({dataModel:e.presetDataModel,node:e.presetRootNode||e.presetDataModel.getRootNode()})}},{key:"render",value:function(){return t().createElement("div",{className:this.props.heightAutoWithMax?"":"layout-fill vertical-layout",style:this.props.containerStyle},t().createElement(Nr,Br({},this.props,{openEditor:this.openEditor,ref:"list",style:Object.assign({height:"100%"},this.props.style||{}),node:this.state.node,dataModel:this.state.dataModel,actionBarGroups:this.props.actionBarGroups,skipParentNavigation:!0,observeNodeReload:!0,hideToolbar:!0})))}}])&&Fr(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),c}(t().Component);function Hr(){return Hr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Hr.apply(this,arguments)}function Jr(e,t){return Jr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Jr(e,t)}function Yr(e){return Yr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Yr(e)}function Kr(e){return Kr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kr(e)}function $r(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Xr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Qr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Xr(Object(r),!0).forEach((function(t){Zr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Zr(e,t,r){return(t=nn(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function en(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,nn(n.key),n)}}function rn(e,t,r){return t&&tn(e.prototype,t),r&&tn(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function nn(e){var t=function(e,t){if("object"!==Kr(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==Kr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===Kr(t)?t:String(t)}var on=F().requireLib("boot").moment,an=F().requireLib("hoc").ModernStyles,cn=function(){function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;en(this,e),this.state=Qr({},t),!t.sortCol&&n&&(this.state.sortCol=n,this.state.sortDir=o||"asc"),this.onSort=r}return rn(e,[{key:"renderHeader",value:function(e,r){var n=this,o=this.state,i=o.sortCol,a=o.sortDir,c={cursor:"pointer",position:"relative"},s={left:-17,position:"absolute"};if(i!==e||""===a)return t().createElement("span",{onClick:function(){n.onSort(e,"asc")},style:c},r);var u=r;return"asc"===a?u=t().createElement("span",{onClick:function(){n.onSort(e,"desc")},style:c},r," ",t().createElement("span",{style:s,className:"mdi mdi-arrow-up"})):"desc"===a&&(u=t().createElement("span",{onClick:function(){n.onSort(e,"")},style:c},r," ",t().createElement("span",{style:s,className:"mdi mdi-arrow-down"}))),u}},{key:"setData",value:function(e,t){this.columns=e,this.data=t}},{key:"sorted",value:function(){var e=this.state,t=e.sortCol,r=e.sortDir;if(!t||!r)return this.data;var n,o=function(e){if(Array.isArray(e))return $r(e)}(n=this.data)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(n)||function(e,t){if(e){if("string"==typeof e)return $r(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?$r(e,t):void 0}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),i=this.columns.filter((function(e){return e.name===t}))[0],a=i.sorter;return a?(o.sort((function(e,n){var o,c;return a.value?(o=a.value(e),c=a.value(n)):i.renderCell?(o=i.renderCell(e),c=i.renderCell(n)):(o=e[t],c=n[t]),"string"===a.type?(o||(o=""),c||(c=""),o=o.toLowerCase(),c=c.toLowerCase()):"number"===a.type&&(o=parseInt(o),c=parseInt(c)),"asc"===r?o>c?1:o<c?-1:0:o<c?1:o>c?-1:0})),o):this.data}}]),e}(),sn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Jr(e,t)}(i,e);var r,n,o=(r=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Yr(r);if(n){var o=Yr(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Kr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function i(e){var t;return en(this,i),(t=o.call(this,e)).state={},t}return rn(i,[{key:"onRowSelection",value:function(e){var t=this.props,r=t.data,n=t.onSelectRows;if(n)if("none"===e)n([]);else if("all"===e)n(r);else{var o=r,i=this.computeSorter();i&&(o=i.sorted());var a=this.computePagination();a.use&&(o=o.slice(a.sliceStart,a.sliceEnd));var c=[];e.map((function(e){var t=o.slice(0,e).filter((function(e){return e.expandedRow})).length;t&&(e-=t),c.push(o[e])})),n(c)}}},{key:"loadStoredValue",value:function(){var e=this.props,t=e.storageKey,r=e.columns;if(!t)return null;if(!localStorage.getItem(t+".sort"))return null;try{var n=JSON.parse(localStorage.getItem(t+".sort")),o=n.col,i=n.dir;return 0===r.filter((function(e){return e.name===o})).length||-1===["asc","desc",""].indexOf(i)?null:{col:o,dir:i}}catch(e){return null}}},{key:"computeSorter",value:function(){var e,t=this,r=this.props,n=r.columns,o=r.data,i=r.storageKey,a=n.filter((function(e){return e.sorter}));if(a.length){var c,s=a[0].name,u=a.filter((function(e){return e.sorter.default})),l=this.loadStoredValue();l?(s=l.col,c=l.dir):u.length&&(s=u[0].name,u[0].sorter.defaultDir&&(c=u[0].sorter.defaultDir)),(e=new cn(this.state,(function(e,r){t.setState({sortCol:e,sortDir:r}),i&&localStorage.setItem(i+".sort",JSON.stringify({col:e,dir:r}))}),s,c)).setData(n,o)}return e}},{key:"computePagination",value:function(){var e=this.props,t=e.data,r=e.paginate,n=e.defaultPageSize,o=e.pagination;if(o)return Qr(Qr({},o),{},{use:!0});if(!r||!t||!t.length)return{use:!1};var i=this.state.pageSize||n||r[0];if(t.length<=i)return{use:!1};for(var a=this.state.page,c=void 0===a?1:a,s=Math.ceil(t.length/i),u=(c-1)*i,l=Math.min(c*i,t.length),f=[],p=1;p<=s;p++)f.push(p);return{use:!0,sliceStart:u,sliceEnd:l,pages:f,page:c,pageSize:i,pageSizes:r}}},{key:"renderPagination",value:function(e){var r=this,n=this.props.data,o=e.page,i=e.pageSize,a=e.pages,c=e.pageSizes,s=e.sliceStart,u=e.sliceEnd,l=e.nextDisabled,f=e.prevDisabled,p=e.onPageNext,d=e.onPagePrev,h=e.onPageSizeChange;return t().createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"flex-end",color:"#757575"}},c.length>1&&t().createElement("div",{style:{paddingRight:10}},F().getMessages()["material.paginator.rows"]," :"),c.length>1&&t().createElement("div",{style:{width:90}},t().createElement(v.SelectField,Hr({},an.selectField,{fullWidth:!0,value:i,onChange:function(e,t,n){h?h(n):r.setState({page:1,pageSize:n})}}),c.map((function(e){return t().createElement(v.MenuItem,{value:e,primaryText:e})})))),d&&t().createElement(v.IconButton,{iconClassName:"mdi mdi-chevron-left",disabled:f,onClick:function(){return d()}}),!d&&t().createElement(v.IconButton,{iconClassName:"mdi mdi-chevron-left",disabled:1===o,onClick:function(){return r.setState({page:o-1})}}),(s||u)&&t().createElement("div",null,s+1,"-",u," ",F().getMessages()["material.paginator.of"]," ",n.length),p&&t().createElement(v.IconButton,{iconClassName:"mdi mdi-chevron-right",disabled:l,onClick:function(){return p()}}),!p&&t().createElement(v.IconButton,{iconClassName:"mdi mdi-chevron-right",disabled:o===a.length,onClick:function(){return r.setState({page:o+1})}}))}},{key:"render",value:function(){var e=this.props,r=e.columns,n=e.deselectOnClickAway,o=e.emptyStateString,i=e.masterStyles,a=void 0===i?{}:i,c=e.emptyStateStyle,s=e.onSelectRows,u=e.computeRowStyle,l=this.props,f=l.actions,p=l.hideHeaders,d=this.props,h=d.data,y=d.showCheckboxes,m=a.actionsColor||"rgba(0,0,0,.33)",b=this.computeSorter();b&&(h=b.sorted());var g,w=this.computePagination();w.use&&(h=h.slice(w.sliceStart,w.sliceEnd),g=this.renderPagination(w));var S,O=0;f&&f.length&&(S=!0,O=1);var P=[];h.map((function(e){var n;if(u&&(n=u(e)),e.Subheader){var o=Qr({fontSize:12,color:"#616161",backgroundColor:"#FAFAFA",fontWeight:500},e.style);P.push(t().createElement(v.TableRow,{className:"media-small-hide",style:Qr({},a.row)},t().createElement(v.TableRowColumn,{colSpan:r.length+O,style:o},e.Subheader)))}else if(e.colSpan)P.push(t().createElement(v.TableRow,{style:Qr(Qr({},e.rowStyle),a.row)},t().createElement(v.TableRowColumn,{colSpan:r.length+O,style:Qr({height:"auto",paddingLeft:0,paddingRight:0,backgroundColor:"transparent"},e.cellStyle)},e.element)));else{var i=Qr(Qr({},n),a.row);e.expandedRow&&(i=Qr(Qr({},i),a.expanderRow)),P.push(t().createElement(v.TableRow,{selectable:void 0!==s,style:i},r.map((function(r){var n=e[r.name],o=n;return r.useMoment&&n?o=n=on(new Date(1e3*parseInt(n))).fromNow():r.renderCell&&(n=r.renderCell(e))&&"object"===Kr(n)&&n.element&&n.text&&(o=n.text,n=n.element),t().createElement(v.TableRowColumn,{style:r.style||{},title:"object"===Kr(o)?null:o,className:r.hideSmall?"media-small-hide":null},n)})),S&&t().createElement(v.TableRowColumn,{style:{overflow:"visible",textOverflow:"none",width:48*f.length+32}},f.map((function(r){var n=!!r.disable&&r.disable(e);return t().createElement(v.IconButton,{style:{padding:14,opacity:n?.5:null},iconStyle:{fontSize:20,color:m},onClick:function(t){t.stopPropagation(),r.onClick(e)},iconClassName:r.iconClassName,tooltip:r.tooltip,disabled:n})}))))),e.expandedRow&&P.push(t().createElement(v.TableRow,{selectable:!1,style:Qr(Qr({},a.row),a.expandedRow)},t().createElement(v.TableRowColumn,{colSpan:r.length+O,style:Qr({height:"auto",paddingLeft:0,paddingRight:0,backgroundColor:"transparent"},e.cellStyle)},e.expandedRow)))}}));var k=r.map((function(e){var r=e.label;return b&&e.sorter&&(r=b.renderHeader(e.name,e.label)),t().createElement(v.TableHeaderColumn,{style:Qr(Qr({},e.headerStyle),{},{height:48,backgroundColor:"#F5F5F5",fontWeight:500},a.head),className:e.hideSmall?"media-small-hide":null},r)}));return S&&k.push(t().createElement(v.TableHeaderColumn,{style:Qr({width:48*f.length+32,height:48,backgroundColor:"#F5F5F5"},a.head)})),o&&!P.length&&(y=!1,P=[t().createElement(v.TableRow,null,t().createElement(v.TableRowColumn,{colSpan:r.length,style:c},o))]),(h.length&&h[0].Subheader||o&&!P.length)&&P.unshift(t().createElement(v.TableRow,{style:Qr({borderBottom:"none",height:0},a.row)},r.map((function(e){var r=e.style||{};return t().createElement(v.TableRowColumn,{style:Qr(Qr({},r),{},{height:0}),className:e.hideSmall?"media-small-hide":null})})))),t().createElement(v.Table,{onRowSelection:this.onRowSelection.bind(this),multiSelectable:y},!p&&t().createElement(v.TableHeader,{displaySelectAll:y,adjustForCheckbox:y,enableSelectAll:y},t().createElement(v.TableRow,{style:a.row},k)),t().createElement(v.TableBody,{deselectOnClickaway:n,displayRowCheckbox:y},P),g&&t().createElement(v.TableFooter,null,t().createElement(v.TableRow,{style:{backgroundColor:"#fafafa"}},t().createElement(v.TableRowColumn,{colSpan:r.length},g))))}}]),i}(t().Component);sn.PropTypes={data:U().array,columns:U().array,onSelectRows:U().func,emptyStateString:U().string};const un=t()["undefined"!=typeof document&&void 0!==document.createElement?"useLayoutEffect":"useEffect"],ln=function(t,r,n,o){var i=e.useRef(n),a=e.useRef(o);un((function(){i.current=n,a.current=o})),un((function(){var e=t&&"current"in t?t.current:t;if(e){var n=0;e.addEventListener(r,c);var o=a.current;return function(){n=1,e.removeEventListener(r,c),o&&o()}}function c(){if(!n){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];i.current.apply(this,t)}}}),[t,r])};function fn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function pn(e){return pn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pn(e)}var dn="undefined",hn=("undefined"==typeof window?"undefined":pn(window))!==dn?window:{},yn=("undefined"==typeof performance?"undefined":pn(performance))!==dn?performance:Date,mn=function(){return yn.now()},vn="AnimationFrame",bn="cancel"+vn,gn="request"+vn,wn=hn[gn]&&hn[gn].bind(hn),Sn=hn[bn]&&hn[bn].bind(hn);if(!wn||!Sn){var On=0;wn=function(e){var t=mn(),r=Math.max(On+1e3/60,t);return setTimeout((function(){e(On=r)}),r-t)},Sn=function(e){return clearTimeout(e)}}var Pn=function(e){Sn(e.v||-1)},kn=function(e,t){var r=mn(),n={};return n.v=wn((function o(){mn()-r>=t?e.call(null):n.v=wn(o)})),n};const _n=function(t){var r=e.useRef(t);return e.useEffect((function(){r.current=t})),r};var En="undefined"!=typeof performance?performance:Date,jn=function(){return En.now()};function Cn(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=_n(t),i=1e3/r,a=e.useRef(0),c=e.useRef(),s=function(){return c.current&&clearTimeout(c.current)},u=[r,n,o];function l(){a.current=0,s()}return e.useEffect((function(){return l}),u),e.useCallback((function(){var e=arguments,t=jn(),r=function(){a.current=t,s(),o.current.apply(null,e)},u=a.current;if(n&&0===u)return r();if(t-u>i){if(u>0)return r();a.current=t}s(),c.current=setTimeout((function(){r(),a.current=0}),i)}),u)}function Tn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],s=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);s=!0);}catch(e){u=!0,o=e}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return xn(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?xn(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Rn=0,In=1,Ln=0,Mn=1,Dn={low:0,max:0,high:0,C:2,P:void 0,R:void 0,L:void 0,list:void 0};function An(e){var t=e.high;e.L===Dn&&e.R===Dn?e.max=t:e.L===Dn?e.max=Math.max(e.R.max,t):e.R===Dn?e.max=Math.max(e.L.max,t):e.max=Math.max(Math.max(e.L.max,e.R.max),t)}function Nn(e){for(var t=e;t.P!==Dn;)An(t.P),t=t.P}function Un(e,t){if(t.R!==Dn){var r=t.R;t.R=r.L,r.L!==Dn&&(r.L.P=t),r.P=t.P,t.P===Dn?e.root=r:t===t.P.L?t.P.L=r:t.P.R=r,r.L=t,t.P=r,An(t),An(r)}}function Bn(e,t){if(t.L!==Dn){var r=t.L;t.L=r.R,r.R!==Dn&&(r.R.P=t),r.P=t.P,t.P===Dn?e.root=r:t===t.P.R?t.P.R=r:t.P.L=r,r.R=t,t.P=r,An(t),An(r)}}function Fn(e,t,r){t.P===Dn?e.root=r:t===t.P.L?t.P.L=r:t.P.R=r,r.P=t.P}function qn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Dn.P=Dn,Dn.L=Dn,Dn.R=Dn;var zn=function(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=function(){var e={root:Dn,size:0},t={};return{insert:function(r,n,o){for(var i=e.root,a=Dn;i!==Dn&&r!==(a=i).low;)i=r<i.low?i.L:i.R;if(r===a.low&&a!==Dn){if(!function(e,t,r){for(var n,o=e.list;o;){if(o.index===r)return!1;if(t>o.high)break;n=o,o=o.next}return n||(e.list={index:r,high:t,next:o}),n&&(n.next={index:r,high:t,next:n.next}),!0}(a,n,o))return;return a.high=Math.max(a.high,n),An(a),Nn(a),t[o]=a,void e.size++}var c={low:r,high:n,max:n,C:Rn,P:a,L:Dn,R:Dn,list:{index:o,high:n,next:null}};a===Dn?e.root=c:(c.low<a.low?a.L=c:a.R=c,Nn(c)),function(e,t){for(var r;t.P.C===Rn;)t.P===t.P.P.L?(r=t.P.P.R).C===Rn?(t.P.C=In,r.C=In,t.P.P.C=Rn,t=t.P.P):(t===t.P.R&&Un(e,t=t.P),t.P.C=In,t.P.P.C=Rn,Bn(e,t.P.P)):(r=t.P.P.L).C===Rn?(t.P.C=In,r.C=In,t.P.P.C=Rn,t=t.P.P):(t===t.P.L&&Bn(e,t=t.P),t.P.C=In,t.P.P.C=Rn,Un(e,t.P.P));e.root.C=In}(e,c),t[o]=c,e.size++},remove:function(r){var n=t[r];if(void 0!==n){delete t[r];var o=function(e,t){var r=e.list;if(r.index===t)return null===r.next?Ln:(e.list=r.next,Mn);var n=r;for(r=r.next;null!==r;){if(r.index===t)return n.next=r.next,Mn;n=r,r=r.next}}(n,r);if(void 0!==o){if(o===Mn)return n.high=n.list.high,An(n),Nn(n),void e.size--;var i,a=n,c=a.C;n.L===Dn?(i=n.R,Fn(e,n,n.R)):n.R===Dn?(i=n.L,Fn(e,n,n.L)):(a=function(e){for(;e.L!==Dn;)e=e.L;return e}(n.R),c=a.C,i=a.R,a.P===n?i.P=a:(Fn(e,a,a.R),a.R=n.R,a.R.P=a),Fn(e,n,a),a.L=n.L,a.L.P=a,a.C=n.C),An(i),Nn(i),c===In&&function(e,t){for(var r;t!==Dn&&t.C===In;)t===t.P.L?((r=t.P.R).C===Rn&&(r.C=In,t.P.C=Rn,Un(e,t.P),r=t.P.R),r.L.C===In&&r.R.C===In?(r.C=Rn,t=t.P):(r.R.C===In&&(r.L.C=In,r.C=Rn,Bn(e,r),r=t.P.R),r.C=t.P.C,t.P.C=In,r.R.C=In,Un(e,t.P),t=e.root)):((r=t.P.L).C===Rn&&(r.C=In,t.P.C=Rn,Bn(e,t.P),r=t.P.L),r.R.C===In&&r.L.C===In?(r.C=Rn,t=t.P):(r.L.C===In&&(r.R.C=In,r.C=Rn,Un(e,r),r=t.P.L),r.C=t.P.C,t.P.C=In,r.L.C=In,Bn(e,t.P),t=e.root));t.C=In}(e,i),e.size--}}},search:function(t,r,n){for(var o=[e.root];0!==o.length;){var i=o.pop();if(!(i===Dn||t>i.max)&&(i.L!==Dn&&o.push(i.L),i.R!==Dn&&o.push(i.R),i.low<=r&&i.high>=t))for(var a=i.list;null!==a;)a.high>=t&&n(a.index,i.low),a=a.next}},get size(){return e.size}}}(),o=new Array(e),i=[],a=new Array(e),c=0;c<e;c++)o[c]=0,a[c]=[];return{columnCount:e,columnWidth:t,set:function(e){for(var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=0,u=1;u<o.length;u++)o[u]<o[s]&&(s=u);var l=o[s]||0;o[s]=l+c+r,a[s].push(e),i[e]={left:s*(t+r),top:l,height:c,column:s},n.insert(l,l+c,e)},get:function(e){return i[e]},update:function(t){for(var c=new Array(e),s=0,u=0;s<t.length-1;s++){var l=t[s],f=i[l];f.height=t[++s],n.remove(l),n.insert(f.top,f.top+f.height,l),c[f.column]=void 0===c[f.column]?l:Math.min(l,c[f.column])}for(s=0;s<c.length;s++)if(void 0!==c[s]){var p=a[s],d=Wn(p,c[s]),h=a[s][d],y=i[h];for(o[s]=y.top+y.height+r,u=d+1;u<p.length;u++){var m=p[u],v=i[m];v.top=o[s],o[s]=v.top+v.height+r,n.remove(m),n.insert(v.top,v.top+v.height,m)}}},range:function(e,t,r){return n.search(e,t,(function(e,t){return r(e,i[e].left,t)}))},estimateHeight:function(t,r){var i=Math.max(0,Math.max.apply(null,o));return t===n.size?i:i+Math.ceil((t-n.size)/e)*r},shortestColumn:function(){return o.length>1?Math.min.apply(null,o):o[0]||0},size:function(){return n.size}}},Wn=function(e,t){for(var r=0,n=e.length-1;r<=n;){var o=r+n>>>1,i=e[o];if(i===t)return o;i<=t?r=o+1:n=o-1}return-1},Vn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,n=arguments.length>3?arguments[3]:void 0;return n=n||Math.floor(e/(t+r))||1,[Math.floor((e-r*(n-1))/n),n]},Gn=[],Hn=function(e){try{return new e}catch(e){var t={};return{set:function(e,r){t[e]=r},get:function(e){return t[e]}}}};const Jn=function(e,t){var r,n,o,i,a,c,s,u,l,f=(s=(n=e).length,u=Hn(n[0]),l=1===s,s<3?{g:function(e){return void 0===(o=u.get(e[0]))||l?o:o.get(e[1])},s:function(e,t){return l?u.set(e[0],t):void 0===(o=u.get(e[0]))?((i=Hn(n[1])).set(e[1],t),u.set(e[0],i)):o.set(e[1],t),t}}:{g:function(e){for(c=u,a=0;a<s;a++)if(void 0===(c=c.get(e[a])))return;return c},s:function(e,t){for(c=u,a=0;a<s-1;a++)void 0===(i=c.get(e[a]))?(i=Hn(n[a+1]),c.set(e[a],i),c=i):c=i;return c.set(e[s-1],t),t}}),p=f.g,d=f.s;return function(){return void 0===(r=p(arguments))?d(arguments,t.apply(null,arguments)):r}};var Yn=function(){if("undefined"!=typeof Map)return Map;function e(e,t){var r=-1;return e.some((function(e,n){return e[0]===t&&(r=n,!0)})),r}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var r=e(this.__entries__,t),n=this.__entries__[r];return n&&n[1]},t.prototype.set=function(t,r){var n=e(this.__entries__,t);~n?this.__entries__[n][1]=r:this.__entries__.push([t,r])},t.prototype.delete=function(t){var r=this.__entries__,n=e(r,t);~n&&r.splice(n,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var r=0,n=this.__entries__;r<n.length;r++){var o=n[r];e.call(t,o[1],o[0])}},t}()}(),Kn="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,$n=void 0!==__webpack_require__.g&&__webpack_require__.g.Math===Math?__webpack_require__.g:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),Xn="function"==typeof requestAnimationFrame?requestAnimationFrame.bind($n):function(e){return setTimeout((function(){return e(Date.now())}),1e3/60)},Qn=2,Zn=20,eo=["top","right","bottom","left","width","height","size","weight"],to="undefined"!=typeof MutationObserver,ro=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(e,t){var r=!1,n=!1,o=0;function i(){r&&(r=!1,e()),n&&c()}function a(){Xn(i)}function c(){var e=Date.now();if(r){if(e-o<Qn)return;n=!0}else r=!0,n=!1,setTimeout(a,t);o=e}return c}(this.refresh.bind(this),Zn)}return e.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},e.prototype.removeObserver=function(e){var t=this.observers_,r=t.indexOf(e);~r&&t.splice(r,1),!t.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},e.prototype.updateObservers_=function(){var e=this.observers_.filter((function(e){return e.gatherActive(),e.hasActive()}));return e.forEach((function(e){return e.broadcastActive()})),e.length>0},e.prototype.connect_=function(){Kn&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),to?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){Kn&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(e){var t=e.propertyName,r=void 0===t?"":t,n=eo.some((function(e){return!!~r.indexOf(e)}));n&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),no=function(e,t){for(var r=0,n=Object.keys(t);r<n.length;r++){var o=n[r];Object.defineProperty(e,o,{value:t[o],enumerable:!1,writable:!1,configurable:!0})}return e},oo=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||$n},io=lo(0,0,0,0);function ao(e){return parseFloat(e)||0}function co(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return t.reduce((function(t,r){return t+ao(e["border-"+r+"-width"])}),0)}var so="undefined"!=typeof SVGGraphicsElement?function(e){return e instanceof oo(e).SVGGraphicsElement}:function(e){return e instanceof oo(e).SVGElement&&"function"==typeof e.getBBox};function uo(e){return Kn?so(e)?function(e){var t=e.getBBox();return lo(0,0,t.width,t.height)}(e):function(e){var t=e.clientWidth,r=e.clientHeight;if(!t&&!r)return io;var n=oo(e).getComputedStyle(e),o=function(e){for(var t={},r=0,n=["top","right","bottom","left"];r<n.length;r++){var o=n[r],i=e["padding-"+o];t[o]=ao(i)}return t}(n),i=o.left+o.right,a=o.top+o.bottom,c=ao(n.width),s=ao(n.height);if("border-box"===n.boxSizing&&(Math.round(c+i)!==t&&(c-=co(n,"left","right")+i),Math.round(s+a)!==r&&(s-=co(n,"top","bottom")+a)),!function(e){return e===oo(e).document.documentElement}(e)){var u=Math.round(c+i)-t,l=Math.round(s+a)-r;1!==Math.abs(u)&&(c-=u),1!==Math.abs(l)&&(s-=l)}return lo(o.left,o.top,c,s)}(e):io}function lo(e,t,r,n){return{x:e,y:t,width:r,height:n}}var fo=function(){function e(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=lo(0,0,0,0),this.target=e}return e.prototype.isActive=function(){var e=uo(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},e}(),po=function(e,t){var r,n,o,i,a,c,s,u=(n=(r=t).x,o=r.y,i=r.width,a=r.height,c="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,s=Object.create(c.prototype),no(s,{x:n,y:o,width:i,height:a,top:o,right:n+i,bottom:a+o,left:n}),s);no(this,{target:e,contentRect:u})},ho=function(){function e(e,t,r){if(this.activeObservations_=[],this.observations_=new Yn,"function"!=typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=r}return e.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof oo(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new fo(e)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof oo(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach((function(t){t.isActive()&&e.activeObservations_.push(t)}))},e.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map((function(e){return new po(e.target,e.broadcastRect())}));this.callback_.call(e,t,e),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),yo="undefined"!=typeof WeakMap?new WeakMap:new Yn,mo=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var r=ro.getInstance(),n=new ho(t,r,this);yo.set(this,n)};["observe","unobserve","disconnect"].forEach((function(e){mo.prototype[e]=function(){var t;return(t=yo.get(this))[e].apply(t,arguments)}}));const vo=void 0!==$n.ResizeObserver?$n.ResizeObserver:mo;var bo=new WeakMap;function go(){var t=e.useState(wo)[1];return e.useRef((function(){return t({})})).current}var wo={},So=Jn([WeakMap],(function(e,t){var r,n,o,i,a=(r=function(r){for(var n=[],o=0;o<r.length;o++){var i=r[o],a=i.target.offsetHeight;if(a>0){var c=bo.get(i.target);if(void 0!==c){var s=e.get(c);void 0!==s&&a!==s.height&&n.push(c,a)}}}n.length>0&&(e.update(n),t(n))},n=[],o=null,i=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];n=t,o||(o=requestAnimationFrame((function(){o=null,r.apply(void 0,n)})))},i.cancel=function(){o&&(cancelAnimationFrame(o),o=null)},i),c=new vo(a),s=c.disconnect.bind(c);return c.disconnect=function(){s(),a.cancel()},c}));function Oo(e){return Oo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oo(e)}function Po(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_o(n.key),n)}}function ko(e,t,r){return t&&Po(e.prototype,t),r&&Po(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _o(e){var t=function(e,t){if("object"!==Oo(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==Oo(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===Oo(t)?t:String(t)}var Eo=ko((function e(){var t,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.set=void 0,this.get=void 0,this.get=function(e){return e===t?r:void 0},this.set=function(e,n){t=e,r=n}}));const jo=Eo,Co=function(e,t){var r,n,o=t||To;return function(){return r&&o(arguments,r)?n:n=e.apply(null,r=arguments)}};var To=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]};function xo(e){return xo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xo(e)}var Ro=e.createElement,Io="0",Lo=Jn([jo,{},WeakMap,jo],(function(e,t,r,n){return Ro(e,{index:t,data:r,width:n})})),Mo=Co((function(e,t){return{position:"relative",width:"100%",maxWidth:"100%",height:Math.ceil(t),maxHeight:Math.ceil(t),willChange:e?"contents":void 0,pointerEvents:e?"none":void 0}})),Do=function(e,t){return e[0]===t[0]&&e[1]===t[1]},Ao=Co((function(e,t){return Object.assign({},e,t)}),Do);function No(e,t){return t}var Uo=Co((function(e){return{width:e,zIndex:-1e3,visibility:"hidden",position:"absolute",writingMode:"horizontal-tb"}}),(function(e,t){return e[0]===t[0]})),Bo=Co((function(e,t){return function(r){return function(n){null!==n&&(t&&(t.observe(n),bo.set(n,r)),void 0===e.get(r)&&e.set(r,n.offsetHeight))}}}),Do);function Fo(e){return Fo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fo(e)}function qo(){return qo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},qo.apply(this,arguments)}function zo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Wo(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?zo(Object(r),!0).forEach((function(t){Vo(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zo(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Vo(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==Fo(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==Fo(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===Fo(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Go(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],s=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);s=!0);}catch(e){u=!0,o=e}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ho(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ho(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ho(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Jo=F().requireLib("hoc").useImagePreview,Yo={2:{scaleX:-1,scaleY:1},3:{rotate:"180deg"},4:{rotate:"180deg",scaleX:-1,scaleY:1},5:{rotate:"90deg",scaleX:1,scaleY:-1,tX:-1,tY:1},6:{rotate:"90deg",tX:-1,tY:-1},7:{rotate:"270deg",scaleX:1,scaleY:-1,tX:1,tY:-1},8:{rotate:"270deg",tX:1,tY:1}};function Ko(e){var t=[];return e.rotate&&t.push("rotate(".concat(e.rotate,")")),e.scaleX&&t.push("scale(".concat(e.scaleX,", ").concat(e.scaleY,")")),e.translateX&&t.push("translate(".concat(e.translateX,"px,").concat(e.translateY,"px)")),t.join(" ")}var $o=(0,We.debounce)((function(){window.dispatchEvent(new Event("resize"))}),500),Xo=function(r){var n=r.width,o=r.data,i=o.node,a=o.parent,c=o.dataModel,s=o.entryProps,u=function(e){var t=.5;if(e.getMetadata().has("ImageDimensions")){var r=e.getMetadata().get("ImageDimensions");t=r.Height/r.Width}return{ratio:t,src:Jo(e).src}}(i),l=u.ratio,f=u.src,p=Go((0,e.useState)(c.getSelectedNodes().indexOf(i)>-1),2),d=p[0],h=p[1],y=Go((0,e.useState)(!1),2),m=y[0],v=y[1];(0,e.useEffect)((function(){var e=function(){h(c.getSelectedNodes().indexOf(i)>-1)};return c.observe("selection_changed",e),function(){c.stopObserving("selection_changed",e)}}),[d,i]);var b=s.handleClicks,g=s.renderIcon,w=s.renderActions,S=F().getMessages()["react.1"],O={};if(f&&l&&i.getMetadata().get("image_exif_orientation")){var P=parseInt(i.getMetadata().get("image_exif_orientation"));if(Yo[P]){var k=Wo({},Yo[P]);if(P<5)O={transform:Ko(k)};else{var _=n*(l=1/l),E=(n-_)/2;k.translateX=E*k.tX,k.translateY=E*k.tY,O={transform:Ko(k),width:_}}}}var j=["masonry-card"];return m&&j.push("hover"),d&&j.push("selected"),f&&j.push("has-src"),t().createElement(ue,{node:i,style:{width:n,height:n*l,position:"relative"},className:j.join(" "),onClick:function(e){return b(i,a?Nr.CLICK_TYPE_DOUBLE:Nr.CLICK_TYPE_SIMPLE,e)},onDoubleClick:function(e){return b(i,Nr.CLICK_TYPE_DOUBLE,e)},onMouseOver:function(){return v(!0)},onMouseOut:function(){return v(!1)}},f&&t().createElement(Qo,{className:"masonry-image",src:f,alt:i.getPath(),style:Wo({width:n},O)}),a&&t().createElement("div",{className:"mimefont-container"},t().createElement("div",{className:"mimefont mdi mdi-chevron-left"})),!a&&!f&&g(i),!a&&t().createElement("div",{style:{position:"absolute",top:0,left:0}},w(i)),t().createElement("div",{className:"masonry-label",style:Wo({display:m||d||!f?"block":"none"},{position:"absolute",bottom:0,left:0,right:0,height:32,padding:"6px 10px",fontWeight:500,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",borderRadius:"0 0 2px 2px"})},a?S:i.getLabel()))},Qo=function(r){var n=r.src,o=r.alt,i=r.style,a=r.className,c=(0,e.useRef)(),s=function(t){var r=Go((0,e.useState)(!1),2),n=r[0],o=r[1];return(0,e.useEffect)((function(){var e=new IntersectionObserver((function(e){var t,r,n=Go(e,1)[0];if(!(n.target&&!n.rootBounds&&(t=n.target,r=t.getBoundingClientRect(),r.top>=0&&r.left>=0&&r.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&r.right<=(window.innerWidth||document.documentElement.clientWidth))))return n.isIntersecting?o(n.isIntersecting):void 0;o(!0)}),{threshold:.1,root:null});return e.observe(t.current),function(){e.disconnect()}}),[t]),n}(c),u=Wo({},i);return u.transition="opacity 550ms cubic-bezier(0.23, 1, 0.32, 1) 0ms",s||(u.opacity=0),t().createElement("img",{ref:c,alt:o,src:s?n:null,style:u,className:a})};function Zo(e,t){var r=[];return e.getChildren().forEach((function(e,n){r.push(Wo({id:"item-"+n,node:e},t))})),r.sort((function(e,t){return Sr(e.node,t.node)})),e.getParent()&&r.unshift(Wo({id:"item-parent",parent:!0,node:e.getParent()},t)),r}const ei=t().memo((function(r){var n=r.className,o=r.dataModel,i=r.entryProps,a=r.emptyStateProps,c=r.containerStyle,s=void 0===c?{}:c,u=r.columnWidth,l=void 0===u?220:u,f=r.onScroll,p={dataModel:o,entryProps:i},d=function(){return Zo(o.getContextNode(),p)},h=Go((0,e.useState)(d),2),y=h[0],m=h[1],v=Go((0,e.useState)(o.getContextNode()),2),b=v[0],g=v[1];(0,e.useEffect)((function(){var e=function(){var e=o.getContextNode();e.isLoaded()?g(e):e.observeOnce("loaded",(function(){return g(e)}))};return o.observe("context_changed",e),function(){o.stopObserving("context_changed",e)}})),(0,e.useEffect)((function(){m(d());var e=function(){m(Zo(b,p)),$o()},t=function(){m(Zo(b,p)),window.dispatchEvent(new Event("resize")),$o()};return b.observe("child_added",t),b.observe("child_removed",e),b.observe("child_replaced",t),function(){b.stopObserving("child_added",t),b.stopObserving("child_removed",e),b.stopObserving("child_replaced",t)}}),[b]),b.isLoaded()||(b.observeOnce("loaded",(function(){m(Zo(b,p))})),b.load());var w,S,O,P,k,_,E,j,C=(0,e.useRef)(null),T=(w=C,S=function(){var e=w.current;if(e){var t=getComputedStyle(e),r=parseFloat;return{width:e.clientWidth-r(t.paddingTop)-r(t.paddingBottom),height:e.clientHeight-r(t.paddingLeft)-r(t.paddingRight)}}return{width:0,height:0}},E=e.useState(S),j=2,P=(O=function(e){if(Array.isArray(e))return e}(E)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],s=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);s=!0);}catch(e){u=!0,o=e}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(E,j)||function(e,t){if(e){if("string"==typeof e)return fn(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?fn(e,t):void 0}}(E,j)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0],k=O[1],_=function(){return k(S())},ln(window,"resize",_),ln(window,"orientationchange",_),un((function(){k(S())}),[]),P),x=T.width,R=T.height,I=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.offset,o=void 0===n?0:n,i=r.fps,a=void 0===i?12:i,c=t&&"current"in t?t.current:t,s=function(){return c?"scrollTop"in c?c.scrollTop:c.pageYOffset||c.scrollY:0},u=Tn(function(t,r,n){var o=e.useState(t);return[o[0],Cn(o[1],r,void 0)]}(s,a),2),l=u[0],f=u[1],p=Tn(e.useState(!1),2),d=p[0],h=p[1];function y(){h(!1)}return un((function(){if(c){var e,t=!1,r=function(){return e&&Pn(e)},n=function(){t||(f(s()),h(!0),r(),e=kn(y,1e3/a))};return c.addEventListener("scroll",n),function(){c.removeEventListener("scroll",n),r(),t=!0}}}),[c,a]),{scrollTop:Math.max(0,l-o),isScrolling:d}}(C),L=I.scrollTop,M=I.isScrolling;(0,e.useEffect)((function(){$o()}),[s.marginLeft]),f&&(0,e.useEffect)((function(){f({scrollTop:L})}),[L]);var D=function(t){var r=t.width,n=t.columnWidth,o=void 0===n?200:n,i=t.columnGutter,a=void 0===i?0:i,c=t.columnCount,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Gn,u=function(){var e=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],s=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);s=!0);}catch(e){u=!0,o=e}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return qn(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?qn(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(Vn(r,o,a,c),2),t=e[0],n=e[1];return zn(n,t,a)},l=e.useRef();void 0===l.current&&(l.current=u());var f=e.useRef(s),p=[r,o,a,c],d=e.useRef(p),h=!p.every((function(e,t){return d.current[t]===e}));if(h||!s.every((function(e,t){return f.current[t]===e}))){var y=l.current,m=u();if(f.current=s,d.current=p,h)for(var v=y.size(),b=0;b<v;b++){var g=y.get(b);m.set(b,void 0!==g?g.height:0)}l.current=m}return l.current}({width:x,columnWidth:l,columnGutter:8},[y,l]),A=function(t){var r=go(),n=So(t,r);function o(){return n.disconnect()}return e.useEffect((function(){return o}),[n]),n}(D),N=function(t){var r,n=t.positioner,o=t.resizeObserver,i=t.items,a=t.as,c=void 0===a?"div":a,s=t.id,u=t.className,l=t.style,f=t.role,p=void 0===f?"grid":f,d=t.tabIndex,h=void 0===d?0:d,y=t.containerRef,m=t.itemAs,v=void 0===m?"div":m,b=t.itemStyle,g=t.itemHeightEstimate,w=void 0===g?300:g,S=t.itemKey,O=void 0===S?No:S,P=t.overscanBy,k=void 0===P?2:P,_=t.scrollTop,E=t.isScrolling,j=t.height,C=t.render,T=t.onRender,x=0,R=go(),I=Bo(n,o),L=i.length,M=n.columnWidth,D=n.columnCount,A=n.range,N=n.estimateHeight,U=n.size,B=n.shortestColumn,F=U(),q=B(),z=[],W="list"===p?"listitem":"grid"===p?"gridcell":void 0,V=_n(T),G=_+(k*=j),H=q<G&&F<L;if(A(Math.max(0,_-k/2),G,(function(e,t,n){var o=i[e],a=O(o,e),c={top:n,left:t,width:M,writingMode:"horizontal-tb",position:"absolute"};z.push(Ro(v,{key:a,ref:I(e),role:W,style:"object"===xo(b)&&null!==b?Object.assign({},c,b):c},Lo(C,e,o,M))),void 0===r?(x=e,r=e):(x=Math.min(x,e),r=Math.max(r,e))})),H)for(var J=Math.min(L-F,Math.ceil((_+k-q)/w*D)),Y=F,K=Uo(M);Y<F+J;Y++){var $=i[Y],X=O($,Y);z.push(Ro(v,{key:X,ref:I(Y),role:W,style:"object"===xo(b)?Object.assign({},K,b):K},Lo(C,Y,$,M)))}e.useEffect((function(){"function"==typeof V.current&&void 0!==r&&V.current(x,r,i),Io="1"}),[x,r,i,V]),e.useEffect((function(){H&&R()}),[H]);var Q=Mo(E,N(L,w));return Ro(c,{ref:y,key:Io,id:s,role:p,className:u,tabIndex:h,style:"object"===xo(l)?Ao(Q,l):Q,children:z})}({positioner:D,resizeObserver:A,items:y,height:R,scrollTop:L,isScrolling:M,overscanBy:6,render:Xo}),U=a&&!b.isLoading()&&(!y||!y.length);return t().createElement("div",{style:Wo({flex:1,padding:8,overflowY:"auto"},s),className:n,ref:C,onKeyDown:function(e){"Enter"===e.key&&o.getUniqueNode()?i.handleClicks(o.getUniqueNode(),Nr.CLICK_TYPE_DOUBLE,e):"Delete"===e.key&&F().getInstance().Controller.fireActionByKey("key_delete")}},U&&t().createElement(yr,qo({pydio:F().getInstance()},a)),!U&&N)}));function ti(e){return ti="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ti(e)}function ri(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ni(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ii(n.key),n)}}function oi(e,t,r){return t&&ni(e.prototype,t),r&&ni(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function ii(e){var t=function(e,t){if("object"!==ti(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==ti(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===ti(t)?t:String(t)}function ai(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ci(e,t)}function ci(e,t){return ci=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ci(e,t)}function si(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=ui(e);if(t){var o=ui(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===ti(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function ui(e){return ui=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ui(e)}var li=function(r){ai(o,r);var n=si(o);function o(t){var r;return ri(this,o),(r=n.call(this,t)).root=(0,e.createRef)(),r}return oi(o,[{key:"componentDidMount",value:function(){this.props.selected&&this.root.current&&this.root.current.scrollIntoView({behavior:"smooth"})}},{key:"render",value:function(){var r=this.props,n=r.item,o=r.prev,i=r.next,a=r.itemUuid,c=r.itemMoment,s=r.itemDesc,u=r.itemAnnotations,l=r.itemActions,f=r.selected,p=r.onSelect,d=r.color,h=c(n),y="tl-block",m="sep-date",v=!1;if(o){var b=c(o);h.format("L")===b.format("L")?(y+=" similar",v=!0):(y+=" newday",m+=" newday")}var g,w=u(n,o,i),S=l(n,o,i);p&&(g=function(){p(a(n))}),f&&(y+=" tl-selected");var O={fontWeight:500,color:d,cursor:"pointer",display:"inline-block",marginLeft:6};return t().createElement(e.Fragment,null,!v&&t().createElement("div",{className:m},t().createElement("div",{className:"daymonth"},h.format("DD")),t().createElement("div",{className:"dayweek"},h.format("ddd"))),t().createElement("div",{className:y,ref:this.root},t().createElement("div",{className:"tl-date"},t().createElement("div",{className:"daymonth"},h.format("DD")),t().createElement("div",{className:"dayweek"},h.format("ddd"))),t().createElement("div",{className:"tl-dot"}),t().createElement("div",{className:"tl-card"+(g?" tl-selectable":""),onClick:g},t().createElement("div",{className:"tl-desc"},t().createElement("div",{className:"desc-date"},h.format(v?"LT":"llll")),s(n,o,i)),t().createElement("div",{className:"tl-actions"},w,f&&S&&t().createElement("div",null,S.map((function(e){return t().createElement("a",{onClick:e.onClick,style:O},e.label)})))))))}}]),o}(e.Component),fi=function(e){ai(n,e);var r=si(n);function n(e){var t;return ri(this,n),(t=r.call(this,e)).state={},t}return oi(n,[{key:"makeStyle",value:function(e){var r=e.palette.mui3["on-surface"],n=e.palette.mui3.tertiary,o=e.palette.mui3["outline-variant"],i=e.palette.mui3.surface,a="0px 1px 3px "+e.palette.mui3["outline-variant"],c="\n        .timeline{\n            color: ".concat(r,";\n        }\n        .timeline .tl-line {\n            border-right: 3px dashed ").concat(o,"; \n        }\n        .timeline .tl-timeline .tl-block .tl-dot{\n            background-color: ").concat(n,";\n            box-shadow: ").concat(n," 0px 0px 4px;\n        }\n        .timeline .tl-timeline .tl-block .tl-dot:before{\n            border-color: ").concat(n,"\n        }\n        .timeline .tl-timeline .tl-block .tl-card.tl-selectable:hover, \n        .timeline .tl-timeline .tl-block.tl-selected .tl-card {\n            box-shadow: ").concat(a,"\n        }\n        .timeline .tl-timeline .daymonth{\n            color: ").concat(n,"\n        }\n        .timeline .tl-card{\n            background-color: ").concat(i,";\n        }\n        ");return t().createElement("style",{type:"text/css"},c)}},{key:"render",value:function(){var e,r=this,n=this.props.muiTheme,o=this.props,i=o.items,a=o.className,c=void 0===a?"":a,s=o.useSelection,u=void 0!==s&&s,l=o.preSelection,f=this.props,p=f.itemUuid,d=f.itemMoment,h=f.itemActions,y=f.itemAnnotations,m=f.itemDesc,v=f.onItemSelect,b=this.props,g=b.loadMoreAction,w=b.loadMoreLabel,S=b.loadMoreDisabled,O=this.state.selection,P=void 0===O?l:O;return n.palette.mui3.tertiary,v?e=v:u&&(e=function(e){r.setState({selection:e})}),t().createElement("div",{className:"timeline "+c},t().createElement("div",{className:"tl-line"}),t().createElement("div",{className:"tl-timeline"},i.map((function(r,o){return t().createElement(li,{item:r,prev:o>0?i[o-1]:null,next:o<i.length-1?i[o+1]:null,selected:!!u&&p(r)===P,onSelect:e,itemUuid:p,itemMoment:d,itemActions:h,itemAnnotations:y,itemDesc:m,color:n.palette.mui3.primary})})),g&&t().createElement("div",{className:"tl-block tl-more"},t().createElement("div",{className:"tl-date"}),t().createElement("div",{className:"tl-dot"}),t().createElement("div",{className:"tl-card tl-selectable",style:{color:n.palette.mui3.primary},onClick:S?null:g},w))),this.makeStyle(n))}}]),n}(e.Component);const pi=fi=(0,J.muiThemeable)()(fi);function di(e){return di="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},di(e)}function hi(){return hi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},hi.apply(this,arguments)}function yi(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mi(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ei(n.key),n)}}function vi(e,t,r){return t&&mi(e.prototype,t),r&&mi(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function bi(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gi(e,t)}function gi(e,t){return gi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},gi(e,t)}function wi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Oi(e);if(t){var o=Oi(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===di(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Si(e)}(this,r)}}function Si(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Oi(e){return Oi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Oi(e)}function Pi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ki(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Pi(Object(r),!0).forEach((function(t){_i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Pi(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _i(e,t,r){return(t=Ei(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ei(e){var t=function(e,t){if("object"!==di(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==di(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===di(t)?t:String(t)}var ji=F().requireLib("hoc").withContextMenu,Ci=function(e){return t().createElement("div",e)};Ci=ji(Ci);var Ti=A()({displayName:"SimpleTreeNode",propTypes:{collapse:U().bool,forceExpand:U().bool,childrenOnly:U().bool,depth:U().number,onNodeSelect:U().func,node:U().instanceOf(AjxpNode),dataModel:U().instanceOf(PydioDataModel),forceLabel:U().string,nodeIsSelected:U().func,showLoader:U().bool,checkboxes:U().array,checkboxesValues:U().object,checkboxesComputeStatus:U().func,onCheckboxCheck:U().func,paddingOffset:U().number},getDefaultProps:function(){return{collapse:!1,childrenOnly:!1,depth:0,paddingOffset:0,onNodeSelect:function(e){}}},listenToNode:function(e){this._childrenListener=function(){this.isMounted()&&this.setState({children:this._nodeToChildren(e)})}.bind(this),this._nodeListener=function(){this.isMounted()&&this.forceUpdate()}.bind(this),e.observe("child_added",this._childrenListener),e.observe("child_removed",this._childrenListener),e.observe("loaded",this._childrenListener),e.observe("loading",this._nodeListener),e.observe("node_replaced",this._nodeListener)},stopListening:function(e){e.stopObserving("child_added",this._childrenListener),e.stopObserving("child_removed",this._childrenListener),e.stopObserving("loaded",this._childrenListener),e.stopObserving("loading",this._nodeListener),e.stopObserving("node_replaced",this._nodeListener)},componentDidMount:function(){this.listenToNode(this.props.node)},componentWillUnmount:function(){this.stopListening(this.props.node)},componentWillReceiveProps:function(e){var t=this.props.node,r=e.node;if(r===t&&r.getMetadata().get("paginationData")){var n=this.state.children.map((function(e){return e.setParent(r),e})),o=this.state.children.map((function(e){return e.getPath()}));this._nodeToChildren(r).forEach((function(e){-1===o.indexOf(e.getPath())&&n.push(e)})),this.setState({children:n})}else this.setState({children:this._nodeToChildren(r)});r!==t&&(this.stopListening(t),this.listenToNode(r))},getInitialState:function(){return{showChildren:!this.props.collapse||this.props.forceExpand,children:this._nodeToChildren(this.props.node)}},_nodeToChildren:function(){var e=[];return this.props.node.getChildren().forEach((function(t){t.isLeaf()&&"ajxp_browsable_archive"!==t.getAjxpMime()||e.push(t)})),e.sort((function(e,t){return e.isRecycle()?1:t.isRecycle()?-1:e.getLabel().localeCompare(t.getLabel(),void 0,{numeric:!0})})),e},onNodeSelect:function(e){this.props.onNodeSelect&&this.props.onNodeSelect(this.props.node),e.preventDefault(),e.stopPropagation()},onChildDisplayToggle:function(e){this.props.node.getChildren().size&&this.setState({showChildren:!this.state.showChildren}),e.preventDefault(),e.stopPropagation()},nodeIsSelected:function(e){return this.props.nodeIsSelected?this.props.nodeIsSelected(e):-1!==this.props.dataModel.getSelectedNodes().indexOf(e)},render:function(){var e,r=this.props,o=r.node,i=r.dataModel,a=r.childrenOnly,c=r.canDrop,s=r.isOverCurrent,u=r.checkboxes,l=r.checkboxesComputeStatus,f=r.checkboxesValues,p=r.onCheckboxCheck,d=r.depth,h=r.paddingOffset,y=r.forceExpand,m=r.selectedItemStyle,b=r.getItemStyle,w=r.getRightIcon,S=r.forceLabel,O=r.showLoader,P=r.noPaginator;if(this.state.children.length)e=t().createElement("span",{onClick:this.onChildDisplayToggle},this.state.showChildren||y?t().createElement("span",{className:"tree-icon mdi mdi-chevron-down"}):t().createElement("span",{className:"tree-icon mdi mdi-chevron-right"}));else{var k="tree-icon mdi mdi-chevron-right";o.isLoaded()&&(k+=" no-folder-children"),e=t().createElement("span",{className:k})}var _,E=this.nodeIsSelected(o)?"mui-menu-item mui-is-selected":"mui-menu-item";if(!a){var j;if(c&&s&&(E+=" droppable-active"),u){var C={},T=!1,x={},R="";if(l){var I=l(o);C=I.VALUES,T=I.INHERITED,x=I.DISABLED,I.CLASSNAME&&(R=" "+I.CLASSNAME)}else f&&f[o.getPath()]&&(C=f[o.getPath()]);var L=[];j=u.map(function(e){var r=void 0!==C[e]&&C[e],n=function(t,r){p(o,e,r)}.bind(this);return r&&L.push(e),t().createElement(v.Checkbox,{name:e,key:e+"-"+(r?"true":"false"),checked:r,onCheck:n,disabled:x[e],className:"cbox-"+e,style:{width:44}})}.bind(this)),E+=T?" inherited ":"",E+=L.length?" checkbox-values-"+L.join("-"):" checkbox-values-empty",j=t().createElement("div",{style:{display:"flex",alignItems:"center"},className:"tree-checkboxes"+R},j)}var M,D={paddingLeft:h+20*d};this.nodeIsSelected(o)&&m&&(D=ki(ki({},D),m)),b&&(D=ki(ki({},D),b(o))),w&&(M=w(o));var A,N="mdi mdi-folder",U=o.getAjxpMime();"ajxp_browsable_archive"===U?N="mdi mdi-archive":"ajxp_recycle"===U&&(N="mdi mdi-delete"),O&&o.isLoading()&&(A=t().createElement(v.CircularProgress,{size:14,style:{marginLeft:7},thickness:1})),_=t().createElement(Ci,{node:o,className:"tree-item "+E+(j?" has-checkboxes":""),style:D},t().createElement("div",{className:"tree-item-label",style:{display:"flex",alignItems:"center"},onClick:this.onNodeSelect,title:o.getLabel(),"data-id":o.getPath()},e,t().createElement("span",{className:"tree-icon "+N}),t().createElement("span",{style:{flex:1}},S||o.getLabel()),A,M),j)}var B=[],F=function(e){return e},q=!1;if(g()&&this.props.connectDropTarget&&this.props.connectDragSource){var z=this.props.connectDragSource,W=this.props.connectDropTarget;F=function(e){z(n().findDOMNode(e)),W(n().findDOMNode(e))},q=!0}return(this.state.showChildren||y)&&(B=this.state.children.map(function(e){var r=ki(ki({},this.props),{},{forceLabel:null,childrenOnly:!1,key:e.getPath(),node:e,depth:d+1});return t().createElement(q?xi:Ti,r)}.bind(this))),t().createElement("li",{ref:F,className:"treenode"+o.getPath().replace(/\//g,"_")},_,t().createElement("ul",null,!P&&o.getMetadata().has("paginationData")&&parseInt(o.getMetadata().get("paginationData").get("total"))>1&&t().createElement(Ri,{node:o,dataModel:i,depth:d+1,paddingOffset:h}),B))}}),xi=Ti;g()&&(xi=g().flow(g().DragSource(l.NODE_PROVIDER,y,f),g().DropTarget(l.NODE_PROVIDER,m,p))(Ti));var Ri=function(e){bi(n,e);var r=wi(n);function n(){return yi(this,n),r.apply(this,arguments)}return vi(n,[{key:"goTo",value:function(e){var t=this.props,r=t.dataModel,n=t.node;n.getMetadata().get("paginationData").set("new_page",e),r.requireContextChange(n)}},{key:"render",value:function(){var e=this,r=this.props,n=r.node,o=r.depth,i=r.paddingOffset,a=(r.muiTheme,{style:{width:24,height:24,padding:0}}),c=n.getMetadata().get("paginationData"),s=c.get("current"),u=c.get("total"),l=F().getMessages()[331]+" "+s+" / "+u;return t().createElement("li",null,t().createElement("div",{style:{paddingLeft:i+20*o,paddingTop:5,paddingBottom:5,display:"flex",alignItems:"center"}},t().createElement("div",{style:{paddingLeft:14,paddingRight:6,color:"rgba(0,0,0,.43)"},className:"mdi mdi-format-list-bulleted"}),t().createElement("div",{style:{display:"flex",alignItems:"center",color:"rgba(0,0,0,.73)",backgroundColor:"rgba(0,0,0,0.02)",borderRadius:3,marginRight:10}},t().createElement(v.IconButton,hi({iconClassName:"mdi mdi-chevron-left",onClick:function(){e.goTo(s-1)},disabled:1===s},a)),t().createElement("div",{style:{padding:"0 20px",flex:1,textAlign:"center",fontSize:13}},l),t().createElement(v.IconButton,hi({iconClassName:"mdi mdi-chevron-right",onClick:function(){e.goTo(s+1)},disabled:s===u},a)))))}}]),n}(t().Component);Ri=(0,J.muiThemeable)()(Ri);var Ii=function(e){bi(n,e);var r=wi(n);function n(){var e;yi(this,n);for(var t=arguments.length,o=new Array(t),i=0;i<t;i++)o[i]=arguments[i];return _i(Si(e=r.call.apply(r,[this].concat(o))),"onNodeSelect",(function(t){e.props.onNodeSelect?e.props.onNodeSelect(t):e.props.dataModel.setSelectedNodes([t])})),e}return vi(n,[{key:"render",value:function(){return t().createElement("ul",{className:this.props.className},t().createElement(xi,{childrenOnly:!this.props.showRoot,forceExpand:this.props.forceExpand,node:this.props.node?this.props.node:this.props.dataModel.getRootNode(),dataModel:this.props.dataModel,onNodeSelect:this.onNodeSelect,nodeIsSelected:this.props.nodeIsSelected,forceLabel:this.props.rootLabel,checkboxes:this.props.checkboxes,checkboxesValues:this.props.checkboxesValues,checkboxesComputeStatus:this.props.checkboxesComputeStatus,onCheckboxCheck:this.props.onCheckboxCheck,selectedItemStyle:this.props.selectedItemStyle,getItemStyle:this.props.getItemStyle,getRightIcon:this.props.getRightIcon,paddingOffset:this.props.paddingOffset,noPaginator:this.props.noPaginator,showLoader:this.props.showLoader}))}}]),n}(t().Component);_i(Ii,"propTypes",{showRoot:U().bool,rootLabel:U().string,onNodeSelect:U().func,node:U().instanceOf(AjxpNode).isRequired,dataModel:U().instanceOf(PydioDataModel).isRequired,selectable:U().bool,selectableMultiple:U().bool,initialSelectionModel:U().array,onSelectionChange:U().func,forceExpand:U().bool,nodeIsSelected:U().func,showLoader:U().bool,checkboxes:U().array,checkboxesValues:U().object,checkboxesComputeStatus:U().func,onCheckboxCheck:U().func,paddingOffset:U().number}),_i(Ii,"defaultProps",{showRoot:!0,onNodeSelect:Ii.onNodeSelect});var Li=function(e){bi(n,e);var r=wi(n);function n(){var e;yi(this,n);for(var t=arguments.length,o=new Array(t),i=0;i<t;i++)o[i]=arguments[i];return _i(Si(e=r.call.apply(r,[this].concat(o))),"onNodeSelect",(function(t){e.props.onNodeSelect?e.props.onNodeSelect(t):e.props.dataModel.setSelectedNodes([t])})),e}return vi(n,[{key:"render",value:function(){return t().createElement("ul",{className:this.props.className},t().createElement(Ti,{childrenOnly:!this.props.showRoot,forceExpand:this.props.forceExpand,node:this.props.node?this.props.node:this.props.dataModel.getRootNode(),dataModel:this.props.dataModel,onNodeSelect:this.onNodeSelect,nodeIsSelected:this.props.nodeIsSelected,forceLabel:this.props.rootLabel,checkboxes:this.props.checkboxes,checkboxesValues:this.props.checkboxesValues,checkboxesComputeStatus:this.props.checkboxesComputeStatus,onCheckboxCheck:this.props.onCheckboxCheck,selectedItemStyle:this.props.selectedItemStyle,getItemStyle:this.props.getItemStyle,getRightIcon:this.props.getRightIcon,paddingOffset:this.props.paddingOffset,showLoader:this.props.showLoader}))}}]),n}(t().Component);_i(Li,"propTypes",{showRoot:U().bool,rootLabel:U().string,onNodeSelect:U().func,node:U().instanceOf(AjxpNode).isRequired,dataModel:U().instanceOf(PydioDataModel).isRequired,selectable:U().bool,selectableMultiple:U().bool,initialSelectionModel:U().array,onSelectionChange:U().func,forceExpand:U().bool,nodeIsSelected:U().func,showLoader:U().bool,checkboxes:U().array,checkboxesValues:U().object,checkboxesComputeStatus:U().func,onCheckboxCheck:U().func,paddingOffset:U().number}),_i(Li,"defaultProps",{showRoot:!0,onNodeSelect:Li.onNodeSelect});var Mi=function(e){bi(n,e);var r=wi(n);function n(){var e;yi(this,n);for(var t=arguments.length,o=new Array(t),i=0;i<t;i++)o[i]=arguments[i];return _i(Si(e=r.call.apply(r,[this].concat(o))),"nodeObserver",(function(){var t=e.props.dataModel.getRootNode();t.isLoaded()?e.forceUpdate():t.observeOnce("loaded",function(){this.forceUpdate()}.bind(Si(e)))})),_i(Si(e),"treeNodeSelected",(function(t){e.props.onNodeSelected?e.props.onNodeSelected(t):e.props.dataModel.requireContextChange(t)})),_i(Si(e),"nodeIsSelected",(function(t){return t===e.props.dataModel.getContextNode()})),e}return vi(n,[{key:"componentDidMount",value:function(){var e=this.props.dataModel;this._dmObs=this.nodeObserver,e.observe("context_changed",this._dmObs),e.observe("root_node_changed",this._dmObs),this.nodeObserver()}},{key:"componentWillUnmount",value:function(){if(this._dmObs){var e=this.props.dataModel;e.stopObserving("context_changed",this._dmObs),e.stopObserving("root_node_changed",this._dmObs)}}},{key:"render",value:function(){return this.props.draggable?t().createElement(Ii,{onNodeSelect:this.treeNodeSelected,nodeIsSelected:this.nodeIsSelected,dataModel:this.props.dataModel,node:this.props.rootNode||this.props.dataModel.getRootNode(),showRoot:!!this.props.showRoot,selectedItemStyle:this.props.selectedItemStyle,getItemStyle:this.props.getItemStyle,getRightIcon:this.props.getRightIcon,rootLabel:this.props.rootLabel,noPaginator:this.props.noPaginator,className:"folders-tree"+(this.props.className?" "+this.props.className:"")}):t().createElement(Li,{onNodeSelect:this.treeNodeSelected,nodeIsSelected:this.nodeIsSelected,dataModel:this.props.dataModel,node:this.props.rootNode||this.props.dataModel.getRootNode(),selectedItemStyle:this.props.selectedItemStyle,getItemStyle:this.props.getItemStyle,getRightIcon:this.props.getRightIcon,showRoot:!!this.props.showRoot,rootLabel:this.props.rootLabel,noPaginator:this.props.noPaginator,className:"folders-tree"+(this.props.className?" "+this.props.className:"")})}}]),n}(t().Component);function Di(e){return Di="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Di(e)}function Ai(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ni(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ai(Object(r),!0).forEach((function(t){Ui(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ai(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ui(e,t,r){return(t=Fi(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Bi(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Fi(n.key),n)}}function Fi(e){var t=function(e,t){if("object"!==Di(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==Di(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===Di(t)?t:String(t)}function qi(e,t){return qi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},qi(e,t)}function zi(e){return zi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},zi(e)}_i(Mi,"propTypes",{pydio:U().instanceOf(F()).isRequired,dataModel:U().instanceOf(PydioDataModel).isRequired,className:U().string,onNodeSelected:U().func,draggable:U().bool,rootLabel:U().string});var Wi=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qi(e,t)}(c,e);var r,n,o,i,a=(o=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=zi(o);if(i){var r=zi(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Di(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=a.call(this,e)).state={show:!1},t}return r=c,(n=[{key:"show",value:function(){this.setState({show:!0})}},{key:"hide",value:function(){this.setState({show:!1})}},{key:"render",value:function(){if(this.props.tooltip){var e,r={};this.props.label||this.props.labelElement?this.state.show&&(r={bottom:-10,top:"inherit"}):r={position:"relative"},this.props.label?e=t().createElement("span",{className:"ellipsis-label"},this.props.label):this.props.labelElement&&(e=this.props.labelElement);var n=this.props.style||{position:"relative"};return t().createElement("span",{onMouseEnter:this.show.bind(this),onMouseLeave:this.hide.bind(this),style:n,className:this.props.className},e,this.props.children,t().createElement("div",{label:this.props.tooltip,style:Ni(Ni({},r),{},{display:this.state.show?"block":"none"}),className:this.props.tooltipClassName}))}return this.props.label?t().createElement("span",null,this.props.label):this.props.labelElement?this.props.labelElement:t().createElement("span",null,this.props.children)}}])&&Bi(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),c}(t().Component);function Vi(e){return Vi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vi(e)}function Gi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Hi(e,t,r){return(t=Yi(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ji(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Yi(n.key),n)}}function Yi(e){var t=function(e,t){if("object"!==Vi(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==Vi(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===Vi(t)?t:String(t)}function Ki(e,t){return Ki=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ki(e,t)}function $i(e){return $i=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},$i(e)}var Xi=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ki(e,t)}(c,e);var r,n,o,i,a=(o=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=$i(o);if(i){var r=$i(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Vi(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function c(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),a.call(this,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Gi(Object(r),!0).forEach((function(t){Hi(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Gi(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({colorIndicator:""},e))}return r=c,(n=[{key:"render",value:function(){return t().createElement(v.Paper,{style:{display:"inline-block",marginLeft:16}},t().createElement("div",{className:"figure-badge",style:this.props.colorIndicator?{borderLeftColor:this.props.colorIndicator}:{}},t().createElement("div",{className:"figure"},this.props.figure),t().createElement("div",{className:"legend"},this.props.legend)))}}])&&Ji(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),c}(t().Component);const Qi=require("clipboard");var Zi=__webpack_require__.n(Qi);function ea(e){return ea="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ea(e)}function ta(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ra(e,t,r){return(t=oa(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function na(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,oa(n.key),n)}}function oa(e){var t=function(e,t){if("object"!==ea(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==ea(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===ea(t)?t:String(t)}function ia(e,t){return ia=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ia(e,t)}function aa(e){return aa=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},aa(e)}var ca=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ia(e,t)}(c,e);var r,n,o,i,a=(o=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=aa(o);if(i){var r=aa(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===ea(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=a.call(this,e)).state={copyMessage:null},t}return r=c,n=[{key:"componentDidMount",value:function(){this.attachClipboard()}},{key:"componentDidUpdate",value:function(){this.attachClipboard()}},{key:"attachClipboard",value:function(){this._clip&&this._clip.destroy(),this.refs["copy-button"]&&(this._clip=new(Zi())(this.refs["copy-button"],{text:function(e){return this.props.inputValue}.bind(this)}),this._clip.on("success",function(){this.setState({copyMessage:this.props.getMessage(this.props.inputCopyMessage||"192")},this.clearCopyMessage.bind(this))}.bind(this)),this._clip.on("error",function(){var e;e=0===__webpack_require__.g.navigator.platform.indexOf("Mac")?this.props.getMessage("144"):this.props.getMessage("143"),this.refs.input.focus(),this.setState({copyMessage:e},this.clearCopyMessage.bind(this))}.bind(this)))}},{key:"clearCopyMessage",value:function(){__webpack_require__.g.setTimeout(function(){this.setState({copyMessage:""})}.bind(this),3e3)}},{key:"render",value:function(){var e=null;if(this.state.copyMessage){var r=function(){return{__html:this.state.copyMessage}}.bind(this);e=t().createElement("div",{style:{color:"rgba(0,0,0,0.23)"},className:"copy-message",dangerouslySetInnerHTML:r()})}var n=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ta(Object(r),!0).forEach((function(t){ra(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ta(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({position:"absolute",right:-8,bottom:13,fontSize:15,color:this.props.buttonColor||"rgba(0, 150, 136, 0.52)",height:26,width:26,lineHeight:"28px",textAlign:"center",cursor:"pointer",borderRadius:"50%"},this.props.buttonStyle);return t().createElement("div",null,t().createElement("div",{style:{position:"relative"}},t().createElement(v.TextField,{fullWidth:!0,ref:"input",floatingLabelText:this.props.floatingLabelText,floatingLabelStyle:{whiteSpace:"nowrap"},underlineShow:this.props.underlineShow,defaultValue:this.props.inputValue,className:this.props.inputClassName,multiLine:this.props.multiLine,rows:this.props.rows,rowsMax:this.props.rowsMax,readOnly:!0,onClick:function(e){e.currentTarget.select()},style:{marginTop:-10,width:"92%",fontSize:14}}),t().createElement("span",{ref:"copy-button",style:n,title:this.props.getMessage("191"),className:"copy-button mdi mdi-content-copy"})),e)}}],n&&na(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),c}(t().Component);function sa(e){return sa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sa(e)}function ua(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function la(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ua(Object(r),!0).forEach((function(t){fa(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ua(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function fa(e,t,r){return(t=ya(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pa(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function da(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ya(n.key),n)}}function ha(e,t,r){return t&&da(e.prototype,t),r&&da(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function ya(e){var t=function(e,t){if("object"!==sa(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==sa(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===sa(t)?t:String(t)}function ma(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&va(e,t)}function va(e,t){return va=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},va(e,t)}function ba(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=ga(e);if(t){var o=ga(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===sa(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function ga(e){return ga=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ga(e)}var wa=F().requireLib("hoc"),Sa=wa.PlaceHolder,Oa=wa.PhRoundShape,Pa=wa.PhTextRow,ka=function(e){ma(n,e);var r=ba(n);function n(){return pa(this,n),r.apply(this,arguments)}return ha(n,[{key:"render",value:function(){var e=this.props,r=e.iconClassName,n=e.legend,o=e.data,i=e.dataStyle,a=e.legendStyle,c=e.iconStyle,s=e.placeHolder,u=e.placeHolderReady,l={icon:la({margin:"16px 20px 0"},c),legend:la({fontSize:12,color:"#aaaaaa",fontWeight:500},a),data:la({fontSize:15,paddingRight:6,overflow:"hidden",textOverflow:"ellipsis"},i)},f=t().createElement("div",{style:la({display:"flex",marginBottom:8,overflow:"hidden"},this.props.style)},t().createElement("div",{style:{width:64}},t().createElement(v.FontIcon,{color:"#aaaaaa",className:r,style:l.icon})),t().createElement("div",{style:{flex:1}},t().createElement("div",{style:l.legend},n),t().createElement("div",{style:l.data},o)));if(s){var p=t().createElement("div",{style:la({display:"flex",marginBottom:16,overflow:"hidden"},this.props.style)},t().createElement("div",{style:{width:64}},t().createElement(Oa,{style:{width:35,height:35,margin:"10px 15px 0"}})),t().createElement("div",{style:{flex:1}},t().createElement("div",{style:la(la({},l.legend),{},{maxWidth:100})},t().createElement(Pa,null)),t().createElement("div",{style:la(la({},l.data),{},{marginRight:24})},t().createElement(Pa,{style:{height:"1.3em",marginTop:"0.4em"}}))));return t().createElement(Sa,{ready:u,showLoadingAnimation:!0,customPlaceholder:p},f)}return f}}]),n}(t().Component),_a=function(e){ma(n,e);var r=ba(n);function n(){return pa(this,n),r.apply(this,arguments)}return ha(n,[{key:"render",value:function(){var e=this.props,r=e.title,n=(e.popoverPanel,e.onDismissAction),o=e.onEditAction,i=e.onDeleteAction,a=e.otherActions,c=e.moreMenuItems,s=e.children,u=e.muiTheme,l=e.style,f=e.headerSmall,p=e.editTooltip,d=e.deleteTooltip,h=e.editColor,y=u.palette.mui3["secondary-container"],m=u.palette.mui3["on-secondary-container"],b={headerHeight:100,buttonBarHeight:60,headerBg:y,headerColor:m,buttonBar:{display:"flex",height:60},fabTop:80,button:{style:{},iconStyle:{color:m}}};return f&&(b={headerHeight:"auto",headerBg:y,headerColor:m,buttonBar:{display:"flex",alignItems:"center",height:42,padding:"0 7px 0 16px"},fabTop:60,button:{style:{width:38,height:38,padding:9},iconStyle:{color:m,fontSize:18}}}),t().createElement("div",{style:la({width:"100%",position:"relative"},l)},o&&!f&&t().createElement(v.FloatingActionButton,{onClick:o,backgroundColor:h,mini:!0,style:{position:"absolute",top:b.fabTop,left:10}},t().createElement(v.FontIcon,{className:"mdi mdi-pencil"})),t().createElement(v.Paper,{zDepth:0,style:{backgroundColor:b.headerBg,color:b.headerColor,height:b.headerHeight,borderRadius:"2px 2px 0 0"}},t().createElement("div",{style:b.buttonBar},f&&t().createElement("span",{style:{flex:1,fontSize:14,fontWeight:500}},r),!f&&t().createElement("span",{style:{flex:1}}),o&&f&&t().createElement(v.IconButton,{style:b.button.style,iconStyle:b.button.iconStyle,iconClassName:"mdi mdi-pencil",onClick:o,tooltip:p,tooltipPosition:"bottom-left"}),i&&t().createElement(v.IconButton,{style:b.button.style,iconStyle:b.button.iconStyle,iconClassName:"mdi mdi-delete",onClick:i,tooltip:d,tooltipPosition:"bottom-left"}),a,c&&c.length>0&&t().createElement(v.IconMenu,{anchorOrigin:{vertical:"top",horizontal:f?"right":"left"},targetOrigin:{vertical:"top",horizontal:f?"right":"left"},iconButtonElement:t().createElement(v.IconButton,{style:b.button.style,iconStyle:b.button.iconStyle,iconClassName:"mdi mdi-dots-vertical"})},c),n&&t().createElement(v.IconButton,{style:b.button.style,iconStyle:b.button.iconStyle,iconClassName:"mdi mdi-close",onClick:n})),!f&&t().createElement("div",{style:{paddingLeft:o?64:20,fontSize:20}},r)),t().createElement("div",{style:{paddingTop:12,paddingBottom:8}},s))}}]),n}(t().Component);function Ea(e){return Ea="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ea(e)}function ja(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ca(n.key),n)}}function Ca(e){var t=function(e,t){if("object"!==Ea(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==Ea(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===Ea(t)?t:String(t)}function Ta(e,t){return Ta=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ta(e,t)}function xa(e){return xa=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},xa(e)}_a=(0,J.muiThemeable)()(_a);var Ra=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ta(e,t)}(c,e);var r,n,o,i,a=(o=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=xa(o);if(i){var r=xa(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Ea(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function c(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),a.apply(this,arguments)}return r=c,(n=[{key:"render",value:function(){var e=this.props.node,r=parseInt(e.getMetadata().get("ws_quota_usage")),n=parseInt(e.getMetadata().get("ws_quota"));r=Math.min(r,n);var o=Math.round(r/n*100),i="#4caf50";o>90?i="#e53935":o>60&&(i="#ff9800");var a=F().getMessages()["workspace.quota-usage"]+" ("+pe().roundFileSize(n)+")",c=t().createElement("div",{style:{borderRadius:4,display:"flex",marginRight:25,alignItems:"center",marginTop:5,backgroundColor:"#f5f5f5",padding:"7px 8px"}},t().createElement("div",{style:{flex:1,paddingRight:12}},t().createElement(v.LinearProgress,{mode:"determinate",min:0,max:n,value:r,color:i})),t().createElement("div",{style:{color:"#bdbdbd",fontWeight:500,fontSize:18}},o,"%"));return t().createElement(ka,{iconClassName:"mdi mdi-gauge",legend:a,data:c,iconStyle:{marginTop:30}})}}])&&ja(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),c}(t().Component);function Ia(e){return Ia="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ia(e)}var La=["style","titleStyle","iconStyleRight","iconStyleLeft"];function Ma(){return Ma=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ma.apply(this,arguments)}function Da(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Aa(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Da(Object(r),!0).forEach((function(t){Na(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Da(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Na(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==Ia(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==Ia(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===Ia(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ua(e){return Ua="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ua(e)}function Ba(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Fa(n.key),n)}}function Fa(e){var t=function(e,t){if("object"!==Ua(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==Ua(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===Ua(t)?t:String(t)}function qa(e,t){return qa=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},qa(e,t)}function za(e){return za=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},za(e)}var Wa={node:U().instanceOf(AjxpNode).isRequired,registry:U().instanceOf(Registry).isRequired,editorData:U().object.isRequired,icon:U().bool},Va=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qa(e,t)}(c,e);var r,n,o,i,a=(o=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=za(o);if(i){var r=za(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Ua(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=a.call(this,e)).state={ready:!1},t}return r=c,(n=[{key:"componentDidMount",value:function(){var e=this,t=this.props,r=t.editorData;t.registry.loadEditorResources(r.resourcesManager,(function(){return e.setState({ready:!0})}))}},{key:"render",value:function(){var e,r=this.props.editorData;return this.state.ready?(e=FuncUtils.getFunctionByName(r.editorClass,window))?t().createElement(e.Editor,this.props):t().createElement("div",null,"Cannot find editor component ("+r.editorClass+")!"):null}}])&&Ba(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),c}(t().Component);Va.propTypes=Wa,Va.defaultProps={icon:!1};const Ga=Va;var Ha=__webpack_require__(62610),Ja=__webpack_require__.n(Ha),Ya=__webpack_require__(13674),Ka=__webpack_require__.n(Ya);function $a(e){return $a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$a(e)}function Xa(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Qa(n.key),n)}}function Qa(e){var t=function(e,t){if("object"!==$a(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==$a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===$a(t)?t:String(t)}function Za(e,t){return Za=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Za(e,t)}function ec(e){return ec=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ec(e)}var tc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Za(e,t)}(a,Observable);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ec(n);if(o){var r=ec(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===$a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(e,t,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this))._namespace=e,n._pydio=r,n._cards=n.getUserPreference("Cards"),n._cards||(n._cards=t),n}return t=a,r=[{key:"getUserPreference",value:function(e){var t=this._namespace+e,r=this._pydio.user.getPreference("gui_preferences",!0);return r&&r[t]?r[t]:null}},{key:"saveUserPreference",value:function(e,t){var r=this._namespace+e,n=this._pydio.user.getPreference("gui_preferences",!0);n||(n={}),n[r]=t,this._pydio.user.setPreference("gui_preferences",n,!0),this._pydio.user.savePreference("gui_preferences")}},{key:"saveCards",value:function(e){this.saveUserPreference("Cards",e)}},{key:"resetCards",value:function(){this.saveUserPreference("Cards",null)}},{key:"setCards",value:function(e){this._cards=e,this.notify("cards",this._cards),this.saveCards(e)}},{key:"getCards",value:function(){return this._cards}},{key:"removeCard",value:function(e){var t,r=-1,n=this.getCards();n.map((function(t,n){t.id==e&&(r=n)})),-1!=r?(t=0==r?n.slice(1):r==n.length-1?n.slice(0,-1):n.slice(0,r).concat(n.slice(r+1)),this.setCards(t)):console.warn("Card ID not found, this is strange.",e)}},{key:"createCardId",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=LangUtils.computeStringSlug(e.title);t&&(r+="-"+Math.round(100*Math.random()+10));var n=!1;return this._cards.map(function(e){e.id==r&&(n=!0)}.bind(this)),n&&(r=this.createCardId(e,!0)),r}},{key:"addCard",value:function(e){e.id=this.createCardId(e),this.setCards(this._cards.concat([e]))}}],r&&Xa(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}();function rc(e){return rc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rc(e)}function nc(){return nc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},nc.apply(this,arguments)}function oc(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ic(n.key),n)}}function ic(e){var t=function(e,t){if("object"!==rc(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==rc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===rc(t)?t:String(t)}function ac(e,t){return ac=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ac(e,t)}function cc(e){return cc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},cc(e)}var sc=__webpack_require__(16689),uc=__webpack_require__(10757).requireLib("boot"),lc=uc.PydioContextConsumer,fc=uc.AsyncComponent,pc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ac(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=cc(n);if(o){var r=cc(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===rc(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).state={selectedIndex:0,availableWidgets:t.listAvailableWidgets()},t}return t=a,r=[{key:"listAvailableWidgets",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=[],r=[];return this.props.namespaces.map((function(e){if(__webpack_require__.g[e]){for(var n in __webpack_require__.g[e])if(__webpack_require__.g[e].hasOwnProperty(n)){var o=__webpack_require__.g[e][n];o.hasBuilderFields&&o.hasBuilderFields()&&t.push({reactClass:o,fullName:e+"."+o.displayName})}}else r.push(e)})),r.length&&!e&&ResourcesManager.loadClassesAndApply(r,function(){this.setState({availableWidgets:this.listAvailableWidgets(!0)})}.bind(this)),t}},{key:"onDropDownChange",value:function(e,t,r){var n={};0!=t&&r.payload.reactClass.getBuilderFields().map((function(e){e.default&&(n[e.name]=e.default)})),this.props.onEditStatusChange&&this.props.onEditStatusChange(0!=t),this.setState({selectedIndex:t,selectedWidget:r.payload,currentFormValues:n})}},{key:"cancel",value:function(){this.props.onEditStatusChange&&this.props.onEditStatusChange(!1),this.setState({selectedIndex:0})}},{key:"onFormValueChange",value:function(e){this.setState({currentFormValues:e})}},{key:"onFormSubmit",value:function(){var e=this.state.currentFormValues,t=this.state.selectedWidget,r=e.title?e.title:e.legend;r||(r=this.state.selectedWidget.reactClass.builderDisplayName),this.props.onCreateCard({componentClass:t.fullName,title:r,props:e}),this.cancel()}},{key:"resetLayout",value:function(){window.confirm(this.props.getMessage("home.51"))&&this.props.onResetLayout()}},{key:"render",value:function(){var e,t,r=this.props.getMessage,n=([{payload:0,text:r("home.50")}].concat(this.state.availableWidgets.map((function(e,t){return{payload:e,text:e.reactClass.builderDisplayName}}))),sc.createElement("div",null,"DropDownMenu (to be re-implemented)"));if(0!==this.state.selectedIndex){var o=this.state.selectedWidget.reactClass.getBuilderFields(),i={};o.map((function(e){e.default&&(i[e.name]=e.default)})),this.state.currentFormValues&&(i=LangUtils.mergeObjectsRecursive(i,this.state.currentFormValues)),e=sc.createElement(fc,{namespace:"PydioForm",componentName:"FormPanel",parameters:o,depth:-1,values:i,onChange:this.onFormValueChange}),t=sc.createElement("div",{style:{textAlign:"center",paddingBottom:100}},sc.createElement(v.RaisedButton,{label:r("home.52"),onClick:this.onFormSubmit})," ",sc.createElement(v.RaisedButton,{label:r("54",""),onClick:this.cancel}))}return sc.createElement(v.Paper,nc({},this.props,{zDepth:3}),sc.createElement("h3",null,r("home.53")),sc.createElement("div",{className:"legend"},r("home.54"),sc.createElement("br",null),r("home.55")),n,e,t,sc.createElement("div",{style:{position:"absolute",bottom:30,left:10}},sc.createElement(v.FlatButton,{disabled:0!=this.state.selectedIndex,label:r("home.56"),secondary:!0,onClick:this.resetLayout})))}}],r&&oc(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(sc.Component);function dc(e){return dc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dc(e)}function hc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function yc(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?hc(Object(r),!0).forEach((function(t){mc(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hc(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function mc(e,t,r){return(t=wc(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bc(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,wc(n.key),n)}}function gc(e,t,r){return t&&bc(e.prototype,t),r&&bc(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function wc(e){var t=function(e,t){if("object"!==dc(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==dc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===dc(t)?t:String(t)}function Sc(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Oc(e,t)}function Oc(e,t){return Oc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Oc(e,t)}function Pc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=_c(e);if(t){var o=_c(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===dc(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return kc(e)}(this,r)}}function kc(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _c(e){return _c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_c(e)}pc=lc(pc);var Ec=__webpack_require__(16689),jc=__webpack_require__(10757).requireLib("boot").PydioContextConsumer,Cc=function(e){Sc(r,e);var t=Pc(r);function r(e,n){var o;return vc(this,r),(o=t.call(this,e,n))._storeObserver=function(t){var r=this;this._forceUpdate=!0,this.setState({cards:e.store.getCards()},(function(){r._forceUpdate=!1}))}.bind(kc(o)),e.store.observe("cards",o._storeObserver),o.state={cards:e.store.getCards()},o.requests=[],o.throttle=It().getThrottler({concurrent:6}),o.restClient=It().getRestClient({silent:!0,plugins:[o.throttle.plugin(),function(e){return o.requests.push(e),e}]}),__webpack_require__.e(597).then(__webpack_require__.t.bind(__webpack_require__,25993,23)).then((function(e){o.setState({rgl:e.default})})),o}return gc(r,[{key:"saveFullLayouts",value:function(e){var t={};Object.keys(e).forEach((function(r){t[r]=e[r].map((function(e){return{i:e.i,h:e.h,w:e.w,x:e.x,y:e.y}}))}));var r=this.props.store.getUserPreference("Layout");Ka()(r,t)||this.props.store.saveUserPreference("Layout",t)}},{key:"onLayoutChange",value:function(e,t){this._blockLayoutSave||this.saveFullLayouts(t)}},{key:"componentWillUnmount",value:function(){this.props.store.stopObserving("cards",this._storeObserver),this.throttle.options({active:!1}),this.requests.filter((function(e){return e.xhr})).map((function(e){return e.xhr.abort()}))}},{key:"componentWillReceiveProps",value:function(e){this.props&&e.editMode!==this.props.editMode&&Object.keys(this.refs).forEach(function(t){this.refs[t].toggleEditMode(e.editMode)}.bind(this))}},{key:"shouldComponentUpdate",value:function(e,t){return this._forceUpdate||t.rgl!==this.state.rgl||!1}},{key:"removeCard",value:function(e){this.props.removeCard(e)}},{key:"buildCards",value:function(e){var t=this,r=0,n={lg:[],md:[],sm:[],xs:[],xxs:[]},o=[],i=[],a=(Math.random(),this.props.store.getUserPreference("Layout")),c=function(e,t,r,n,o){var i=e.getGridLayout(n,o);return i.handle="h4",r.gridHandle&&(i.handle=r.gridHandle),i.i=t,i};return e.map((function(e){var s,u=e.componentClass.split("."),l=u[0],f=u[1];if(__webpack_require__.g[l]&&__webpack_require__.g[l][f]){s=__webpack_require__.g[l][f];var p=yc({},e.props),d=p.key=e.id||"item_"+r;p.ref=d,p.restClient=t.restClient,p.pydio=t.props.pydio,p.onCloseAction=function(){t.removeCard(d)},p.preferencesProvider=t.props.store;var h=0,y=0;e.defaultPosition&&(h=e.defaultPosition.x,y=e.defaultPosition.y);var m=c(s,d,e,h,y);for(var v in n)if(n.hasOwnProperty(v)){var b,g=n[v];if(a&&a[v]&&a[v].map((function(e){e.i===d&&e.h===m.h&&(b=e)})),b)g.push(b);else if(e.defaultLayouts&&e.defaultLayouts[v]){var w=c(s,d,e,e.defaultLayouts[v].x,e.defaultLayouts[v].y);g.push(w)}else g.push(m)}r++,o.push(Ec.createElement(s,p))}else __webpack_require__.g[l]||i.push(l)})),i.length&&(this._blockLayoutSave=!0,Ja().loadClassesAndApply(i,function(){this.setState({additionalNamespacesLoaded:i},function(){this._blockLayoutSave=!1}.bind(this))}.bind(this))),{cards:o,layouts:n}}},{key:"render",value:function(){var e=this.state.rgl;if(!e)return null;var t=this.buildCards(this.state.cards),r=t.cards,n=t.layouts,o=e.Responsive,i=(0,e.WidthProvider)(o);return Ec.createElement(i,{className:"dashboard-layout",cols:this.props.cols||{lg:10,md:8,sm:8,xs:4,xxs:2},layouts:n,rowHeight:5,onLayoutChange:this.onLayoutChange.bind(this),isDraggable:!this.props.disableDrag,style:this.props.style,autoSize:!1},r)}}]),r}(Ec.Component),Tc=function(e){Sc(r,e);var t=Pc(r);function r(e){var n;vc(this,r),n=t.call(this,e);var o=new tc(e.storeNamespace,e.defaultCards,e.pydio);return n.state={editMode:!1,store:o},n}return gc(r,[{key:"removeCard",value:function(e){this.state.store.removeCard(e)}},{key:"addCard",value:function(e){this.state.store.addCard(e)}},{key:"resetCardsAndLayout",value:function(){this.state.store.saveUserPreference("Layout",null),this.state.store.setCards(this.props.defaultCards)}},{key:"toggleEditMode",value:function(){this.setState({editMode:!this.state.editMode})}},{key:"render",value:function(){var e,t=this,r=function(e){this.setState({widgetEditing:e})}.bind(this);this.props.builderNamespaces&&this.state.editMode&&(e=Ec.createElement(pc,{className:"admin-helper-panel",namespaces:this.props.builderNamespaces,onCreateCard:this.addCard.bind(this),onResetLayout:this.resetCardsAndLayout.bind(this),onEditStatusChange:r,getMessage:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ajxp_admin";return t.props.getMessage(e,r)}}));var n=this.props.rglStyle||{};return Ec.createElement("div",{style:yc(yc({},this.props.style),{},{width:"100%",flex:"1"}),className:this.state.editMode?"builder-open":""},!this.props.disableEdit&&Ec.createElement("div",{style:{position:"absolute",bottom:30,right:18,zIndex:11}},Ec.createElement(v.FloatingActionButton,{tooltip:this.props.getMessage("home.49"),onClick:this.toggleEditMode.bind(this),iconClassName:this.state.editMode?"mdi mdi-check":"mdi mdi-pencil",mini:this.state.editMode,disabled:this.state.editMode&&this.state.widgetEditing})),e,Ec.createElement("div",{className:"home-dashboard",style:{height:"100%"}},Ec.createElement(Cc,{disableDrag:this.props.disableDrag,cols:this.props.cols,store:this.state.store,style:n,pydio:this.props.pydio,editMode:this.state.editMode,removeCard:this.removeCard.bind(this)})))}}]),r}(Ec.Component);function xc(e){return xc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xc(e)}function Rc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ic(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Rc(Object(r),!0).forEach((function(t){Lc(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Rc(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Lc(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==xc(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==xc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===xc(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Tc=jc(Tc);const Mc={propTypes:{showCloseAction:U().bool,onCloseAction:U().func},focusItem:function(){this.setState({focus:!0})},blurItem:function(){this.setState({focus:!1})},mergeStyleWithFocus:function(){return Ic(Ic({},this.props.style),{},{zIndex:this.state.focus?1:null})},getInitialSate:function(){return{focus:!1,showCloseAction:!1}},toggleEditMode:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;void 0===e?this.setState({showCloseAction:!(this.state&&this.state.showCloseAction)}):this.setState({showCloseAction:e})},getCloseButton:function(){if(this.state&&this.state.showCloseAction){var e=this.props.onCloseAction||function(){};return React.createElement("div",{style:{position:"absolute",backgroundColor:"rgba(0,0,0,0.53)",zIndex:10,top:0,left:0,bottom:0,right:0,display:"flex",alignItems:"center",justifyContent:"center"}},React.createElement(v.FlatButton,{label:F().getInstance().MessageHash["ajxp_admin.home.48"],className:"card-close-button",onClick:e,style:{color:"white"}}))}return null},statics:{getGridLayout:function(e,t){return{x:e||0,y:t||0,w:this.gridWidth||4,h:this.gridHeight||12,isResizable:!1}},hasBuilderFields:function(){return!!this.builderFields},getBuilderFields:function(){return this.builderFields}}};function Dc(e){return Dc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dc(e)}function Ac(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Nc(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ac(Object(r),!0).forEach((function(t){Uc(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ac(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Uc(e,t,r){return(t=Fc(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Bc(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Fc(n.key),n)}}function Fc(e){var t=function(e,t){if("object"!==Dc(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==Dc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===Dc(t)?t:String(t)}function qc(e,t){return qc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},qc(e,t)}function zc(e){return zc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},zc(e)}var Wc=__webpack_require__(580),Vc=__webpack_require__(16689).Component,Gc=__webpack_require__(39455).FlatButton,Hc=__webpack_require__(13173).muiThemeable;function Jc(e){return Jc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jc(e)}function Yc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Kc(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Yc(Object(r),!0).forEach((function(t){$c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Yc(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function $c(e,t,r){return(t=Zc(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Xc(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Qc(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Zc(n.key),n)}}function Zc(e){var t=function(e,t){if("object"!==Jc(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==Jc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===Jc(t)?t:String(t)}function es(e,t){return es=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},es(e,t)}function ts(e){return ts=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ts(e)}var rs=F().requireLib("boot").PydioContextConsumer,ns=F().requireLib("hoc").ModernSelectField,os=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&es(e,t)}(c,e);var r,n,o,i,a=(o=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ts(o);if(i){var r=ts(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Jc(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function c(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),a.apply(this,arguments)}return r=c,n=[{key:"render",value:function(){var e,r,n,o=this.props,i=o.item,a=o.paginatorCallback,c=o.paginatorType,s=o.style,u=o.getMessage,l=o.paginatorLabel;if(i.pagination){for(var f=i.pagination,p=f.start,d=f.max,h=f.interval,y=Math.ceil(d/h),m=Math.ceil(p/h),b=[],g=0;g<y;g++)b.push(g);e=t().createElement(v.MuiThemeProvider,{muiTheme:(0,J.getMuiTheme)({zIndex:{layer:3e3,popover:3001}})},t().createElement(ns,{floatingLabelText:u(331),style:{width:60},dropDownMenuProps:{anchorOrigin:{vertical:"center",horizontal:"right"}},fullWidth:!0,value:m,onChange:function(e,t,r){a(r*h+"-"+(r+1)*h)}},b.map((function(e){return t().createElement(v.MenuItem,{value:e,key:e,primaryText:e+1})}))))}if("alpha"===c){var w="abcdefghijklmnopqrstuvwxyz0123456789".split("");w=[-1].concat(function(e){if(Array.isArray(e))return Xc(e)}(n=w)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(n)||function(e,t){if(e){if("string"==typeof e)return Xc(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Xc(e,t):void 0}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());var S=i.currentParams&&i.currentParams.alpha_pages&&i.currentParams.value||-1;r=t().createElement(v.MuiThemeProvider,{muiTheme:(0,J.getMuiTheme)({zIndex:{layer:3e3,popover:3001}})},t().createElement(ns,{floatingLabelText:u(625),style:{width:60,marginLeft:8},dropDownMenuProps:{anchorOrigin:{vertical:"center",horizontal:"right"}},fullWidth:!0,value:S,onChange:function(e,t,r){a(r)}},w.map((function(e){return t().createElement(v.MenuItem,{value:e,key:e,primaryText:-1===e?u(597,""):e})}))))}return t().createElement("div",{style:Kc(Kc({},s),{},{display:"flex",paddingRight:8,alignItems:"center"})},t().createElement("div",{style:{flex:1,height:20}},l||u(249,"")),e,r)}}],n&&Qc(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),c}(e.Component);os.propTypes={item:U().object,paginatorCallback:U().func.isRequired,pydio:U().instanceOf(F()),mode:U().oneOf(["book","selector","popover"]).isRequired},os=rs(os),os=(0,J.muiThemeable)()(os);var is=__webpack_require__(4305),as=__webpack_require__.n(is);function cs(e){return cs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cs(e)}function ss(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function us(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ss(Object(r),!0).forEach((function(t){ls(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ss(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ls(e,t,r){return(t=ps(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fs(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ps(n.key),n)}}function ps(e){var t=function(e,t){if("object"!==cs(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==cs(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===cs(t)?t:String(t)}function ds(e,t){return ds=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ds(e,t)}function hs(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ys(e){return ys=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ys(e)}var ms=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ds(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ys(n);if(o){var r=ys(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===cs(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return hs(e)}(this,e)});function a(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(r=i.call(this,e,t)).state={value:""},r.search=as()(r.search.bind(hs(r)),300),r}return t=a,r=[{key:"search",value:function(){this.props.onSearch(this.state.value)}},{key:"onChange",value:function(e,t){this.setState({value:t}),this.search()}},{key:"render",value:function(){var e=this.props,t=e.underlineShow,r=e.searchLabel,n=e.style,o=e.inputStyle,i=e.underlineStyle,a=e.underlineFocusStyle,c=e.hintStyle,s=this.state.value;return React.createElement("div",{style:us({minWidth:320},n)},React.createElement(v.TextField,{fullWidth:!0,value:s,onChange:this.onChange.bind(this),hintText:r,inputStyle:o,hintStyle:c,underlineStyle:i,underlineFocusStyle:a,underlineShow:void 0===t||t}))}}],r&&fs(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(e.Component);ms.propTypes={searchLabel:U().string.isRequired,onSearch:U().func.isRequired,style:U().object,underlineShow:U().bool};const vs=require("pydio/model/idm-object-helper");var bs=__webpack_require__.n(vs);const gs=require("pydio/model/cell");var ws=__webpack_require__.n(gs);function Ss(e){return Ss="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ss(e)}function Os(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ps(n.key),n)}}function Ps(e){var t=function(e,t){if("object"!==Ss(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==Ss(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===Ss(t)?t:String(t)}const ks=function(){function e(t,r,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.props={pydio:t,cellModel:r,acl:n,addressBookItem:o}}var t,r;return t=e,(r=[{key:"createCell",value:function(){var e,t=this.props,r=t.addressBookItem,n=t.pydio,o=n.MessageHash;r.IdmUser?e=r.IdmUser:r.IdmRole&&(e=r.IdmRole),e&&n.user.getIdmUser().then((function(t){var i=bs().extractLabelFromIdmObject(t),a=bs().extractLabelFromIdmObject(r.IdmUser||r.IdmRole),c=new(ws());c.setLabel(i+", "+a),c.setDescription("Created by "+i),c.addUser(e),c.save().then((function(e){n.UI.displayMessage("SUCCESS",o[643].replace("%s",a))})).catch((function(e){n.UI.displayMessage("ERROR",o[644].replace("%s",e.message))}))}))}},{key:"addToCell",value:function(){var e,t=this.props,r=t.addressBookItem,n=t.cellModel;r.IdmUser?e=r.IdmUser:r.IdmRole&&(e=r.IdmRole),e&&(n.addUser(e),n.save())}},{key:"removeFromCell",value:function(){var e=this.props,t=e.acl,r=e.cellModel;r.removeUser(t.RoleId),r.save()}},{key:"renderItems",value:function(){var e,t,r,n=this.props,o=n.pydio,i=n.cellModel,a=n.acl,c=n.addressBookItem,s=o.MessageHash,u=[];if(a?a.User&&a.User.Login===o.user.id:"user"===t&&o.user.id===e)return u;if(c&&(e=c.id,"group"===(t=c.type)&&c.IdmRole&&(e=c.IdmRole.Uuid,t="team")),r=a?bs().extractLabel(o,a):c.label,!0===i)return o.getPluginConfigs("auth").get("USER_CREATE_CELLS")?[React.createElement(v.MenuItem,{primaryText:s[640].replace("%s",r),onClick:this.createCell.bind(this)})]:[];var l,f=i.isEditable(),p=i.getAcls();return Object.keys(p).map((function(r){var n=p[r];(a?a.RoleId===n.RoleId:"user"===t&&n.User&&n.User.Login===e||"group"===t&&n.Group&&n.Group.Uuid===e||"team"===t&&n.Role&&n.Role.Uuid===e)&&(l=!0)})),l?u.push(React.createElement(v.MenuItem,{primaryText:s[641],disabled:!f,onClick:this.removeFromCell.bind(this)})):u.push(React.createElement(v.MenuItem,{primaryText:s[642],disabled:!f,onClick:this.addToCell.bind(this)})),o.getPluginConfigs("auth").get("USER_CREATE_CELLS")&&u.push(React.createElement(v.Divider,null),React.createElement(v.MenuItem,{primaryText:s[640].replace("%s",r),onClick:this.createCell.bind(this)})),u}}])&&Os(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),_s={list:{},listItem:{style:{fontSize:13},innerDivStyle:{padding:"10px 56px 10px 62px"}},avatar:{avatarSize:26,style:{top:5}},iconMenu:{style:{top:4,right:8}},iconButton:{style:{width:26,height:26,padding:5,right:8},iconStyle:{color:"rgba(0,0,0,.33)",fontSize:20}},divider:{style:{marginLeft:62}}};function Es(e){return Es="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Es(e)}function js(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Cs(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?js(Object(r),!0).forEach((function(t){Ts(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):js(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ts(e,t,r){return(t=Ms(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xs(e){return function(e){if(Array.isArray(e))return Rs(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Rs(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Rs(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rs(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Is(){return Is=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Is.apply(this,arguments)}function Ls(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ms(n.key),n)}}function Ms(e){var t=function(e,t){if("object"!==Es(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==Es(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===Es(t)?t:String(t)}function Ds(e,t){return Ds=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ds(e,t)}function As(e){return As=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},As(e)}var Ns=__webpack_require__(10757).requireLib("boot"),Us=Ns.Loader,Bs=Ns.PydioContextConsumer,Fs=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ds(e,t)}(c,e);var r,n,o,i,a=(o=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=As(o);if(i){var r=As(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Es(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function c(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(r=a.call(this,e,t)).state={select:!1,selection:[],editLabel:!1},r}return r=c,n=[{key:"onLabelKeyEnter",value:function(e){"Enter"===e.key&&this.updateLabel()}},{key:"onLabelChange",value:function(e,t){this.setState({label:t})}},{key:"updateLabel",value:function(){this.state.label!==this.props.item.label&&this.props.onEditLabel(this.props.item,this.state.label),this.setState({editLabel:!1})}},{key:"render",value:function(){var e,r=this,n=this.props,o=n.item,i=n.mode,a=n.paginatorType,c=n.paginatorFolder,s=n.loading,u=n.enableSearch,l=n.showSubheaders,f=n.getMessage,p=n.actionsPanel,d=n.muiTheme,h=n.bookColumn,y=n.pydio,m=n.reloadAction,b=this.props.listStyles,g=void 0===b?{}:b;"selector"!==i&&"inner"!==i||(g=_s,e="compact");var w=g.avatar?g.avatar.avatarSize:36,S=o.collections||[],O=o.leafs||[],P=[],k=[];c?P.push({subheader:t().createElement(os,Is({},this.props,{style:{lineHeight:"20px",padding:"14px 0"}}))}):S.length&&(O.length||l)&&P.push({subheader:f("532")}),a?k.push({subheader:t().createElement(os,Is({},this.props,{style:{lineHeight:"20px",padding:"14px 0"}}))}):l&&k.push({subheader:f("249")});var _=[].concat(P,xs(S),k,xs(O)),E=_.length,j=[],C=function(){r.props.onCreateAction(o)},T=d.palette.accent2Color,x=d.appBar,R={toolbarHeight:"book"===i?56:48,toolbarBgColor:"book"===i?this.state.select?T:"#fafafa":x.color,titleFontsize:"book"===i?20:16,titleFontWeight:400,titleColor:"book"===i?this.state.select?"white":"rgba(0,0,0,0.87)":x.textColor,titlePadding:10,button:{border:"1px solid "+T,borderRadius:"50%",margin:"0 4px",width:36,height:36,padding:6},icon:{fontSize:22,color:T}};if(h){var I=K()(d.palette.primary1Color).hsl().array()[0],L=new(K())({h:I,s:30,l:43});R.toolbarBgColor="transparent",R.titleColor=L.toString(),R.titleFontsize=14,R.titleFontWeight=500,R.titlePadding="10px 6px 10px 16px",R.button.margin="0",R.button.border="0",R.icon.color="#ccc"}var M={style:{flex:1,minWidth:110}};"selector"===i&&(M.inputStyle={color:"white"},M.hintStyle={color:"rgba(255,255,255,.5)"},M.underlineStyle={borderColor:"rgba(255,255,255,.5)"},M.underlineFocusStyle={borderColor:"white"});var D=o.label;this.props.onEditLabel&&!this.state.select&&(D=this.state.editLabel?t().createElement("div",{style:{display:"flex",alignItems:"center",flex:1}},t().createElement(v.TextField,{style:{fontSize:20},value:this.state.label,onChange:this.onLabelChange.bind(this),onKeyDown:this.onLabelKeyEnter.bind(this)}),t().createElement(v.IconButton,{iconStyle:{color:"#e0e0e0"},secondary:!0,iconClassName:"mdi mdi-content-save",tooltip:f(48),onClick:function(){r.updateLabel()}})):t().createElement("div",{style:{display:"flex",alignItems:"center",flex:1}},D,t().createElement(v.IconButton,{iconStyle:{color:"#e0e0e0"},iconClassName:"mdi mdi-pencil",tooltip:f(48),onClick:function(){r.setState({editLabel:!0,label:o.label})}})));var A="mdi mdi-account-plus";o.actions&&"teams"===o.actions.type&&(A="mdi mdi-account-multiple-plus");var N,U=t().createElement("div",{style:{padding:R.titlePadding,height:R.toolbarHeight,minHeight:R.toolbarHeight,backgroundColor:R.toolbarBgColor,borderRadius:"2px 2px 0 0",display:"flex",alignItems:"center",transition:he().getBeziersTransition()}},"selector"===i&&o._parent&&t().createElement(v.IconButton,{style:{marginLeft:-10},iconStyle:{color:R.titleColor},iconClassName:"mdi mdi-chevron-left",onClick:function(){r.props.onFolderClicked(o._parent)}}),"book"===i&&E>0&&o.actions&&o.actions.multiple&&t().createElement(v.Checkbox,{style:{width:"initial",marginLeft:this.state.select?7:14},checked:this.state.select,onCheck:function(){r.setState({select:!r.state.select,selection:[]})}}),t().createElement("div",{style:Cs({flex:2,fontSize:R.titleFontsize,color:R.titleColor,fontWeight:R.titleFontWeight},{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"})},D),("book"===i||"selector"===i&&h)&&o.actions&&o.actions.create&&!this.state.select&&t().createElement(v.IconButton,{style:R.button,iconStyle:R.icon,iconClassName:A,tooltipPosition:"bottom-left",tooltip:f(o.actions.create),onClick:C}),h&&!o._parent&&t().createElement(v.IconButton,{style:R.button,iconStyle:R.icon,iconClassName:"mdi mdi-window-restore",tooltipPosition:"bottom-left",tooltip:y.MessageHash[411],onClick:function(){y.Controller.fireAction("open_address_book")}}),"book"===i&&o.actions&&o.actions.remove&&this.state.select&&t().createElement(v.RaisedButton,{secondary:!0,label:f(o.actions.remove),disabled:!this.state.selection.length,onClick:function(){r.props.onDeleteAction(o,r.state.selection),r.setState({select:!1,selection:[]})}}),!this.state.select&&p,u&&!h&&t().createElement(ms,Is({searchLabel:this.props.searchLabel,onSearch:this.props.onSearch},M)),m&&("book"===i||"selector"===i&&h)&&t().createElement(v.IconButton,{style:R.button,iconStyle:R.icon,iconClassName:"mdi mdi-refresh",tooltipPosition:"bottom-left",tooltip:y.MessageHash[149],onClick:m,disabled:s}));if(o._parent&&"book"===i&&o._parent._parent&&"teams"!==o._parent.id&&(j.push(t().createElement(v.ListItem,Is({key:"__parent__",primaryText:"..",onClick:function(e){e.stopPropagation(),r.props.onFolderClicked(o._parent)},leftAvatar:t().createElement(v.Avatar,{icon:t().createElement(v.FontIcon,{className:"mdi mdi-arrow-up"}),size:w})},g.listItem))),E&&j.push(t().createElement(v.Divider,{inset:!0,key:"parent-divider"}))),_.forEach(function(e,r){var n=this;if(e.subheader)j.push(t().createElement(v.Subheader,{key:e.subheader},e.subheader));else{var o,a=t().createElement(bp,{avatarSize:w,pydio:this.props.pydio||y,userId:e.id,userLabel:e.label,avatar:e.avatar,icon:e.icon,idmUser:e.IdmUser,userType:e.type||"group",avatarOnly:!0,useDefaultAvatar:!0,style:g.avatar?g.avatar.style:{}}),c=function(t){t.stopPropagation(),n.props.onItemClicked(e)};if(S.indexOf(e)>-1&&this.props.onFolderClicked?(c=function(t){t.stopPropagation(),n.props.onFolderClicked(e)},"selector"!==i||e._notSelectable||this.props.usersOnly||(o=t().createElement(v.IconButton,Is({iconClassName:"mdi mdi-account-multiple-plus",tooltip:f("addressbook.pick.group"),tooltipPosition:"top-left",iconStyle:{color:"rgba(0,0,0,0.33)"},onClick:function(){n.props.onItemClicked(e)}},g.iconButton)))):"inner"===i&&this.props.onDeleteAction&&(o=t().createElement(v.IconButton,Is({iconClassName:"mdi mdi-delete",tooltip:f(257),tooltipPosition:"top-left",iconStyle:{color:"rgba(0,0,0,0.13)",hoverColor:"rgba(0,0,0,0.53)"},onClick:function(){n.props.onDeleteAction(n.props.item,[e])}},g.iconButton))),h&&this.props.actionsForCell&&e.type){var s=new ks(y,this.props.actionsForCell,null,e).renderItems();o=s.length?t().createElement(v.IconMenu,Is({},g.iconMenu,{iconButtonElement:t().createElement(v.IconButton,Is({iconClassName:"mdi mdi-dots-vertical",iconStyle:{color:"rgba(0,0,0,.33)"}},g.iconButton)),targetOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"top"},desktop:!0}),s):null}j.push(t().createElement(v.ListItem,Is({key:e.id,primaryText:t().createElement("div",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},e.label),onClick:c,disabled:"inner"===i,leftAvatar:!this.state.select&&a,rightIconButton:o,leftCheckbox:this.state.select&&t().createElement(v.Checkbox,{checked:this.state.selection.indexOf(e)>-1,onCheck:function(t,r){if(r)n.setState({selection:[].concat(xs(n.state.selection),[e])});else{var o=n.state.selection,i=[].concat(xs(o.slice(0,o.indexOf(e))),xs(o.slice(o.indexOf(e)+1)));n.setState({selection:i})}}})},g.listItem))),"inner"!==i&&r<E-1&&j.push(t().createElement(v.Divider,Is({inset:!0,key:e.id+"-divider"},g.divider)))}}.bind(this)),!j.length){var B={style:{backgroundColor:"transparent",minHeight:300},iconClassName:"mdi mdi-account-off",primaryTextId:this.props.emptyStatePrimaryText||f(629),secondaryTextId:"book"===i&&this.props.emptyStateSecondaryText||null};"book"===i&&o.actions&&o.actions.create&&(B=Cs(Cs({},B),{},{actionLabelId:f(o.actions.create),actionCallback:C})),"compact"===e&&(B=Cs(Cs({},B),{},{style:{backgroundColor:"transparent",minHeight:150},iconStyle:{fontSize:40},legendStyle:{fontSize:13}})),N=t().createElement(yr,B)}return t().createElement("div",{style:{flex:1,flexDirection:"column",display:"flex",width:"100%",overflowX:"hidden"},onClick:this.props.onClick,className:e},"inner"!==i&&!this.props.noToolbar&&U,!N&&!s&&t().createElement(v.List,{style:{flex:1,overflowY:"inner"!==i?"auto":"initial"}},this.props.subHeader&&t().createElement(v.Subheader,null,this.props.subHeader),j),s&&t().createElement(Us,{style:{flex:1}}),!s&&N,"selector"===i&&u&&h&&t().createElement(ms,{searchLabel:this.props.searchLabel,onSearch:this.props.onSearch,style:{padding:"0 20px",minWidth:null,borderTop:"1px solid #e0e0e0",backgroundColor:"white"},underlineShow:!1}))}}],n&&Ls(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),c}(t().Component);function qs(e){return qs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qs(e)}function zs(){return zs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},zs.apply(this,arguments)}function Ws(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Vs(n.key),n)}}function Vs(e){var t=function(e,t){if("object"!==qs(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==qs(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===qs(t)?t:String(t)}function Gs(e,t){return Gs=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Gs(e,t)}function Hs(e){return Hs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Hs(e)}Fs.propTypes={item:U().object,onCreateAction:U().func,onDeleteAction:U().func,onItemClicked:U().func,onFolderClicked:U().func,onEditLabel:U().func,mode:U().oneOf(["book","selector","inner"]),bookColumn:U().bool},Fs=Bs(Fs),Fs=(0,J.muiThemeable)()(Fs);var Js=__webpack_require__(16689).Component,Ys=__webpack_require__(39455),Ks=Ys.Divider,$s=Ys.Subheader,Xs=Ys.List,Qs=Ys.ListItem,Zs=Ys.FontIcon,eu=Ys.Avatar,tu=__webpack_require__(56880),ru=__webpack_require__(10757).requireLib("boot").PydioContextConsumer,nu=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Gs(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Hs(n);if(o){var r=Hs(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===qs(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"render",value:function(){var e=this,t=this.props,r=t.graph,n=t.pydio,o=t.getMessage,i=n.getController().actions.has("user_team_create"),a=[];if(r.teams&&r.teams.length){var c=null;i&&(c=function(t,r){tu.getRestClient().getIdmApi().removeUserFromTeam(r[0].id,e.props.userId,(function(t){t&&t.message&&n.UI.displayMessage("SUCCESS",t.message),e.props.reloadAction()}))}),a.push(React.createElement("div",{key:"teams"},React.createElement(Fs,{subHeader:o(581).replace("%s",r.teams.length),onItemClicked:function(){},item:{leafs:r.teams},mode:"inner",onDeleteAction:c})))}if(r.cells){var s=Object.values(r.cells).filter((function(e){return"ROOM"===e.Scope}));s.length&&a.push(React.createElement("div",null,a.length?React.createElement(Ks,null):null,React.createElement($s,null,1===s.length?o("601"):o("602").replace("%1",s.length)),React.createElement(Xs,{style:{paddingTop:0}},s.map((function(e){return React.createElement(Qs,zs({disabled:!0,leftAvatar:React.createElement(eu,{icon:React.createElement(Zs,{className:"mdi mdi-share-variant"}),backgroundColor:"#009688",size:_s.avatar.avatarSize,style:_s.avatar.style}),primaryText:e.Label,rightIconButton:React.createElement(v.IconButton,zs({iconClassName:"mdi mdi-open-in-new",tooltip:"Go to Cell",tooltipPosition:"top-left",onClick:function(){n.triggerRepositoryChange(e.UUID)}},_s.iconButton))},_s.listItem))})))))}return React.createElement("div",null,a)}}])&&Ws(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(Js);function ou(e){return ou="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ou(e)}function iu(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,au(n.key),n)}}function au(e){var t=function(e,t){if("object"!==ou(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==ou(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===ou(t)?t:String(t)}function cu(e,t){return cu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},cu(e,t)}function su(e){return su=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},su(e)}nu=ru(nu);var uu=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cu(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=su(n);if(o){var r=su(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===ou(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,r=[{key:"onClick",value:function(){this.props.onClick(this.props.entry)}},{key:"buildNestedItems",value:function(e){return e.map(function(e){return React.createElement(a,{nestedLevel:this.props.nestedLevel+1,entry:e,onClick:this.props.onClick,selected:this.props.selected,showIcons:!0})}.bind(this))}},{key:"render",value:function(){var e,t=this.props,r=t.showIcons,n=t.entry,o=t.selected,i=n.id,a=n.label,c=n.icon,s=n.collections||[],u=this.buildNestedItems(s);return c&&r&&(e=React.createElement(v.FontIcon,{className:c})),React.createElement(v.ListItem,{nestedLevel:this.props.nestedLevel,key:i,primaryText:a,onClick:this.onClick.bind(this),nestedItems:u,initiallyOpen:!0,leftIcon:e,innerDivStyle:{fontWeight:o===n.id?500:400},style:o===n.id?{backgroundColor:"#efefef"}:{}})}}],r&&iu(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(e.Component);function lu(e){return lu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lu(e)}function fu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function pu(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?fu(Object(r),!0).forEach((function(t){du(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fu(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function du(e,t,r){return(t=vu(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hu(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],s=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);s=!0);}catch(e){u=!0,o=e}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return yu(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?yu(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yu(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function mu(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,vu(n.key),n)}}function vu(e){var t=function(e,t){if("object"!==lu(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==lu(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===lu(t)?t:String(t)}uu.propTypes={nestedLevel:U().number,selected:U().string,onClick:U().func};var bu=It().getRestClient().getIdmApi(),gu=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r;return t=e,r=[{key:"childrenAsPromise",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=e.childrenLoader,n=e.itemsLoader,o=e.leafLoaded,i=e.collectionsLoaded,a=e.leafs,c=e.collections,s=t?n:r,u=t?o:i;return new Promise((function(r,n){!u&&s?s(e,(function(n){t?(e.leafs=n,e.leafLoaded=!0):(e.collections=n,e.collectionsLoaded=!0),r(n)})):r((t?a:c)||[])}))}},{key:"computePagination",value:function(e){var t;return e.Users?t=e.Users.length:e.Groups?t=e.Groups.length:e.Teams&&(t=e.Teams.length),e.Total>t?{start:e.Offset,end:e.Offset+e.Limit,max:e.Total,interval:e.Limit}:null}},{key:"loadTeams",value:function(t,r){var n=0,o=50;if(t.range){var i=hu(t.range.split("-"),2),a=i[0],c=i[1];n=parseInt(a),o=(c=parseInt(c))-n}var s={};F().getInstance().getController().actions.has("user_team_create")&&(s={type:"team",remove:"574",multiple:!0}),bu.listTeams("",n,o).then((function(n){t.pagination=e.computePagination(n);var o=n.Teams.map((function(r){return{_parent:t,id:r.Uuid,label:r.Label,type:"team",icon:"mdi mdi-account-multiple-outline",itemsLoader:e.loadTeamUsers,actions:s,_notSelectable:!0,IdmRole:r}}));r(o)}))}},{key:"loadGroups",value:function(t,r){var n="/",o="";t.IdmUser&&(n=H().trimRight(t.IdmUser.GroupPath,"/")+"/"+t.IdmUser.GroupLabel),t.currentParams&&t.currentParams.has_search&&(o=t.currentParams.value),bu.listGroups(n,o,!1,0,1e3).then((function(n){var o=n.Groups.map((function(r){return{_parent:t,id:r.Uuid,label:r.Attributes&&r.Attributes.displayName?r.Attributes.displayName:r.GroupLabel,type:"group",icon:"mdi mdi-account-multiple",childrenLoader:t.childrenLoader?e.loadGroups:null,itemsLoader:t.itemsLoader?e.loadGroupUsers:null,currentParams:t.currentParams&&t.currentParams.alpha_pages?pu({},t.currentParams):{},IdmUser:r}}));r(o)}))}},{key:"loadExternalUsers",value:function(t,r){var n="",o=0,i=50;if(t.currentParams&&t.currentParams.alpha_pages&&(n=t.currentParams.value),t.range){var a=hu(t.range.split("-"),2),c=a[0],s=a[1];o=parseInt(c),i=(s=parseInt(s))-o}var u=It().getClient().getPydioObject();bu.listUsers("/",n,!0,o,i,"shared").then((function(n){t.pagination=e.computePagination(n);var o=n.Users.filter((function(e){return e.Login!==u.user.id})).map((function(e){return{_parent:t,id:e.Login,label:e.Attributes&&e.Attributes.displayName?e.Attributes.displayName:e.Login,avatar:e.Attributes&&e.Attributes.avatar?e.Attributes.avatar:void 0,type:"user",external:!0,IdmUser:e}}));r(o)}))}},{key:"loadGroupUsers",value:function(t,r){var n="/",o="",i=0,a=50;if(t.IdmUser&&(n=H().trimRight(t.IdmUser.GroupPath,"/")+"/"+t.IdmUser.GroupLabel),t.currentParams&&(t.currentParams.alpha_pages||t.currentParams.has_search)&&(o=t.currentParams.value),t.range){var c=hu(t.range.split("-"),2),s=c[0],u=c[1];i=parseInt(s),a=(u=parseInt(u))-i}var l=It().getClient().getPydioObject();bu.listUsers(n,o,!1,i,a,"!shared").then((function(n){t.pagination=e.computePagination(n);var o=n.Users.filter((function(e){return e.Login!==l.user.id&&"pydio.anon.user"!==e.Login})).map((function(e){return{_parent:t,id:e.Login,label:e.Attributes&&e.Attributes.displayName?e.Attributes.displayName:e.Login,avatar:e.Attributes&&e.Attributes.avatar?e.Attributes.avatar:void 0,type:"user",IdmUser:e}}));r(o)}))}},{key:"loadTeamUsers",value:function(t,r){var n=0,o=50,i="";if(t.range){var a=hu(t.range.split("-"),2),c=a[0],s=a[1];n=parseInt(c),o=(s=parseInt(s))-n}t.currentParams&&(t.currentParams.alpha_pages||t.currentParams.has_search)&&(i=t.currentParams.value),bu.listUsersWithRole(t.IdmRole.Uuid,n,o,i).then((function(n){t.pagination=e.computePagination(n);var o=n.Users.map((function(e){return{_parent:t,id:e.Login,label:e.Attributes&&e.Attributes.displayName?e.Attributes.displayName:e.Login,type:"user",IdmUser:e}}));r(o)}))}}],null&&mu(t.prototype,null),r&&mu(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function wu(e){return wu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wu(e)}var Su=["style"];function Ou(){return Ou=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ou.apply(this,arguments)}function Pu(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ku(n.key),n)}}function ku(e){var t=function(e,t){if("object"!==wu(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==wu(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===wu(t)?t:String(t)}function _u(e,t){return _u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},_u(e,t)}function Eu(e){return Eu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Eu(e)}var ju=__webpack_require__(16689),Cu=__webpack_require__(39455),Tu=Cu.TextField,xu=Cu.FlatButton,Ru=Cu.CardTitle,Iu=(Cu.Divider,__webpack_require__(10757).requireLib("boot").PydioContextConsumer),Lu=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_u(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Eu(n);if(o){var r=Eu(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===wu(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(r=i.call(this,e,t)).state={label:r.props.item.label},r}return t=a,r=[{key:"loadMembers",value:function(e){var t=this;this.setState({loading:!0}),gu.childrenAsPromise(e,!1).then((function(r){gu.childrenAsPromise(e,!0).then((function(r){t.setState({members:e.leafs,loading:!1})}))}))}},{key:"componentWillMount",value:function(){this.loadMembers(this.props.item)}},{key:"componentWillReceiveProps",value:function(e){this.loadMembers(e.item),this.setState({label:e.item.label})}},{key:"onLabelChange",value:function(e,t){this.setState({label:t})}},{key:"updateLabel",value:function(){var e=this;this.state.label!==this.props.item.label&&It().getRestClient().getIdmApi().updateTeamLabel(this.props.item.IdmRole.Uuid,this.state.label,(function(){e.props.onUpdateAction(e.props.item)})),this.setState({editMode:!1})}},{key:"render",value:function(){var e,t=this,r=this.props,n=r.item,o=r.onDeleteAction,i=(r.onCreateAction,r.getMessage),a={team:n,userEditable:this.props.item.IdmRole.PoliciesContextEditable,onDeleteAction:function(){t.props.onDeleteAction(n._parent,[n])},onEditAction:function(){t.setState({editMode:!t.state.editMode})},reloadAction:function(){t.props.onUpdateAction(n)}};e=this.state.editMode?ju.createElement("div",{style:{display:"flex",alignItems:"center",padding:12}},ju.createElement(Tu,{style:{flex:1,fontSize:24},fullWidth:!0,disabled:!1,underlineShow:!1,value:this.state.label,onChange:this.onLabelChange.bind(this)}),ju.createElement(xu,{secondary:!0,label:i(48),onClick:function(){t.updateLabel()}})):ju.createElement(Ru,{style:{padding:"12px 16px 4px"},title:this.state.label,subtitle:n.leafs&&n.leafs.length?i(576).replace("%s",n.leafs.length):i(577)});var c=this.props,s=(c.style,function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(c,Su));return ju.createElement("div",null,ju.createElement("div",{style:{backgroundColor:"#f8fafc",paddingBottom:4}},e,ju.createElement(Jf,Ou({},s,a,{style:{paddingLeft:8}}))),ju.createElement(Fs,{subHeader:i(575),onItemClicked:function(){},item:n,mode:"inner",onDeleteAction:o}))}}],r&&Pu(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(ju.Component);Lu.propTypes={pydio:U().instanceOf(Pydio),item:U().object,style:U().object,onRequestClose:U().func,onDeleteAction:U().func,onUpdateAction:U().func},Lu=Iu(Lu);var Mu=__webpack_require__(82702);function Du(e){return Du="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Du(e)}function Au(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Nu(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Au(Object(r),!0).forEach((function(t){Uu(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Au(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Uu(e,t,r){return(t=Fu(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Bu(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Fu(n.key),n)}}function Fu(e){var t=function(e,t){if("object"!==Du(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==Du(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===Du(t)?t:String(t)}function qu(e,t){return qu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},qu(e,t)}function zu(e){return zu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},zu(e)}var Wu=F().requireLib("form"),Vu=Wu.Manager,Gu=Wu.FormPanel,Hu=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qu(e,t)}(c,e);var r,n,o,i,a=(o=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=zu(o);if(i){var r=zu(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Du(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function c(e,t){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c);var n=(r=a.call(this,e,t)).props,o=n.pydio,i=n.newUserName,s=n.editMode,u=n.userData,l=o.getPluginConfigs("action.share").get("SHARED_USERS_TMP_PREFIX");l&&!i.startsWith(l)||(l="");var f={new_password:"",send_email:!0};if(s&&u&&u.IdmUser){var p=u.IdmUser;r.getParameters().forEach((function(e){var t,r=e.name,n=e.IdmUserField,o=e.scope,i=e.pluginId;n?t=p[n]:"user"===o&&p.Attributes?t=p.Attributes[r]:i&&p.Attributes["parameter:"+i+":"+r]&&(t=JSON.parse(p.Attributes["parameter:"+i+":"+r])),void 0!==t&&(f[r]=t)}))}else f.new_user_id=l+i,f.lang=o.currentLanguage;return r.state={values:f},r}return r=c,n=[{key:"getCreateUserParameters",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=[],r=this.props.pydio,n=r.MessageHash,o=r.getPluginConfigs("action.share").get("SHARED_USERS_TMP_PREFIX");t.push({IdmUserField:"Login",description:n[533],readonly:e,expose:"true",label:n[522],name:e?"existing_user_id":"new_user_id",scope:"user",type:"valid-login",mandatory:!0,default:o||""},{IdmUserField:"Password",description:n[534],editable:"true",expose:"true",label:n[523],name:"new_password",scope:"user",type:"valid-password",mandatory:!0});for(var i=__webpack_require__.g.pydio.getPluginConfigs("auth").get("NEWUSERS_EDIT_PARAMETERS").split(","),a=0;a<i.length;a++)i[a]="user/preferences/pref[@exposed]|//param[@name='"+i[a]+"']";var c=i.join("|");return Vu.parseParameters(this.props.pydio.getXmlRegistry(),c).map((function(e){t.push(e)})),e||t.push({description:n[536],editable:"true",expose:"true",label:n[535],name:"send_email",scope:"user",type:"boolean",mandatory:!0}),t}},{key:"getDefaultProps",value:function(){return{editMode:!1}}},{key:"getParameters",value:function(){return this._parsedParameters||(this._parsedParameters=this.getCreateUserParameters(this.props.editMode)),this._parsedParameters}},{key:"getValuesForPost",value:function(e){return Vu.getValuesForPOST(this.getParameters(),this.state.values,e)}},{key:"onValuesChange",value:function(e){this.setState({values:e})}},{key:"changeValidStatus",value:function(e){this.setState({valid:e})}},{key:"submitCreationForm",value:function(){var e,t=this,r=this.props,n=r.editMode,o=r.userData;n&&(e=o.IdmUser),It().getRestClient().getIdmApi().putExternalUser(this.state.values,this.getParameters(),e).then((function(e){t.props.onUserCreated(Mu.User.fromIdmUser(e))}))}},{key:"cancelCreationForm",value:function(){this.props.onCancel()}},{key:"render",value:function(){var e=this.props,r=e.pydio,n=e.editMode,o=this.state.valid;return o||!n||this.state.values.new_password||(o=!0),t().createElement(v.Paper,{zDepth:void 0===this.props.zDepth?2:this.props.zDepth,style:Nu({minHeight:250,display:"flex",flexDirection:"column"},this.props.style)},t().createElement(Gu,{className:"reset-pydio-forms",depth:-1,parameters:this.getParameters(),values:this.state.values,onChange:this.onValuesChange.bind(this),onValidStatusChange:this.changeValidStatus.bind(this),style:{overflowY:"auto",flex:1},variant:"v2",variantShowLegend:!0}),t().createElement(v.Divider,{style:{flexShrink:0}}),t().createElement("div",{style:{padding:8,textAlign:"right"}},t().createElement(v.FlatButton,{label:r.MessageHash[49],onClick:this.cancelCreationForm.bind(this)}),t().createElement(v.FlatButton,{label:this.props.editMode?r.MessageHash[519]:r.MessageHash[484],primary:!0,onClick:this.submitCreationForm.bind(this),disabled:!o})))}}],n&&Bu(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),c}(t().Component);function Ju(e){return Ju="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ju(e)}function Yu(){return Yu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Yu.apply(this,arguments)}function Ku(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function $u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ku(Object(r),!0).forEach((function(t){Xu(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ku(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Xu(e,t,r){return(t=Zu(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Qu(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Zu(n.key),n)}}function Zu(e){var t=function(e,t){if("object"!==Ju(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==Ju(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===Ju(t)?t:String(t)}function el(e,t){return el=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},el(e,t)}function tl(e){return tl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},tl(e)}Hu.propTypes={newUserName:U().string,onUserCreated:U().func.isRequired,onCancel:U().func.isRequired,editMode:U().bool,userData:U().object};var rl=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&el(e,t)}(c,e);var r,n,o,i,a=(o=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=tl(o);if(i){var r=tl(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Ju(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function c(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(r=a.call(this,e,t)).state={editForm:!1},r}return r=c,(n=[{key:"componentWillReceiveProps",value:function(e){e.item!==this.props.item&&this.setState({editForm:!1})}},{key:"render",value:function(){var e,r=this,n=this.props.item,o={avatarStyle:{zIndex:1}};return n._parent&&"ext"===n._parent.id&&(o=$u($u({},o),{},{userEditable:n.IdmUser.PoliciesContextEditable,onDeleteAction:function(){r.props.onDeleteAction(n._parent,[n])},onEditAction:function(){r.setState({editForm:!0})},reloadAction:function(){r.props.onUpdateAction(n)}})),this.state.editForm&&(e=t().createElement(Hu,{pydio:this.props.pydio,zDepth:0,style:{flex:1},newUserName:n.id,editMode:!0,userData:n,onUserCreated:function(){r.props.onUpdateAction(n),r.setState({editForm:!1})},onCancel:function(){r.setState({editForm:!1})}}),o=$u($u({},o),{},{displayLabel:!0,displayAvatar:!0,useDefaultAvatar:!0,style:{textAlign:"center",borderBottom:"1px solid #e0e0e0",padding:10,backgroundColor:"#fafafa"},avatarStyle:{marginBottom:16}})),t().createElement("div",{style:e?{height:"100%",display:"flex",flexDirection:"column"}:{}},t().createElement(bp,Yu({userId:this.props.item.id,richCard:!e,pydio:this.props.pydio,cardSize:this.props.style.width,cardStyle:{textAlign:"left",padding:"12px 16px 4px",backgroundColor:"#f8fafc"}},o)),e)}}])&&Qu(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),c}(t().Component);function nl(e){return nl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nl(e)}function ol(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function il(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ol(Object(r),!0).forEach((function(t){al(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ol(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function al(e,t,r){return(t=sl(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cl(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,sl(n.key),n)}}function sl(e){var t=function(e,t){if("object"!==nl(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==nl(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===nl(t)?t:String(t)}function ul(e,t){return ul=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ul(e,t)}function ll(e){return ll=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ll(e)}rl.propTypes={pydio:U().instanceOf(Pydio),item:U().object,style:U().object,onRequestClose:U().func,onDeleteAction:U().func,onUpdateAction:U().func};var fl=__webpack_require__(580),pl=__webpack_require__(16689),dl=__webpack_require__(39455),hl=dl.Paper,yl=dl.IconButton,ml=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ul(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ll(n);if(o){var r=ll(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===nl(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"render",value:function(){var e,t=this.props.item||{};return"user"===t.type?e=pl.createElement(rl,this.props):t.IdmRole&&t.IdmRole.IsTeam&&(e=pl.createElement(Lu,this.props)),pl.createElement(hl,{zDepth:2,style:il({position:"relative",borderRadius:6},this.props.style)},pl.createElement(yl,{iconClassName:"mdi mdi-close",style:{position:"absolute",top:0,right:0,zIndex:2},iconStyle:{color:"#e0e0e0"},onClick:this.props.onRequestClose}),e)}}])&&cl(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(pl.Component);function vl(e){return vl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vl(e)}function bl(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function gl(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?bl(Object(r),!0).forEach((function(t){wl(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bl(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function wl(e,t,r){return(t=Ol(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Sl(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ol(n.key),n)}}function Ol(e){var t=function(e,t){if("object"!==vl(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==vl(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===vl(t)?t:String(t)}function Pl(e,t){return Pl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Pl(e,t)}function kl(e){return kl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},kl(e)}ml.propTypes={pydio:fl.instanceOf(Pydio),item:fl.object,style:fl.object,onRequestClose:fl.func,onDeleteAction:fl.func,onUpdateAction:fl.func};var _l=__webpack_require__(16689).Component,El=__webpack_require__(10757).requireLib("boot").PydioContextConsumer,jl=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Pl(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=kl(n);if(o){var r=kl(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===vl(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(r=i.call(this,e.context)).state={items:[]},r}return t=a,r=[{key:"onSearch",value:function(e){var t=this;if(e){var r={value:e,existing_only:"true"};this.props.params&&(r=gl(gl({},r),this.props.params)),gu.listUsers(r,(function(e){t.setState({items:e})}))}else this.setState({items:[]})}},{key:"render",value:function(){var e=this,t=this.props,r=t.mode,n=t.item,o=t.getMessage;return React.createElement("div",{style:{flex:1,display:"flex",flexDirection:"column"}},React.createElement("div",{style:{padding:10,height:56,backgroundColor:this.state.select?activeTbarColor:"#fafafa",display:"flex",alignItems:"center",transition:DOMUtils.getBeziersTransition()}},"selector"===r&&n._parent&&React.createElement(v.IconButton,{iconClassName:"mdi mdi-chevron-left",onClick:function(){e.props.onFolderClicked(n._parent)}}),"book"===r&&React.createElement("div",{style:{fontSize:20,color:"rgba(0,0,0,0.87)",flex:1}},this.props.title),React.createElement(ms,{style:"book"===r?{minWidth:320}:{flex:1},searchLabel:this.props.searchLabel,onSearch:this.onSearch.bind(this)})),React.createElement(Fs,{mode:this.props.mode,onItemClicked:this.props.onItemClicked,item:{leafs:this.state.items},noToolbar:!0,emptyStatePrimaryText:o(587,""),emptyStateSecondaryText:o(588,"")}))}}],r&&Sl(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(_l);function Cl(e){return Cl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cl(e)}function Tl(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,xl(n.key),n)}}function xl(e){var t=function(e,t){if("object"!==Cl(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==Cl(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===Cl(t)?t:String(t)}function Rl(e,t){return Rl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Rl(e,t)}function Il(e){return Il=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Il(e)}jl.propTypes={params:U().object,searchLabel:U().string,onItemClicked:U().func,item:U().object,onFolderClicked:U().func},jl=El(jl);var Ll=F().requireLib("boot").PydioContextConsumer,Ml=F().requireLib("hoc").ModernTextField,Dl=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Rl(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Il(n);if(o){var r=Il(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Cl(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(r=i.call(this,e,t)).state={value:""},r}return t=a,r=[{key:"onChange",value:function(e,t){this.setState({value:t})}},{key:"submitCreationForm",value:function(){var e=this.state.value;It().getRestClient().getIdmApi().saveSelectionAsTeam(e,[],this.props.onTeamCreated)}},{key:"render",value:function(){var e=this,t=this.props.getMessage;return React.createElement("div",null,React.createElement("div",{style:{padding:20}},React.createElement("div",null,t(591)),React.createElement(Ml,{focusOnMount:!0,floatingLabelText:t(578),value:this.state.value,onChange:this.onChange.bind(this),fullWidth:!0,onKeyPress:function(t){"Enter"===t.key&&e.submitCreationForm()},variant:"v2"})),React.createElement("div",null,React.createElement("div",{style:{textAlign:"right",padding:8}},React.createElement(v.FlatButton,{label:t(49),onClick:this.props.onCancel.bind(this)}),React.createElement(v.FlatButton,{label:t(579),primary:!0,onClick:this.submitCreationForm.bind(this)}))))}}],r&&Tl(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(e.Component);function Al(e){return Al="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Al(e)}function Nl(){return Nl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Nl.apply(this,arguments)}function Ul(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Bl(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ul(Object(r),!0).forEach((function(t){Jl(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ul(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Fl(e){return function(e){if(Array.isArray(e))return ql(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return ql(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ql(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ql(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function zl(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Yl(n.key),n)}}function Wl(e,t){return Wl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Wl(e,t)}function Vl(e,t){if(t&&("object"===Al(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Gl(e)}function Gl(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Hl(e){return Hl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Hl(e)}function Jl(e,t,r){return(t=Yl(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Yl(e){var t=function(e,t){if("object"!==Al(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==Al(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===Al(t)?t:String(t)}Dl.propTypes={onTeamCreated:U().func.isRequired,onCancel:U().func.isRequired},Dl=Ll(Dl);var Kl=F().requireLib("boot"),$l=Kl.PydioContextConsumer,Xl=Kl.PydioContextProvider,Ql=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Wl(e,t)}(c,e);var r,n,o,i,a=(o=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Hl(o);if(i){var r=Hl(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Vl(this,e)});function c(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),Jl(Gl(t=a.call(this,e)),"onFolderClicked",(function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;"selector"===t.props.mode&&e.IdmRole&&e.IdmRole.IsTeam?t.onUserListItemClicked(e):(t.setState({loading:!0}),gu.childrenAsPromise(e,!1).then((function(n){gu.childrenAsPromise(e,!0).then((function(n){t.setState({selectedItem:e,loading:!1},r)}))})))})),Jl(Gl(t),"onUserListItemClicked",(function(e){if(t.props.onItemSelected){var r=new PydioUsers.User(e.id,e.label,e.type,e.group,e.avatar,e.temporary,e.external);e.trusted_server_id&&(r.trustedServerId=e.trusted_server_id,r.trustedServerLabel=e.trusted_server_label),r._uuid=e.uuid,e.IdmUser&&(r.IdmUser=e.IdmUser),e.IdmRole&&(r.IdmRole=e.IdmRole),t.props.onItemSelected(r)}else t.setState({rightPaneItem:e})})),Jl(Gl(t),"onCreateAction",(function(e){t.setState({createDialogItem:e})})),Jl(Gl(t),"closeCreateDialogAndReload",(function(){t.setState({createDialogItem:null}),t.reloadCurrentNode()})),Jl(Gl(t),"onCardUpdateAction",(function(e){e._parent&&e._parent===t.state.selectedItem&&t.reloadCurrentNode()})),Jl(Gl(t),"onDeleteAction",(function(e,r){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2]||confirm(t.props.getMessage(278)))switch(e.actions.type){case"users":Promise.all(r.map((function(e){return t.state.rightPaneItem===e&&t.setState({rightPaneItem:null}),It().getRestClient().getIdmApi().deleteIdmUser(e.IdmUser)}))).then((function(){t.reloadCurrentNode()}));break;case"teams":Promise.all(r.map((function(e){return t.state.rightPaneItem===e&&t.setState({rightPaneItem:null}),It().getRestClient().getIdmApi().deleteRole(e.IdmRole.Uuid)}))).then((function(){t.reloadCurrentNode()}));break;case"team":Promise.all(r.map((function(t){return It().getRestClient().getIdmApi().removeUserFromTeam(e.IdmRole.Uuid,t.IdmUser.Login)}))).then((function(){t.reloadCurrentNode()}))}})),Jl(Gl(t),"openPopover",(function(e){t.setState({popoverOpen:!0,popoverAnchor:e.currentTarget})})),Jl(Gl(t),"closePopover",(function(){t.setState({popoverOpen:!1})})),Jl(Gl(t),"reloadCurrentNode",(function(){t.state.selectedItem.leafLoaded=!1,t.state.selectedItem.collectionsLoaded=!1,t.onFolderClicked(t.state.selectedItem,(function(){if(t.state.rightPaneItem){var e=t.state.rightPaneItem.id,r=null,n=t.state.selectedItem.leafs||[],o=t.state.selectedItem.collections||[];[].concat(Fl(n),Fl(o)).forEach((function(t){t.id===e&&(r=t)})),t.setState({rightPaneItem:r})}}))})),Jl(Gl(t),"reloadCurrentAtPage",(function(e){t.state.selectedItem.leafLoaded=!1,t.state.selectedItem.collectionsLoaded=!1,-1===e?t.state.selectedItem.currentParams=null:-1!==e.indexOf("-")?t.state.selectedItem.range=e:(t.state.selectedItem.range=null,t.state.selectedItem.currentParams={alpha_pages:"true",value:e}),t.onFolderClicked(t.state.selectedItem)})),Jl(Gl(t),"reloadCurrentWithSearch",(function(e){e?(t.state.selectedItem.leafLoaded=!1,t.state.selectedItem.collectionsLoaded=!1,t.state.selectedItem.currentParams={has_search:!0,value:e,existing_only:!0},t.onFolderClicked(t.state.selectedItem)):t.reloadCurrentAtPage(-1)}));var r,n=e.pydio,o=e.mode,i=e.usersOnly,s=e.usersFrom,u=e.teamsOnly,l=(e.disableSearch,function(t){return e.getMessage(t,"")}),f=n.getPluginConfigs("core.auth"),p={},d=n.getController().actions.has("user_team_create");if(d&&(p={type:"teams",create:"+ "+l(569),remove:l(570),multiple:!0}),u)return r={id:"teams",label:l(568),childrenLoader:gu.loadTeams,_parent:null,_notSelectable:!0,actions:p},t.state={root:r,selectedItem:r,loading:!1,rightPaneItem:null},Vl(t);r={id:"root",label:l(592),type:"root",collections:[]},"remote"!==s&&(f.get("USER_CREATE_USERS")&&r.collections.push({id:"ext",label:l(593),icon:"mdi mdi-account-network",itemsLoader:gu.loadExternalUsers,_parent:r,_notSelectable:!0,actions:{type:"users",create:"+ "+l(484),remove:l(582),multiple:!0}}),i||r.collections.push({id:"teams",label:l(568),icon:"mdi mdi-account-multiple",childrenLoader:gu.loadTeams,_parent:r,_notSelectable:!0,actions:p}),r.collections.push({id:"PYDIO_GRP_/",label:l(584),icon:"mdi mdi-account-box",childrenLoader:gu.loadGroups,itemsLoader:gu.loadGroupUsers,_parent:r,_notSelectable:!0}));var h=n.getPluginConfigs("core.ocs").get("TRUSTED_SERVERS");if(h&&!i&&"local"!==s){var y=JSON.parse(h),m={id:"remotes",label:l(594),collections:[],_parent:r,_notSelectable:!0};for(var v in y)y.hasOwnProperty(v)&&m.collections.push({id:v,label:y[v],icon:"mdi mdi-server-network",type:"remote",_parent:m,_notSelectable:!0});m.collections.length&&r.collections.push(m)}return t.state={root:r,selectedItem:"selector"===o?r:r.collections[0],loading:!1,rightPaneItem:null,teamsEditable:d},t}return r=c,(n=[{key:"componentDidMount",value:function(){this.state.selectedItem&&this.onFolderClicked(this.state.selectedItem)}},{key:"render",value:function(){var e=this,r=this.props,n=r.mode,o=r.getMessage,i=r.bookColumn,a=r.listStyles;if("popover"===n){var s=this.props.popoverStyle||{},u=this.props.popoverContainerStyle||{},l=this.props.popoverIconButtonStyle||{},f=t().createElement(v.IconButton,{style:Bl({position:"absolute",padding:15,zIndex:100,right:0,bottom:0,display:this.state.loading?"none":"initial"},l),iconStyle:{fontSize:19,color:"rgba(0,0,0,0.6)"},iconClassName:"mdi mdi-book-open-variant",onClick:this.openPopover});this.props.popoverButton&&(f=t().createElement(this.props.popoverButton.type,Nl({},this.props.popoverButton.props,{onClick:this.openPopover})));var p=this.props.pydio,d=Xl(c,p,p.UI.themeBuilder);return t().createElement("span",null,f,t().createElement(v.Popover,{open:this.state.popoverOpen,anchorEl:this.state.popoverAnchor,anchorOrigin:{horizontal:"right",vertical:"top"},targetOrigin:{horizontal:"left",vertical:"top"},onRequestClose:this.closePopover,style:Bl({marginLeft:20},s),zDepth:2},t().createElement("div",{style:Bl({width:320,height:420},u)},t().createElement(d,Nl({},this.props,{mode:"selector",style:{height:420}})))))}var h,y,m,b,g,w=this.state,S=w.selectedItem,O=w.root,P=w.rightPaneItem,k=w.createDialogItem,_=w.teamsEditable,E={backgroundColor:J.colors.grey100,width:256,overflowY:"auto",overflowX:"hidden"};if("search"===S.id)h=t().createElement(jl,{item:S,title:o(583,""),searchLabel:o(595,""),onItemClicked:this.onUserListItemClicked,onFolderClicked:this.onFolderClicked,mode:n});else if("remote"===S.type)h=t().createElement(jl,{item:S,params:{trusted_server_id:S.id},searchLabel:o(595,""),title:o(596,"").replace("%s",S.label),onItemClicked:this.onUserListItemClicked,onFolderClicked:this.onFolderClicked,mode:n});else{var j,C,T={};"teams"===S.id?(T={paginatorFolder:S.pagination?"numeric":null,paginatorLabel:S.label,paginatorCallback:this.reloadCurrentAtPage.bind(this)},_?(j=o(571,""),C=o(572,"")):(j=o("571.readonly",""),C=o("572.readonly",""))):"ext"===S.id?(j=o(585,""),C=o(586,""),S.pagination&&(T={showSubheaders:!0,paginatorType:"alpha",paginatorCallback:this.reloadCurrentAtPage.bind(this)})):(S.IdmUser&&S.IdmUser.IsGroup||"PYDIO_GRP_/"===S.id||S.IdmRole&&S.IdmRole.IsTeam)&&(T={showSubheaders:!0,paginatorType:!(S.currentParams&&S.currentParams.has_search)&&"alpha",paginatorCallback:this.reloadCurrentAtPage.bind(this),enableSearch:!(this.props.disableSearch||S.IdmRole&&S.IdmRole.IsTeam),searchLabel:o(595,""),onSearch:this.reloadCurrentWithSearch.bind(this)}),("book"===n||i)&&S.IdmRole&&S.IdmRole.IsTeam&&_&&(b=t().createElement(Jf,Nl({},this.props,{team:S,userEditable:!0,reloadAction:function(){e.reloadCurrentNode()},onDeleteAction:function(){if(confirm(e.props.getMessage(278))){var t=S._parent;e.setState({selectedItem:t},(function(){e.onDeleteAction(t,[S],!0)}))}},style:{backgroundColor:"transparent",borderTop:0,borderBottom:0}})),g=function(t,r){It().getRestClient().getIdmApi().updateTeamLabel(t.IdmRole.Uuid,r,(function(){var t=S._parent;e.setState({selectedItem:t},(function(){e.reloadCurrentNode()}))}))}),h=t().createElement(Fs,Nl({item:S,onItemClicked:this.onUserListItemClicked,onFolderClicked:this.onFolderClicked,onCreateAction:this.onCreateAction,onDeleteAction:this.onDeleteAction,reloadAction:this.reloadCurrentNode.bind(this),onEditLabel:g,loading:this.state.loading,mode:n,bookColumn:i,emptyStatePrimaryText:j,emptyStateSecondaryText:C,onClick:this.state.rightPaneItem?function(){e.setState({rightPaneItem:null})}:null,actionsPanel:b,actionsForCell:this.props.actionsForCell,usersOnly:this.props.usersOnly,listStyles:a},T))}var x,R,I,L=Bl(Bl({},E),{},{position:"absolute",transformOrigin:"right",backgroundColor:"white",width:"book"===n?320:250,right:10,bottom:10,top:120,zIndex:2});if(P||(L=Bl(Bl({},L),{},{transform:"scale(0)"})),y=t().createElement(ml,{pydio:this.props.pydio,onRequestClose:function(){e.setState({rightPaneItem:null})},style:L,onCreateAction:this.onCreateAction,onDeleteAction:this.onDeleteAction,onUpdateAction:this.onCardUpdateAction,item:P}),"book"===n)if(he().getViewportWidth()<1024)m=t().createElement(v.Paper,{zDepth:1,style:Bl(Bl({},E),{},{width:48,zIndex:2,overflow:"visible"})},O.collections.map((function(r){return t().createElement(v.IconButton,{iconClassName:r.icon,tooltip:r.label,tooltipPosition:"bottom-right",onClick:function(){return e.onFolderClicked(r)}})})));else{var M=[];O.collections.map(function(e){M.push(t().createElement(uu,{key:e.id,selected:S.id,nestedLevel:0,entry:e,onClick:this.onFolderClicked})),M.push(t().createElement(v.Divider,{key:e.id+"-divider"}))}.bind(this)),M.pop(),m=t().createElement(v.Paper,{zDepth:1,style:Bl(Bl({},E),{},{zIndex:2})},t().createElement(v.List,null,M))}k&&("users"===k.actions.type?(I={display:"flex",flexDirection:"column",overflow:"hidden"},x=o(484,""),R=t().createElement(Hu,{zDepth:0,style:{display:"flex",flexDirection:"column",flex:1,marginTop:-20},newUserName:"",onUserCreated:this.closeCreateDialogAndReload.bind(this),onCancel:function(){e.setState({createDialogItem:null})},pydio:this.props.pydio})):"teams"===k.actions.type?(x=o(569,""),R=t().createElement(Dl,{onTeamCreated:this.closeCreateDialogAndReload,onCancel:function(){e.setState({createDialogItem:null})}})):"team"===k.actions.type&&(x=null,R=t().createElement(c,{pydio:this.props.pydio,mode:"selector",usersOnly:!0,disableSearch:!0,onItemSelected:function(t){It().getRestClient().getIdmApi().addUserToTeam(k.IdmRole.Uuid,t.IdmUser.Login).then((function(){e.reloadCurrentNode()}))}})));var D=this.props.style||{};return t().createElement("div",{style:Bl({display:"flex",height:"selector"===n?320:450},D)},m,h,y,t().createElement(v.Dialog,{contentStyle:{width:420,minWidth:380,maxWidth:"100%",padding:0},bodyStyle:Bl({padding:0},I),title:t().createElement("div",{style:{padding:20}},x),actions:null,modal:!1,open:!!k,onRequestClose:function(){e.setState({createDialogItem:null})}},R),t().createElement("style",{type:"text/css",dangerouslySetInnerHTML:{__html:(this.props.muiTheme.palette,"\n.folder-avatar::before {\n    content: '\\F24B';\n    font-family: 'Material Design Icons';\n    position: absolute;\n    color: rgb(54, 113, 143);\n    font-size: 40px;\n    top: 11px;\n    left: -2px;\n}\n.compact .folder-avatar::before {\n    font-size: 30px;\n    top: 5px;\n}\n.folder-avatar span.mdi {\n    font-size: 20px !important;\n    color: #fff !important;\n    height: 12.8px !important;\n    margin: 7.3px !important;\n}\n.compact .folder-avatar span.mdi {\n    font-size: 13px !important;\n}\n.folder-avatar {\n    background-color: transparent !important;\n}\n")}}))}}])&&zl(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),c}(t().Component);Jl(Ql,"propTypes",{pydio:U().instanceOf(F()),mode:U().oneOf(["book","selector","popover"]).isRequired,bookColumn:U().bool,onItemSelected:U().func,usersOnly:U().bool,usersFrom:U().oneOf(["local","remote","any"]),disableSearch:U().bool,muiTheme:U().object,popoverStyle:U().object,popoverButton:U().object,popoverContainerStyle:U().object,popoverIconButtonStyle:U().object}),Jl(Ql,"defaultProps",{mode:"book",usersOnly:!1,usersFrom:"any",teamsOnly:!1,disableSearch:!1}),Ql=$l(Ql),Ql=(0,J.muiThemeable)()(Ql);const Zl=require("pydio/http/policies");var ef=__webpack_require__.n(Zl);const tf=require("cells-sdk");var rf=__webpack_require__(7180),nf=__webpack_require__.n(rf);function of(e){return of="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},of(e)}function af(e){return function(e){if(Array.isArray(e))return sf(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||cf(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cf(e,t){if(e){if("string"==typeof e)return sf(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?sf(e,t):void 0}}function sf(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function uf(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,hf(n.key),n)}}function lf(e,t){return lf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},lf(e,t)}function ff(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pf(e){return pf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},pf(e)}function df(e,t,r){return(t=hf(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hf(e){var t=function(e,t){if("object"!==of(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==of(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===of(t)?t:String(t)}var yf=F().requireLib("hoc"),mf=(yf.ModernStyles,yf.ModernAutoComplete),vf=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&lf(e,t)}(c,e);var r,n,o,i,a=(o=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=pf(o);if(i){var r=pf(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===of(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ff(e)}(this,e)});function c(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return df(ff(e=a.call.apply(a,[this].concat(n))),"state",{dataSource:[],loading:!1,searchText:"",minChars:parseInt(F().getInstance().getPluginConfigs("core.auth").get("USERS_LIST_COMPLETE_MIN_CHARS")),hideGroups:!0===F().getInstance().getPluginConfigs("action.advanced_settings").get("DISABLE_SHARE_GROUPS")}),df(ff(e),"suggestionLoader",(function(t,r){var n=e.props,o=n.excludes,i=n.usersOnly,a=e.state.hideGroups;e.setState({loading:e.state.loading+1});var c=It().getRestClient().getIdmApi(),s=[];s.push(c.listUsers("/",t,!0,0,20)),a||i?s.push(Promise.resolve({Groups:[]})):s.push(c.listGroups("/",t,!0,0,20)),i?s.push(Promise.resolve({Teams:[]})):s.push(c.listTeams(t,0,20)),Promise.all(s).then((function(t){e.setState({loading:e.state.loading-1});var n,i,a=(i=3,function(e){if(Array.isArray(e))return e}(n=t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],s=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);s=!0);}catch(e){u=!0,o=e}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(n,i)||cf(n,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),c=a[0],s=a[1],u=a[2];c=c.Users,s=s.Groups,u=u.Teams,o&&o.length&&(c=c.filter((function(e){return-1===o.indexOf(e.Login)})),s=s.filter((function(e){return-1===o.indexOf(e.GroupLabel)})),u=u.filter((function(e){return o.indexOf(-1===e.Label)}))),r([].concat(af(s.map((function(e){return{IdmUser:e}}))),af(u.map((function(e){return{IdmRole:e}}))),af(c.map((function(e){return{IdmUser:e}})))))}))})),df(ff(e),"textFieldUpdate",(function(t){e.setState({searchText:t}),e.state.minChars&&t&&t.length<e.state.minChars||e.loadBuffered(t,350)})),df(ff(e),"getPendingSearchText",(function(){return e.state.searchText||!1})),df(ff(e),"loadBuffered",(function(r,n){if(r||!e._emptyValueList){var o=e.props,i=o.existingOnly,a=o.freeValueAllowed,c=o.excludes;nf().bufferCallback("remote_users_search",n,function(){this.setState({loading:!0});var e=[F().getInstance().user.id,"pydio.anon.user"];this.suggestionLoader(r,function(n){var o=!1,s=n.filter((function(t){return!(t.IdmUser&&!t.IdmUser.IsGroup&&e.indexOf(t.IdmUser.Login)>-1)})).filter((function(e){return!c||(e.IdmUser&&e.IdmUser.IsGroup?0===c.filter((function(t){return t===e.IdmUser.Uuid})).length:e.IdmUser?0===c.filter((function(t){return t===e.IdmUser.Login})).length:0===c.filter((function(t){return t===e.IdmRole.Uuid})).length)})).map((function(e){var n,i,a;return e.IdmUser&&e.IdmUser.IsGroup?(n=e.IdmUser.GroupLabel,a=e.IdmUser.Attributes&&e.IdmUser.Attributes.displayName?e.IdmUser.Attributes.displayName:n,i="mdi mdi-folder-account"):e.IdmUser?(n=e.IdmUser.Login,a=e.IdmUser.Attributes&&e.IdmUser.Attributes.displayName?e.IdmUser.Attributes.displayName:n,i=e.IdmUser.Attributes&&"shared"===e.IdmUser.Attributes.profile?"mdi mdi-account":"mdi mdi-account-box-outline"):(n=e.IdmRole.Uuid,a=e.IdmRole.Label,i="mdi mdi-account-multiple-outline"),o|=a===r,{userObject:e,text:n,value:t().createElement(v.MenuItem,{primaryText:a,leftIcon:t().createElement(v.FontIcon,{className:i,style:{margin:"0 12px"}})})}}));if(r||(this._emptyValueList=s),r&&!o&&(!i||a)){var u=F().getMessages()[448]||"create",l=t().createElement(v.MenuItem,{primaryText:r+(a?"":" ("+u+")"),leftIcon:t().createElement(v.FontIcon,{className:"mdi mdi-account-plus",style:{margin:"0 12px"}})});s=[{text:r,value:l}].concat(af(s))}this.setState({dataSource:s,loading:!1})}.bind(this))}.bind(ff(e)))}else e.setState({dataSource:e._emptyValueList})})),df(ff(e),"onCompleterRequest",(function(t,r){var n=e.props,o=n.freeValueAllowed,i=n.onValueSelected;if(-1===r&&(e.state.dataSource.map((function(e){e.text===t&&(t=e)})),t&&!t.userObject&&o))return i({FreeValue:t.text}),void e.setState({searchText:"",dataSource:[]});t&&(t.userObject?i(t.userObject):o?i({FreeValue:t.text}):e.setState({createUser:t.text}),e.setState({searchText:"",dataSource:[]}))})),df(ff(e),"onUserCreated",(function(t){e.props.onValueSelected(t),e.setState({createUser:null})})),df(ff(e),"onCreationCancelled",(function(){e.setState({createUser:null})})),df(ff(e),"openAddressBook",(function(t){e.setState({addressBookOpen:!0,addressBookAnchor:t.currentTarget})})),df(ff(e),"closeAddressBook",(function(){e.setState({addressBookOpen:!1})})),df(ff(e),"onAddressBookItemSelected",(function(t){e.props.onValueSelected(t)})),e}return r=c,(n=[{key:"componentWillReceiveProps",value:function(){this._emptyValueList=null}},{key:"render",value:function(){var e=this,r=this.props,n=r.pydio,o=r.className,i=r.fieldLabel,a=r.underlineHide,c=r.showAddressBook,s=r.usersFrom,u=this.state,l=u.dataSource,f=u.createUser;return t().createElement("div",{style:{position:"relative",overflow:"visible"},ref:function(t){e._popoverAnchor=t}},t().createElement(mf,{filter:v.AutoComplete.noFilter,dataSource:l,searchText:this.state.searchText,onUpdateInput:this.textFieldUpdate,className:o,openOnFocus:!0,floatingLabelText:i,floatingLabelFixed:!0,underlineShow:!a,fullWidth:!0,onNewRequest:this.onCompleterRequest,listStyle:{maxHeight:350,overflowY:"auto"},onFocus:function(){e.loadBuffered(e.state.searchText,100)},disabled:f,hintText:f?n.MessageHash[485]+" ("+f+")":null}),!f&&t().createElement("div",{style:{position:"absolute",right:c?44:10,bottom:14,height:20,width:20}},t().createElement(v.RefreshIndicator,{size:20,left:0,top:0,status:this.state.loading?"loading":"hide"})),!f&&c&&t().createElement(Ql,{mode:"popover",pydio:n,loaderStyle:{width:320,height:420},onItemSelected:this.onAddressBookItemSelected,usersFrom:s,disableSearch:!0}),t().createElement(v.Popover,{open:f,anchorEl:this._popoverAnchor,anchorOrigin:{horizontal:"left",vertical:"bottom"},targetOrigin:{horizontal:"left",vertical:"top"},onRequestClose:this.onCreationCancelled,canAutoPosition:!1,style:this._popoverAnchor?{width:this._popoverAnchor.clientWidth}:{},zDepth:3},f&&t().createElement(Hu,{onUserCreated:this.onUserCreated.bind(this),onCancel:this.onCreationCancelled.bind(this),style:{width:"100%",height:320},newUserName:f,pydio:n})))}}])&&uf(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),c}(t().Component);function bf(e){return bf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bf(e)}function gf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function wf(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?gf(Object(r),!0).forEach((function(t){Sf(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gf(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Sf(e,t,r){return(t=_f(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Of(e){return function(e){if(Array.isArray(e))return Pf(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Pf(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Pf(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pf(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function kf(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_f(n.key),n)}}function _f(e){var t=function(e,t){if("object"!==bf(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==bf(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===bf(t)?t:String(t)}function Ef(e,t){return Ef=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ef(e,t)}function jf(e){return jf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},jf(e)}df(vf,"propTypes",{renderSuggestion:U().func.isRequired,onValueSelected:U().func.isRequired,fieldLabel:U().string.isRequired,excludes:U().array.isRequired,usersOnly:U().bool,usersFrom:U().oneOf(["local","remote","any"]),existingOnly:U().bool,freeValueAllowed:U().bool,className:U().string});var Cf=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ef(e,t)}(c,e);var r,n,o,i,a=(o=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=jf(o);if(i){var r=jf(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===bf(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),e.subjectsDisabled||(e.subjectsDisabled={READ:{},WRITE:{}}),e.cellAcls&&Object.keys(e.cellAcls).map((function(t){e.cellAcls[t].RoleId&&(e.subjectsDisabled.READ["role:"+e.cellAcls[t].RoleId]=!0)})),(t=a.call(this,e)).state={edit:!1,loading:!0,policies:[],diffPolicies:{add:{},remove:{}},hideGroups:!0===F().getInstance().getPluginConfigs("action.advanced_settings").get("DISABLE_SHARE_GROUPS")},t}return r=c,n=[{key:"componentDidMount",value:function(){this.setState({loading:!0}),this.reload()}},{key:"reload",value:function(){var e=this,t=this.props,r=t.resourceType,n=t.resourceId,o=pydio.user,i=[ef().loadPolicies(r,n),o.getIdmUser()];"team"!==r&&i.push(It().getRestClient().getIdmApi().listTeams()),Promise.all(i).then((function(t){var n=t[0],o=n[0].Resource,i=t[1],a=[];"team"!==r&&t[2]&&(a=t[2].Teams),e.setState({policies:n,idmUser:i,userTeams:a,loading:!1,resourceUuid:o})})).catch((function(t){e.setState({error:t.message,loading:!1})}))}},{key:"revert",value:function(){this.setState({dirtyPolicies:null,diffPolicies:{add:{},remove:{}}})}},{key:"save",value:function(){var e=this,t=this.state,r=t.dirtyPolicies,n=t.diffPolicies,o=this.props,i=o.resourceType,a=o.resourceId,c=o.onSavePolicies;ef().savePolicies(i,a,r).then((function(t){e.setState({policies:t,dirtyPolicies:null,diffPolicies:{add:{},remove:{}}}),c&&c(n)})).catch((function(t){e.setState({error:t.message})}))}},{key:"removePolicy",value:function(e,t){var r=this.state,n=r.policies,o=r.dirtyPolicies,i=r.diffPolicies;o&&(n=o);var a=[];n.map((function(r){r.Action===e&&r.Subject===t||a.push(r)})),i.remove[e+"///"+t]=!0,i.add[e+"///"+t]&&delete i.add[e+"///"+t],this.setState({dirtyPolicies:a,diffPolicies:i})}},{key:"addPolicy",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=this.state,o=n.policies,i=n.dirtyPolicies,a=n.resourceUuid,c=n.diffPolicies,s=Of(i||o),u=new tf.ServiceResourcePolicy;u.Resource=a,u.Effect="allow",u.Subject=t,u.Action=e,s.push(u),c.add[e+"///"+t]=!0,c.remove[e+"///"+t]&&delete c.remove[e+"///"+t],r?this.setState({dirtyPolicies:s,diffPolicies:c,pickedUser:null,pickedLabel:null}):this.setState({dirtyPolicies:s,diffPolicies:c})}},{key:"hasOneWrite",value:function(e){var t=this.state.idmUser,r=t.Roles.map((function(e){return"role:"+e.Uuid}));r.push("user:"+t.Login);for(var n=0;n<r.length;n++)for(var o=0;o<e.length;o++)if(e[o].Subject===r[n]&&"WRITE"===e[o].Action)return!0;return!1}},{key:"findCrtUserSubject",value:function(e){var t=this.state.idmUser,r=["user:"+t.Login,"role:"+t.Uuid],n=e.filter((function(e){return r.indexOf(e.Subject)>-1}));return n.length?n[0].Subject:r[0]}},{key:"listUserRoles",value:function(e){var t=this.state,r=t.hideGroups,n=t.idmUser,o=this.findCrtUserSubject(e),i=this.hasOneWrite(e),a={};n.Roles.map((function(e){e.GroupRole&&!r&&(a["role:"+e.Uuid]=e.Label)})),(a=wf(wf({},this.listOtherUsersSubjects(e,o)),a))[o]="You";for(var c=Object.keys(a),s=[],u=c.length-1;u>=0;u--){var l=c[u],f=a[l];s.push(this.renderLine(l,f,e,!i||l===o))}return{groupBlocks:s,hasWrite:i}}},{key:"listUserTeams",value:function(e,t,r){var n=this;return e.map((function(e){return n.renderLine("role:"+e.Uuid,e.Label,t,r)}))}},{key:"listOtherUsersSubjects",value:function(e,t){var r=this.props,n=r.resourceId,o=r.cellAcls,i=this.state.hideGroups,a={};return e.map((function(e){if(0===e.Subject.indexOf("user:")&&e.Subject!==t&&e.Subject!=="user:"+n&&(a[e.Subject]=e.Subject.substr("user:".length)),o&&0===e.Subject.indexOf("role:")&&o[e.Subject.substr("role:".length)]){var r=e.Subject.substr("role:".length);if(o[r].User){var c=o[r].User;t!=="user:"+c.Login&&t!=="role:"+c.Uuid&&(a[e.Subject]=c.Attributes&&c.Attributes.displayName?c.Attributes.displayName:c.Login)}else if(o[r].Group&&!i){var s=o[r].Group;a[e.Subject]=s.Attributes&&s.Attributes.displayName?s.Attributes.displayName:s.GroupLabel}}})),a}},{key:"pickUser",value:function(e){var t,r;if(e.IdmUser){var n=e.IdmUser,o=n.Attributes||{};n.IsGroup?(t="role:"+n.Uuid,r=o.displayName||n.GroupLabel):(t="user:"+n.Login,r=o.displayName||n.Login)}else{var i=e.IdmRole;t="role:"+i.Uuid,r=i.Label}this.setState({pickedUser:t,pickedLabel:r})}},{key:"renderLine",value:function(e,r,n,o){var i=this,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],c=this.props,s=c.subjectsDisabled,u=c.subjectsHidden,l=c.readonly;if(u&&u[e])return null;var f=!1,p=!1,d=function(){i.addPolicy("READ",e,a)},h=function(){i.addPolicy("WRITE",e,a)};n.map((function(t){t.Subject===e&&("WRITE"===t.Action?(p="WRITE"===t.Action,h=function(){i.removePolicy("WRITE",e)}):"READ"===t.Action&&(f="READ"===t.Action,d=function(){i.removePolicy("READ",e)}))}));var y=o,m=o;return l?(m=!0,y=!0):(s&&s.READ&&s.READ[e]&&(m=!0),s&&s.WRITE&&s.WRITE[e]&&(y=!0)),console.log("Line",e,r,m,y),t().createElement("div",{style:{display:"flex",margin:10,marginRight:0}},t().createElement("div",{style:{flex:1}},r),t().createElement(v.Checkbox,{checked:f,disabled:m,style:{width:40},onCheck:d}),t().createElement(v.Checkbox,{checked:p,disabled:y,style:{width:40},onCheck:h}))}},{key:"render",value:function(){var e=this,r=this.props.muiTheme.appBar,n={title:{paddingLeft:10,backgroundColor:r.color,display:"flex",alignItems:"center",fontSize:16,color:r.textColor},subheader:{margin:10,fontWeight:500,color:"#9E9E9E",display:"flex"},subject:{margin:10},head:{display:"inline-block",width:40,textAlign:"center",fontSize:10}},o=this.state,i=o.edit,a=o.policies,c=o.dirtyPolicies,s=o.error,u=o.idmUser,l=o.userTeams,f=o.loading,p=o.pickedUser,d=o.pickedLabel,h=this.props,y=h.onDismiss,m=h.style,b=h.skipTitle,g=h.resourceId,w=h.pydio,S=h.userListExcludes,O=void 0===S?[]:S,P=h.readonly,k=h.description,_=[],E=w.MessageHash;if(!i)return t().createElement("div",{style:m},!b&&t().createElement("div",{style:wf(wf({},n.title),{},{height:48})},t().createElement("span",{style:{flex:1}},E["visibility.panel.title"])),t().createElement("div",{style:{padding:20,color:"rgba(0,0,0,.43)",fontWeight:500,textAlign:"justify"}},t().createElement("div",{style:{paddingBottom:20}},k),t().createElement("div",{style:{textAlign:"center"}},t().createElement(v.RaisedButton,{label:E["visibility.panel.edit"],primary:!0,onClick:function(){e.setState({edit:!0})}}))));if(!f&&!s){var j=this.listUserRoles(c||a),C=j.groupBlocks,T=j.hasWrite,x=this.listUserTeams(l,c||a,!T),R=t().createElement("div",null,t().createElement("span",{style:n.head},E["visibility.panel.right-read"]),t().createElement("span",{style:n.head},E["visibility.panel.right-edit"]));if(C.length&&(_.push(t().createElement("div",{style:n.subheader},t().createElement("span",{style:{flex:1}},E["visibility.panel.list.users"]),R)),_.push(C),_.push(t().createElement(v.Divider,null))),x.length&&(_.push(t().createElement("div",{style:n.subheader},t().createElement("span",{style:{flex:1}},E["visibility.panel.list.teams"]),R)),_.push(x),_.push(t().createElement(v.Divider,null))),p)_.push(t().createElement("div",{style:n.subheader},E["visibility.panel.setvisible"])),_.push(this.renderLine(p,d,a,!1,!0)),_.push(t().createElement("div",{style:{textAlign:"right"}},t().createElement(v.FlatButton,{label:E[54],onClick:function(){e.setState({pickedUser:null,pickedLabel:null})}}))),_.push(t().createElement(v.Divider,null));else if(!P){var I="user:"+u.Login,L=this.listOtherUsersSubjects(c||a,I),M=[];Object.keys(L).map((function(e){M.push(L[e])})),_.push(t().createElement("div",{style:n.subheader},E["visibility.panel.setvisible"])),_.push(t().createElement("div",{style:{margin:"-10px 10px 0"}},t().createElement(vf,{className:"share-form-users",fieldLabel:E["visibility.panel.pickuser"],renderSuggestion:function(e){return t().createElement("div",{style:{fontSize:13}},e.getExtendedLabel())},onValueSelected:this.pickUser.bind(this),usersOnly:!1,existingOnly:!0,excludes:[g].concat(Of(O),M),pydio:w,showAddressBook:!1,usersFrom:"local"}))),_.push(t().createElement(v.Divider,null))}_.pop()}return t().createElement("div",{style:m},t().createElement("div",{style:n.title},t().createElement("span",{style:{flex:1}},b?"":E["visibility.panel.title"]),c&&t().createElement(v.IconButton,{iconClassName:"mdi mdi-undo-variant",tooltip:E["visibility.panel.revert"],onClick:this.revert.bind(this),iconStyle:{color:r.textColor}}),c&&t().createElement(v.IconButton,{iconClassName:"mdi mdi-content-save",tooltip:E["visibility.panel.save"],onClick:this.save.bind(this),iconStyle:{color:r.textColor}}),!c&&y&&t().createElement(v.IconButton,{iconClassName:"mdi mdi-close",onClick:y,iconStyle:{color:r.textColor}})),s&&t().createElement("div",null,E["visibility.panel.error"],": ",s),t().createElement("div",null,_))}}],n&&kf(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),c}(t().Component);function Tf(e){return Tf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tf(e)}function xf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Rf(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xf(Object(r),!0).forEach((function(t){If(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xf(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function If(e,t,r){return(t=Mf(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Lf(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Mf(n.key),n)}}function Mf(e){var t=function(e,t){if("object"!==Tf(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==Tf(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===Tf(t)?t:String(t)}function Df(e,t){return Df=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Df(e,t)}function Af(e){return Af=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Af(e)}Cf.PropTypes={pydio:U().instanceOf(F()),resourceType:U().string.isRequired,resourceId:U().string.isRequired,description:U().string.isRequired,onSavePolicies:U().func,userListExcludes:U().array,subjectsDisabled:U().array,subjectsHidden:U().object,readonly:U().bool,cellAcls:U().object,onDismiss:U().func,style:U().object,skipTitle:U().bool},Cf=(0,J.muiThemeable)()(Cf);var Nf=__webpack_require__(16689),Uf=__webpack_require__(56880),Bf=__webpack_require__(62610),Ff=__webpack_require__(39455),qf=Ff.IconButton,zf=Ff.Popover,Wf=__webpack_require__(13173).muiThemeable,Vf=__webpack_require__(10757).requireLib("boot"),Gf=Vf.PydioContextConsumer,Hf=Vf.AsyncComponent,Jf=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Df(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Af(n);if(o){var r=Af(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Tf(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(r=i.call(this,e,t)).state={showPicker:!1,pickerAnchor:null,showMailer:!1,mailerAnchor:null,showPolicies:!1,policiesAnchor:null},r}return t=a,r=[{key:"onTeamSelected",value:function(e){this.setState({showPicker:!1}),e.IdmRole&&e.IdmRole.IsTeam&&Uf.getRestClient().getIdmApi().addUserToTeam(e.IdmRole.Uuid,this.props.userId,this.props.reloadAction)}},{key:"onUserSelected",value:function(e){Uf.getRestClient().getIdmApi().addUserToTeam(this.props.team.id,e.IdmUser.Login,this.props.reloadAction)}},{key:"openPicker",value:function(e){this.setState({showPicker:!0,pickerAnchor:e.currentTarget})}},{key:"openPolicies",value:function(e){this.setState({showPolicies:!0,policiesAnchor:e.currentTarget})}},{key:"openMailer",value:function(e){var t=this,r=e.currentTarget;Bf.loadClassesAndApply(["PydioMailer"],(function(){t.setState({mailerLibLoaded:!0},(function(){t.setState({showMailer:!0,mailerAnchor:r})}))}))}},{key:"componentDidUpdate",value:function(e,t){this.props.lockOnSubPopoverOpen&&(!this.state.showPicker&&!this.state.showMailer||t.showPicker||t.showMailer?this.state.showPicker||this.state.showMailer||!t.showPicker&&!t.showMailer||this.props.lockOnSubPopoverOpen(!1):this.props.lockOnSubPopoverOpen(!0))}},{key:"render",value:function(){var e,t,r=this,n=this.props,o=n.getMessage,i=n.muiTheme,a=n.team,c=n.user,s=n.userEditable,u=n.userId,l=n.style,f=(n.zDepth,F().getInstance().getController().actions.has("user_team_create")),p={button:{border:"0px solid "+i.palette.accent2Color,borderRadius:"50%",margin:"0 4px",width:30,height:30,padding:4},icon:{fontSize:20,color:i.palette.accent2Color}},d={},h=[];return c&&c.IdmUser&&c.IdmUser.Attributes&&(c.IdmUser.Attributes.hasEmail||c.IdmUser.Attributes.email)&&(h.push({key:"message",label:o(598),icon:"email",callback:this.openMailer.bind(this)}),d[c.IdmUser.Login]=c.IdmUser),a?(e="team",t=a.id,f&&h.push({key:"users",label:o(599),icon:"account-multiple-plus",callback:this.openPicker.bind(this)})):(e="user",t=u,f&&h.push({key:"teams",label:o(573),icon:"account-multiple-plus",callback:this.openPicker.bind(this)})),!s||this.props.team&&!f||(this.props.onEditAction&&h.push({key:"edit",label:this.props.team?o(580):o(600),icon:"pencil",callback:this.props.onEditAction}),h.push({key:"policies",label:"Visibility",icon:"security",callback:this.openPolicies.bind(this)}),this.props.onDeleteAction&&h.push({key:"delete",label:this.props.team?o(570):o(582),icon:"delete",callback:this.props.onDeleteAction})),0===h.length?null:Nf.createElement("div",{style:Rf({},l)},h.map((function(e){return Nf.createElement(qf,{key:e.key,style:p.button,iconStyle:p.icon,tooltip:e.label,iconClassName:"mdi mdi-"+e.icon,onClick:e.callback})})),Nf.createElement(zf,{open:this.state.showPicker,anchorEl:this.state.pickerAnchor,anchorOrigin:{horizontal:"right",vertical:"top"},targetOrigin:{horizontal:"right",vertical:"top"},onRequestClose:function(){r.setState({showPicker:!1})},useLayerForClickAway:!1,style:{zIndex:2200}},Nf.createElement("div",{style:{width:256,height:320}},Nf.createElement(Ql,{mode:"selector",pydio:this.props.pydio,loaderStyle:{width:320,height:320},onItemSelected:this.props.team?this.onUserSelected.bind(this):this.onTeamSelected.bind(this),teamsOnly:!this.props.team,usersOnly:!!this.props.team}))),Nf.createElement(zf,{open:this.state.showMailer,anchorEl:this.state.mailerAnchor,anchorOrigin:{horizontal:"right",vertical:"top"},targetOrigin:{horizontal:"right",vertical:"top"},useLayerForClickAway:!1,style:{zIndex:2200}},Nf.createElement("div",{style:{width:256,height:320}},this.state.mailerLibLoaded&&Nf.createElement(Hf,{namespace:"PydioMailer",componentName:"Pane",pydio:F().getInstance(),zDepth:0,panelTitle:o(598),uniqueUserStyle:!0,users:d,templateId:"DM",templateData:{From:F().getInstance().user.getPreference("displayName")||F().getInstance().user.id},onDismiss:function(){r.setState({showMailer:!1})},onFieldFocus:this.props.otherPopoverMouseOver}))),Nf.createElement(zf,{open:this.state.showPolicies,anchorEl:this.state.policiesAnchor,anchorOrigin:{horizontal:"right",vertical:"top"},targetOrigin:{horizontal:"right",vertical:"top"},useLayerForClickAway:!1,style:{zIndex:2e3}},Nf.createElement("div",{style:{width:256,height:320}},Nf.createElement(Cf,{description:this.props.pydio.MessageHash["visibility.users.advanced"],pydio:this.props.pydio,resourceType:e,resourceId:t,onDismiss:function(){r.setState({showPolicies:!1})}}))))}}],r&&Lf(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(Nf.Component);function Yf(e){return Yf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yf(e)}Jf.propTypes={user:U().object,team:U().object,userEditable:U().object},Jf=Gf(Jf),Jf=Wf()(Jf);var Kf=["style"],$f=["style"];function Xf(){return Xf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Xf.apply(this,arguments)}function Qf(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function Zf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ep(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Zf(Object(r),!0).forEach((function(t){tp(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Zf(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function tp(e,t,r){return(t=np(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rp(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,np(n.key),n)}}function np(e){var t=function(e,t){if("object"!==Yf(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==Yf(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===Yf(t)?t:String(t)}function op(e,t){return op=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},op(e,t)}function ip(e){return ip=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ip(e)}var ap=__webpack_require__(4305),cp=__webpack_require__(16689),sp=__webpack_require__(39105),up=__webpack_require__(39455),lp=up.FontIcon,fp=up.Popover,pp=up.Paper,dp=up.Avatar,hp=up.CardTitle,yp=(up.Divider,__webpack_require__(13173).muiThemeable),mp=__webpack_require__(85829),vp=__webpack_require__(82702).UsersApi,bp=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&op(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ip(n);if(o){var r=ip(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Yf(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(r=i.call(this,e,t)).state={user:null,avatar:null,graph:null,local:!1},r}return t=a,r=[{key:"componentDidMount",value:function(){this.loadPublicData(this.props.userId,this.props.idmUser)}},{key:"componentWillReceiveProps",value:function(e){this.props.userId&&this.props.userId===e.userId||(this.setState({label:e.userId}),this.loadPublicData(e.userId,e.idmUser))}},{key:"componentWillUnmount",value:function(){this._userLoggedObs&&this.props.pydio.stopObserving("user_logged",this._userLoggedObs)}},{key:"loadPublicData",value:function(e,t){var r=this,n=this.props,o=n.userType,i=n.richCard,a=n.pydio;"group"!==o&&"team"!==o&&vp.getUserPromise(e,t).then((function(t){t.isLocal()&&!r._userLoggedObs&&(r._userLoggedObs=function(t){null!==t&&r.loadPublicData(e)},a.observe("user_logged",r._userLoggedObs)),r.setState({user:t,avatar:t.getAvatar(),local:t.isLocal()}),i&&!t.isNotFound()&&It().getRestClient().getIdmApi().loadUserGraph(e).then((function(e){var t={cells:{},teams:[]};e.SharedCells&&e.SharedCells.forEach((function(r){t.cells=e.SharedCells})),e.BelongsToTeams&&e.BelongsToTeams.forEach((function(e){t.teams.push({id:e.Uuid,label:e.Label,type:"team",IdmRole:e})})),r.setState({graph:t})}))})).catch((function(e){r.setState({loadError:!0})}))}},{key:"render",value:function(){var e=this,t=this.state,r=t.user,n=t.avatar,o=t.graph,i=t.local,c=t.loadError,s=this.props,u=s.pydio,l=s.userId,f=s.userType,p=s.icon,d=s.style,h=s.labelStyle,y=s.avatarLetters,m=s.avatarStyle,v=s.avatarSize,b=s.cardStyle,g=s.className,w=s.labelMaxChars,S=s.labelClassName,O=s.avatarClassName,P=s.displayLabel,k=s.displayLocalLabel,_=s.displayLabelChevron,E=s.labelChevronStyle,j=s.displayAvatar,C=s.useDefaultAvatar,T=s.richCard,x=s.muiTheme,R=s.noActionsPanel;if(!l)return cp.createElement("div",null,"ERROR : empty userId ! ");var I,L,M,D,A,N,U,B,F,q,z,W,V=this.state.label,G=c,H=!1;if(r?(V=r.getLabel(),G=r.isNotFound(),r.isPublic()&&(V=u.MessageHash.public_link_user,H=!0)):V||(V=this.props.userLabel||this.props.userId),i&&k&&(V=u.MessageHash[634]),w&&V&&V.length>w&&(V.split(" ").length>1?(I=V,V=V.split(" ").map((function(e){return e[0]})).join("")):V.split("@").length>1&&(I=V,V=V.split("@")[0].split(".").length>1?V.split("@")[0].split(".").map((function(e){return e[0]})).join(""):V.split("@")[0])),T&&(j=!0,C=!0,P=!0),j&&!n&&V&&(!P||C)){var J,Y=x.palette.avatarsColor;switch("group"!==f&&"team"!==f&&0!==l.indexOf("PYDIO_GRP_/")&&0!==l.indexOf("/USER_TEAM/")||(Y=sp(Y).darken(.2).toString()),f){case"group":J="mdi mdi-account-multiple",L="289",N="folder-avatar";break;case"team":J="mdi mdi-account-multiple-outline",L="603",N="folder-avatar";break;case"remote":J="mdi mdi-account-network",L="604",N="folder-avatar";break;default:J="mdi mdi-account",r?r.getExternal()?(L="589",r.isPublic()&&(L="589",V=u.MessageHash.public_link_user,J="mdi mdi-link")):L="590":L="288"}p&&(J=p),L&&(L=u.MessageHash[L]),T?(A=cp.createElement(lp,{className:J,style:{color:Y}}),D="#f5f5f5"):(D=Y,J&&!y?A=cp.createElement(lp,{className:J}):(M=V.split(" ").map((function(e){return e[0]})).join("").substring(0,2)).length<2&&(M=V.substring(0,2)))}if(T){j=!0,d=ep(ep({},d),{},{flexDirection:"column"}),v=50,m=ep({position:"absolute",right:16,top:12},m);var K=function(){mp.getInstance().deleteKey("user_public_data-graph",e.props.userId),e.loadPublicData(e.props.userId,e.props.idmUser)};U=function(){K(),e.props.reloadAction&&e.props.reloadAction()},B=function(){K(),e.props.onEditAction&&e.props.onEditAction()}}else if(i||G||H||!this.props.richOnHover){if(!i&&!G&&!H&&this.props.richOnClick){q=ap(q=function(){e.lockedBySubPopover||e.setState({showPopover:!1})},350),z=function(t){e.setState({showPopover:!0,popoverAnchor:t.currentTarget}),q.cancel()};var $=function(t){e.setState({showPopover:!0}),q.cancel()},X=this.props,Q=(X.style,Qf(X,$f));W=cp.createElement(fp,{open:this.state.showPopover,anchorEl:this.state.popoverAnchor,onRequestClose:function(t){"clickAway"===t&&e.lockedBySubPopover||e.setState({showPopover:!1})},anchorOrigin:{horizontal:"left",vertical:"bottom"},targetOrigin:{horizontal:"left",vertical:"top"},useLayerForClickAway:!1},cp.createElement(pp,{zDepth:2,style:{width:220,height:320,overflowY:"auto"},onMouseOver:$,onMouseOut:q},cp.createElement(a,Xf({},Q,{richCard:!0,richOnHover:!1,cardSize:220,lockOnSubPopoverOpen:function(t){e.lockedBySubPopover=t,$()}}))))}}else{q=ap(q=function(){e.lockedBySubPopover||e.setState({showPopover:!1})},350),F=function(t){e.setState({showPopover:!0,popoverAnchor:t.currentTarget}),q.cancel()};var Z=function(t){e.setState({showPopover:!0}),q.cancel()},ee=this.props,te=(ee.style,Qf(ee,Kf));W=cp.createElement(fp,{open:this.state.showPopover,anchorEl:this.state.popoverAnchor,onRequestClose:function(t){"clickAway"===t&&e.lockedBySubPopover||e.setState({showPopover:!1})},anchorOrigin:{horizontal:"left",vertical:"center"},targetOrigin:{horizontal:"right",vertical:"center"},useLayerForClickAway:!1},cp.createElement(pp,{zDepth:2,style:{width:220,height:320,overflowY:"auto"},onMouseOver:Z,onMouseOut:q},cp.createElement(a,Xf({},te,{richCard:!0,richOnHover:!1,cardSize:220,lockOnSubPopoverOpen:function(t){e.lockedBySubPopover=t,Z()}}))))}if(n){var re=n;re.indexOf("?")>=0?re+="&dim="+v:re+="?dim="+v,A=cp.createElement(lp,{style:{backgroundImage:"url("+re+")",backgroundSize:"cover",margin:0,width:"100%",height:"100%",borderRadius:"50%",backgroundPosition:"center"}})}var ne,oe=cp.createElement(dp,{icon:A,size:v,style:this.props.avatarOnly?this.props.style:m,backgroundColor:D,className:N||O},M);return this.props.avatarOnly?oe:(T?oe=cp.createElement("div",{style:{textAlign:"center"}},oe):G&&(V=u.MessageHash["user.unknown"]),P&&_&&(ne=cp.createElement("span",{className:"mdi mdi-chevron-down",style:ep(ep({},E),{},{marginLeft:4,fontSize:"0.8em"})})),cp.createElement("div",{className:g,style:d,onMouseOver:F,onMouseOut:q,onClick:z},j&&(n||M||A)&&oe,P&&!T&&cp.createElement("div",{title:I,className:S,style:h},V),ne,P&&T&&cp.createElement(hp,{style:ep({textAlign:"center"},b),title:V,subtitle:L}),T&&r&&!R&&cp.createElement(Jf,Xf({},this.state,this.props,{reloadAction:U,onEditAction:B,style:{paddingLeft:8,paddingBottom:4,backgroundColor:"#f8fafc"}})),T&&o&&!R&&cp.createElement(nu,Xf({graph:o},this.props,{userLabel:V,reloadAction:U,onEditAction:B})),this.props.children,W))}}],r&&rp(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(cp.Component);function gp(e){return gp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gp(e)}function wp(){return wp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},wp.apply(this,arguments)}function Sp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Op(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Sp(Object(r),!0).forEach((function(t){jp(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Sp(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Pp(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Cp(n.key),n)}}function kp(e,t){return kp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},kp(e,t)}function _p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ep(e){return Ep=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ep(e)}function jp(e,t,r){return(t=Cp(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Cp(e){var t=function(e,t){if("object"!==gp(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==gp(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===gp(t)?t:String(t)}bp.propTypes={userId:U().string.isRequired,pydio:U().instanceOf(Pydio),userLabel:U().string,userType:U().oneOf(["user","group","remote","team"]),icon:U().string,richCard:U().bool,richOnHover:U().bool,richOnClick:U().bool,userEditable:U().bool,onEditAction:U().func,onDeleteAction:U().func,reloadAction:U().func,displayLabel:U().bool,displayLocalLabel:U().bool,displayAvatar:U().bool,avatarOnly:U().bool,useDefaultAvatar:U().bool,avatarSize:U().number,avatarLetters:U().bool,noActionsPanel:U().bool,className:U().string,labelClassName:U().string,avatarClassName:U().string,style:U().object,labelStyle:U().object,avatarStyle:U().object},bp.defaultProps={displayLabel:!0,displayAvatar:!0,avatarSize:40,userType:"user",className:"user-avatar-widget",labelClassName:"user-label"},bp=yp()(bp);var Tp=F().requireLib("hoc").ThemedContainers.Popover,xp=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&kp(e,t)}(s,e);var r,o,i,a,c=(i=s,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ep(i);if(a){var r=Ep(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===gp(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _p(e)}(this,e)});function s(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return jp(_p(e=c.call.apply(c,[this].concat(r))),"state",{showMenu:!1}),jp(_p(e),"showMenu",(function(t){var r;r=t?t.currentTarget:e._buttonDOM,e.setState({showMenu:!0,anchor:r})})),jp(_p(e),"menuClicked",(function(t,r,n){e.setState({showMenu:!1})})),e}return r=s,(o=[{key:"componentDidMount",value:function(){var e=this;this.props.openOnEvent&&this.props.pydio.observe(this.props.openOnEvent,(function(){e.showMenu()}))}},{key:"render",value:function(){var e,r=this,o=this.state,i=o.showMenu,a=o.anchor,c=t().createElement("span",{style:{whiteSpace:"nowrap"}},this.props.buttonTitle," ",t().createElement("span",{className:"mdi mdi-menu-down"})),s=this.props.buttonHoverColor||"rgba(255,255,255,0.2)",u={primary:this.props.primary,secondary:this.props.secondary,disabled:this.props.disabled,label:c,onClick:this.showMenu,labelStyle:Op({},this.props.buttonLabelStyle),style:this.props.buttonStyle,backgroundColor:i?s:this.props.buttonBackgroundColor,hoverColor:this.props.buttonHoverColor},l=this.props.menuItems;return l.length&&(e=this.props.raised?t().createElement(v.RaisedButton,wp({},u,{ref:function(e){r._buttonDOM=n().findDOMNode(e)}})):t().createElement(v.FlatButton,wp({},u,{ref:function(e){r._buttonDOM=n().findDOMNode(e)}}))),t().createElement("span",{id:this.props.id,className:this.props.className},e,t().createElement(Tp,{className:"menuPopover",open:i,anchorEl:a,anchorOrigin:{horizontal:this.props.direction||"left",vertical:"bottom"},targetOrigin:{horizontal:this.props.direction||"left",vertical:"top"},onRequestClose:function(){r.setState({showMenu:!1})},style:{marginTop:1},useLayerForClickAway:!1},ze.itemsToMenu(l,this.menuClicked)))}}])&&Pp(r.prototype,o),Object.defineProperty(r,"prototype",{writable:!1}),s}(t().Component);jp(xp,"propTypes",{buttonTitle:U().oneOfType([U().string,U().object]).isRequired,menuItems:U().array.isRequired,className:U().string,raised:U().bool,direction:U().oneOf(["left","right"])});const Rp=Qe(xp),Ip=require("pydio/model/context-menu");var Lp=__webpack_require__.n(Ip);function Mp(e){return Mp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mp(e)}function Dp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ap(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Dp(Object(r),!0).forEach((function(t){qp(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Dp(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Np(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,zp(n.key),n)}}function Up(e,t){return Up=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Up(e,t)}function Bp(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Fp(e){return Fp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Fp(e)}function qp(e,t,r){return(t=zp(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zp(e){var t=function(e,t){if("object"!==Mp(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==Mp(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===Mp(t)?t:String(t)}var Wp=__webpack_require__(580),Vp=__webpack_require__(66405),Gp=F().requireLib("hoc").ThemedContainers.Paper,Hp=function(r){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Up(e,t)}(s,r);var n,o,i,a,c=(i=s,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Fp(i);if(a){var r=Fp(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Mp(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Bp(e)}(this,e)});function s(t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),qp(Bp(r=c.call(this,t)),"showMenu",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;r.setState({showMenu:!0,style:e,menuItems:t||r.state.menuItems})})),qp(Bp(r),"hideMenu",(function(e){if(!e)return r.setState({showMenu:!1}),void(r.props.onMenuClosed&&r.props.onMenuClosed());if(void 0===e||2!==e.button||"contextmenu"===e.type){var t=Vp.findDOMNode(r.menuRef.current);t&&t.contains(e.target)||t===e.target||(r.setState({showMenu:!1}),r.props.onMenuClosed&&r.props.onMenuClosed())}})),qp(Bp(r),"menuClicked",(function(e,t,n){r.hideMenu()})),r.menuRef=(0,e.createRef)(),r.state={showMenu:!1,menuItems:t.menuItems},r}return n=s,(o=[{key:"componentDidMount",value:function(){this._observer=this.hideMenu.bind(this)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this._observer,!1)}},{key:"componentWillReceiveProps",value:function(e){e.menuItems&&this.setState({menuItems:e.menuItems})}},{key:"componentDidUpdate",value:function(e,t){this.state.showMenu?document.addEventListener("click",this._observer,!1):document.removeEventListener("click",this._observer,!1)}},{key:"render",value:function(){var e=this.props,r=e.menuProps,n=e.zDepth,o=void 0===n?1:n,i=this.state,a=i.style,c=void 0===a?{}:a,s=i.menuItems,u=Ap(Ap({},c),{},{zIndex:1e3}),l=ze.itemsToMenu(s,this.menuClicked.bind(this),!1,Ap({ref:this.menuRef,desktop:!0,display:"right",width:250},r));return this.state.showMenu?t().createElement(Gp,{zDepth:o||1,ref:"menuContainer",className:"menu-positioner",style:u},l):null}}])&&Np(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),s}(t().Component);function Jp(e){return Jp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jp(e)}function Yp(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Kp(n.key),n)}}function Kp(e){var t=function(e,t){if("object"!==Jp(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==Jp(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===Jp(t)?t:String(t)}function $p(e,t){return $p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},$p(e,t)}function Xp(e){return Xp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Xp(e)}qp(Hp,"propTypes",{menuItems:Wp.array.isRequired,onExternalClickCheckElements:Wp.func,className:Wp.string,style:Wp.object,onMenuClosed:Wp.func});var Qp=__webpack_require__(16689),Zp=Qp.Component,ed=Qp.createRef,td=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$p(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Xp(n);if(o){var r=Xp(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Jp(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).menu=ed(),t}return t=a,(r=[{key:"modelOpen",value:function(e){var t=Lp().getInstance().getPosition(),r=this.props.pydio;if(e){var n=r.getContextHolder();-1===n.getSelectedNodes().indexOf(e)?(r.observeOnce("actions_refreshed",function(e){this.openMenu("selectionContext",t)}.bind(this)),n.setSelectedNodes([e])):this.openMenu("selectionContext",t)}else this.openMenu("genericContext",t)}},{key:"openMenu",value:function(e,t){var r=this.computeMenuItems(e);this._items=r,this.props.pydio.UI.MOBILE_EXTENSIONS?this.menu.current.showMenu({bottom:0,left:0,right:0,height:200,zIndex:1e4,overflowY:"auto"},r):(t=this.computeVisiblePosition(t,r),this.menu.current.showMenu({top:t.y,left:t.x},r))}},{key:"computeMenuItems",value:function(e){var t=this.props.pydio.Controller.getContextActions(e,["inline","info_panel","info_panel_share"]);return ze.pydioActionsToItems(t)}},{key:"computeVisiblePosition",value:function(e,t){var r=16;t.map((function(e){e.separator?r+=16:r+=32}));var n=Math.max(document.documentElement.clientWidth,window.innerWidth||0),o=Math.max(document.documentElement.clientHeight,window.innerHeight||0);return e.x+250>n?e.x=Math.max(e.x-250,10)-8:e.x+=8,e.y+r>o?e.y=Math.max(e.y-r,10)-8:e.y+=8,e}},{key:"componentDidMount",value:function(){this._modelOpen=this.modelOpen.bind(this),Lp().getInstance().observe("open",this._modelOpen)}},{key:"componentWillUnmount",value:function(){Lp().getInstance().stopObserving("open",this._modelOpen)}},{key:"render",value:function(){var e=this.props.pydio.UI.MOBILE_EXTENSIONS;return React.createElement(Hp,{ref:this.menu,menuItems:this._items||[],onMenuClosed:this.props.onMenuClosed,menuProps:e?{width:600,autoWidth:!1,desktop:!1}:{},zDepth:e?2:1})}}])&&Yp(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(Zp);function rd(e){return rd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rd(e)}function nd(){return nd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},nd.apply(this,arguments)}function od(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function id(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?od(Object(r),!0).forEach((function(t){ld(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):od(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ad(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,fd(n.key),n)}}function cd(e,t){return cd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},cd(e,t)}function sd(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ud(e){return ud=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ud(e)}function ld(e,t,r){return(t=fd(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fd(e){var t=function(e,t){if("object"!==rd(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==rd(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===rd(t)?t:String(t)}var pd=F().requireLib("hoc").ThemedContainers.Popover,dd=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cd(e,t)}(s,e);var r,o,i,a,c=(i=s,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ud(i);if(a){var r=ud(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===rd(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return sd(e)}(this,e)});function s(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return ld(sd(e=c.call.apply(c,[this].concat(r))),"state",{showMenu:!1}),ld(sd(e),"showMenu",(function(t){var r;r=t?t.currentTarget:e._buttonDOM,e.setState({showMenu:!0,anchor:r})})),ld(sd(e),"menuClicked",(function(t,r,n){e.setState({showMenu:!1})})),e}return r=s,(o=[{key:"componentDidMount",value:function(){var e=this;this.props.openOnEvent&&this.props.pydio.observe(this.props.openOnEvent,(function(){e.showMenu()}))}},{key:"render",value:function(){var e,r,o=this,i=this.props,a=i.id,c=i.masterAction,s=i.buttonTitle,u=i.primary,l=i.secondary,f=i.disabled,p=i.raised,d=i.menuItems,h=i.buttonStyle,y=i.buttonLabelStyle,m=i.className,b=i.direction,g=i.muiTheme,w=id({},y),S=id({},y);w.paddingRight?w.paddingRight/=Math.floor(3):w.paddingRight=8,S.paddingLeft?S.paddingLeft/=Math.floor(3):S.paddingLeft=8,S.paddingRight=S.paddingLeft;var O={primary:u,secondary:l,disabled:f,label:s,style:id(id({},h),{},{minWidth:60,borderRadius:"".concat(g.borderRadius,"px 0 0 ").concat(g.borderRadius,"px")}),labelStyle:w,onClick:c},P={primary:u,secondary:l,disabled:f,label:t().createElement("span",{className:"mdi mdi-menu-down"}),style:id(id({},h),{},{minWidth:16,borderRadius:"0 ".concat(g.borderRadius,"px ").concat(g.borderRadius,"px 0")}),labelStyle:S,onClick:this.showMenu},k=this.state,_=k.showMenu,E=k.anchor,j=k.over;d.length&&(p?(r=t().createElement(v.RaisedButton,nd({},P,{ref:function(e){o._buttonDOM=n().findDOMNode(e)}})),e=t().createElement(v.RaisedButton,O)):(r=t().createElement(v.FlatButton,nd({},P,{ref:function(e){o._buttonDOM=n().findDOMNode(e)}})),e=t().createElement(v.FlatButton,O)));var C={whiteSpace:"nowrap",borderRadius:g.borderRadius};return t().createElement("span",{id:a,className:m,onMouseOver:function(){o.setState({over:!0})},onMouseOut:function(){o.setState({over:!1})},style:j||_?id({backgroundColor:"rgba(153, 153, 153, 0.2)"},C):C},e,r,t().createElement(pd,{className:"menuPopover",open:_,anchorEl:E,anchorOrigin:{horizontal:b||"left",vertical:"bottom"},targetOrigin:{horizontal:b||"left",vertical:"top"},onRequestClose:function(){o.setState({showMenu:!1})},style:{marginTop:1},useLayerForClickAway:!1},ze.itemsToMenu(d,this.menuClicked)))}}])&&ad(r.prototype,o),Object.defineProperty(r,"prototype",{writable:!1}),s}(t().Component);ld(dd,"propTypes",{buttonTitle:U().oneOfType([U().string,U().object]).isRequired,masterAction:U().func.isRequired,menuItems:U().array.isRequired,className:U().string,raised:U().bool,direction:U().oneOf(["left","right"])});const hd=Qe((0,J.muiThemeable)()(dd));function yd(e){return yd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yd(e)}function md(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,vd(n.key),n)}}function vd(e){var t=function(e,t){if("object"!==yd(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==yd(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===yd(t)?t:String(t)}function bd(e,t){return bd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},bd(e,t)}function gd(e){return gd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},gd(e)}var wd=__webpack_require__(580),Sd=__webpack_require__(16689),Od=F().requireLib("hoc").ThemedContainers,Pd=Od.Popover,kd=Od.IconButton,_d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&bd(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=gd(n);if(o){var r=gd(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===yd(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(r=i.call(this,e,t)).state={showPopover:!1},r}return t=a,(r=[{key:"showPopover",value:function(e){this.setState({showPopover:!0,anchor:e.currentTarget})}},{key:"render",value:function(){var e=this;return Sd.createElement("span",{className:"toolbars-button-menu "+(this.props.className?this.props.className:"")},Sd.createElement(kd,{ref:"menuButton",tooltip:this.props.buttonTitle,iconClassName:this.props.buttonClassName,onClick:this.showPopover.bind(this),iconStyle:this.props.buttonStyle}),Sd.createElement(Pd,{open:this.state.showPopover,anchorEl:this.state.anchor,anchorOrigin:{horizontal:this.props.direction||"right",vertical:"bottom"},targetOrigin:{horizontal:this.props.direction||"right",vertical:"top"},onRequestClose:function(){e.setState({showPopover:!1})},useLayerForClickAway:!1},this.props.popoverContent))}}])&&md(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(Sd.Component);_d.propTypes={buttonTitle:wd.string.isRequired,buttonClassName:wd.string.isRequired,className:wd.string,direction:wd.oneOf(["right","left"]),popoverContent:wd.object.isRequired};const Ed=_d;function jd(e){return jd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jd(e)}function Cd(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Td(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Cd(Object(r),!0).forEach((function(t){xd(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Cd(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function xd(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==jd(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==jd(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===jd(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Rd(e){return function(e){if(Array.isArray(e))return Id(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Id(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Id(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Id(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Ld=F().requireLib("hoc").ThemedContainers.IconButton;const Md=A()({displayName:"Toolbar",propTypes:{toolbars:U().array,groupOtherList:U().array,renderingType:U().string,controller:U().instanceOf(Controller),toolbarStyle:U().object,buttonStyle:U().object,fabAction:U().string,buttonMenuNoLabel:U().bool},componentDidMount:function(){var e=function(){this.isMounted()&&this.setState({groups:this.props.controller.getToolbarsActions(this.props.toolbars,this.props.groupOtherList)})}.bind(this);this._observer=(0,We.debounce)(e,50),this.props.controller===pydio.Controller?pydio.observe("actions_refreshed",this._observer):this.props.controller.observe("actions_refreshed",this._observer)},componentWillUnmount:function(){this.props.controller===pydio.Controller?pydio.stopObserving("actions_refreshed",this._observer):this.props.controller.stopObserving("actions_refreshed",this._observer)},componentWillReceiveProps:function(e){e.toolbars!==this.props.toolbars&&this.setState({groups:this.props.controller.getToolbarsActions(e.toolbars,e.groupOtherList)})},getInitialState:function(){return{groups:this.props.controller.getToolbarsActions(this.props.toolbars,this.props.groupOtherList)}},getDefaultProps:function(){return{controller:__webpack_require__.g.pydio.Controller,renderingType:"button",groupOtherList:[]}},render:function(){var e=this.state.groups,r=[],n=this.props,o=n.toolbars,i=n.renderingType,a=n.groupOtherList,c=n.buttonStyle,s=n.mergeItemsAsOneMenu,u=n.tooltipPosition,l=n.controller,f=n.fabAction,p=n.fabButtonStyle,d=void 0===p?{}:p,h=n.toolbarStyle,y=n.buttonMenuNoLabel,m=n.buttonMenuPopoverDirection,b=n.flatButtonStyle,g=Rd(o);a.length&&(g=g.concat(["MORE_ACTION"]));var w=!1,S=[];if(g.map((function(n){e.has(n)&&e.get(n).map((function(e){if(!e.deny){var o,a,p,h,g,O=e.options.name;if(p=pydio.MessageHash[e.options.text_id]||e.options.text,h=e.options.icon_class,"MORE_ACTION"===n){var P=e.subMenuItems.dynamicItems,k=[];P.map((function(e){e.separator?k.push(e):e.actionId&&!e.actionId.deny&&k.push(e.actionId.getMenuData())})),o=ze.pydioActionsToItems(k),h="mdi mdi-dots-vertical"}else e.subMenuItems.staticItems?o=ze.pydioActionsToItems(e.subMenuItems.staticItems):e.subMenuItems.dynamicBuilder?o=ze.pydioActionsToItems(e.subMenuItems.dynamicBuilder(l)):e.subMenuItems.popoverContent&&(a=e.subMenuItems.popoverContent);if(o&&e.subMenuItems.masterAction){var _=l.getActionByName(e.subMenuItems.masterAction);_&&!_.deny&&(g=function(){_.apply()})}if(s&&void 0!==o)S=[].concat(Rd(S),[{subHeader:p}],Rd(o),[{separator:!0}]);else{var E="action-"+e.options.name;if("button-icon"===i&&(p=t().createElement("span",{className:"button-icon"},t().createElement("span",{className:"button-icon-icon "+h}),t().createElement("span",{className:"button-icon-label"},p))),o)"button"===i||"button-icon"===i?g?r.push(t().createElement(hd,{key:O,className:E,buttonTitle:p,menuItems:o,masterAction:g,buttonStyle:b,buttonLabelStyle:c,direction:m})):r.push(t().createElement(Rp,{key:O,className:E,buttonTitle:y?"":p,menuItems:o,buttonStyle:b,buttonLabelStyle:c,direction:m})):r.push(t().createElement(ut,{key:O,className:E,onMenuClicked:function(e){e.payload()},buttonClassName:h,buttonTitle:p,menuItems:o,buttonStyle:c,style:b,popoverDirection:m}));else if(a)r.push(t().createElement(Ed,{key:O,className:E,buttonClassName:h,buttonTitle:p,buttonStyle:c,popoverContent:a}));else{var j=function(){e.apply()};f&&f===O?(w=!0,r.push(t().createElement(v.FloatingActionButton,{key:O,onClick:j,iconClassName:h,mini:!0,backgroundColor:d.backgroundColor,style:{position:"absolute",top:-20,left:10}}))):"button-icon"===i||"button"===i?r.push(t().createElement(v.FlatButton,{key:O,className:E,onClick:j,label:p,labelStyle:c,style:b})):r.push(t().createElement(Ld,{key:O,iconClassName:h+" "+E,iconStyle:c,style:b,onClick:j,tooltip:p,tooltipPosition:u}))}}}}))})),s&&S.length){S.pop();var O=this.props,P=O.mergedMenuIcom,k=O.mergedMenuTitle;r.push(t().createElement(ut,{key:o.join("-"),className:"toolbar-"+o.join("-"),onMenuClicked:function(e){e.payload()},buttonClassName:P,buttonTitle:k,menuItems:S,buttonStyle:c,style:b,popoverDirection:m}))}var _=this.props.className?this.props.className:"";_+=" toolbar",r.length||(_+=" empty-toolbar");var E=Td({},h);return w&&(E=Td(Td({},h),{},{minHeight:41})),t().createElement("div",{className:_,style:E,id:this.props.id},r)}}),Dd=require("pydio/http/websocket");var Ad=__webpack_require__.n(Dd),Nd=__webpack_require__(12590),Ud=__webpack_require__.n(Nd);function Bd(e){return Bd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bd(e)}function Fd(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function qd(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Gd(n.key),n)}}function zd(e,t){return zd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},zd(e,t)}function Wd(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Vd(e){return Vd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Vd(e)}function Gd(e){var t=function(e,t){if("object"!==Bd(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==Bd(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===Bd(t)?t:String(t)}var Hd=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zd(e,t)}(c,e);var t,r,n,o,i,a=(o=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Vd(o);if(i){var r=Vd(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Bd(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Wd(e)}(this,e)});function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),function(e,t,r){(t=Gd(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(Wd(t=a.call(this,e)),"subscriptions",void 0),t.currentRepo=e.repositoryId,t.subscriptions={},t.rooms={},t.roomInfos={},t.open(),t}return t=c,r=[{key:"getIdentifier",value:function(e,t){return e+":"+t}},{key:"getRoomInfoFromIdentifier",value:function(e){var t,r,n=(t=e.split(":"),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],s=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);s=!0);}catch(e){u=!0,o=e}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(t,r)||function(e,t){if(e){if("string"==typeof e)return Fd(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Fd(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());return{roomType:n[0],objectId:n[1]}}},{key:"onRoomMessage",value:function(e){if(e){var t=e.Room,r=this.getIdentifier(t.Type,t.RoomTypeObject);this.roomInfos[r]=t}}},{key:"joinRoom",value:function(e,t,r,n){var o=this,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=this.getIdentifier(e,t);if(this.subscriptions[a]){var c=!1;return this.subscriptions[a].map((function(e){e.messageHandler===r&&(c=!0)})),c||this.subscriptions[a].push({messageHandler:r,roomUpdateHandler:n}),this.roomInfos[a]}if(this.connecting){if(i<3)return setTimeout((function(){o.joinRoom(e,t,r,n,i+1)}),1500),null}else if(!this.connOpen)return this.open(),setTimeout((function(){o.joinRoom(e,t,r,n,i+1)}),1500),null;this.subscriptions[e+":"+t]=[{messageHandler:r,roomUpdateHandler:n}];var s={"@type":"JOIN",Room:{Type:e,RoomTypeObject:t}};return this.ws.send(JSON.stringify(s)),this.roomInfos[a]}},{key:"loadHistory",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:40,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(this.connecting&&i<3)setTimeout((function(){r.loadHistory(e,t,n,o,i+1)}),1500);else{var a={"@type":"HISTORY",Room:{Type:e,RoomTypeObject:t},Message:{Message:JSON.stringify({Offset:n,Limit:o})}};this.ws.send(JSON.stringify(a))}}},{key:"leaveRoom",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,o=!1,i=this.getIdentifier(e,t);if(this.subscriptions[i]&&(n?(this.subscriptions[i]=this.subscriptions[i].filter((function(e){return e.messageHandler!==n})),this.subscriptions[i].length?o=!0:delete this.subscriptions[i]):delete this.subscriptions[i]),!o&&(Object.keys(this.rooms).map((function(e){r.rooms[e]===i&&delete r.rooms[e]})),this.connOpen)){var a={"@type":"LEAVE",Room:{Type:e,RoomTypeObject:t}};this.ws.send(JSON.stringify(a))}}},{key:"handleMessageReceived",value:function(e){var t=JSON.parse(e.data);if("ROOM_UPDATE"===t["@type"]){var r=this.getIdentifier(t.Room.Type,t.Room.RoomTypeObject);this.subscriptions[r]&&(this.rooms[t.Room.Uuid]||(this.rooms[t.Room.Uuid]=r),this.onRoomMessage(t),this.subscriptions[r].map((function(e){if(e.roomUpdateHandler)try{e.roomUpdateHandler(t)}catch(e){}})))}else{var n,o=!1;if("DELETE_MSG"===t["@type"]?(o=!0,n=t.Message):n=t,n.RoomUuid&&this.rooms[n.RoomUuid]){var i=this.subscriptions[this.rooms[n.RoomUuid]],a=i.filter((function(e){return e.roomUpdateHandler}));a.length&&(i=a),i.map((function(e){try{e.messageHandler(n,o)}catch(e){}}))}}}},{key:"send",value:function(e){this.ws.send(e)}},{key:"open",value:function(){var e=this;if(this.close(),this.currentRepo){var t=this.pydio.Parameters.get("ENDPOINT_WEBSOCKET").replace("/event","/chat");t&&"/"===t[0]&&(t=t.substr(1));var r=this.pydio.getFrontendUrl(),n="https:"===r.protocol?"wss":"ws",o="".concat(n,"://").concat(r.host,"/")+t;this.ws=new(Ud())(o,[],{maxReconnectionDelay:6e4,reconnectionDelayGrowFactor:1.6,maxRetries:10}),this.connecting=!0,this.ws.addEventListener("open",(function(){Ad().subscribeJWT(e.ws).then((function(){e.connecting=!1,e.connOpen=!0})).catch((function(){e.connecting=!1,e.connOpen=!1}))})),this.ws.addEventListener("message",(function(t){e.handleMessageReceived(t)})),this.ws.addEventListener("close",(function(t){e.connOpen=!1,e.connecting=!1,Ad().logClose(t)})),this.ws.addEventListener("error",(function(e){"EHOSTDOWN"===e.code&&console.error("WebSocket maxRetries reached, host is down!")})),this.hbInterval=setInterval((function(){return e.heartbeat()}),15e3),window.onbeforeunload=function(){e.close()}}}},{key:"close",value:function(){var e=this;null!==this.ws&&(Object.keys(this.subscriptions).map((function(t){var r=e.getRoomInfoFromIdentifier(t),n=r.roomType,o=r.objectId;e.leaveRoom(n,o)})),this.ws.close(1e3,"Closing",{keepClosed:!0}),this.hbInterval&&clearInterval(this.hbInterval))}},{key:"heartbeat",value:function(){var e=this;Object.keys(this.subscriptions).map((function(t){var r=e.getRoomInfoFromIdentifier(t),n={"@type":"JOIN",Room:{Type:r.roomType,RoomTypeObject:r.objectId},Message:{Message:"PING"}};try{e.ws.send(JSON.stringify(n))}catch(e){}}))}}],n=[{key:"getInstance",value:function(e){return void 0!==c._instance||(c._instance=new c(e)),c._instance}}],r&&qd(t.prototype,r),n&&qd(t,n),Object.defineProperty(t,"prototype",{writable:!1}),c}(Ad());const Jd=require("react-markdown");var Yd=__webpack_require__.n(Jd);function Kd(e){return Kd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kd(e)}function $d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Xd(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$d(Object(r),!0).forEach((function(t){Qd(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Qd(e,t,r){return(t=eh(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Zd(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,eh(n.key),n)}}function eh(e){var t=function(e,t){if("object"!==Kd(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==Kd(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===Kd(t)?t:String(t)}function th(e,t){return th=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},th(e,t)}function rh(e){return rh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},rh(e)}var nh=F().requireLib("boot"),oh=nh.PydioContextConsumer,ih=nh.moment,ah=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&th(e,t)}(c,e);var r,n,o,i,a=(o=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=rh(o);if(i){var r=rh(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Kd(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=a.call(this,e)).state={hover:!1},t}return r=c,n=[{key:"render",value:function(){var e=this,r=this.props,n=r.message,o=r.pydio,i=r.hideDate,a=r.sameAuthor,c=r.onDeleteMessage,s=r.moreLoader,u=ih(1e3*parseFloat(n.Timestamp)),l={date:{opacity:.53,textAlign:"center",display:"flex",margin:"5px 0"},dateLine:{flex:1,margin:"10px 20px",borderBottom:"1px solid",opacity:.3},loader:{paddingTop:8,opacity:.8,textAlign:"center"},comment:{padding:"6px 16px",display:"flex",alignItems:"flex-start"},commentContent:{flex:"1",backgroundColor:"transparent",position:"relative",padding:"5px 10px",userSelect:"text",webkitUserSelect:"text"},commentTitle:{fontSize:15,fontWeight:500,padding:"2px 0px 6px"},commentDeleteBox:{position:"absolute",top:5,right:0,cursor:"pointer",fontSize:16,opacity:0,transition:he().getBeziersTransition()}},f=!1;o.user.id===n.Author&&(f=!0);var p,d=t().createElement("div",{style:a?{visibility:"hidden"}:{paddingTop:2}},t().createElement(bp,{avatarSize:30,pydio:o,userId:n.Author,displayLabel:!1,richOnHover:!1,avatarLetters:!0})),h=Xd({},l.commentContent);f&&(this.state.hover&&(l.commentDeleteBox.opacity=1),p=t().createElement("span",{onClick:c,className:"mdi mdi-close",style:l.commentDeleteBox,title:o.MessageHash[7]}));var y=t().createElement("div",{style:h},p," ",t().createElement(Yd(),{className:"chat-message-md",source:n.Message}));a||(y=t().createElement("div",{style:h},t().createElement("div",null,t().createElement(bp,{labelStyle:l.commentTitle,pydio:o,displayLabel:!0,displayAvatar:!1,userId:n.Author})),t().createElement("div",null,p,t().createElement(Yd(),{className:"chat-message-md",source:n.Message}))));var m={},b=Xd({},l.comment);return a&&(m=Xd(Xd({},m),{},{marginTop:-16})),this.state.hover&&(b=Xd(Xd({},b),{},{backgroundColor:"rgba(0,0,0,.01)"})),t().createElement("div",{style:m,onMouseOver:function(){e.setState({hover:!0})},onMouseOut:function(){e.setState({hover:!1})},onContextMenu:function(e){e.stopPropagation()}},s&&t().createElement("div",{style:l.loader},t().createElement(v.FlatButton,{primary:!0,label:F().getMessages()["chat.load-older"],onClick:s})),!i&&t().createElement("div",{style:l.date},t().createElement("span",{style:l.dateLine}),t().createElement("span",{className:"date-from"},u.fromNow()),t().createElement("span",{style:l.dateLine})),t().createElement("div",{style:b},d," ",y))}}],n&&Zd(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),c}(t().Component);function ch(e){return ch="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ch(e)}function sh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function uh(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?sh(Object(r),!0).forEach((function(t){lh(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sh(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function lh(e,t,r){return(t=ph(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fh(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ph(n.key),n)}}function ph(e){var t=function(e,t){if("object"!==ch(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==ch(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===ch(t)?t:String(t)}function dh(e,t){return dh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},dh(e,t)}function hh(e){return hh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},hh(e)}ah.PropTypes={message:U().object,hideDate:U().bool,sameAuthor:U().bool},ah=oh(ah);var yh=function(r){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&dh(e,t)}(s,r);var n,o,i,a,c=(i=s,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=hh(i);if(a){var r=hh(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===ch(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function s(t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(r=c.call(this,t)).container=(0,e.createRef)(),r}return n=s,o=[{key:"render",value:function(){var e=this,r=this.props,n=r.ACLs,o=r.roomUsers,i=r.pydio,a=r.style,c=(this.state||{}).hover,s=void 0!==c&&c,u={container:uh({padding:16,fontWeight:500,color:"#757575",borderBottom:"1px solid #e0e0e0",height:44,transition:he().getBeziersTransition(),overflowY:"auto"},a),user:{margin:5,whiteSpace:"nowrap",padding:"2px 16px",backgroundColor:"rgb(255 255 255 / 53%)",borderRadius:6},online:{color:"#4CAF50",marginLeft:5},offline:{marginLeft:5}},l=Object.keys(n).map((function(e){var t,r=n[e],a=bs().extractLabel(i,r);return r.User&&(t=o&&o.indexOf(r.User.Login)>-1),{online:t,label:a}}));l.sort((function(e,t){return e.online?-1:t.online?1:0}));var f=uh({},u.container);return this.container.current&&(s?f=uh(uh({},f),{},{height:this.container.current.scrollHeight}):this.container.current.scrollHeight>60&&(f=uh(uh({},f),{},{height:56}))),t().createElement("div",{ref:this.container,onMouseEnter:function(){return e.setState({hover:!0})},onMouseLeave:function(){return e.setState({hover:!1})},style:f},l.map((function(e){var r=e.label,n=e.online;return t().createElement("span",{style:u.user},r,void 0!==n&&t().createElement("span",{className:"mdi mdi-checkbox-blank-circle"+(n?"":"-outline"),style:n?u.online:u.offline}),void 0===n&&t().createElement("span",{className:"mdi mdi-account-multiple-outline",style:u.offline}))})))}}],o&&fh(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),s}(t().Component),mh={prefix:"fas",iconName:"chevron-down",icon:[448,512,[],"f078","M207.029 381.476L12.686 187.132c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-.04L224 284.505l154.745-154.021c9.379-9.335 24.544-9.317 33.901.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L240.971 381.476c-9.373 9.372-24.569 9.372-33.942 0z"]},vh={prefix:"fas",iconName:"desktop",icon:[576,512,[],"f108","M528 0H48C21.5 0 0 21.5 0 48v320c0 26.5 21.5 48 48 48h192l-16 48h-72c-13.3 0-24 10.7-24 24s10.7 24 24 24h272c13.3 0 24-10.7 24-24s-10.7-24-24-24h-72l-16-48h192c26.5 0 48-21.5 48-48V48c0-26.5-21.5-48-48-48zm-16 352H64V64h448v288z"]},bh={prefix:"fas",iconName:"microphone",icon:[352,512,[],"f130","M176 352c53.02 0 96-42.98 96-96V96c0-53.02-42.98-96-96-96S80 42.98 80 96v160c0 53.02 42.98 96 96 96zm160-160h-16c-8.84 0-16 7.16-16 16v48c0 74.8-64.49 134.82-140.79 127.38C96.71 376.89 48 317.11 48 250.3V208c0-8.84-7.16-16-16-16H16c-8.84 0-16 7.16-16 16v40.16c0 89.64 63.97 169.55 152 181.69V464H96c-8.84 0-16 7.16-16 16v16c0 8.84 7.16 16 16 16h160c8.84 0 16-7.16 16-16v-16c0-8.84-7.16-16-16-16h-56v-33.77C285.71 418.47 352 344.9 352 256v-48c0-8.84-7.16-16-16-16z"]},gh={prefix:"fas",iconName:"microphone-slash",icon:[640,512,[],"f131","M633.82 458.1l-157.8-121.96C488.61 312.13 496 285.01 496 256v-48c0-8.84-7.16-16-16-16h-16c-8.84 0-16 7.16-16 16v48c0 17.92-3.96 34.8-10.72 50.2l-26.55-20.52c3.1-9.4 5.28-19.22 5.28-29.67V96c0-53.02-42.98-96-96-96s-96 42.98-96 96v45.36L45.47 3.37C38.49-2.05 28.43-.8 23.01 6.18L3.37 31.45C-2.05 38.42-.8 48.47 6.18 53.9l588.36 454.73c6.98 5.43 17.03 4.17 22.46-2.81l19.64-25.27c5.41-6.97 4.16-17.02-2.82-22.45zM400 464h-56v-33.77c11.66-1.6 22.85-4.54 33.67-8.31l-50.11-38.73c-6.71.4-13.41.87-20.35.2-55.85-5.45-98.74-48.63-111.18-101.85L144 241.31v6.85c0 89.64 63.97 169.55 152 181.69V464h-56c-8.84 0-16 7.16-16 16v16c0 8.84 7.16 16 16 16h160c8.84 0 16-7.16 16-16v-16c0-8.84-7.16-16-16-16z"]},wh={prefix:"fas",iconName:"stop",icon:[448,512,[],"f04d","M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48z"]},Sh={prefix:"fas",iconName:"video",icon:[576,512,[],"f03d","M336.2 64H47.8C21.4 64 0 85.4 0 111.8v288.4C0 426.6 21.4 448 47.8 448h288.4c26.4 0 47.8-21.4 47.8-47.8V111.8c0-26.4-21.4-47.8-47.8-47.8zm189.4 37.7L416 177.3v157.4l109.6 75.5c21.2 14.6 50.4-.3 50.4-25.8V127.5c0-25.4-29.1-40.4-50.4-25.8z"]},Oh={prefix:"fas",iconName:"video-slash",icon:[640,512,[],"f4e2","M633.8 458.1l-55-42.5c15.4-1.4 29.2-13.7 29.2-31.1v-257c0-25.5-29.1-40.4-50.4-25.8L448 177.3v137.2l-32-24.7v-178c0-26.4-21.4-47.8-47.8-47.8H123.9L45.5 3.4C38.5-2 28.5-.8 23 6.2L3.4 31.4c-5.4 7-4.2 17 2.8 22.4L42.7 82 416 370.6l178.5 138c7 5.4 17 4.2 22.5-2.8l19.6-25.3c5.5-6.9 4.2-17-2.8-22.4zM32 400.2c0 26.4 21.4 47.8 47.8 47.8h288.4c11.2 0 21.4-4 29.6-10.5L32 154.7v245.5z"]};function Ph(e){return Ph="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ph(e)}function kh(e){return kh="function"==typeof Symbol&&"symbol"===Ph(Symbol.iterator)?function(e){return Ph(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":Ph(e)},kh(e)}function _h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Eh(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jh(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Eh(e,t,r[t])}))}return e}function Ch(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(n=(a=c.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==c.return||c.return()}finally{if(o)throw i}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Th=function(){},xh={},Rh={},Ih={mark:Th,measure:Th};try{"undefined"!=typeof window&&(xh=window),"undefined"!=typeof document&&(Rh=document),"undefined"!=typeof MutationObserver&&MutationObserver,"undefined"!=typeof performance&&(Ih=performance)}catch(e){}var Lh=(xh.navigator||{}).userAgent,Mh=void 0===Lh?"":Lh,Dh=xh,Ah=Rh,Nh=Ih,Uh=(Dh.document,!!Ah.documentElement&&!!Ah.head&&"function"==typeof Ah.addEventListener&&"function"==typeof Ah.createElement),Bh=(~Mh.indexOf("MSIE")||Mh.indexOf("Trident/"),"___FONT_AWESOME___"),Fh="fa",qh="svg-inline--fa",zh="data-fa-i2svg",Wh=[1,2,3,4,5,6,7,8,9,10],Vh=Wh.concat([11,12,13,14,15,16,17,18,19,20]),Gh={GROUP:"group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},Hh=(["xs","sm","lg","fw","ul","li","border","pull-left","pull-right","spin","pulse","rotate-90","rotate-180","rotate-270","flip-horizontal","flip-vertical","flip-both","stack","stack-1x","stack-2x","inverse","layers","layers-text","layers-counter",Gh.GROUP,Gh.SWAP_OPACITY,Gh.PRIMARY,Gh.SECONDARY].concat(Wh.map((function(e){return"".concat(e,"x")}))).concat(Vh.map((function(e){return"w-".concat(e)}))),Dh.FontAwesomeConfig||{});Ah&&"function"==typeof Ah.querySelector&&[["data-family-prefix","familyPrefix"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach((function(e){var t=Ch(e,2),r=t[0],n=t[1],o=function(e){return""===e||"false"!==e&&("true"===e||e)}(function(e){var t=Ah.querySelector("script["+e+"]");if(t)return t.getAttribute(e)}(r));null!=o&&(Hh[n]=o)}));var Jh=jh({},{familyPrefix:Fh,replacementClass:qh,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0},Hh);Jh.autoReplaceSvg||(Jh.observeMutations=!1);var Yh=jh({},Jh);Dh.FontAwesomeConfig=Yh;var Kh=Dh||{};Kh[Bh]||(Kh[Bh]={}),Kh[Bh].styles||(Kh[Bh].styles={}),Kh[Bh].hooks||(Kh[Bh].hooks={}),Kh[Bh].shims||(Kh[Bh].shims=[]);var $h=Kh[Bh],Xh=[];Uh&&((Ah.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(Ah.readyState)||Ah.addEventListener("DOMContentLoaded",(function e(){Ah.removeEventListener("DOMContentLoaded",e),Xh.map((function(e){return e()}))})));var Qh,Zh="pending",ey="settled",ty="fulfilled",ry="rejected",ny=function(){},oy=void 0!==__webpack_require__.g&&void 0!==__webpack_require__.g.process&&"function"==typeof __webpack_require__.g.process.emit,iy="undefined"==typeof setImmediate?setTimeout:setImmediate,ay=[];function cy(){for(var e=0;e<ay.length;e++)ay[e][0](ay[e][1]);ay=[],Qh=!1}function sy(e,t){ay.push([e,t]),Qh||(Qh=!0,iy(cy,0))}function uy(e){var t=e.owner,r=t._state,n=t._data,o=e[r],i=e.then;if("function"==typeof o){r=ty;try{n=o(n)}catch(e){dy(i,e)}}ly(i,n)||(r===ty&&fy(i,n),r===ry&&dy(i,n))}function ly(e,t){var r;try{if(e===t)throw new TypeError("A promises callback cannot return that same promise.");if(t&&("function"==typeof t||"object"===kh(t))){var n=t.then;if("function"==typeof n)return n.call(t,(function(n){r||(r=!0,t===n?py(e,n):fy(e,n))}),(function(t){r||(r=!0,dy(e,t))})),!0}}catch(t){return r||dy(e,t),!0}return!1}function fy(e,t){e!==t&&ly(e,t)||py(e,t)}function py(e,t){e._state===Zh&&(e._state=ey,e._data=t,sy(yy,e))}function dy(e,t){e._state===Zh&&(e._state=ey,e._data=t,sy(my,e))}function hy(e){e._then=e._then.forEach(uy)}function yy(e){e._state=ty,hy(e)}function my(e){e._state=ry,hy(e),!e._handled&&oy&&__webpack_require__.g.process.emit("unhandledRejection",e._data,e)}function vy(e){__webpack_require__.g.process.emit("rejectionHandled",e)}function by(e){if("function"!=typeof e)throw new TypeError("Promise resolver "+e+" is not a function");if(this instanceof by==0)throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this._then=[],function(e,t){function r(e){dy(t,e)}try{e((function(e){fy(t,e)}),r)}catch(e){r(e)}}(e,this)}by.prototype={constructor:by,_state:Zh,_then:null,_data:void 0,_handled:!1,then:function(e,t){var r={owner:this,then:new this.constructor(ny),fulfilled:e,rejected:t};return!t&&!e||this._handled||(this._handled=!0,this._state===ry&&oy&&sy(vy,this)),this._state===ty||this._state===ry?sy(uy,r):this._then.push(r),r.then},catch:function(e){return this.then(null,e)}},by.all=function(e){if(!Array.isArray(e))throw new TypeError("You must pass an array to Promise.all().");return new by((function(t,r){var n=[],o=0;function i(e){return o++,function(r){n[e]=r,--o||t(n)}}for(var a,c=0;c<e.length;c++)(a=e[c])&&"function"==typeof a.then?a.then(i(c),r):n[c]=a;o||t(n)}))},by.race=function(e){if(!Array.isArray(e))throw new TypeError("You must pass an array to Promise.race().");return new by((function(t,r){for(var n,o=0;o<e.length;o++)(n=e[o])&&"function"==typeof n.then?n.then(t,r):t(n)}))},by.resolve=function(e){return e&&"object"===kh(e)&&e.constructor===by?e:new by((function(t){t(e)}))},by.reject=function(e){return new by((function(t,r){r(e)}))};var gy={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};var wy="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function Sy(){for(var e=12,t="";e-- >0;)t+=wy[62*Math.random()|0];return t}function Oy(e){return"".concat(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Py(e){return Object.keys(e||{}).reduce((function(t,r){return t+"".concat(r,": ").concat(e[r],";")}),"")}function ky(e){return e.size!==gy.size||e.x!==gy.x||e.y!==gy.y||e.rotate!==gy.rotate||e.flipX||e.flipY}function _y(e){var t=e.transform,r=e.containerWidth,n=e.iconWidth,o={transform:"translate(".concat(r/2," 256)")},i="translate(".concat(32*t.x,", ").concat(32*t.y,") "),a="scale(".concat(t.size/16*(t.flipX?-1:1),", ").concat(t.size/16*(t.flipY?-1:1),") "),c="rotate(".concat(t.rotate," 0 0)");return{outer:o,inner:{transform:"".concat(i," ").concat(a," ").concat(c)},path:{transform:"translate(".concat(n/2*-1," -256)")}}}var Ey={x:0,y:0,width:"100%",height:"100%"};function jy(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e.attributes&&(e.attributes.fill||t)&&(e.attributes.fill="black"),e}var Cy=(Yh.measurePerformance&&Nh&&Nh.mark&&Nh.measure,function(e,t,r,n){var o,i,a,c=Object.keys(e),s=c.length,u=void 0!==n?function(e,t){return function(r,n,o,i){return e.call(t,r,n,o,i)}}(t,n):t;for(void 0===r?(o=1,a=e[c[0]]):(o=0,a=r);o<s;o++)a=u(a,e[i=c[o]],i,e);return a});function Ty(e,t){var r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).skipHooks,n=void 0!==r&&r,o=Object.keys(t).reduce((function(e,r){var n=t[r];return n.icon?e[n.iconName]=n.icon:e[r]=n,e}),{});"function"!=typeof $h.hooks.addPack||n?$h.styles[e]=jh({},$h.styles[e]||{},o):$h.hooks.addPack(e,o),"fas"===e&&Ty("fa",t)}var xy=$h.styles,Ry=$h.shims,Iy=function(){var e=function(e){return Cy(xy,(function(t,r,n){return t[n]=Cy(r,e,{}),t}),{})};e((function(e,t,r){return t[3]&&(e[t[3]]=r),e})),e((function(e,t,r){var n=t[2];return e[r]=r,n.forEach((function(t){e[t]=r})),e}));var t="far"in xy;Cy(Ry,(function(e,r){var n=r[0],o=r[1],i=r[2];return"far"!==o||t||(o="fas"),e[n]={prefix:o,iconName:i},e}),{})};function Ly(e,t,r){if(e&&e[t]&&e[t][r])return{prefix:t,iconName:r,icon:e[t][r]}}function My(e){var t=e.tag,r=e.attributes,n=void 0===r?{}:r,o=e.children,i=void 0===o?[]:o;return"string"==typeof e?Oy(e):"<".concat(t," ").concat(function(e){return Object.keys(e||{}).reduce((function(t,r){return t+"".concat(r,'="').concat(Oy(e[r]),'" ')}),"").trim()}(n),">").concat(i.map(My).join(""),"</").concat(t,">")}Iy(),$h.styles;function Dy(e){this.name="MissingIcon",this.message=e||"Icon unavailable",this.stack=(new Error).stack}Dy.prototype=Object.create(Error.prototype),Dy.prototype.constructor=Dy;var Ay={fill:"currentColor"},Ny={attributeType:"XML",repeatCount:"indefinite",dur:"2s"},Uy=(jh({},Ay,{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"}),jh({},Ny,{attributeName:"opacity"}));function By(e){var t=e[0],r=e[1],n=Ch(e.slice(4),1)[0];return{found:!0,width:t,height:r,icon:Array.isArray(n)?{tag:"g",attributes:{class:"".concat(Yh.familyPrefix,"-").concat(Gh.GROUP)},children:[{tag:"path",attributes:{class:"".concat(Yh.familyPrefix,"-").concat(Gh.SECONDARY),fill:"currentColor",d:n[0]}},{tag:"path",attributes:{class:"".concat(Yh.familyPrefix,"-").concat(Gh.PRIMARY),fill:"currentColor",d:n[1]}}]}:{tag:"path",attributes:{fill:"currentColor",d:n}}}}jh({},Ay,{cx:"256",cy:"364",r:"28"}),jh({},Ny,{attributeName:"r",values:"28;14;28;28;14;28;"}),jh({},Uy,{values:"1;0;1;1;0;1;"}),jh({},Ay,{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),jh({},Uy,{values:"1;0;0;0;0;1;"}),jh({},Ay,{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),jh({},Uy,{values:"0;0;1;1;0;0;"}),$h.styles,$h.styles;var Fy='svg:not(:root).svg-inline--fa {\n  overflow: visible;\n}\n\n.svg-inline--fa {\n  display: inline-block;\n  font-size: inherit;\n  height: 1em;\n  overflow: visible;\n  vertical-align: -0.125em;\n}\n.svg-inline--fa.fa-lg {\n  vertical-align: -0.225em;\n}\n.svg-inline--fa.fa-w-1 {\n  width: 0.0625em;\n}\n.svg-inline--fa.fa-w-2 {\n  width: 0.125em;\n}\n.svg-inline--fa.fa-w-3 {\n  width: 0.1875em;\n}\n.svg-inline--fa.fa-w-4 {\n  width: 0.25em;\n}\n.svg-inline--fa.fa-w-5 {\n  width: 0.3125em;\n}\n.svg-inline--fa.fa-w-6 {\n  width: 0.375em;\n}\n.svg-inline--fa.fa-w-7 {\n  width: 0.4375em;\n}\n.svg-inline--fa.fa-w-8 {\n  width: 0.5em;\n}\n.svg-inline--fa.fa-w-9 {\n  width: 0.5625em;\n}\n.svg-inline--fa.fa-w-10 {\n  width: 0.625em;\n}\n.svg-inline--fa.fa-w-11 {\n  width: 0.6875em;\n}\n.svg-inline--fa.fa-w-12 {\n  width: 0.75em;\n}\n.svg-inline--fa.fa-w-13 {\n  width: 0.8125em;\n}\n.svg-inline--fa.fa-w-14 {\n  width: 0.875em;\n}\n.svg-inline--fa.fa-w-15 {\n  width: 0.9375em;\n}\n.svg-inline--fa.fa-w-16 {\n  width: 1em;\n}\n.svg-inline--fa.fa-w-17 {\n  width: 1.0625em;\n}\n.svg-inline--fa.fa-w-18 {\n  width: 1.125em;\n}\n.svg-inline--fa.fa-w-19 {\n  width: 1.1875em;\n}\n.svg-inline--fa.fa-w-20 {\n  width: 1.25em;\n}\n.svg-inline--fa.fa-pull-left {\n  margin-right: 0.3em;\n  width: auto;\n}\n.svg-inline--fa.fa-pull-right {\n  margin-left: 0.3em;\n  width: auto;\n}\n.svg-inline--fa.fa-border {\n  height: 1.5em;\n}\n.svg-inline--fa.fa-li {\n  width: 2em;\n}\n.svg-inline--fa.fa-fw {\n  width: 1.25em;\n}\n\n.fa-layers svg.svg-inline--fa {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.fa-layers {\n  display: inline-block;\n  height: 1em;\n  position: relative;\n  text-align: center;\n  vertical-align: -0.125em;\n  width: 1em;\n}\n.fa-layers svg.svg-inline--fa {\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-counter, .fa-layers-text {\n  display: inline-block;\n  position: absolute;\n  text-align: center;\n}\n\n.fa-layers-text {\n  left: 50%;\n  top: 50%;\n  -webkit-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%);\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-counter {\n  background-color: #ff253a;\n  border-radius: 1em;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  color: #fff;\n  height: 1.5em;\n  line-height: 1;\n  max-width: 5em;\n  min-width: 1.5em;\n  overflow: hidden;\n  padding: 0.25em;\n  right: 0;\n  text-overflow: ellipsis;\n  top: 0;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-bottom-right {\n  bottom: 0;\n  right: 0;\n  top: auto;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: bottom right;\n          transform-origin: bottom right;\n}\n\n.fa-layers-bottom-left {\n  bottom: 0;\n  left: 0;\n  right: auto;\n  top: auto;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: bottom left;\n          transform-origin: bottom left;\n}\n\n.fa-layers-top-right {\n  right: 0;\n  top: 0;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-top-left {\n  left: 0;\n  right: auto;\n  top: 0;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: top left;\n          transform-origin: top left;\n}\n\n.fa-lg {\n  font-size: 1.3333333333em;\n  line-height: 0.75em;\n  vertical-align: -0.0667em;\n}\n\n.fa-xs {\n  font-size: 0.75em;\n}\n\n.fa-sm {\n  font-size: 0.875em;\n}\n\n.fa-1x {\n  font-size: 1em;\n}\n\n.fa-2x {\n  font-size: 2em;\n}\n\n.fa-3x {\n  font-size: 3em;\n}\n\n.fa-4x {\n  font-size: 4em;\n}\n\n.fa-5x {\n  font-size: 5em;\n}\n\n.fa-6x {\n  font-size: 6em;\n}\n\n.fa-7x {\n  font-size: 7em;\n}\n\n.fa-8x {\n  font-size: 8em;\n}\n\n.fa-9x {\n  font-size: 9em;\n}\n\n.fa-10x {\n  font-size: 10em;\n}\n\n.fa-fw {\n  text-align: center;\n  width: 1.25em;\n}\n\n.fa-ul {\n  list-style-type: none;\n  margin-left: 2.5em;\n  padding-left: 0;\n}\n.fa-ul > li {\n  position: relative;\n}\n\n.fa-li {\n  left: -2em;\n  position: absolute;\n  text-align: center;\n  width: 2em;\n  line-height: inherit;\n}\n\n.fa-border {\n  border: solid 0.08em #eee;\n  border-radius: 0.1em;\n  padding: 0.2em 0.25em 0.15em;\n}\n\n.fa-pull-left {\n  float: left;\n}\n\n.fa-pull-right {\n  float: right;\n}\n\n.fa.fa-pull-left,\n.fas.fa-pull-left,\n.far.fa-pull-left,\n.fal.fa-pull-left,\n.fab.fa-pull-left {\n  margin-right: 0.3em;\n}\n.fa.fa-pull-right,\n.fas.fa-pull-right,\n.far.fa-pull-right,\n.fal.fa-pull-right,\n.fab.fa-pull-right {\n  margin-left: 0.3em;\n}\n\n.fa-spin {\n  -webkit-animation: fa-spin 2s infinite linear;\n          animation: fa-spin 2s infinite linear;\n}\n\n.fa-pulse {\n  -webkit-animation: fa-spin 1s infinite steps(8);\n          animation: fa-spin 1s infinite steps(8);\n}\n\n@-webkit-keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n\n@keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n.fa-rotate-90 {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=1)";\n  -webkit-transform: rotate(90deg);\n          transform: rotate(90deg);\n}\n\n.fa-rotate-180 {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2)";\n  -webkit-transform: rotate(180deg);\n          transform: rotate(180deg);\n}\n\n.fa-rotate-270 {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=3)";\n  -webkit-transform: rotate(270deg);\n          transform: rotate(270deg);\n}\n\n.fa-flip-horizontal {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=0, mirror=1)";\n  -webkit-transform: scale(-1, 1);\n          transform: scale(-1, 1);\n}\n\n.fa-flip-vertical {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)";\n  -webkit-transform: scale(1, -1);\n          transform: scale(1, -1);\n}\n\n.fa-flip-both, .fa-flip-horizontal.fa-flip-vertical {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)";\n  -webkit-transform: scale(-1, -1);\n          transform: scale(-1, -1);\n}\n\n:root .fa-rotate-90,\n:root .fa-rotate-180,\n:root .fa-rotate-270,\n:root .fa-flip-horizontal,\n:root .fa-flip-vertical,\n:root .fa-flip-both {\n  -webkit-filter: none;\n          filter: none;\n}\n\n.fa-stack {\n  display: inline-block;\n  height: 2em;\n  position: relative;\n  width: 2.5em;\n}\n\n.fa-stack-1x,\n.fa-stack-2x {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.svg-inline--fa.fa-stack-1x {\n  height: 1em;\n  width: 1.25em;\n}\n.svg-inline--fa.fa-stack-2x {\n  height: 2em;\n  width: 2.5em;\n}\n\n.fa-inverse {\n  color: #fff;\n}\n\n.sr-only {\n  border: 0;\n  clip: rect(0, 0, 0, 0);\n  height: 1px;\n  margin: -1px;\n  overflow: hidden;\n  padding: 0;\n  position: absolute;\n  width: 1px;\n}\n\n.sr-only-focusable:active, .sr-only-focusable:focus {\n  clip: auto;\n  height: auto;\n  margin: 0;\n  overflow: visible;\n  position: static;\n  width: auto;\n}\n\n.svg-inline--fa .fa-primary {\n  fill: var(--fa-primary-color, currentColor);\n  opacity: 1;\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa .fa-secondary {\n  fill: var(--fa-secondary-color, currentColor);\n  opacity: 0.4;\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-primary {\n  opacity: 0.4;\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-secondary {\n  opacity: 1;\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa mask .fa-primary,\n.svg-inline--fa mask .fa-secondary {\n  fill: black;\n}\n\n.fad.fa-inverse {\n  color: #fff;\n}';var qy=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.definitions={}}var t,r;return t=e,r=[{key:"add",value:function(){for(var e=this,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var o=r.reduce(this._pullDefinitions,{});Object.keys(o).forEach((function(t){e.definitions[t]=jh({},e.definitions[t]||{},o[t]),Ty(t,o[t]),Iy()}))}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(e,t){var r=t.prefix&&t.iconName&&t.icon?{0:t}:t;return Object.keys(r).map((function(t){var n=r[t],o=n.prefix,i=n.iconName,a=n.icon;e[o]||(e[o]={}),e[o][i]=a})),e}}],r&&_h(t.prototype,r),e}();function zy(){Yh.autoAddCss&&!Hy&&(function(e){if(e&&Uh){var t=Ah.createElement("style");t.setAttribute("type","text/css"),t.innerHTML=e;for(var r=Ah.head.childNodes,n=null,o=r.length-1;o>-1;o--){var i=r[o],a=(i.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(a)>-1&&(n=i)}Ah.head.insertBefore(t,n)}}(function(){var e=Fh,t=qh,r=Yh.familyPrefix,n=Yh.replacementClass,o=Fy;if(r!==e||n!==t){var i=new RegExp("\\.".concat(e,"\\-"),"g"),a=new RegExp("\\--".concat(e,"\\-"),"g"),c=new RegExp("\\.".concat(t),"g");o=o.replace(i,".".concat(r,"-")).replace(a,"--".concat(r,"-")).replace(c,".".concat(n))}return o}()),Hy=!0)}function Wy(e){var t=e.prefix,r=void 0===t?"fa":t,n=e.iconName;if(n)return Ly(Gy.definitions,r,n)||Ly($h.styles,r,n)}var Vy,Gy=new qy,Hy=!1,Jy={transform:function(e){return function(e){var t={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return e?e.toLowerCase().split(" ").reduce((function(e,t){var r=t.toLowerCase().split("-"),n=r[0],o=r.slice(1).join("-");if(n&&"h"===o)return e.flipX=!0,e;if(n&&"v"===o)return e.flipY=!0,e;if(o=parseFloat(o),isNaN(o))return e;switch(n){case"grow":e.size=e.size+o;break;case"shrink":e.size=e.size-o;break;case"left":e.x=e.x-o;break;case"right":e.x=e.x+o;break;case"up":e.y=e.y-o;break;case"down":e.y=e.y+o;break;case"rotate":e.rotate=e.rotate+o}return e}),t):t}(e)}},Yy=(Vy=function(e){var t,r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=n.transform,i=void 0===o?gy:o,a=n.symbol,c=void 0!==a&&a,s=n.mask,u=void 0===s?null:s,l=n.maskId,f=void 0===l?null:l,p=n.title,d=void 0===p?null:p,h=n.titleId,y=void 0===h?null:h,m=n.classes,v=void 0===m?[]:m,b=n.attributes,g=void 0===b?{}:b,w=n.styles,S=void 0===w?{}:w;if(e){var O=e.prefix,P=e.iconName,k=e.icon;return t=jh({type:"icon"},e),r=function(){return zy(),Yh.autoA11y&&(d?g["aria-labelledby"]="".concat(Yh.replacementClass,"-title-").concat(y||Sy()):(g["aria-hidden"]="true",g.focusable="false")),function(e){var t=e.icons,r=t.main,n=t.mask,o=e.prefix,i=e.iconName,a=e.transform,c=e.symbol,s=e.title,u=e.maskId,l=e.titleId,f=e.extra,p=e.watchable,d=void 0!==p&&p,h=n.found?n:r,y=h.width,m=h.height,v="fak"===o,b=v?"":"fa-w-".concat(Math.ceil(y/m*16)),g=[Yh.replacementClass,i?"".concat(Yh.familyPrefix,"-").concat(i):"",b].filter((function(e){return-1===f.classes.indexOf(e)})).filter((function(e){return""!==e||!!e})).concat(f.classes).join(" "),w={children:[],attributes:jh({},f.attributes,{"data-prefix":o,"data-icon":i,class:g,role:f.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(y," ").concat(m)})},S=v&&!~f.classes.indexOf("fa-fw")?{width:"".concat(y/m*16*.0625,"em")}:{};d&&(w.attributes[zh]=""),s&&w.children.push({tag:"title",attributes:{id:w.attributes["aria-labelledby"]||"title-".concat(l||Sy())},children:[s]});var O=jh({},w,{prefix:o,iconName:i,main:r,mask:n,maskId:u,transform:a,symbol:c,styles:jh({},S,f.styles)}),P=n.found&&r.found?function(e){var t,r=e.children,n=e.attributes,o=e.main,i=e.mask,a=e.maskId,c=e.transform,s=o.width,u=o.icon,l=i.width,f=i.icon,p=_y({transform:c,containerWidth:l,iconWidth:s}),d={tag:"rect",attributes:jh({},Ey,{fill:"white"})},h=u.children?{children:u.children.map(jy)}:{},y={tag:"g",attributes:jh({},p.inner),children:[jy(jh({tag:u.tag,attributes:jh({},u.attributes,p.path)},h))]},m={tag:"g",attributes:jh({},p.outer),children:[y]},v="mask-".concat(a||Sy()),b="clip-".concat(a||Sy()),g={tag:"mask",attributes:jh({},Ey,{id:v,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[d,m]},w={tag:"defs",children:[{tag:"clipPath",attributes:{id:b},children:(t=f,"g"===t.tag?t.children:[t])},g]};return r.push(w,{tag:"rect",attributes:jh({fill:"currentColor","clip-path":"url(#".concat(b,")"),mask:"url(#".concat(v,")")},Ey)}),{children:r,attributes:n}}(O):function(e){var t=e.children,r=e.attributes,n=e.main,o=e.transform,i=Py(e.styles);if(i.length>0&&(r.style=i),ky(o)){var a=_y({transform:o,containerWidth:n.width,iconWidth:n.width});t.push({tag:"g",attributes:jh({},a.outer),children:[{tag:"g",attributes:jh({},a.inner),children:[{tag:n.icon.tag,children:n.icon.children,attributes:jh({},n.icon.attributes,a.path)}]}]})}else t.push(n.icon);return{children:t,attributes:r}}(O),k=P.children,_=P.attributes;return O.children=k,O.attributes=_,c?function(e){var t=e.prefix,r=e.iconName,n=e.children,o=e.attributes,i=e.symbol;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:jh({},o,{id:!0===i?"".concat(t,"-").concat(Yh.familyPrefix,"-").concat(r):i}),children:n}]}]}(O):function(e){var t=e.children,r=e.main,n=e.mask,o=e.attributes,i=e.styles,a=e.transform;if(ky(a)&&r.found&&!n.found){var c={x:r.width/r.height/2,y:.5};o.style=Py(jh({},i,{"transform-origin":"".concat(c.x+a.x/16,"em ").concat(c.y+a.y/16,"em")}))}return[{tag:"svg",attributes:o,children:t}]}(O)}({icons:{main:By(k),mask:u?By(u.icon):{found:!1,width:null,height:null,icon:{}}},prefix:O,iconName:P,transform:jh({},gy,i),symbol:c,title:d,maskId:f,titleId:y,extra:{attributes:g,styles:S,classes:v}})},Object.defineProperty(t,"abstract",{get:r}),Object.defineProperty(t,"html",{get:function(){return t.abstract.map((function(e){return My(e)}))}}),Object.defineProperty(t,"node",{get:function(){if(Uh){var e=Ah.createElement("div");return e.innerHTML=t.html,e.children}}}),t}},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(e||{}).icon?e:Wy(e||{}),n=t.mask;return n&&(n=(n||{}).icon?n:Wy(n||{})),Vy(r,jh({},t,{mask:n}))});function Ky(e){return Ky="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ky(e)}function $y(e){return $y="function"==typeof Symbol&&"symbol"===Ky(Symbol.iterator)?function(e){return Ky(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":Ky(e)},$y(e)}function Xy(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Qy(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Zy(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Qy(Object(r),!0).forEach((function(t){Xy(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Qy(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function em(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function tm(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function rm(e){return function(e){return(e-=0)==e}(e)?e:(e=e.replace(/[\-_\s]+(.)?/g,(function(e,t){return t?t.toUpperCase():""}))).substr(0,1).toLowerCase()+e.substr(1)}var nm=!1;try{nm=!0}catch(e){}function om(e){return Jy.icon?Jy.icon(e):null===e?null:"object"===$y(e)&&e.prefix&&e.iconName?e:Array.isArray(e)&&2===e.length?{prefix:e[0],iconName:e[1]}:"string"==typeof e?{prefix:"fas",iconName:e}:void 0}function im(e,t){return Array.isArray(t)&&t.length>0||!Array.isArray(t)&&t?Xy({},e,t):{}}function am(e){var t=e.forwardedRef,r=em(e,["forwardedRef"]),n=r.icon,o=r.mask,i=r.symbol,a=r.className,c=r.title,s=r.titleId,u=om(n),l=im("classes",[].concat(tm(function(e){var t,r=e.spin,n=e.pulse,o=e.fixedWidth,i=e.inverse,a=e.border,c=e.listItem,s=e.flip,u=e.size,l=e.rotation,f=e.pull,p=(Xy(t={"fa-spin":r,"fa-pulse":n,"fa-fw":o,"fa-inverse":i,"fa-border":a,"fa-li":c,"fa-flip-horizontal":"horizontal"===s||"both"===s,"fa-flip-vertical":"vertical"===s||"both"===s},"fa-".concat(u),null!=u),Xy(t,"fa-rotate-".concat(l),null!=l&&0!==l),Xy(t,"fa-pull-".concat(f),null!=f),Xy(t,"fa-swap-opacity",e.swapOpacity),t);return Object.keys(p).map((function(e){return p[e]?e:null})).filter((function(e){return e}))}(r)),tm(a.split(" ")))),f=im("transform","string"==typeof r.transform?Jy.transform(r.transform):r.transform),p=im("mask",om(o)),d=Yy(u,Zy({},l,{},f,{},p,{symbol:i,title:c,titleId:s}));if(!d)return function(){var e;!nm&&console&&"function"==typeof console.error&&(e=console).error.apply(e,arguments)}("Could not find icon",u),null;var h=d.abstract,y={ref:t};return Object.keys(r).forEach((function(e){am.defaultProps.hasOwnProperty(e)||(y[e]=r[e])})),cm(h[0],y)}am.displayName="FontAwesomeIcon",am.propTypes={border:U().bool,className:U().string,mask:U().oneOfType([U().object,U().array,U().string]),fixedWidth:U().bool,inverse:U().bool,flip:U().oneOf(["horizontal","vertical","both"]),icon:U().oneOfType([U().object,U().array,U().string]),listItem:U().bool,pull:U().oneOf(["right","left"]),pulse:U().bool,rotation:U().oneOf([0,90,180,270]),size:U().oneOf(["lg","xs","sm","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:U().bool,symbol:U().oneOfType([U().bool,U().string]),title:U().string,transform:U().oneOfType([U().string,U().object]),swapOpacity:U().bool},am.defaultProps={border:!1,className:"",mask:null,fixedWidth:!1,inverse:!1,flip:null,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,symbol:!1,title:"",transform:null,swapOpacity:!1};var cm=function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("string"==typeof r)return r;var o=(r.children||[]).map((function(r){return e(t,r)})),i=Object.keys(r.attributes||{}).reduce((function(e,t){var n=r.attributes[t];switch(t){case"class":e.attrs.className=n,delete r.attributes.class;break;case"style":e.attrs.style=n.split(";").map((function(e){return e.trim()})).filter((function(e){return e})).reduce((function(e,t){var r,n=t.indexOf(":"),o=rm(t.slice(0,n)),i=t.slice(n+1).trim();return o.startsWith("webkit")?e[(r=o,r.charAt(0).toUpperCase()+r.slice(1))]=i:e[o]=i,e}),{});break;default:0===t.indexOf("aria-")||0===t.indexOf("data-")?e.attrs[t.toLowerCase()]=n:e.attrs[rm(t)]=n}return e}),{attrs:{}}),a=n.style,c=void 0===a?{}:a,s=em(n,["style"]);return i.attrs.style=Zy({},i.attrs.style,{},c),t.apply(void 0,[r.tag,Zy({},i.attrs,{},s)].concat(tm(o)))}.bind(null,t().createElement),sm=__webpack_require__(87001),um=__webpack_require__(9516),lm=__webpack_require__(71970),fm=__webpack_require__(94600);function pm(){return pm=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},pm.apply(this,arguments)}var dm=new Map,hm=new WeakMap,ym=0;function mm(e,t,r){if(void 0===r&&(r={}),!e)return function(){};var n=function(e){var t=function(e){return Object.keys(e).sort().filter((function(t){return void 0!==e[t]})).map((function(t){return t+"_"+("root"===t?(r=e.root)?(hm.has(r)||(ym+=1,hm.set(r,ym.toString())),hm.get(r)):"0":e[t]);var r})).toString()}(e),r=dm.get(t);if(!r){var n,o=new Map,i=new IntersectionObserver((function(t){t.forEach((function(t){var r,i=t.isIntersecting&&n.some((function(e){return t.intersectionRatio>=e}));e.trackVisibility&&void 0===t.isVisible&&(t.isVisible=i),null==(r=o.get(t.target))||r.forEach((function(e){e(i,t)}))}))}),e);n=i.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),r={id:t,observer:i,elements:o},dm.set(t,r)}return r}(r),o=n.id,i=n.observer,a=n.elements,c=a.get(e)||[];return a.has(e)||a.set(e,c),c.push(t),i.observe(e),function(){c.splice(c.indexOf(t),1),0===c.length&&(a.delete(e),i.unobserve(e)),0===a.size&&(i.disconnect(),dm.delete(o))}}function vm(e){return"function"!=typeof e.children}var bm=function(t){var r,n;function o(e){var r;return(r=t.call(this,e)||this).node=null,r._unobserveCb=null,r.handleNode=function(e){r.node&&(r.unobserve(),e||r.props.triggerOnce||r.props.skip||r.setState({inView:!!r.props.initialInView,entry:void 0})),r.node=e||null,r.observeNode()},r.handleChange=function(e,t){e&&r.props.triggerOnce&&r.unobserve(),vm(r.props)||r.setState({inView:e,entry:t}),r.props.onChange&&r.props.onChange(e,t)},r.state={inView:!!e.initialInView,entry:void 0},r}n=t,(r=o).prototype=Object.create(n.prototype),r.prototype.constructor=r,r.__proto__=n;var i=o.prototype;return i.componentDidUpdate=function(e){e.rootMargin===this.props.rootMargin&&e.root===this.props.root&&e.threshold===this.props.threshold&&e.skip===this.props.skip&&e.trackVisibility===this.props.trackVisibility&&e.delay===this.props.delay||(this.unobserve(),this.observeNode())},i.componentWillUnmount=function(){this.unobserve(),this.node=null},i.observeNode=function(){if(this.node&&!this.props.skip){var e=this.props,t=e.threshold,r=e.root,n=e.rootMargin,o=e.trackVisibility,i=e.delay;this._unobserveCb=mm(this.node,this.handleChange,{threshold:t,root:r,rootMargin:n,trackVisibility:o,delay:i})}},i.unobserve=function(){this._unobserveCb&&(this._unobserveCb(),this._unobserveCb=null)},i.render=function(){if(!vm(this.props)){var t=this.state,r=t.inView,n=t.entry;return this.props.children({inView:r,entry:n,ref:this.handleNode})}var o=this.props,i=o.children,a=o.as,c=o.tag,s=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(o,["children","as","tag","triggerOnce","threshold","root","rootMargin","onChange","skip","trackVisibility","delay","initialInView"]);return(0,e.createElement)(a||c||"div",pm({ref:this.handleNode},s),i)},o}(e.Component);bm.displayName="InView",bm.defaultProps={threshold:0,triggerOnce:!1,initialInView:!1};var gm=__webpack_require__(6860),wm=function(t){var r=t.track,n=t.isLocal,o=(0,e.useRef)();return(0,e.useEffect)((function(){if(!n)return o.current=r.attach(),r.sid&&o.current.setAttribute("data-audio-track-id",r.sid),function(){return r.detach().forEach((function(e){return e.remove()}))}}),[r,n]),null},Sm={video:"_2WNzJ",participant:"_34YL4",placeholder:"_30KSQ",participantBar:"_2LCHl",screenShare:"_1FIqv",iconRed:"_3LzZj",controlsWrapper:"_2kKks",buttonWrapper:"_3w3nM",button:"_hRq5k",icon:"_1Nxni",dangerButton:"_Rt0RH",dropdown:"_3Lz0y",hasDropdown:"_3Bgvz",separator:"_1VLMM",popoverMenu:"_3XXS4",list:"_dKNN7"},Om=function(r){var n=r.label,o=r.disabled,i=r.onClick,a=r.icon,c=r.className,s=r.menuItems,u=r.onMenuItemClick,l=(0,e.useState)(!1),f=l[0],p=l[1],d=Sm.button;c&&(d+=" "+c);var h,y=t().createElement("div",null);return s&&s.length>0&&(d+=" "+Sm.hasDropdown,h=t().createElement("button",{disabled:o,className:Sm.button+" "+Sm.dropdown,onClick:function(){return p(!f)}},t().createElement("div",{className:Sm.separator}),t().createElement(am,{height:32,icon:mh})),y=t().createElement("div",{className:Sm.popoverMenu},t().createElement("ul",{className:Sm.list},null==s?void 0:s.map((function(e,r){return t().createElement("li",{key:r,onClick:function(){return function(e){u&&u(e),p(!1)}(e)}},e.label)}))))),t().createElement(sm.Popover,{isOpen:f,positions:["top"],content:y},t().createElement("div",{className:Sm.buttonWrapper},t().createElement("button",{disabled:o,className:d,onClick:i},a&&t().createElement(am,{className:Sm.icon,height:32,icon:a}),n),h))};function Pm(e,t){try{var r=e()}catch(e){return t(e)}return r&&r.then?r.then(void 0,t):r}function km(t){var r,n=(0,e.useState)(!1),o=n[0],i=n[1],a=(0,e.useState)(!1),c=a[0],s=a[1],u=(0,e.useState)(),l=u[0],f=u[1],p=(0,e.useState)([]),d=p[0],h=p[1],y=(0,e.useState)([]),m=y[0],v=y[1],b=function(){h(Array.from(t.tracks.values())),v(Array.from(t.tracks.values()).filter((function(e){return void 0!==e.track})))};return(0,e.useEffect)((function(){var e=function(e){e.kind===um.Track.Kind.Audio&&i(!0)},r=function(e){e.kind===um.Track.Kind.Audio&&i(!1)},n=function(){t.metadata&&f(t.metadata)},o=function(){s(t.isSpeaking)};return t.on(um.ParticipantEvent.TrackMuted,e),t.on(um.ParticipantEvent.TrackUnmuted,r),t.on(um.ParticipantEvent.MetadataChanged,n),t.on(um.ParticipantEvent.IsSpeakingChanged,o),t.on(um.ParticipantEvent.TrackPublished,b),t.on(um.ParticipantEvent.TrackUnpublished,b),t.on(um.ParticipantEvent.TrackSubscribed,b),t.on(um.ParticipantEvent.TrackUnsubscribed,b),t.on("localtrackchanged",b),n(),o(),b(),function(){t.off(um.ParticipantEvent.TrackMuted,e),t.off(um.ParticipantEvent.TrackUnmuted,r),t.off(um.ParticipantEvent.MetadataChanged,n),t.off(um.ParticipantEvent.IsSpeakingChanged,o),t.off(um.ParticipantEvent.TrackPublished,b),t.off(um.ParticipantEvent.TrackUnpublished,b),t.off(um.ParticipantEvent.TrackSubscribed,b),t.off(um.ParticipantEvent.TrackUnsubscribed,b),t.off("localtrackchanged",b)}}),[t]),t.audioTracks.forEach((function(e){r=e.isMuted})),void 0===r&&(r=!0),o!==r&&i(r),{isLocal:t instanceof um.LocalParticipant,isSpeaking:c,isMuted:o,publications:d,subscribedTracks:m,metadata:l,unpublishTrack:function(e){try{if(!(t instanceof um.LocalParticipant))throw new Error("could not unpublish, not a local participant");return t.unpublishTrack(e),t.emit("localtrackchanged"),Promise.resolve()}catch(e){return Promise.reject(e)}}}}"undefined"!=typeof Symbol&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator"))),"undefined"!=typeof Symbol&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));var _m=function(e){var r,n,o,i=e.room,a=e.enableScreenShare,c=e.enableAudio,s=e.enableVideo,u=e.onLeave,l=km(i.localParticipant),f=l.publications,p=l.isMuted,d=l.unpublishTrack,h=f.find((function(e){return e.kind===um.Track.Kind.Audio})),y=f.find((function(e){return e.kind===um.Track.Kind.Video&&"screen"!==e.trackName})),m=f.find((function(e){return e.kind===um.Track.Kind.Video&&"screen"===e.trackName}));return void 0===a&&(a=!0),void 0===s&&(s=!0),void 0===c&&(c=!0),c&&(r=!h||p?t().createElement(Om,{label:"Unmute",icon:gh,onClick:function(){try{var e=function(){if(!h)return Promise.resolve((0,um.createLocalAudioTrack)()).then((function(e){i.localParticipant.publishTrack(e)}));h.unmute()}();return Promise.resolve(e&&e.then?e.then((function(){})):void 0)}catch(e){return Promise.reject(e)}}}):t().createElement(Om,{label:"Mute",icon:bh,onClick:function(){return h.mute()}})),s&&(n=null!=y&&y.track?t().createElement(Om,{label:"Stop video",icon:Sh,onClick:function(){return d(y.track)}}):t().createElement(Om,{label:"Start video",icon:Oh,onClick:function(){try{return Promise.resolve((0,um.createLocalVideoTrack)()).then((function(e){i.localParticipant.publishTrack(e)}))}catch(e){return Promise.reject(e)}}})),a&&(o=null!=m&&m.track?t().createElement(Om,{label:"Stop sharing",icon:wh,onClick:function(){return d(m.track)}}):t().createElement(Om,{label:"Share screen",icon:vh,onClick:function(){try{var e=Pm((function(){return Promise.resolve(navigator.mediaDevices.getDisplayMedia({video:{width:um.VideoPresets.fhd.resolution.width,height:um.VideoPresets.fhd.resolution.height}})).then((function(e){i.localParticipant.publishTrack(e.getTracks()[0],{name:"screen",videoEncoding:{maxBitrate:3e6,maxFramerate:30}})}))}),(function(){}));return Promise.resolve(e&&e.then?e.then((function(){})):void 0)}catch(e){return Promise.reject(e)}}})),t().createElement("div",{className:Sm.controlsWrapper},r,n,o,u&&t().createElement(Om,{label:"End",className:Sm.dangerButton,onClick:function(){i.disconnect(),u(i)}}))},Em=function(r){var n,o=r.track,i=r.isLocal,a=r.objectFit,c=r.className,s=r.width,u=r.height,l=(0,e.useRef)(null);(0,e.useEffect)((function(){var e=l.current;if(e)return e.muted=!0,o.attach(e),function(){o.detach(e)}}),[o,l]);var f="environment"!==(null===(n=o.mediaStreamTrack)||void 0===n?void 0:n.getSettings().facingMode),p={transform:i&&f?"rotateY(180deg)":"",width:s,height:u};return a&&(p.objectFit=a),t().createElement("video",{ref:l,className:null!=c?c:Sm.video,style:p})},jm=function(r){var n=r.participant,o=r.width,i=r.height,a=r.className,c=r.aspectWidth,s=r.aspectHeight,u=r.displayName,l=r.showOverlay,f=r.quality,p=r.adaptiveVideo,d=r.onMouseEnter,h=r.onMouseLeave,y=r.onClick,m=km(n),v=m.isLocal,b=m.isMuted,g=m.subscribedTracks,w=function(t){var r={},n=r.threshold,o=r.delay,i=r.trackVisibility,a=r.rootMargin,c=r.root,s=r.triggerOnce,u=r.skip,l=r.initialInView,f=(0,e.useRef)(),p=(0,e.useState)({inView:!!l}),d=p[0],h=p[1],y=(0,e.useCallback)((function(e){void 0!==f.current&&(f.current(),f.current=void 0),u||e&&(f.current=mm(e,(function(e,t){h({inView:e,entry:t}),t.isIntersecting&&s&&f.current&&(f.current(),f.current=void 0)}),{root:c,rootMargin:a,threshold:n,trackVisibility:i,delay:o}))}),[Array.isArray(n)?n.toString():n,c,a,s,u,i,o]);(0,e.useEffect)((function(){f.current||!d.entry||s||u||h({inView:!!l})}));var m=[y,d.inView,d.entry];return m.ref=m[0],m.inView=m[1],m.entry=m[2],m}(),S=w.ref,O=w.inView,P=(0,e.useState)(),k=P[0],_=P[1],E=(0,e.useState)(!0),j=E[0],C=E[1],T=(0,e.useState)(),x=T[0],R=T[1];(0,e.useEffect)((function(){if(S){var e=O;p||(e=!0),j!==e&&C(e)}}),[S,n,O,p]),(0,e.useEffect)((function(){var e;g.forEach((function(t){t.isSubscribed&&t.kind===um.Track.Kind.Video&&"screen"!==t.trackName&&!e&&(e=t)})),_(e)}),[g]),(0,e.useEffect)((function(){if(x&&(clearTimeout(x),R(void 0)),k instanceof um.RemoteTrackPublication)return j&&k.setEnabled(!0),R(setTimeout((function(){k.setEnabled(j),j&&k.setVideoQuality(null!=f?f:lm.VideoQuality.HIGH)}),3e3)),function(){x&&(clearTimeout(x),R(void 0))}}),[f,j,k]);var I,L={width:o,height:i},M="contain";c&&s&&null!=k&&k.dimensions&&(c-s)*(k.dimensions.width-k.dimensions.height)>0&&(M="cover"),u||(u=n.identity,v&&(u+=" (You)")),I=null!=k&&k.track?t().createElement(Em,{track:k.track,isLocal:v,objectFit:M,width:"100%",height:"100%"}):t().createElement("div",{className:Sm.placeholder});var D=[Sm.participant];return a&&D.push(a),t().createElement("div",{ref:S,className:D.join(" "),style:L,onMouseEnter:d,onMouseLeave:h,onClick:y},c&&s&&t().createElement(fm.ZP,{ratio:c/s},I),(!c||!s)&&I,l&&t().createElement("div",{className:Sm.participantBar},t().createElement("div",null,u),t().createElement("div",null,t().createElement(am,{icon:b?gh:bh,height:24,className:b?Sm.iconRed:Sm.iconNormal}))))},Cm=function(e){var r=e.track,n=e.width,o=e.height;return t().createElement("div",{className:Sm.screenShare},t().createElement(Em,{track:r,isLocal:!1,width:n,height:o}))},Tm=function(r){var n=r.roomState,o=r.participantRenderer,i=r.controlRenderer,a=r.onLeave,c=r.adaptiveVideo,s=n.isConnecting,u=n.error,l=n.participants,f=n.room,p=(0,e.useState)(!1),d=p[0],h=p[1];if(u)return t().createElement("div",null,"error ",u.message);if(s)return t().createElement("div",null,"connecting");if(!f)return t().createElement("div",null,"room closed");if(0===l.length)return t().createElement("div",null,"no one is in the room");var y,m,v,b=null!=o?o:jm,g=null!=i?i:_m;return l.forEach((function(e){e instanceof um.LocalParticipant||e.videoTracks.forEach((function(e){"screen"===e.trackName&&e.track&&(y=e.track)}))})),y?(m=l,v=t().createElement(Cm,{track:y,height:"100%",width:"100%"})):(m=l.slice(1),v=t().createElement(b,{key:l[0].identity,participant:l[0],showOverlay:d,quality:lm.VideoQuality.HIGH,onMouseEnter:function(){return h(!0)},onMouseLeave:function(){return h(!1)}})),t().createElement("div",{className:"_2sm4e"},t().createElement("div",{className:"_2VE66"},t().createElement("div",{className:"_2kKDi"},v),t().createElement("div",{className:"_gA0MQ"},m.map((function(e,r){var n=lm.VideoQuality.HIGH;return c&&r>4&&(n=lm.VideoQuality.LOW),t().createElement(b,{key:e.identity,participant:e,width:"100%",aspectWidth:16,aspectHeight:9,showOverlay:d,quality:n,onMouseEnter:function(){return h(!0)},onMouseLeave:function(){return h(!1)},adaptiveVideo:c})})))),t().createElement("div",{className:"_1smc2"},t().createElement(g,{room:f,onLeave:a})))},xm=function(r){var n=r.roomState,o=r.participantRenderer,i=r.controlRenderer,a=r.onLeave,c=r.adaptiveVideo,s=n.isConnecting,u=n.error,l=n.participants,f=n.room,p=(0,e.useState)(!1),d=p[0],h=p[1];if(u)return t().createElement("div",null,"error ",u.message);if(s)return t().createElement("div",null,"connecting");if(!f)return t().createElement("div",null,"room closed");if(0===l.length)return t().createElement("div",null,"no one is in the room");var y,m,v,b=null!=o?o:jm,g=null!=i?i:_m;return l.forEach((function(e){e instanceof um.LocalParticipant||e.videoTracks.forEach((function(e){"screen"===e.trackName&&e.track&&(y=e.track)}))})),y?(m=l,v=t().createElement(Cm,{track:y,height:"100%",width:"100%"})):(m=l.slice(1),v=t().createElement(b,{key:l[0].identity,participant:l[0],showOverlay:d,width:"100%",height:"100%",quality:lm.VideoQuality.MEDIUM,onMouseEnter:function(){return h(!0)},onMouseLeave:function(){return h(!1)},adaptiveVideo:c})),t().createElement("div",{className:"_2zM8F"},t().createElement("div",{className:"_9PXrI"},v),t().createElement("div",{className:"_Tl5ht"},m.map((function(e,r){var n=lm.VideoQuality.MEDIUM;return c&&r>4&&(n=lm.VideoQuality.LOW),t().createElement(b,{key:e.identity,participant:e,className:"_jGXiG",aspectWidth:4,aspectHeight:3,showOverlay:d,quality:n,onMouseEnter:function(){return h(!0)},onMouseLeave:function(){return h(!1)},adaptiveVideo:c})}))),t().createElement("div",{className:"_3MB5b"},t().createElement(g,{room:f,enableScreenShare:!1,onLeave:a})))},Rm=function(e){var r;return r=(0,gm.useMediaQuery)({query:"(max-width: 800px)"})?t().createElement(xm,Object.assign({},e)):t().createElement(Tm,Object.assign({},e)),t().createElement(t().Fragment,null,r,e.roomState.audioTracks.map((function(e){return t().createElement(wm,{key:e.sid,track:e,isLocal:!1})})))};function Im(t){var r,n=(0,e.useState)(),o=n[0],i=n[1],a=(0,e.useState)(!1),c=a[0],s=a[1],u=(0,e.useState)(),l=u[0],f=u[1],p=(0,e.useState)([]),d=p[0],h=p[1],y=(0,e.useState)([]),m=y[0],v=y[1],b=null!=(r=null==t?void 0:t.sortParticipants)?r:Lm,g=(0,e.useCallback)((function(e,t,r){try{return s(!0),Promise.resolve(Pm((function(){return Promise.resolve((0,um.connect)(e,t,r)).then((function(e){i(e);var t=function(){var t=Array.from(e.participants.values()),r=[e.localParticipant];r.push.apply(r,t),b(r,e.localParticipant),h(r)},r=function(r){if(t(),!r||r.kind===um.Track.Kind.Audio){var n=[];e.participants.forEach((function(e){e.audioTracks.forEach((function(e){e.track&&e.kind===um.Track.Kind.Audio&&n.push(e.track)}))})),v(n)}};return e.once(um.RoomEvent.Disconnected,(function(){setTimeout((function(){return i(void 0)})),e.off(um.RoomEvent.ParticipantConnected,t),e.off(um.RoomEvent.ParticipantDisconnected,t),e.off(um.RoomEvent.ActiveSpeakersChanged,t),e.off(um.RoomEvent.TrackSubscribed,r),e.off(um.RoomEvent.TrackUnsubscribed,r)})),e.on(um.RoomEvent.ParticipantConnected,t),e.on(um.RoomEvent.ParticipantDisconnected,t),e.on(um.RoomEvent.ActiveSpeakersChanged,t),e.on(um.RoomEvent.TrackSubscribed,r),e.on(um.RoomEvent.TrackUnsubscribed,r),s(!1),r(),e}))}),(function(e){s(!1),f(e)})))}catch(e){return Promise.reject(e)}}),[]);return{connect:g,isConnecting:c,room:o,error:l,participants:d,audioTracks:m}}function Lm(e,t){if(e.sort((function(e,t){var r,n,o,i;if(e.isSpeaking&&t.isSpeaking)return t.audioLevel-e.audioLevel;if(e.isSpeaking!==t.isSpeaking)return e.isSpeaking?-1:1;if(e.lastSpokeAt!==t.lastSpokeAt){var a,c,s,u,l=null!=(a=null===(c=e.lastSpokeAt)||void 0===c?void 0:c.getTime())?a:0;return(null!=(s=null===(u=t.lastSpokeAt)||void 0===u?void 0:u.getTime())?s:0)-l}var f=e.videoTracks.size>0;return f!==t.videoTracks.size>0?f?-1:1:(null!=(r=null===(n=e.joinedAt)||void 0===n?void 0:n.getTime())?r:0)-(null!=(o=null===(i=t.joinedAt)||void 0===i?void 0:i.getTime())?o:0)})),t){var r=e.indexOf(t);r>=0&&(e.splice(r,1),e.length>0?e.splice(1,0,t):e.push(t))}}var Mm=function(t){var r=t.url,n=t.token,o=t.connectOptions,i=t.sortParticipants,a=t.stageRenderer,c=t.participantRenderer,s=t.controlRenderer,u=t.onConnected,l=t.onLeave,f=t.adaptiveVideo,p=Im({sortParticipants:i});return(0,e.useEffect)((function(){p.connect(r,n,o).then((function(e){if(e)return u&&u(e),function(){e.disconnect()}}))}),[]),(null!=a?a:Rm)({roomState:p,participantRenderer:c,controlRenderer:s,onLeave:l,adaptiveVideo:f})},Dm=__webpack_require__(30752);function Am(){Am=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function u(e,t,r,o){var i=t&&t.prototype instanceof p?t:p,a=Object.create(i.prototype),c=new _(o||[]);return n(a,"_invoke",{value:S(e,r,c)}),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var f={};function p(){}function d(){}function h(){}var y={};s(y,i,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(E([])));v&&v!==t&&r.call(v,i)&&(y=v);var b=h.prototype=p.prototype=Object.create(y);function g(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(n,i,a,c){var s=l(e[n],e,i);if("throw"!==s.type){var u=s.arg,f=u.value;return f&&"object"==Nm(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,a,c)}),(function(e){o("throw",e,a,c)})):t.resolve(f).then((function(e){u.value=e,a(u)}),(function(e){return o("throw",e,a,c)}))}c(s.arg)}var i;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return i=i?i.then(n,n):n()}})}function S(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=O(a,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=l(e,t,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===f)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=l(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function _(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function E(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:j}}function j(){return{value:void 0,done:!0}}return d.prototype=h,n(b,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:d,configurable:!0}),d.displayName=s(h,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,s(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},g(w.prototype),s(w.prototype,a,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new w(u(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},g(b),s(b,c,"Generator"),s(b,i,(function(){return this})),s(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=E,_.prototype={constructor:_,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),k(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:E(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function Nm(e){return Nm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nm(e)}function Um(e,t,r,n,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function Bm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Fm(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Bm(Object(r),!0).forEach((function(t){qm(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Bm(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function qm(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==Nm(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==Nm(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===Nm(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var zm=function(e){var r=e.url,n=e.token,o=e.onRoomConnected,i=e.style,a=e.stageRenderer;return t().createElement("div",{className:"roomContainer",style:Fm({color:"white"},i)},t().createElement(Mm,{url:r,token:n,stageRenderer:a,onConnected:function(e){return function(e,t){return Wm.apply(this,arguments)}(e,o)}}))};function Wm(){var e;return e=Am().mark((function e(t,r){var n,o;return Am().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Dm.createLocalAudioTrack)();case 2:return n=e.sent,e.next=5,t.localParticipant.publishTrack(n);case 5:return e.next=7,(0,Dm.createLocalVideoTrack)();case 7:return o=e.sent,e.next=10,t.localParticipant.publishTrack(o);case 10:r&&r(t);case 11:case"end":return e.stop()}}),e)})),Wm=function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){Um(i,n,o,a,c,"next",e)}function c(e){Um(i,n,o,a,c,"throw",e)}a(void 0)}))},Wm.apply(this,arguments)}function Vm(e){return Vm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vm(e)}function Gm(){return Gm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Gm.apply(this,arguments)}function Hm(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Jm(n.key),n)}}function Jm(e){var t=function(e,t){if("object"!==Vm(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==Vm(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===Vm(t)?t:String(t)}function Ym(e,t){return Ym=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ym(e,t)}function Km(e){return Km=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Km(e)}var $m={inline:{backgroundColor:"rgba(0,0,0)"},fullscreen:{position:"absolute",top:0,left:0,bottom:0,right:0,padding:30,zIndex:1e3,backgroundColor:"rgba(0,0,0,0.75)",overflowY:"auto"}};const Xm=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ym(e,t)}(s,e);var r,o,i,a,c=(i=s,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Km(i);if(a){var r=Km(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Vm(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=c.call(this,e)).state={mode:"inline"},t}return r=s,(o=[{key:"componentWillUnmount",value:function(){this.videoRoomConnected&&this.videoRoomConnected.disconnect()}},{key:"toggleMode",value:function(){this.videoRoomConnected&&this.videoRoomConnected.disconnect();var e=this.state.mode;this.setState({mode:"inline"===e?"fullscreen":"inline"})}},{key:"render",value:function(){var e=this,r=this.state.mode,o=t().createElement("div",{style:$m[r]},t().createElement("a",{style:{color:"white"},onClick:function(){return e.toggleMode()}},"Toogle"),t().createElement(zm,Gm({},this.props,{stageRenderer:void 0,onRoomConnected:function(t){e.videoRoomConnected=t}})));return"inline"===r?o:n().createPortal(o,document.body)}}])&&Hm(r.prototype,o),Object.defineProperty(r,"prototype",{writable:!1}),s}(t().Component);function Qm(e){return Qm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qm(e)}function Zm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ev(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Zm(Object(r),!0).forEach((function(t){tv(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Zm(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function tv(e,t,r){return(t=iv(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rv(){return rv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},rv.apply(this,arguments)}function nv(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ov(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,iv(n.key),n)}}function iv(e){var t=function(e,t){if("object"!==Qm(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==Qm(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===Qm(t)?t:String(t)}function av(e,t){return av=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},av(e,t)}function cv(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function sv(e){return sv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},sv(e)}var uv=F().requireLib("boot"),lv=uv.PydioContextConsumer,fv=uv.moment,pv=function(r){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&av(e,t)}(s,r);var n,o,i,a,c=(i=s,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=sv(i);if(a){var r=sv(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Qm(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return cv(e)}(this,e)});function s(t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(r=c.call(this,t)).client=null,r.state={messages:[],room:null,value:""},r._newMessageListener=r.onNewMessage.bind(cv(r)),r.commentPane=(0,e.createRef)(),r}return n=s,o=[{key:"componentDidMount",value:function(){this.join(this.props.roomType,this.props.roomObjectId)}},{key:"componentWillUnmount",value:function(){this.stop(),this.videoRoomConnected&&this.videoRoomConnected.disconnect()}},{key:"componentDidUpdate",value:function(e,t){if(t.messages.length<=this.state.messages.length){var r=t.messages.length>0?parseFloat(t.messages[t.messages.length-1].Timestamp):0;(this.state.messages.length>0?parseFloat(this.state.messages[this.state.messages.length-1].Timestamp):0)>r&&this.commentPane.current&&(this.commentPane.current.scrollTop=1e5)}}},{key:"componentWillReceiveProps",value:function(e){e.pydio;var t=e.roomType,r=e.roomObjectId;t===this.props.roomType&&r===this.props.roomObjectId||(this.client&&this.client.leaveRoom(this.props.roomType,this.props.roomObjectId,this._newMessageListener),this.setState({messages:[],room:null,value:""}),t&&r&&this.join(t,r))}},{key:"onRoomMessage",value:function(e){if(!this.state.firstUpdateReceived){var t=this.props,r=t.roomType,n=t.roomObjectId;this.client.loadHistory(r,n,0,40),this.setState({firstUpdateReceived:!0})}e&&this.setState({room:e.Room})}},{key:"onNewMessage",value:function(e){var t,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e){if(this.setState({firstUpdateReceived:!0}),"VIDEO_CALL"===e["@type"])return console.log("Video Enabled!",e),void this.setState({videoData:e});if(r)this.setState({messages:this.state.messages.filter((function(t){return t.Uuid!==e.Uuid}))});else{var n=[].concat((t=this.state.messages.filter((function(t){return t.Uuid!==e.Uuid})),function(e){if(Array.isArray(e))return nv(e)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return nv(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?nv(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[e]).filter((function(e){return!!e.Message}));n.sort((function(e,t){return e.Timestamp===t.Timestamp?0:parseFloat(e.Timestamp)>parseFloat(t.Timestamp)?1:-1})),this.setState({messages:n})}}}},{key:"join",value:function(e,t){var r=this;if(t){var n=this.props.pydio;this.client=Hd.getInstance(n),this.setState({firstUpdateReceived:!1},(function(){var n=r.client.joinRoom(e,t,r._newMessageListener,r.onRoomMessage.bind(r));null!==n&&r.setState({room:n})})),this.client.loadHistory(e,t,0,40)}}},{key:"more",value:function(){var e=this.props,t=e.roomType,r=e.roomObjectId,n=this.state.messages;this.client&&this.client.loadHistory(t,r,n.length-1,40)}},{key:"stop",value:function(){var e=this.props,t=e.roomType,r=e.roomObjectId;this.client&&this.client.leaveRoom(t,r,this._newMessageListener)}},{key:"postMessage",value:function(){if(this.state.value){var e=this.state.room;if(e&&e.Uuid){var t={"@type":"POST",Message:{RoomUuid:e.Uuid,Message:this.state.value}};this.client.send(JSON.stringify(t)),this.setState({value:""})}else console.error("Cannot find cell info")}}},{key:"deleteMessage",value:function(e){var t=this.state.room;if(t&&t.Uuid){var r={"@type":"DELETE_MSG",Message:e};this.client.send(JSON.stringify(r))}else console.error("Cannot find cell info")}},{key:"keyDown",value:function(e){var t=this.state.value;if("Enter"===e.key)if(e.metaKey||e.ctrlKey){var r,n,o=e.currentTarget;o.selectionEnd<t.length?(r=t.substr(0,o.selectionEnd)+"\n"+t.substr(o.selectionEnd),n=o.selectionEnd+1):n=(r=t+"\n").length,this.setState({value:r},(function(){o.setSelectionRange(n,n)}))}else e.preventDefault(),this.postMessage()}},{key:"render",value:function(){var e,r,n,o,i,a=this,c=this.props,s=c.style,u=c.msgContainerStyle,l=c.chatUsersStyle,f=c.fieldContainerStyle,p=c.fieldHint,d=c.textFieldProps,h=c.emptyStateProps,y=c.pydio,m=c.pushMessagesToBottom,b=c.computePresenceFromACLs,g=c.readonly,w=c.muiTheme,S=this.state,O=S.messages,P=S.room,k=S.videoData,_=S.joinVideo,E=[],j=O.length>=40;O.forEach((function(n){var o=fv(1e3*parseFloat(n.Timestamp)).fromNow(),i=e&&e===o,c=r&&r===n.Author&&i;E.push(t().createElement(ah,{key:n.Uuid,message:n,hideDate:i,sameAuthor:c,onDeleteMessage:function(){a.deleteMessage(n)},moreLoader:j?function(){a.more()}:null,muiTheme:w})),j=!1,e=o,r=n.Author})),m&&(n={display:"flex",flexDirection:"column"},E&&E.length&&(o=t().createElement("span",{style:{flex:1}}))),!h||E&&E.length||(i=t().createElement(yr,rv({pydio:y},h)));var C=!P,T={color:K()(w.palette.mui3["on-surface-variant"]).fade(.5).toString(),whiteSpace:"nowrap"};d&&d.hintStyle&&(T=ev(ev({},T),d.hintStyle)),C&&(T=ev(ev({},T),{},{fontStyle:"italic"}));var x=ev({backgroundColor:w.palette.mui3["surface-variant"]||"white",position:"relative",paddingLeft:16,paddingRight:16},f);return t().createElement("div",{style:ev({padding:0},s)},void 0!==b&&t().createElement(yh,{pydio:y,ACLs:b,roomUsers:P?P.Users:[],style:l}),t().createElement("div",{ref:this.commentPane,className:"comments_feed",style:ev(ev({maxHeight:300,overflowY:"auto"},n),u)},o,E,i),t().createElement("div",{style:x},t().createElement(v.TextField,rv({hintText:C?y.MessageHash[466]:p,value:this.state.value,onChange:function(e,t){a.setState({value:t})},multiLine:!0,onKeyDown:this.keyDown.bind(this),fullWidth:!0,underlineShow:!1,disabled:g||C},d,{hintStyle:T})),k&&t().createElement("div",{style:{position:"absolute",top:0,right:0}},t().createElement(v.IconButton,{iconStyle:{color:_?"#F44336":"#4CAF4F"},iconClassName:"mdi mdi-video"+(_?"-off":""),onClick:function(){return a.setState({joinVideo:!_})}}))),k&&_&&t().createElement(Xm,{url:k.Url,token:k.Token}),t().createElement("style",{type:"text/css",dangerouslySetInnerHTML:{__html:"\n.chat-message-md *, .comments_feed .user-label, .comments_feed .date-from{\n    user-select: text;\n}\n.chat-message-md p{\n    padding-top: 0; \n    margin-bottom: 0;\n}\n.chat-message-md strong {\n    font-weight: 500;\n}\n.chat-message-md a {\n    text-decoration: underline;\n    color:#2196f3;\n}\n.chat-message-md ul {\n    padding-left: 20px;\n}\n"}}))}}],o&&ov(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),s}(t().Component);function dv(e){return dv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dv(e)}function hv(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,yv(n.key),n)}}function yv(e){var t=function(e,t){if("object"!==dv(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==dv(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===dv(t)?t:String(t)}function mv(e,t){return mv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},mv(e,t)}function vv(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function bv(e){return bv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},bv(e)}pv.PropTypes={roomType:U().string,roomObjectId:U().string},pv=lv((0,J.muiThemeable)()(pv));var gv=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&mv(e,t)}(c,e);var r,n,o,i,a=(o=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=bv(o);if(i){var r=bv(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===dv(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return vv(e)}(this,e)});function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=a.call(this,e)).state={newMessages:0},t._messageListener=t.onMessage.bind(vv(t)),t}return r=c,n=[{key:"onMessage",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]?this.setState({newMessages:Math.max(0,this.state.newMessages-1)}):this.setState({newMessages:this.state.newMessages+1})}},{key:"listenToRoom",value:function(e,t){Hd.getInstance(this.props.pydio).joinRoom(e,t,this._messageListener,null)}},{key:"leaveRoom",value:function(e,t){Hd.getInstance(this.props.pydio).leaveRoom(e,t,this._messageListener)}},{key:"componentDidMount",value:function(){var e=this.props,t=e.roomType,r=e.objectId;this.listenToRoom(t,r)}},{key:"componentWillUnmount",value:function(){var e=this.props,t=e.roomType,r=e.objectId;this.leaveRoom(t,r)}},{key:"componentWillReceiveProps",value:function(e){var t=this,r=this.props,n=r.roomType,o=r.objectId;e.roomType===n&&e.objectId===o||(this.leaveRoom(n,o),this.setState({newMessages:0},(function(){t.listenToRoom(e.roomType,e.objectId)})))}},{key:"onClick",value:function(){this.props.pydio.Controller.fireAction("toggle_chat_panel"),this.setState({newMessages:0})}},{key:"render",value:function(){var e=this.state.newMessages;if(0===e)return null;return t().createElement("span",{onClick:this.onClick.bind(this),className:"mdi mdi-comment",style:{display:"inline-block",padding:"0 5px",fontSize:15,textAlign:"center",color:"#8BC34A",fontWeight:500,position:"relative"}},t().createElement("span",{style:{fontSize:13,display:"inline-block",position:"absolute",top:-1,marginLeft:2}},e))}}],n&&hv(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),c}(t().Component);function wv(e){return wv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wv(e)}function Sv(){return Sv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Sv.apply(this,arguments)}function Ov(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Pv(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ov(Object(r),!0).forEach((function(t){kv(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ov(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function kv(e,t,r){return(t=Ev(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _v(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ev(n.key),n)}}function Ev(e){var t=function(e,t){if("object"!==wv(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==wv(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===wv(t)?t:String(t)}function jv(e,t){return jv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},jv(e,t)}function Cv(e){return Cv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Cv(e)}var Tv={root:{paddingTop:20},section:{container:{},title:{},description:{},actions:{}},action:{container:{},icon:{},title:{},description:{}},deleteButton:{},deleteIconProps:{style:{position:"absolute",top:0,right:0},iconStyle:{color:"#bdbdbd",hoverColor:"#9e9e9e"}}};const xv=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&jv(e,t)}(c,e);var r,n,o,i,a=(o=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Cv(o);if(i){var r=Cv(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===wv(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function c(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),e.model||(e.model={Sections:[]}),a.call(this,e)}return r=c,(n=[{key:"stProps",value:function(e,t){return{style:Tv[e][t],className:"stepper-"+e+"-"+t}}},{key:"render",value:function(){var e=this,r=this.props,n=r.model,o=r.style,i=r.onPick;return t().createElement("div",{style:Pv(Pv({},Tv.root),o),className:"bbpanel"},n.Sections.map((function(r){return t().createElement("div",e.stProps("section","container"),t().createElement("div",e.stProps("section","title"),r.title),t().createElement("div",e.stProps("section","description"),r.description),t().createElement("div",e.stProps("section","actions"),r.Actions.map((function(r){var n=r.description;return n&&n.length>70&&(n=t().createElement("span",{title:n},n.substr(0,70)+"...")),t().createElement(v.Paper,Sv({zDepth:0},e.stProps("action","container"),{onClick:function(){i(r.value)}}),r.tag&&t().createElement("div",{className:"stepper-tag"},r.tag),r.onDelete&&t().createElement("div",e.stProps("action","deleteButton"),t().createElement(v.IconButton,Sv({iconClassName:"mdi mdi-close",tooltip:"Remove",onClick:function(e){e.stopPropagation(),r.onDelete()}},Tv.deleteIconProps))),t().createElement("div",e.stProps("action","icon"),t().createElement(v.FontIcon,{color:r.tint||"#03A9F4",className:r.icon})),t().createElement("div",e.stProps("action","title"),r.title),t().createElement("div",e.stProps("action","description"),n))}))))})),t().createElement("style",{type:"text/css",dangerouslySetInnerHTML:{__html:"\n.react-mui-context .bbpanel .stepper-section-actions {\n    display: flex;\n    flex-wrap: wrap;\n}\n\n.react-mui-context .bbpanel .stepper-section-container {\n    margin-bottom: 30px;\n}\n\n.react-mui-context .bbpanel .stepper-section-title {\n    font-size: 13px;\n    font-weight: 500;\n    color: #455a64;\n    padding-bottom: 20px;    \n}\n\n.react-mui-context .bbpanel .stepper-action-container {\n    margin: 10px;\n    width: 230px;\n    height: 210px;\n    display: flex;\n    flex-direction: column;\n    font-size: 15px;\n    padding: 10px 20px;\n    border-radius: 6px !important;\n    box-shadow: 1px 10px 20px 0 rgba(40,60,75,.15);\n    cursor: pointer;\n    position:relative;\n}\n\n.react-mui-context .bbpanel .stepper-action-container:hover {\n    box-shadow: 1px 10px 20px 0 rgba(40,60,75,.3)\n}\n\n.react-mui-context .bbpanel .stepper-action-icon {\n    flex: 1;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n}\n\n.react-mui-context .bbpanel .stepper-tag {\n    position: absolute;\n    top: 15px;\n    left: 16px;\n    background-color: #B0BEC5;\n    color: white;\n    padding: 1px 5px;\n    font-size: 12px;\n    height: 19px;\n    line-height: 16px;\n    border-radius: 4px;\n    font-weight: 500;\n}\n\n.react-mui-context .bbpanel .stepper-action-icon > span {\n    font-size: 50px !important;\n}\n\n.react-mui-context .bbpanel .stepper-action-title {\n    padding-bottom: 20px;\n    font-weight: 500;\n    text-align: center;\n    font-size: 16px;\n}\n\n.react-mui-context .bbpanel .stepper-action-description {\n    text-align: center;\n    font-weight: 300;\n    font-size: 13px;\n    padding-bottom: 10px;   \n}\n"}}))}}])&&_v(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),c}(t().Component);function Rv(e){return Rv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rv(e)}function Iv(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Lv(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Iv(Object(r),!0).forEach((function(t){Mv(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Iv(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Mv(e,t,r){return(t=Av(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Dv(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Av(n.key),n)}}function Av(e){var t=function(e,t){if("object"!==Rv(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==Rv(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===Rv(t)?t:String(t)}function Nv(e,t){return Nv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Nv(e,t)}function Uv(e){return Uv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Uv(e)}var Bv=F().requireLib("hoc").ModernTextField,Fv=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Nv(e,t)}(c,e);var r,n,o,i,a=(o=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Uv(o);if(i){var r=Uv(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Rv(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function c(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),a.apply(this,arguments)}return r=c,(n=[{key:"componentDidUpdate",value:function(e){e.random!==this.props.random&&this.refs.dialog&&setTimeout((function(){window.dispatchEvent(new Event("resize"))}),0)}},{key:"render",value:function(){var e=this.props,r=e.title,n=e.actions,o=e.open,i=e.onDismiss,a=e.onFilter,c=e.customFilter,s=e.children,u=e.dialogProps,l=r;return(i||a||c)&&(l=t().createElement("div",{style:{position:"relative",display:"flex",alignItems:"center"}},t().createElement("div",{style:{flex:1}},r),c&&t().createElement("div",{style:{marginRight:16}},c),a&&t().createElement("div",{style:{width:210,height:34,marginTop:-10,marginRight:i?50:0}},t().createElement(Bv,{hintText:"Filter list",onChange:function(e,t){a(t)},fullWidth:!0})),i&&t().createElement("div",{style:{position:"absolute",top:11,right:20}},t().createElement(v.IconButton,{iconClassName:"mdi mdi-close",onClick:i})))),t().createElement(v.Dialog,{ref:"dialog",title:l,actions:n,modal:u.modal,open:o,autoDetectWindowHeight:!0,autoScrollBodyContent:!0,contentClassName:"stepper-dialog",bodyStyle:Lv({backgroundColor:"rgb(236, 239, 241)",borderRadius:"0 0 6px 6px"},u.bodyStyle),contentStyle:Lv({width:"90%",maxWidth:"none",borderRadius:6},u.contentStyle),titleStyle:Lv({borderBottom:"none",backgroundColor:"rgb(246, 247, 248)",borderRadius:"6px 6px 0 0"},u.titleStyle)},s,t().createElement("style",{type:"text/css",dangerouslySetInnerHTML:{__html:".stepper-dialog > div{border-radius: 6px !important;}"}}))}}])&&Dv(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),c}(t().Component),qv={SortableList:M,SimpleList:Nr,NodeListCustomProvider:Gr,ListEntry:se,ListPaginator:kt,MaterialTable:sn,Masonry:ei,Timeline:pi,TreeView:Li,DNDTreeView:Ii,FoldersTree:Mi,ClipboardTextField:ca,LabelWithTip:Wi,EmptyStateView:yr,SimpleFigureBadge:Xi,ModalAppBar:function(e){var r=e.style,n=e.titleStyle,o=e.iconStyleRight,i=e.iconStyleLeft,a=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,La),c={style:Aa({flexShrink:0},r),titleStyle:Aa({lineHeight:"56px",height:56,marginLeft:-8},n),iconStyleRight:Aa({marginTop:4},o),iconStyleLeft:Aa({marginTop:4},i)};return t().createElement(v.AppBar,Ma({},a,c))},GenericCard:_a,GenericLine:ka,QuotaUsageLine:Ra,ReactEditorOpener:Ga,DynamicGrid:Tc,DynamicGridItemMixin:Mc,asGridItem:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{gridWidth:4,gridHeight:12},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,o=e.displayName||e.name;e=Hc()(e);var i=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qc(e,t)}(c,t);var r,n,o,i,a=(o=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=zc(o);if(i){var r=zc(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Dc(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function c(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(r=a.call(this,e,t)).state={focus:!1,showCloseAction:!1},r}return r=c,n=[{key:"focusItem",value:function(){this.setState({focus:!0})}},{key:"blurItem",value:function(){this.setState({focus:!1})}},{key:"mergeStyleWithFocus",value:function(){return Nc(Nc({},this.props.style),{},{zIndex:this.state.focus?1:null})}},{key:"toggleEditMode",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;void 0===e?this.setState({showCloseAction:!(this.state&&this.state.showCloseAction)}):this.setState({showCloseAction:e})}},{key:"getCloseButton",value:function(){var e=function(){};return this.props.onCloseAction&&(e=this.props.onCloseAction),React.createElement("div",{style:{position:"absolute",backgroundColor:"rgba(0,0,0,0.53)",zIndex:10,top:0,left:0,bottom:0,right:0,display:"flex",alignItems:"center",justifyContent:"center"}},React.createElement(Gc,{label:this.props.pydio.MessageHash["ajxp_admin.home.48"],className:"card-close-button",onClick:e,style:{color:"white"}}))}},{key:"render",value:function(){var t=Nc(Nc({},this.props),{},{style:this.mergeStyleWithFocus(),closeButton:this.state.showCloseAction?this.getCloseButton():null,onFocusItem:this.focusItem.bind(this),onBlurItem:this.blurItem.bind(this)});return React.createElement(e,t)}}],n&&Bc(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),c}(Vc);return i.propTypes={onCloseAction:Wc.func},i.displayName=o,i.builderDisplayName=t,i.getGridLayout=function(e,t){return{x:e||0,y:t||0,w:r.gridWidth||4,h:r.gridHeight||12,isResizable:!1}},i.hasBuilderFields=function(){return void 0!==n},i.getBuilderFields=function(){return n},i},DynamicGridStore:tc,DND:{Types:l,collect:f,collectDrop:p,nodeDragSource:y,nodeDropTarget:m,DNDActionParameter:d},DNDActionParameter:d,UserAvatar:bp,UsersCompleter:vf,TeamCreationForm:Dl,AddressBook:Ql,ListStylesCompact:_s,ContextMenu:td,Toolbar:Md,ButtonMenu:Rp,IconButtonMenu:ut,MenuItemsConsumer:Qe,MenuUtils:ze,Chat:pv,ChatIcon:gv,ChatClient:Hd,ResourcePoliciesPanel:Cf,CellActionsRenderer:ks,Stepper:{PanelBigButtons:xv,Dialog:Fv}}})(),window.PydioComponents=__webpack_exports__})();