!function(f){"object"==typeof exports&&"undefined"!=typeof module?module.exports=f():"function"==typeof define&&define.amd?define([],f):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).PydioCoreActions=f()}(function(){return function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);throw(f=new Error("Cannot find module '"+i+"'")).code="MODULE_NOT_FOUND",f}c=n[i]={exports:{}},e[i][0].call(c.exports,function(r){return o(e[i][1][r]||r)},c,c.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}({1:[function(require,module,exports){"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _pydio=_interopRequireDefault(require("pydio")),_react=_interopRequireDefault(require("react")),_materialUi=require("material-ui"),_toggleBmNode=_interopRequireDefault(require("./toggleBmNode"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){return(_extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var key,source=arguments[i];for(key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,function(arg){arg=function(input,hint){if("object"!==_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0===prim)return("string"===hint?String:Number)(input);prim=prim.call(input,hint||"default");if("object"!==_typeof(prim))return prim;throw new TypeError("@@toPrimitive must return a primitive value.")}(arg,"string");return"symbol"===_typeof(arg)?arg:String(arg)}(descriptor.key),descriptor)}}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var NewTarget,Super=_getPrototypeOf(Derived),Super=(NewTarget=hasNativeReflectConstruct?(NewTarget=_getPrototypeOf(this).constructor,Reflect.construct(Super,arguments,NewTarget)):Super.apply(this,arguments),this);if(NewTarget&&("object"===_typeof(NewTarget)||"function"==typeof NewTarget))return NewTarget;if(void 0!==NewTarget)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0!==self)return self;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(Super)}}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}require=function(_React$Component){var subClass=BookmarkButton;if("function"!=typeof _React$Component&&null!==_React$Component)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(_React$Component&&_React$Component.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),_React$Component&&_setPrototypeOf(subClass,_React$Component);var staticProps,_super=_createSuper(BookmarkButton);function BookmarkButton(props){var _this;if(this instanceof BookmarkButton)return(_this=_super.call(this,props)).state=_this.valueFromNodes(props.nodes),_this;throw new TypeError("Cannot call a class as a function")}return subClass=BookmarkButton,(_React$Component=[{key:"valueFromNodes",value:function(){var mixed,value=void 0;return(0<arguments.length&&void 0!==arguments[0]?arguments[0]:[]).forEach(function(n){n="true"===n.getMetadata().get("bookmark");void 0!==value&&n!==value&&(mixed=!0),value=n}),{value:value,mixed:mixed}}},{key:"updateValue",value:function(value){var _this2=this,nodes=this.props.nodes,proms=(this.setState({saving:!0}),[]);nodes.forEach(function(n){var overlays,isBookmarked="true"===n.getMetadata().get("bookmark");value!==isBookmarked&&(proms.push((0,_toggleBmNode.default)(n)),isBookmarked=n.getMetadata().get("overlay_class")||"",value?(n.getMetadata().set("bookmark","true"),(overlays=isBookmarked.replace("mdi mdi-star","").split(",")).push("mdi mdi-star"),n.getMetadata().set("overlay_class",overlays.join(","))):(n.getMetadata().delete("bookmark"),n.getMetadata().set("overlay_class",isBookmarked.replace("mdi mdi-star",""))),n.notify("node_replaced"))}),Promise.all(proms).then(function(){window.setTimeout(function(){_this2.setState({saving:!1})},250),_this2.setState(_this2.valueFromNodes(nodes))}).catch(function(){_this2.setState({saving:!1})})}},{key:"render",value:function(){var icon,touchValue,disabled,_this3=this,styles=this.props.styles,_this$state=this.state,value=_this$state.value,mixed=_this$state.mixed,_this$state=_this$state.saving,mm=_pydio.default.getInstance().MessageHash,mixed=mixed?(icon="star-half",touchValue=!0,mm["bookmark.button.tip.mixed"]):value?(touchValue=!(icon="star"),mm["bookmark.button.tip.remove"]):(icon="star-outline",touchValue=!0,mm["bookmark.button.tip.add"]);return _this$state&&(icon="star-circle",mixed=mm["bookmark.button.tip.saving"],disabled=!0),_react.default.createElement(_materialUi.IconButton,_extends({disabled:disabled,iconClassName:"mdi mdi-"+icon,tooltip:mixed,onClick:function(){return _this3.updateValue(touchValue)}},styles))}}])&&_defineProperties(subClass.prototype,_React$Component),staticProps&&_defineProperties(subClass,staticProps),Object.defineProperty(subClass,"prototype",{writable:!1}),BookmarkButton}(_react.default.Component);exports.default=require,module.exports=exports.default},{"./toggleBmNode":5,"material-ui":"material-ui",pydio:"pydio",react:"react"}],2:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){_globals.global.Notification?(alert(_globals.MessageHash["notification_center.12"]),_globals.global.Notification.requestPermission(function(grant){["default","granted","denied"].indexOf(grant)})):_globals.global.alert(_globals.MessageHash["notification_center.13"])};var _globals=require("../globals");module.exports=exports.default},{"../globals":9}],3:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){_globals.pydio.UI.openComponentInModal("PydioCoreActions","PasswordDialog",{locked:_globals.pydio.user&&"pass_change"===_globals.pydio.user.lock})};var _globals=require("../globals");module.exports=exports.default},{"../globals":9}],4:[function(require,module,exports){},{}],5:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(node,selection){var pydio=_pydio.default.getInstance(),isBookmarked="true"===node.getMetadata().get("bookmark"),node=node.getMetadata().get("uuid"),userId=pydio.user.id,api=new _cellsSdk.UserMetaServiceApi(_api.default.getRestClient()),request=new _cellsSdk.IdmUpdateUserMetaRequest;return isBookmarked?((isBookmarked=new _cellsSdk.IdmSearchUserMetaRequest).NodeUuids=[node],isBookmarked.Namespace="bookmark",api.searchUserMeta(isBookmarked).then(function(res){res.Metadatas&&res.Metadatas.length&&(request.Operation=_cellsSdk.UpdateUserMetaRequestUserMetaOp.constructFromObject("DELETE"),request.MetaDatas=res.Metadatas,api.updateUserMeta(request).then(function(){pydio.notify("reload-bookmarks")}))})):(request.Operation=_cellsSdk.UpdateUserMetaRequestUserMetaOp.constructFromObject("PUT"),(isBookmarked=new _cellsSdk.IdmUserMeta).NodeUuid=node,isBookmarked.Namespace="bookmark",isBookmarked.JsonValue='"true"',isBookmarked.Policies=[_cellsSdk.ServiceResourcePolicy.constructFromObject({Resource:node,Action:"OWNER",Subject:"user:"+userId,Effect:"allow"}),_cellsSdk.ServiceResourcePolicy.constructFromObject({Resource:node,Action:"READ",Subject:"user:"+userId,Effect:"allow"}),_cellsSdk.ServiceResourcePolicy.constructFromObject({Resource:node,Action:"WRITE",Subject:"user:"+userId,Effect:"allow"})],request.MetaDatas=[isBookmarked],api.updateUserMeta(request).then(function(){pydio.notify("reload-bookmarks")}))};var _pydio=_interopRequireDefault(require("pydio")),_api=_interopRequireDefault(require("pydio/http/api")),_cellsSdk=require("cells-sdk");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}module.exports=exports.default},{"cells-sdk":"cells-sdk",pydio:"pydio","pydio/http/api":"pydio/http/api"}],6:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){var selection=_globals.pydio.getContextHolder();!selection.isEmpty()&&selection.isUnique()&&(0,_toggleBmNode.default)(selection.getUniqueNode(),selection)};var _globals=require("../globals"),_toggleBmNode=(require=require("./toggleBmNode"))&&require.__esModule?require:{default:require};module.exports=exports.default},{"../globals":9,"./toggleBmNode":5}],7:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _pydio=(obj=require("pydio"))&&obj.__esModule?obj:{default:obj},_materialUi=require("material-ui");var React=require("react"),obj=require("create-react-class"),require=require("pydio/http/resources-manager").requireLib("boot"),ActionDialogMixin=require.ActionDialogMixin,AsyncComponent=require.AsyncComponent,require=obj({displayName:"PasswordDialog",mixins:[ActionDialogMixin],getInitialState:function(){return{passValid:!1}},getDefaultProps:function(){return{dialogTitle:_pydio.default.getMessages()[194],dialogIsModal:!0,dialogSize:"sm"}},getButtons:function(){var _this=this,updater=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,updater=(updater&&(this._updater=updater),[]);return this.props.locked||updater.push(React.createElement(_materialUi.FlatButton,{label:this.props.pydio.MessageHash[49],onClick:function(){return _this.dismiss()}})),updater.push(React.createElement(_materialUi.FlatButton,{label:this.props.pydio.MessageHash[48],onClick:this.submit.bind(this),disabled:!this.state.passValid})),updater},submit:function(){if(!this.state.passValid)return!1;this.refs.passwordForm.instance.post(function(value){value&&this.dismiss()}.bind(this))},passValidStatusChange:function(status){var _this2=this;this.setState({passValid:status},function(){_this2._updater(_this2.getButtons())})},render:function(){return React.createElement(AsyncComponent,{namespace:"UserAccount",componentName:"PasswordForm",pydio:this.props.pydio,ref:"passwordForm",onValidStatusChange:this.passValidStatusChange})}});exports.default=require,module.exports=exports.default},{"create-react-class":"create-react-class","material-ui":"material-ui",pydio:"pydio","pydio/http/resources-manager":"pydio/http/resources-manager",react:"react"}],8:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _react=_interopRequireDefault(require("react")),_createReactClass=_interopRequireDefault(require("create-react-class")),_pydio=_interopRequireDefault(require("pydio")),_materialUi=require("material-ui"),_reactMarkdown=_interopRequireDefault(require("react-markdown"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var require=_pydio.default.requireLib("boot"),_pydio=require.ActionDialogMixin,SubmitButtonProviderMixin=require.SubmitButtonProviderMixin,Loader=require.Loader,require=(0,_createReactClass.default)({displayName:"SplashDialog",mixins:[_pydio,SubmitButtonProviderMixin],getDefaultProps:function(){return{dialogTitle:"",dialogSize:"lg",dialogIsModal:!1,dialogPadding:!1,dialogScrollBody:!0}},submit:function(){this.dismiss()},openDocs:function(){open("https://pydio.com/en/docs")},openForum:function(){open("https://forum.pydio.com")},openGithub:function(){open("https://github.com/pydio/cells/issues")},getInitialState:function(){return{aboutContent:null}},componentDidMount:function(){var _this=this;window.fetch("plug/gui.ajax/credits.md",{method:"GET",credentials:"same-origin"}).then(function(response){response.text().then(function(data){_this.setState({aboutContent:data})})})},render:function(){var credit=this.state.aboutContent?_react.default.createElement(_reactMarkdown.default,{source:this.state.aboutContent}):_react.default.createElement(Loader,{style:{minHeight:200}});return _react.default.createElement("div",{style:{height:"100%",backgroundColor:"#CFD8DC",width:"100%"}},_react.default.createElement(_materialUi.Card,null,_react.default.createElement(_materialUi.CardTitle,{title:pydio.Parameters.get("backend").PackageLabel}),_react.default.createElement(_materialUi.Divider,null),_react.default.createElement(_materialUi.CardActions,{style:{display:"flex",alignItems:"center"}},_react.default.createElement(_materialUi.FlatButton,{primary:!0,icon:_react.default.createElement(_materialUi.FontIcon,{className:"mdi mdi-book-variant"}),label:"Docs",onClick:this.openDocs}),_react.default.createElement(_materialUi.FlatButton,{primary:!0,icon:_react.default.createElement(_materialUi.FontIcon,{className:"mdi mdi-slack"}),label:"Forums",onClick:this.openForum}),_react.default.createElement(_materialUi.FlatButton,{primary:!0,icon:_react.default.createElement(_materialUi.FontIcon,{className:"mdi mdi-github-box"}),label:"Issues",onClick:this.openGithub}),_react.default.createElement("span",{style:{flex:1}}),_react.default.createElement(_materialUi.IconButton,{style:{width:40,height:40,padding:8},iconStyle:{color:"#FF786A"},iconClassName:"icomoon-cells",onClick:function(){open("https://pydio.com/?utm_source=cells-about")},tooltip:"Pydio.com"}),_react.default.createElement(_materialUi.IconButton,{style:{width:40,height:40,padding:8},iconStyle:{color:"#3b5998"},iconClassName:"mdi mdi-facebook-box",onClick:function(){open("https://facebook.com/Pydio")},tooltip:"@Pydio"}),_react.default.createElement(_materialUi.IconButton,{style:{width:40,height:40,padding:8},iconStyle:{color:"#00acee"},iconClassName:"mdi mdi-twitter-box",onClick:function(){open("https://twitter.com/pydio")},tooltip:"@pydio"})),_react.default.createElement(_materialUi.Divider,null),_react.default.createElement(_materialUi.CardText,{className:"credits-md"},credit),_react.default.createElement("style",{type:"text/css",dangerouslySetInnerHTML:{__html:"\n.credits-md h4 {\n    padding-top: 0;\n}\n\n.credits-md h5 {\n    font-weight: 500;\n}\n\n.credits-md ul {\n    padding-left: 20px;\n    padding-bottom: 20px;\n}\n\n.credits-md li {\n    list-style-type: square;\n    line-height: 1.6em;\n}\n\n.credits-md a {\n    color: #607D8B;\n    font-weight: 500;\n}\n"}})))}});exports.default=require,module.exports=exports.default},{"create-react-class":"create-react-class","material-ui":"material-ui",pydio:"pydio",react:"react","react-markdown":"react-markdown"}],9:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.pydio=exports.global=exports.MessageHash=void 0;var global=window,global=(exports.global=global).pydio,global=(exports.pydio=global).MessageHash;exports.MessageHash=global},{}],10:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"BookmarkButton",{enumerable:!0,get:function(){return _BookmarkButton.default}}),exports.Navigation=exports.Callbacks=void 0,Object.defineProperty(exports,"PasswordDialog",{enumerable:!0,get:function(){return _PasswordDialog.default}}),Object.defineProperty(exports,"SplashDialog",{enumerable:!0,get:function(){return _SplashDialog.default}});var _SplashDialog=_interopRequireDefault(require("./dialog/SplashDialog")),_PasswordDialog=_interopRequireDefault(require("./dialog/PasswordDialog")),_BookmarkButton=_interopRequireDefault(require("./callbacks/BookmarkButton"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Callbacks={switchLanguage:require("./callbacks/switchLanguage"),changePass:require("./callbacks/changePass"),toggleBookmark:require("./callbacks/toggleBookmark"),toggleBookmarkNode:require("./callbacks/toggleBmNode"),activateDesktopNotifications:require("./callbacks/activateDesktopNotifications")},Callbacks=(exports.Callbacks=Callbacks,{splash:require("./navigation/splash"),up:require("./navigation/up"),refresh:require("./navigation/refresh"),externalSelection:require("./navigation/externalSelection"),openGoPro:require("./navigation/openGoPro"),switchToSettings:require("./navigation/switchToSettings"),switchToHomepage:require("./navigation/switchToHomepage")});exports.Navigation=Callbacks},{"./callbacks/BookmarkButton":1,"./callbacks/activateDesktopNotifications":2,"./callbacks/changePass":3,"./callbacks/switchLanguage":4,"./callbacks/toggleBmNode":5,"./callbacks/toggleBookmark":6,"./dialog/PasswordDialog":7,"./dialog/SplashDialog":8,"./navigation/externalSelection":11,"./navigation/openGoPro":12,"./navigation/refresh":13,"./navigation/splash":14,"./navigation/switchToHomepage":15,"./navigation/switchToSettings":16,"./navigation/up":17}],11:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){var userSelection=_globals.pydio.getUserSelection();{var selectorData,imagePath;userSelection.isUnique()&&!userSelection.hasDir()&&(userSelection=userSelection.getUniqueFileName(),"ckeditor"==(selectorData=_globals.pydio.getController().selectorData).get("type"))&&(selectorData=selectorData.get("data")).CKEditorFuncNum&&(imagePath=userSelection,selectorData.relative_path&&(imagePath=selectorData.relative_path+userSelection),_globals.global.opener.CKEDITOR.tools.callFunction(selectorData.CKEditorFuncNum,imagePath),_globals.global.close())}};var _globals=require("../globals");module.exports=exports.default},{"../globals":9}],12:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){_globals.global.open("https://pydio.com/en/go-pro?referrer=settings")};var _globals=require("../globals");module.exports=exports.default},{"../globals":9}],13:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){_globals.pydio.getContextHolder().getContextNode()===_globals.pydio.getContextHolder().getSearchNode()?_globals.pydio.getContextHolder().getSearchNode().notify("reload_search"):_globals.pydio.fireContextRefresh()};var _globals=require("../globals");module.exports=exports.default},{"../globals":9}],14:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){_globals.pydio.UI.openComponentInModal("PydioCoreActions","SplashDialog")};var _globals=require("../globals");module.exports=exports.default},{"../globals":9}],15:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){_globals.pydio.repositoryId&&"homepage"===_globals.pydio.repositoryId||_globals.pydio.triggerRepositoryChange("homepage")};var _globals=require("../globals");module.exports=exports.default},{"../globals":9}],16:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){_globals.pydio.repositoryId&&"settings"===_globals.pydio.repositoryId||_globals.pydio.triggerRepositoryChange("settings")};var _globals=require("../globals");module.exports=exports.default},{"../globals":9}],17:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){_globals.pydio.fireContextUp()};var _globals=require("../globals");module.exports=exports.default},{"../globals":9}]},{},[10])(10)});