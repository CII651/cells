(()=>{"use strict";var e={689:e=>{e.exports=require("react")}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,r),i.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};(()=>{r.r(n),r.d(n,{HomeDashboard:()=>Le});var e=r(689),t=r.n(e);const o=require("pydio");var i=r.n(o);const a=require("material-ui"),l=require("material-ui/styles");var c=r(689),s=function(e){var t,r=e.pydio,n=e.pluginName,o=e.pluginParameter,i=e.style,a=e.darkMode,l=e.className,s=r.Registry.getPluginConfigs(n).get(o);return s||(s=r.Registry.getDefaultImageFromParameters(n,o)),s&&(0===s.indexOf("plug/")?(-1!==s.indexOf("[mode]")&&(s=s.replace("[mode]",a?"dark":"light")),t=s):t=r.Parameters.get("ENDPOINT_REST_API")+"/frontend/binaries/GLOBAL/"+s),c.createElement("img",{alt:"application logo",src:t,style:i,className:l})};function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e,t,r){return(t=h(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,h(n.key),n)}}function b(e,t,r){return t&&y(e.prototype,t),r&&y(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function h(e){var t=function(e,t){if("object"!==u(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===u(t)?t:String(t)}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}function v(e,t){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},v(e,t)}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=O(e);if(t){var o=O(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function O(e){return O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},O(e)}var S=i().requireLib("boot"),E=S.AsyncComponent,P=S.PydioContextConsumer,x=function(e){g(r,e);var t=w(r);function r(){return m(this,r),t.apply(this,arguments)}return b(r,[{key:"render",value:function(){var e={position:"relative",fontSize:24,width:this.props.dimension||100,height:this.props.dimension||100,backgroundColor:"#ECEFF1",color:"#607d8b",borderRadius:"50%",margin:"0 auto"};return React.createElement("div",{style:f(f({},e),this.props.style)},this.props.children)}}]),r}(e.Component),j=function(e){var t=function(e){return React.createElement("div",{style:{position:"absolute",top:52,left:20,width:80,display:"flex",transformOrigin:"left",transform:"rotate("+-e+"deg)"}},React.createElement("span",{style:{flex:1}}),React.createElement("span",{className:"mdi mdi-dots-horizontal",style:{opacity:.5,marginRight:5}}),React.createElement("span",{style:{display:"inline-block",transform:"rotate("+e+"deg)"},className:"mdi mdi-account"}))};return React.createElement("div",null,React.createElement("p",null,e.message("workspaces.1")),React.createElement(x,{dimension:130},React.createElement("span",{style:{position:"absolute",top:52,left:20},className:"mdi mdi-network"}),t(30),t(0),t(-30)),React.createElement("p",null,e.message("workspaces.2")),React.createElement(x,{dimension:130},React.createElement("span",{className:"mdi mdi-account",style:{position:"absolute",left:54,top:32}}),React.createElement("div",{style:{position:"absolute",top:60,left:30}},React.createElement("span",{className:"mdi mdi-folder"}),React.createElement("span",{className:"mdi mdi-arrow-right"}),React.createElement("span",{className:"mdi mdi-network"}))))},R=function(e){return React.createElement("div",null,React.createElement("p",null,e.message("globsearch.1")),React.createElement(x,{style:{fontSize:10,padding:25},dimension:130},React.createElement("div",{style:{boxShadow:"2px 2px 0px #CFD8DC"}},React.createElement("div",{style:{backgroundColor:"#03a9f4",color:"white",borderRadius:"3px 3px 0 0"}},React.createElement("span",{className:"mdi mdi-magnify"}),e.message("infopanel.search"),"..."),React.createElement("div",{style:{backgroundColor:"white"}},React.createElement("div",null,React.createElement("span",{className:"mdi mdi-folder"})," ",e.message("infopanel.folder")," 1 "),React.createElement("div",null,React.createElement("span",{className:"mdi mdi-folder"}),"  ",e.message("infopanel.file")," 2"),React.createElement("div",null,React.createElement("span",{className:"mdi mdi-file"})," ",e.message("infopanel.file")," 3")))),React.createElement("p",null,e.message("globsearch.2")))},T=function(e){g(r,e);var t=w(r);function r(e,n){var o;return m(this,r),(o=t.call(this,e,n)).state={started:!(e.pydio.user&&!e.pydio.user.getPreference("gui_preferences",!0)["UserAccount.WelcomeModal.Shown"])},o}return b(r,[{key:"componentDidMount",value:function(){var e=this;this.state.started||pydio.UI.openComponentInModal("UserAccount","WelcomeModal",{onRequestStart:function(t){t?e.discard(!0):(e.discard(!1),e.setState({started:!0}))}})}},{key:"discard",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.props,r=t.pydio,n=t.onFinish,o=r.user,i=o.getPreference("gui_preferences",!0);i["UserAccount.WelcomeModal.Shown"]=!0,e&&(i["WelcomeComponent.Pydio8.TourGuide.Welcome"]=!0,n&&n()),o.setPreference("gui_preferences",i,!0),o.savePreference("gui_preferences")}},{key:"render",value:function(){var e=this;if(!this.state.started)return null;var t=this.props.getMessage,r=function(e){return t("ajax_gui.tour."+e)},n=[{title:r("workspaces.title"),text:React.createElement(j,{message:r}),selector:".mdi-folder-multiple-outline",position:"right"},{title:r("globsearch.title"),text:React.createElement(R,{message:r}),selector:".home-search-form",position:"bottom"}];return React.createElement(E,{namespace:"PydioWorkspaces",componentName:"TourGuide",ref:"joyride",steps:n,run:!0,autoStart:!0,debug:!1,callback:function(t){"step:after"===t.type&&t.index===n.length-1&&e.discard(!0)},type:"continuous"})}}]),r}(e.Component);T=P(T);const C=require("pydio/util/path");var k=r.n(C);const _=require("pydio/util/dom");var D=r.n(_);function M(e){return M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},M(e)}function N(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==M(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==M(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===M(o)?o:String(o)),n)}var o}function z(e,t){return z=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},z(e,t)}function L(e){return L=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},L(e)}var I=i().requireLib("components"),F=I.SimpleList,q=I.NodeListCustomProvider,W=i().requireLib("boot"),B=W.PydioContextConsumer,A=W.moment,H=i().requireLib("workspaces"),G=H.UnifiedSearchForm,U=H.Facets,J=H.FilePreview,V=H.AdvancedChips,X=i().requireLib("hoc").withSearch,Y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&z(e,t)}(c,e);var r,n,o,i,l=(o=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=L(o);if(i){var r=L(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===M(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function c(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),l.call(this,e)}return r=c,n=[{key:"componentDidMount",value:function(){var e=this.props.onFocusChange;this._escListener=function(t){"Escape"===t.key&&e(!1)},document.addEventListener("keyup",this._escListener)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keyup",this._escListener)}},{key:"update",value:function(e){(0,this.props.searchTools.setValues)({basenameOrContent:e})}},{key:"render",value:function(){var e=this.props,r=e.searchTools,n=e.searchTools,o=n.facets,i=n.activeFacets,l=n.toggleFacet,c=n.loading,s=n.dataModel,u=(n.empty,this.props),p=u.style,f=u.zDepth,d=u.pydio,m=u.fullScreen,y=u.fullScreenTransition,b=u.onFocusChange,h=u.muiTheme,g="mui3"===h.userTheme,v=h.palette.mui3,w="rgba(0,0,0,.53)",O={mainContainer:{position:"absolute",top:m?0:199,left:g?74:0,right:0,bottom:0,transition:"all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms",display:"flex",flexDirection:"column",alignItems:"center"},searchContainer:{width:"100%",zIndex:1,display:"flex",flexDirection:"column",alignItems:"center",background:g&&m?v["surface-1"]:"transparent",padding:m?g?"10px 50px 10px 10px":"10px 50px":0},textFieldContainer:{width:"100%",maxWidth:m?1e4:700,display:"flex",alignItems:"center",background:g?v["surface-variant"]:"#eceff1",height:m?40:50,padding:"2px 4px",borderRadius:50,marginTop:m?0:-25},textField:{flex:1},textInput:{color:"inherit"},textHint:{color:w,overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",width:"100%"},magnifier:{color:w,fontSize:20,padding:"14px 8px"},close:{position:"absolute",right:2,top:6,zIndex:2},searchForm:{mainStyle:{backgroundColor:"transparent",height:48,border:0},completeMenuStyle:{width:"100%"},inputStyle:{fontSize:18},hintStyle:{fontSize:18},magnifierStyle:{fontSize:20,marginRight:10},filterButton:{color:h.palette.primary1Color,fontSize:22,width:28,height:28,padding:3},filterButtonActive:{}},facets:{container:{width:230,overflowY:"auto",background:v["surface-2"],color:g?v["on-surface-variant"]:"#5c7784",borderRadius:0,borderRight:g?"1px solid "+v["outline-variant-50"]:void 0,paddingLeft:16,paddingRight:16,paddingTop:10},header:{fontWeight:500,padding:"10px 0",fontSize:15},subHeader:{fontWeight:500,textTransform:"uppercase",padding:"12px 0"}}};return t().createElement(a.Paper,{style:p,zDepth:f,className:"vertical-layout home-center-paper",rounded:!1},t().createElement("div",{style:O.mainContainer},t().createElement(a.Paper,{zDepth:m?1:0,rounded:!1,style:O.searchContainer},t().createElement(a.Paper,{zDepth:0,style:O.textFieldContainer,className:"home-search-form"},t().createElement(G,{style:{flex:1},active:m,preventOpen:y,pydio:d,formStyles:O.searchForm,searchTools:r,onRequestOpen:function(){return b(!0)},onRequestClose:function(){return b(!1)}}),c&&t().createElement("div",{style:{marginTop:14,marginRight:8}},t().createElement(a.CircularProgress,{size:20,thickness:2}))),m&&t().createElement(V,{searchTools:r,containerStyle:{width:"100%",paddingTop:11,marginBottom:-4}})),m&&t().createElement("div",{className:"layout-fill",style:{width:"100%",display:"flex"}},D().getViewportWidth()>758&&t().createElement(U,{pydio:d,facets:o,activeFacets:i,onToggleFacet:l,emptyStateView:t().createElement("div",{style:{fontWeight:500,padding:"10px 0px",fontSize:15}},"Filter Results... (no results)"),styles:O.facets,zDepth:g?0:void 0}),t().createElement(q,{containerStyle:{flex:1,marginLeft:10},className:"files-list vertical_fit",elementHeight:F.HEIGHT_TWO_LINES,entryRenderIcon:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t().createElement(J,{loadThumbnail:!r.parentIsScrolling,node:e})},entryRenderActions:function(){return null},entryRenderSecondLine:function(e){var r=e.getPath(),n=e.getMetadata(),o=new Date;o.setTime(1e3*parseInt(n.get("ajxp_modiftime")));var i,a,l=A(o).fromNow();return parseInt(e.getMetadata().get("bytesize"))&&(i=k().roundFileSize(parseInt(e.getMetadata().get("bytesize")))),k().getDirname(r)&&(a=d.MessageHash["user_home.search.result.location"]+": "+k().getDirname(r)||"/"),t().createElement("div",null,l," ",i?t().createElement("span",null,"• ",i):""," ",a?t().createElement("span",null,"• ",a):null)},entryRenderGroupHeader:function(e,r){return t().createElement("div",{style:{fontSize:13,color:"#93a8b2",fontWeight:500,cursor:"pointer"},onClick:function(){return d.triggerRepositoryChange(e)}},r)},presetDataModel:s,presetRootNode:s.getSearchNode(),openCollection:function(e){d.goTo(e)},nodeClicked:function(e){d.goTo(e)},defaultGroupBy:"repository_id",groupByLabel:"repository_display",emptyStateProps:{iconClassName:"",primaryTextId:c?"searchengine.searching":478,style:{backgroundColor:"transparent"}}})),t().createElement("div",{style:{display:m?"none":"block",flex:1,overflowY:"auto",marginTop:40},id:"history-block"},this.props.children)),m&&t().createElement(a.IconButton,{iconClassName:"mdi mdi-close",style:O.close,onClick:function(){return b(!1)},tooltipPosition:"bottom-left",tooltip:d.MessageHash[86]}))}}],n&&N(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),c}(e.Component);Y=B(Y=X(Y,"main","all")),Y=(0,l.muiThemeable)()(Y),require("pydio/model/node");const K=require("pydio/model/meta-node-provider");var Q=r.n(K);const Z=require("pydio/http/api");var $=r.n(Z);const ee=require("cells-sdk");function te(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function re(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?te(Object(r),!0).forEach((function(t){ne(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):te(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ne(e,t,r){return(t=de(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oe(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ie(e,t)}function ie(e,t){return ie=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ie(e,t)}function ae(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=ce(e);if(t){var o=ce(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===se(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return le(e)}(this,r)}}function le(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ce(e){return ce=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ce(e)}function se(e){return se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},se(e)}function ue(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,de(n.key),n)}}function fe(e,t,r){return t&&pe(e.prototype,t),r&&pe(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function de(e){var t=function(e,t){if("object"!==se(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==se(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===se(t)?t:String(t)}var me=i().requireLib("boot"),ye=me.PydioContextConsumer,be=me.moment,he=i().requireLib("workspaces").FilePreview,ge=(i().requireLib("PydioActivityStreams").ASClient,i().requireLib("hoc")),ve=ge.PlaceHolder,we=ge.PhTextRow,Oe=ge.PhRoundShape,Se=function(){function e(t,r){ue(this,e),this.pydio=t,this.stater=r}return fe(e,[{key:"m",value:function(e){return this.pydio.MessageHash["user_home.reco."+e]||e}},{key:"load",value:function(){var e=this,t=new ee.GraphServiceApi($().getRestClient()),r=new ee.RestRecommendRequest;return r.Limit=8,t.recommend(r).then((function(t){return(t.Nodes||[]).map((function(t){var r;if(t.AppearsIn?r=t.AppearsIn[0].WsSlug:t.MetaStore.ws_slug&&(r=JSON.parse(t.MetaStore.ws_slug)),t.MetaStore["reco-annotation"]){var n=JSON.parse(t.MetaStore["reco-annotation"]);if(0===n.indexOf("activity:")){var o=n.replace("activity:","");t.MetaStore.card_legend=JSON.stringify(be(1e3*o).fromNow())}else"bookmark"===n?t.MetaStore.card_legend=JSON.stringify(e.m("bookmark")):"workspace"===n&&('"ROOM"'===t.MetaStore.ws_scope?(t.MetaStore.card_legend=JSON.stringify(e.m("cell")),t.MetaStore.fonticon=JSON.stringify("icomoon-cells")):t.MetaStore.card_legend=JSON.stringify(e.m("workspace")))}return Q().parseTreeNode(t,r)}))}))}}]),e}(),Ee=function(e){oe(n,e);var r=ae(n);function n(e){var t;return ue(this,n),(t=r.call(this,e)).state={opacity:0},t}return fe(n,[{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){e.setState({opacity:1})}),200)}},{key:"render",value:function(){var e=this,r=this.state,n=r.opacity,o=r.hover,i=this.props.muiTheme,l={paper:{width:140,height:160,margin:10,padding:6,borderRadius:6,boxShadow:o?"0px 15px 30px -6px rgba(0, 0, 0, .15)":"-1px 0px 15px 0px rgba(0, 0, 0, 0.1)",display:"flex",flexDirection:"column",cursor:"pointer",alignItems:"center",textAlign:"center",opacity:n,transition:"all 1000ms cubic-bezier(0.23, 1, 0.32, 1) 0ms"},preview:{boxShadow:"0 0 0 1px #edf0f2",borderRadius:6,width:"100%",flex:1,alignItems:"center",justifyContent:"center",display:"flex"},fontOverlay:{position:"absolute",bottom:0,right:5},label:{fontSize:14,overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",width:"100%"},title:{fontSize:14,marginTop:10},legend:{fontSize:11,fontWeight:500,color:"#9E9E9E"}};if("mui3"===i.userTheme){var c=i.palette.mui3;l.paper=re(re({},l.paper),{},{width:160,height:190,borderRadius:12,boxShadow:null,margin:4,padding:0,paddingBottom:6,background:c["surface-1"],color:c["on-surface"],border:"1px solid "+c["outline-variant-50"]}),l.preview=re(re({},l.preview),{},{borderRadius:12,boxShadow:null}),l.label=re(re({},l.label),{},{paddingLeft:10,textAlign:"left"}),l.title.fontWeight=500,l.legend.color=c["on-surface-variant"],l.legend.fontWeight=400}var s=this.props,u=s.title,p=s.legend,f=s.node,d=s.pydio;return t().createElement(a.Paper,{zDepth:0,style:l.paper,onClick:function(){d.goTo(f)},onMouseOver:function(){return e.setState({hover:!0})},onMouseOut:function(){return e.setState({hover:!1})},title:f&&f.getLabel()},f&&t().createElement(he,{node:f,style:l.preview,mimeFontStyle:{fontSize:40},loadThumbnail:!0,mimeFontOverlay:!0,mimeFontOverlayStyle:l.fontOverlay}),t().createElement("div",{style:re(re({},l.label),l.title)},u),t().createElement("div",{style:re(re({},l.label),l.legend)},p))}}]),n}(t().Component),Pe=function(e){oe(n,e);var r=ae(n);function n(e){var t;return ue(this,n),(t=r.call(this,e)).loader=new Se(e.pydio,le(t)),t.state={nodes:[],loading:!1},t}return fe(n,[{key:"componentDidMount",value:function(){var e=this;this.setState({loading:!0}),this.loader.load().then((function(t){e.setState({nodes:t,loading:!1})})).catch((function(t){console.error(t),e.setState({loading:!1})}))}},{key:"render",value:function(){var e=this.props,r=e.pydio,n=e.style,o=e.muiTheme,i=this.state,a=i.nodes,l=i.loading,c={margin:10,width:140,height:160,padding:6,display:"flex",flexDirection:"column",alignItems:"center",borderRadius:6};"mui3"===o.userTheme&&(c.width=160,c.height=190,c.margin=4,c.borderRadius=12);var s=t().createElement("div",{style:{display:"flex",flexWrap:"wrap"}},[0,1,2,3,4,5,6,7].map((function(){return t().createElement("div",{style:c},t().createElement(Oe,{style:{width:"100%",height:100,borderRadius:c.borderRadius}}),t().createElement(we,null),t().createElement(we,null))})));if(!r.user||r.user.lock)return t().createElement("div",null);var u={},p=[];return a.forEach((function(e){var n=e.getMetadata().get("uuid");u[n]||p.length>=8||(u[n]=n,p.push(t().createElement(Ee,{key:n,pydio:r,muiTheme:o,node:e,title:e.getLabel(),legend:e.getMetadata().get("card_legend")})))})),t().createElement("div",{style:re({display:"flex",flexWrap:"wrap",justifyContent:"center"},n)},t().createElement(ve,{ready:!l,showLoadingAnimation:!0,customPlaceholder:s},p))}}]),n}(t().Component);Pe=ye(Pe);const xe=require("lodash");function je(e){return je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},je(e)}function Re(){return Re=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Re.apply(this,arguments)}function Te(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ce(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Te(Object(r),!0).forEach((function(t){ke(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Te(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ke(e,t,r){return(t=De(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,De(n.key),n)}}function De(e){var t=function(e,t){if("object"!==je(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==je(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===je(t)?t:String(t)}function Me(e,t){return Me=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Me(e,t)}function Ne(e){return Ne=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ne(e)}var ze=i().requireLib("workspaces").MasterLayout,Le=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Me(e,t)}(c,e);var r,n,o,i,l=(o=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ne(o);if(i){var r=Ne(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===je(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=l.call(this,e)).state={unreadStatus:0,drawerOpen:!0},t.showTutorial()||(t.closeTimeout=setTimeout((function(){t.setState({drawerOpen:!1})}),2500)),t._resizeEventDebounced=(0,xe.debounce)((function(){window.dispatchEvent(new Event("resize")),t.setState({fullScreenTransition:!1})}),350),t}return r=c,(n=[{key:"showTutorial",value:function(){var e=this.props.pydio,t=e.user?e.user.getPreference("gui_preferences",!0):[];return e.getPluginConfigs("gui.ajax").get("ENABLE_WELCOME_TOUR")&&!t["WelcomeComponent.Pydio8.TourGuide.Welcome"]}},{key:"openDrawer",value:function(e){e.stopPropagation(),this.clearCloseTimeout(),this.setState({drawerOpen:!0})}},{key:"clearCloseTimeout",value:function(){this.closeTimeout&&clearTimeout(this.closeTimeout)}},{key:"render",value:function(){var e,r=this,n=this.props,o=n.pydio,i=n.muiTheme,l=this.state,c=l.drawerOpen,u=l.fullScreen,p=l.fullScreenTransition,f=new a.Color(i.appBar.color),d="mui3"===i.userTheme,m=i.palette.mui3,y=i.buildFSTemplate({});y.appBarStyle={backgroundColor:i.darkMode?"rgba(0, 0, 0, 0.4)":"rgba(255, 255, 255, 0.40)",height:u?0:200,display:"flex",alignItems:"center",justifyContent:"center"},y.buttonsStyle={color:i.appBar.textColor},y.iconButtonsStyle={color:f.darken(.4).toString()},y.wsListsContainerStyle={flex:1,display:"flex",flexDirection:"column",alignItems:"center",backgroundColor:d?m.surface:"white",overflow:"hidden"},this.showTutorial()&&(e=t().createElement(T,{ref:"welcome",pydio:o,onFinish:function(){r.closeTimeout=setTimeout((function(){r.setState({drawerOpen:!1})}),1500)}}));var b={};"mui3"!==i.userTheme&&(b={position:"absolute",bottom:0,top:0,zIndex:1e3,transform:c?"translateX(0px)":"translateX(-250px)"});var h={style:Ce(Ce({},y.leftPanel.masterStyle),b),headerHeight:72,onMouseOver:function(){r.clearCloseTimeout()},userWidgetProps:{mergeButtonInAvatar:!0,popoverDirection:"left",actionBarStyle:{marginTop:0},style:{height:72,display:"flex",alignItems:"center",boxShadow:"none",background:"transparent"}}};return t().createElement(ze,{pydio:o,classes:["vertical_fit","react-fs-template","user-dashboard-template"],style:Ce(Ce({},y.masterStyle),{},{backgroundColor:"transparent"}),tutorialComponent:e,leftPanelProps:h,drawerOpen:c,onCloseDrawerRequested:function(){void 0===e&&r.setState({drawerOpen:!1})}},t().createElement(a.Paper,{zDepth:0,style:Ce({},y.appBarStyle),rounded:!1},!d&&t().createElement("span",{className:"drawer-button",style:{position:"absolute",top:6,left:2,zIndex:2}},t().createElement(a.IconButton,{iconStyle:{color:null},iconClassName:"mdi mdi-menu",onClick:this.openDrawer.bind(this)})),t().createElement("div",{style:{width:250,display:"flex",justifyContent:"center"}},t().createElement(s,{className:"home-top-logo",style:{maxHeight:100},pydio:this.props.pydio,darkMode:i.darkMode,pluginName:"gui.ajax",pluginParameter:"CUSTOM_DASH_LOGO"}))),t().createElement(Y,Re({zDepth:0},this.props,{style:y.wsListsContainerStyle,fullScreen:u,fullScreenTransition:p,onFocusChange:function(e){e!==r.state.fullScreen&&r.setState({fullScreen:e,fullScreenTransition:!0},r._resizeEventDebounced)}}),t().createElement(Pe,Re({},this.props,{style:{maxWidth:680,width:"100%",padding:"8px 0"},emptyStateProps:{style:{backgroundColor:"transparent"}}}))))}}])&&_e(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),c}(t().Component);Le=(0,l.muiThemeable)()(Le)})(),window.WelcomeComponents=n})();